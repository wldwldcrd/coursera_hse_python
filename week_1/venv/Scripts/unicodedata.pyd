 code paths are provided for earlier architectures (sm_1x, sm_2x)
  to make the code portable across all GPUs supported by CUDA. The following
  functions are currently implemented:

  vadd2(a,b)      per-halfword unsigned addition, with wrap-around: a + b
  vsub2(a,b)      per-halfword unsigned subtraction, with wrap-around: a - b
  vabsdiff2(a,b)  per-halfword unsigned absolute difference: |a - b|
  vavg2(a,b)      per-halfword unsigned average: (a + b) / 2
  vavrg2(a,b)     per-halfword unsigned rounded average: (a + b + 1) / 2
  vseteq2(a,b)    per-halfword unsigned comparison: a == b ? 1 : 0
  vcmpeq2(a,b)    per-halfword unsigned comparison: a == b ? 0xffff : 0
  vsetge2(a,b)    per-halfword unsigned comparison: a >= b ? 1 : 0
  vcmpge2(a,b)    per-halfword unsigned comparison: a >= b ? 0xffff : 0
  vsetgt2(a,b)    per-halfword unsigned comparison: a > b ? 1 : 0
  vcmpgt2(a,b)    per-halfword unsigned comparison: a > b ? 0xffff : 0
  vsetle2(a,b)    per-halfword unsigned comparison: a <= b ? 1 : 0
  vcmple2(a,b)    per-halfword unsigned comparison: a <= b ? 0xffff : 0
  vsetlt2(a,b)    per-halfword unsigned comparison: a < b ? 1 : 0
  vcmplt2(a,b)    per-halfword unsigned comparison: a < b ? 0xffff : 0
  vsetne2(a,b)    per-halfword unsigned comparison: a != b ? 1 : 0
  vcmpne2(a,b)    per-halfword unsigned comparison: a != b ? 0xffff : 0
  vmax2(a,b)      per-halfword unsigned maximum: max(a, b)
  vmin2(a,b)      per-halfword unsigned minimum: min(a, b)

  vadd4(a,b)      per-byte unsigned addition, with wrap-around: a + b
  vsub4(a,b)      per-byte unsigned subtraction, with wrap-around: a - b
  vabsdiff4(a,b)  per-byte unsigned absolute difference: |a - b|
  vavg4(a,b)      per-byte unsigned average: (a + b) / 2
  vavrg4(a,b)     per-byte unsigned rounded average: (a + b + 1) / 2
  vseteq4(a,b)    per-byte unsigned comparison: a == b ? 1 : 0
  vcmpeq4(a,b)    per-byte unsigned comparison: a == b ? 0xff : 0
  vsetge4(a,b)    per-byte unsigned comparison: a >= b ? 1 : 0
  vcmpge4(a,b)    per-byte unsigned comparison: a >= b ? 0xff : 0
  vsetgt4(a,b)    per-byte unsigned comparison: a > b ? 1 : 0
  vcmpgt4(a,b)    per-byte unsigned comparison: a > b ? 0xff : 0
  vsetle4(a,b)    per-byte unsigned comparison: a <= b ? 1 : 0
  vcmple4(a,b)    per-byte unsigned comparison: a <= b ? 0xff : 0
  vsetlt4(a,b)    per-byte unsigned comparison: a < b ? 1 : 0
  vcmplt4(a,b)    per-byte unsigned comparison: a < b ? 0xff : 0
  vsetne4(a,b)    per-byte unsigned comparison: a != b ? 1: 0
  vcmpne4(a,b)    per-byte unsigned comparison: a != b ? 0xff: 0
  vmax4(a,b)      per-byte unsigned maximum: max(a, b)
  vmin4(a,b)      per-byte unsigned minimum: min(a, b)
*/

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// 2

__device__ __forceinline__ uint vadd2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vadd2.u32.u32.u32.sat %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vadd.u32.u32.u32.sat %0.h0, %1.h0, %2.h0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vadd.u32.u32.u32.sat %0.h1, %1.h1, %2.h1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s;
    s = a ^ b;          // sum bits
    r = a + b;          // actual sum
    s = s ^ r;          // determine carry-ins for each bit position
    s = s & 0x00010000; // carry-in to high word (= carry-out from low word)
    r = r - s;          // subtract out carry-out from low word
#endif

    return r;
}

__device__ __forceinline__ uint vsub2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vsub2.u32.u32.u32.sat %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vsub.u32.u32.u32.sat %0.h0, %1.h0, %2.h0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vsub.u32.u32.u32.sat %0.h1, %1.h1, %2.h1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s;
    s = a ^ b;          // sum bits
    r = a - b;          // actual sum
    s = s ^ r;          // determine carry-ins for each bit position
    s = s & 0x00010000; // borrow to high word
    r = r + s;          // compensate for borrow from low word
#endif

    return r;
}

__device__ __forceinline__ uint vabsdiff2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vabsdiff2.u32.u32.u32.sat %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vabsdiff.u32.u32.u32.sat %0.h0, %1.h0, %2.h0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vabsdiff.u32.u32.u32.sat %0.h1, %1.h1, %2.h1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s, t, u, v;
    s = a & 0x0000ffff; // extract low halfword
    r = b & 0x0000ffff; // extract low halfword
    u = ::max(r, s);    // maximum of low halfwords
    v = ::min(r, s);    // minimum of low halfwords
    s = a & 0xffff0000; // extract high halfword
    r = b & 0xffff0000; // extract high halfword
    t = ::max(r, s);    // maximum of high halfwords
    s = ::min(r, s);    // minimum of high halfwords
    r = u | t;          // maximum of both halfwords
    s = v | s;          // minimum of both halfwords
    r = r - s;          // |a - b| = max(a,b) - min(a,b);
#endif

    return r;
}

__device__ __forceinline__ uint vavg2(uint a, uint b)
{
    uint r, s;

    // HAKMEM #23: a + b = 2 * (a & b) + (a ^ b) ==>
    // (a + b) / 2 = (a & b) + ((a ^ b) >> 1)
    s = a ^ b;
    r = a & b;
    s = s & 0xfffefffe; // ensure shift doesn't cross halfword boundaries
    s = s >> 1;
    s = r + s;

    return s;
}

__device__ __forceinline__ uint vavrg2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vavrg2.u32.u32.u32 %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    // HAKMEM #23: a + b = 2 * (a | b) - (a ^ b) ==>
    // (a + b + 1) / 2 = (a | b) - ((a ^ b) >> 1)
    uint s;
    s = a ^ b;
    r = a | b;
    s = s & 0xfffefffe; // ensure shift doesn't cross half-word boundaries
    s = s >> 1;
    r = r - s;
#endif

    return r;
}

__device__ __forceinline__ uint vseteq2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset2.u32.u32.eq %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    // inspired by Alan Mycroft's null-byte detection algorithm:
    // null_byte(x) = ((x - 0x01010101) & (~x & 0x80808080))
    uint c;
    r = a ^ b;          // 0x0000 if a == b
    c = r | 0x80008000; // set msbs, to catch carry out
    r = r ^ c;          // extract msbs, msb = 1 if r < 0x8000
    c = c - 0x00010001; // msb = 0, if r was 0x0000 or 0x8000
    c = r & ~c;         // msb = 1, if r was 0x0000
    r = c >> 15;        // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmpeq2(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vseteq2(a, b);
    c = r << 16;        // convert bool
    r = c - r;          //  into mask
#else
    // inspired by Alan Mycroft's null-byte detection algorithm:
    // null_byte(x) = ((x - 0x01010101) & (~x & 0x80808080))
    r = a ^ b;          // 0x0000 if a == b
    c = r | 0x80008000; // set msbs, to catch carry out
    r = r ^ c;          // extract msbs, msb = 1 if r < 0x8000
    c = c - 0x00010001; // msb = 0, if r was 0x0000 or 0x8000
    c = r & ~c;         // msb = 1, if r was 0x0000
    r = c >> 15;        // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vsetge2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset2.u32.u32.ge %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint c;
    asm("not.b32 %0, %0;" : "+r"(b));
    c = vavrg2(a, b);   // (a + ~b + 1) / 2 = (a - b) / 2
    c = c & 0x80008000; // msb = carry-outs
    r = c >> 15;        // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmpge2(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vsetge2(a, b);
    c = r << 16;        // convert bool
    r = c - r;          //  into mask
#else
    asm("not.b32 %0, %0;" : "+r"(b));
    c = vavrg2(a, b);   // (a + ~b + 1) / 2 = (a - b) / 2
    c = c & 0x80008000; // msb = carry-outs
    r = c >> 15;        // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vsetgt2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset2.u32.u32.gt %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint c;
    asm("not.b32 %0, %0;" : "+r"(b));
    c = vavg2(a, b);    // (a + ~b) / 2 = (a - b) / 2 [rounded down]
    c = c & 0x80008000; // msbs = carry-outs
    r = c >> 15;        // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmpgt2(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vsetgt2(a, b);
    c = r << 16;        // convert bool
    r = c - r;          //  into mask
#else
    asm("not.b32 %0, %0;" : "+r"(b));
    c = vavg2(a, b);    // (a + ~b) / 2 = (a - b) / 2 [rounded down]
    c = c & 0x80008000; // msbs = carry-outs
    r = c >> 15;        // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vsetle2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset2.u32.u32.le %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint c;
    asm("not.b32 %0, %0;" : "+r"(a));
    c = vavrg2(a, b);   // (b + ~a + 1) / 2 = (b - a) / 2
    c = c & 0x80008000; // msb = carry-outs
    r = c >> 15;        // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmple2(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vsetle2(a, b);
    c = r << 16;        // convert bool
    r = c - r;          //  into mask
#else
    asm("not.b32 %0, %0;" : "+r"(a));
    c = vavrg2(a, b);   // (b + ~a + 1) / 2 = (b - a) / 2
    c = c & 0x80008000; // msb = carry-outs
    r = c >> 15;        // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vsetlt2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset2.u32.u32.lt %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint c;
    asm("not.b32 %0, %0;" : "+r"(a));
    c = vavg2(a, b);    // (b + ~a) / 2 = (b - a) / 2 [rounded down]
    c = c & 0x80008000; // msb = carry-outs
    r = c >> 15;        // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmplt2(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vsetlt2(a, b);
    c = r << 16;        // convert bool
    r = c - r;          //  into mask
#else
    asm("not.b32 %0, %0;" : "+r"(a));
    c = vavg2(a, b);    // (b + ~a) / 2 = (b - a) / 2 [rounded down]
    c = c & 0x80008000; // msb = carry-outs
    r = c >> 15;        // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vsetne2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm ("vset2.u32.u32.ne %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    // inspired by Alan Mycroft's null-byte detection algorithm:
    // null_byte(x) = ((x - 0x01010101) & (~x & 0x80808080))
    uint c;
    r = a ^ b;          // 0x0000 if a == b
    c = r | 0x80008000; // set msbs, to catch carry out
    c = c - 0x00010001; // msb = 0, if r was 0x0000 or 0x8000
    c = r | c;          // msb = 1, if r was not 0x0000
    c = c & 0x80008000; // extract msbs
    r = c >> 15;        // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmpne2(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vsetne2(a, b);
    c = r << 16;        // convert bool
    r = c - r;          //  into mask
#else
    // inspired by Alan Mycroft's null-byte detection algorithm:
    // null_byte(x) = ((x - 0x01010101) & (~x & 0x80808080))
    r = a ^ b;          // 0x0000 if a == b
    c = r | 0x80008000; // set msbs, to catch carry out
    c = c - 0x00010001; // msb = 0, if r was 0x0000 or 0x8000
    c = r | c;          // msb = 1, if r was not 0x0000
    c = c & 0x80008000; // extract msbs
    r = c >> 15;        // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vmax2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vmax2.u32.u32.u32 %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vmax.u32.u32.u32 %0.h0, %1.h0, %2.h0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vmax.u32.u32.u32 %0.h1, %1.h1, %2.h1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s, t, u;
    r = a & 0x0000ffff; // extract low halfword
    s = b & 0x0000ffff; // extract low halfword
    t = ::max(r, s);    // maximum of low halfwords
    r = a & 0xffff0000; // extract high halfword
    s = b & 0xffff0000; // extract high halfword
    u = ::max(r, s);    // maximum of high halfwords
    r = t | u;          // combine halfword maximums
#endif

    return r;
}

__device__ __forceinline__ uint vmin2(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vmin2.u32.u32.u32 %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vmin.u32.u32.u32 %0.h0, %1.h0, %2.h0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vmin.u32.u32.u32 %0.h1, %1.h1, %2.h1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s, t, u;
    r = a & 0x0000ffff; // extract low halfword
    s = b & 0x0000ffff; // extract low halfword
    t = ::min(r, s);    // minimum of low halfwords
    r = a & 0xffff0000; // extract high halfword
    s = b & 0xffff0000; // extract high halfword
    u = ::min(r, s);    // minimum of high halfwords
    r = t | u;          // combine halfword minimums
#endif

    return r;
}

// 4

__device__ __forceinline__ uint vadd4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vadd4.u32.u32.u32.sat %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vadd.u32.u32.u32.sat %0.b0, %1.b0, %2.b0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vadd.u32.u32.u32.sat %0.b1, %1.b1, %2.b1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vadd.u32.u32.u32.sat %0.b2, %1.b2, %2.b2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vadd.u32.u32.u32.sat %0.b3, %1.b3, %2.b3, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s, t;
    s = a ^ b;          // sum bits
    r = a & 0x7f7f7f7f; // clear msbs
    t = b & 0x7f7f7f7f; // clear msbs
    s = s & 0x80808080; // msb sum bits
    r = r + t;          // add without msbs, record carry-out in msbs
    r = r ^ s;          // sum of msb sum and carry-in bits, w/o carry-out
#endif /* CV_CUDEV_ARCH >= 300 */

    return r;
}

__device__ __forceinline__ uint vsub4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vsub4.u32.u32.u32.sat %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vsub.u32.u32.u32.sat %0.b0, %1.b0, %2.b0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vsub.u32.u32.u32.sat %0.b1, %1.b1, %2.b1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vsub.u32.u32.u32.sat %0.b2, %1.b2, %2.b2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vsub.u32.u32.u32.sat %0.b3, %1.b3, %2.b3, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s, t;
    s = a ^ ~b;         // inverted sum bits
    r = a | 0x80808080; // set msbs
    t = b & 0x7f7f7f7f; // clear msbs
    s = s & 0x80808080; // inverted msb sum bits
    r = r - t;          // subtract w/o msbs, record inverted borrows in msb
    r = r ^ s;          // combine inverted msb sum bits and borrows
#endif

    return r;
}

__device__ __forceinline__ uint vavg4(uint a, uint b)
{
    uint r, s;

    // HAKMEM #23: a + b = 2 * (a & b) + (a ^ b) ==>
    // (a + b) / 2 = (a & b) + ((a ^ b) >> 1)
    s = a ^ b;
    r = a & b;
    s = s & 0xfefefefe; // ensure following shift doesn't cross byte boundaries
    s = s >> 1;
    s = r + s;

    return s;
}

__device__ __forceinline__ uint vavrg4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vavrg4.u32.u32.u32 %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    // HAKMEM #23: a + b = 2 * (a | b) - (a ^ b) ==>
    // (a + b + 1) / 2 = (a | b) - ((a ^ b) >> 1)
    uint c;
    c = a ^ b;
    r = a | b;
    c = c & 0xfefefefe; // ensure following shift doesn't cross byte boundaries
    c = c >> 1;
    r = r - c;
#endif

    return r;
}

__device__ __forceinline__ uint vseteq4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset4.u32.u32.eq %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    // inspired by Alan Mycroft's null-byte detection algorithm:
    // null_byte(x) = ((x - 0x01010101) & (~x & 0x80808080))
    uint c;
    r = a ^ b;          // 0x00 if a == b
    c = r | 0x80808080; // set msbs, to catch carry out
    r = r ^ c;          // extract msbs, msb = 1 if r < 0x80
    c = c - 0x01010101; // msb = 0, if r was 0x00 or 0x80
    c = r & ~c;         // msb = 1, if r was 0x00
    r = c >> 7;         // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmpeq4(uint a, uint b)
{
    uint r, t;

#if CV_CUDEV_ARCH >= 300
    r = vseteq4(a, b);
    t = r << 8;         // convert bool
    r = t - r;          //  to mask
#else
    // inspired by Alan Mycroft's null-byte detection algorithm:
    // null_byte(x) = ((x - 0x01010101) & (~x & 0x80808080))
    t = a ^ b;          // 0x00 if a == b
    r = t | 0x80808080; // set msbs, to catch carry out
    t = t ^ r;          // extract msbs, msb = 1 if t < 0x80
    r = r - 0x01010101; // msb = 0, if t was 0x00 or 0x80
    r = t & ~r;         // msb = 1, if t was 0x00
    t = r >> 7;         // build mask
    t = r - t;          //  from
    r = t | r;          //   msbs
#endif

    return r;
}

__device__ __forceinline__ uint vsetle4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset4.u32.u32.le %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint c;
    asm("not.b32 %0, %0;" : "+r"(a));
    c = vavrg4(a, b);   // (b + ~a + 1) / 2 = (b - a) / 2
    c = c & 0x80808080; // msb = carry-outs
    r = c >> 7;         // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmple4(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vsetle4(a, b);
    c = r << 8;         // convert bool
    r = c - r;          //  to mask
#else
    asm("not.b32 %0, %0;" : "+r"(a));
    c = vavrg4(a, b);   // (b + ~a + 1) / 2 = (b - a) / 2
    c = c & 0x80808080; // msbs = carry-outs
    r = c >> 7;         // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vsetlt4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset4.u32.u32.lt %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint c;
    asm("not.b32 %0, %0;" : "+r"(a));
    c = vavg4(a, b);    // (b + ~a) / 2 = (b - a) / 2 [rounded down]
    c = c & 0x80808080; // msb = carry-outs
    r = c >> 7;         // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmplt4(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vsetlt4(a, b);
    c = r << 8;         // convert bool
    r = c - r;          //  to mask
#else
    asm("not.b32 %0, %0;" : "+r"(a));
    c = vavg4(a, b);    // (b + ~a) / 2 = (b - a) / 2 [rounded down]
    c = c & 0x80808080; // msbs = carry-outs
    r = c >> 7;         // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vsetge4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset4.u32.u32.ge %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint c;
    asm("not.b32 %0, %0;" : "+r"(b));
    c = vavrg4(a, b);   // (a + ~b + 1) / 2 = (a - b) / 2
    c = c & 0x80808080; // msb = carry-outs
    r = c >> 7;         // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmpge4(uint a, uint b)
{
    uint r, s;

#if CV_CUDEV_ARCH >= 300
    r = vsetge4(a, b);
    s = r << 8;         // convert bool
    r = s - r;          //  to mask
#else
    asm ("not.b32 %0,%0;" : "+r"(b));
    r = vavrg4 (a, b);  // (a + ~b + 1) / 2 = (a - b) / 2
    r = r & 0x80808080; // msb = carry-outs
    s = r >> 7;         // build mask
    s = r - s;          //  from
    r = s | r;          //   msbs
#endif

    return r;
}

__device__ __forceinline__ uint vsetgt4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset4.u32.u32.gt %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint c;
    asm("not.b32 %0, %0;" : "+r"(b));
    c = vavg4(a, b);    // (a + ~b) / 2 = (a - b) / 2 [rounded down]
    c = c & 0x80808080; // msb = carry-outs
    r = c >> 7;         // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmpgt4(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vsetgt4(a, b);
    c = r << 8;         // convert bool
    r = c - r;          //  to mask
#else
    asm("not.b32 %0, %0;" : "+r"(b));
    c = vavg4(a, b);    // (a + ~b) / 2 = (a - b) / 2 [rounded down]
    c = c & 0x80808080; // msb = carry-outs
    r = c >> 7;         // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vsetne4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vset4.u32.u32.ne %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    // inspired by Alan Mycroft's null-byte detection algorithm:
    // null_byte(x) = ((x - 0x01010101) & (~x & 0x80808080))
    uint c;
    r = a ^ b;          // 0x00 if a == b
    c = r | 0x80808080; // set msbs, to catch carry out
    c = c - 0x01010101; // msb = 0, if r was 0x00 or 0x80
    c = r | c;          // msb = 1, if r was not 0x00
    c = c & 0x80808080; // extract msbs
    r = c >> 7;         // convert to bool
#endif

    return r;
}

__device__ __forceinline__ uint vcmpne4(uint a, uint b)
{
    uint r, c;

#if CV_CUDEV_ARCH >= 300
    r = vsetne4(a, b);
    c = r << 8;         // convert bool
    r = c - r;          //  to mask
#else
    // inspired by Alan Mycroft's null-byte detection algorithm:
    // null_byte(x) = ((x - 0x01010101) & (~x & 0x80808080))
    r = a ^ b;          // 0x00 if a == b
    c = r | 0x80808080; // set msbs, to catch carry out
    c = c - 0x01010101; // msb = 0, if r was 0x00 or 0x80
    c = r | c;          // msb = 1, if r was not 0x00
    c = c & 0x80808080; // extract msbs
    r = c >> 7;         // convert
    r = c - r;          //  msbs to
    r = c | r;          //   mask
#endif

    return r;
}

__device__ __forceinline__ uint vabsdiff4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vabsdiff4.u32.u32.u32.sat %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vabsdiff.u32.u32.u32.sat %0.b0, %1.b0, %2.b0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vabsdiff.u32.u32.u32.sat %0.b1, %1.b1, %2.b1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vabsdiff.u32.u32.u32.sat %0.b2, %1.b2, %2.b2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vabsdiff.u32.u32.u32.sat %0.b3, %1.b3, %2.b3, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s;
    s = vcmpge4(a, b);  // mask = 0xff if a >= b
    r = a ^ b;          //
    s = (r &  s) ^ b;   // select a when a >= b, else select b => max(a,b)
    r = s ^ r;          // select a when b >= a, else select b => min(a,b)
    r = s - r;          // |a - b| = max(a,b) - min(a,b);
#endif

    return r;
}

__device__ __forceinline__ uint vmax4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vmax4.u32.u32.u32 %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vmax.u32.u32.u32 %0.b0, %1.b0, %2.b0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vmax.u32.u32.u32 %0.b1, %1.b1, %2.b1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vmax.u32.u32.u32 %0.b2, %1.b2, %2.b2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vmax.u32.u32.u32 %0.b3, %1.b3, %2.b3, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s;
    s = vcmpge4(a, b);  // mask = 0xff if a >= b
    r = a & s;          // select a when b >= a
    s = b & ~s;         // select b when b < a
    r = r | s;          // combine byte selections
#endif

    return r;           // byte-wise unsigned maximum
}

__device__ __forceinline__ uint vmin4(uint a, uint b)
{
    uint r = 0;

#if CV_CUDEV_ARCH >= 300
    asm("vmin4.u32.u32.u32 %0, %1, %2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#elif CV_CUDEV_ARCH >= 200
    asm("vmin.u32.u32.u32 %0.b0, %1.b0, %2.b0, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vmin.u32.u32.u32 %0.b1, %1.b1, %2.b1, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vmin.u32.u32.u32 %0.b2, %1.b2, %2.b2, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
    asm("vmin.u32.u32.u32 %0.b3, %1.b3, %2.b3, %3;" : "=r"(r) : "r"(a), "r"(b), "r"(r));
#else
    uint s;
    s = vcmpge4(b, a);  // mask = 0xff if a >= b
    r = a & s;          // select a when b >= a
    s = b & ~s;         // select b when b < a
    r = r | s;          // combine byte selections
#endif

    return r;
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_UTIL_VEC_TRAITS_HPP
#define OPENCV_CUDEV_UTIL_VEC_TRAITS_HPP

#include "../common.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// MakeVec

template<typename T, int CN> struct MakeVec;

#define CV_CUDEV_MAKE_VEC_INST(elem_type) \
    template<> struct MakeVec<elem_type, 1> { typedef elem_type      type; }; \
    template<> struct MakeVec<elem_type, 2> { typedef elem_type ## 2 type; }; \
    template<> struct MakeVec<elem_type, 3> { typedef elem_type ## 3 type; }; \
    template<> struct MakeVec<elem_type, 4> { typedef elem_type ## 4 type; };

CV_CUDEV_MAKE_VEC_INST(uchar)
CV_CUDEV_MAKE_VEC_INST(ushort)
CV_CUDEV_MAKE_VEC_INST(short)
CV_CUDEV_MAKE_VEC_INST(int)
CV_CUDEV_MAKE_VEC_INST(uint)
CV_CUDEV_MAKE_VEC_INST(float)
CV_CUDEV_MAKE_VEC_INST(double)

#undef CV_CUDEV_MAKE_VEC_INST

template<> struct MakeVec<schar, 1> { typedef schar type; };
template<> struct MakeVec<schar, 2> { typedef char2 type; };
template<> struct MakeVec<schar, 3> { typedef char3 type; };
template<> struct MakeVec<schar, 4> { typedef char4 type; };

template<> struct MakeVec<bool, 1> { typedef uchar  type; };
template<> struct MakeVec<bool, 2> { typedef uchar2 type; };
template<> struct MakeVec<bool, 3> { typedef uchar3 type; };
template<> struct MakeVec<bool, 4> { typedef uchar4 type; };

// VecTraits

template<typename T> struct VecTraits;

#define CV_CUDEV_VEC_TRAITS_INST(type) \
    template <> struct VecTraits<type> \
    { \
        typedef type elem_type; \
        enum {cn=1}; \
        __host__ __device__ __forceinline__ static type all(type v) {return v;} \
        __host__ __device__ __forceinline__ static type make(type x) {return x;} \
        __host__ __device__ __forceinline__ static type make(const type* v) {return *v;} \
    }; \
    template <> struct VecTraits<type ## 1> \
    { \
        typedef type elem_type; \
        enum {cn=1}; \
        __host__ __device__ __forceinline__ static type ## 1 all(type v) {return make_ ## type ## 1(v);} \
        __host__ __device__ __forceinline__ static type ## 1 make(type x) {return make_ ## type ## 1(x);} \
        __host__ __device__ __forceinline__ static type ## 1 make(const type* v) {return make_ ## type ## 1(*v);} \
    }; \
    template <> struct VecTraits<type ## 2> \
    { \
        typedef type elem_type; \
        enum {cn=2}; \
        __host__ __device__ __forceinline__ static type ## 2 all(type v) {return make_ ## type ## 2(v, v);} \
        __host__ __device__ __forceinline__ static type ## 2 make(type x, type y) {return make_ ## type ## 2(x, y);} \
        __host__ __device__ __forceinline__ static type ## 2 make(const type* v) {return make_ ## type ## 2(v[0], v[1]);} \
    }; \
    template <> struct VecTraits<type ## 3> \
    { \
        typedef type elem_type; \
        enum {cn=3}; \
        __host__ __device__ __forceinline__ static type ## 3 all(type v) {return make_ ## type ## 3(v, v, v);} \
        __host__ __device__ __forceinline__ static type ## 3 make(type x, type y, type z) {return make_ ## type ## 3(x, y, z);} \
        __host__ __device__ __forceinline__ static type ## 3 make(const type* v) {return make_ ## type ## 3(v[0], v[1], v[2]);} \
    }; \
    template <> struct VecTraits<type ## 4> \
    { \
        typedef type elem_type; \
        enum {cn=4}; \
        __host__ __device__ __forceinline__ static type ## 4 all(type v) {return make_ ## type ## 4(v, v, v, v);} \
        __host__ __device__ __forceinline__ static type ## 4 make(type x, type y, type z, type w) {return make_ ## type ## 4(x, y, z, w);} \
        __host__ __device__ __forceinline__ static type ## 4 make(const type* v) {return make_ ## type ## 4(v[0], v[1], v[2], v[3]);} \
    };

CV_CUDEV_VEC_TRAITS_INST(uchar)
CV_CUDEV_VEC_TRAITS_INST(ushort)
CV_CUDEV_VEC_TRAITS_INST(short)
CV_CUDEV_VEC_TRAITS_INST(int)
CV_CUDEV_VEC_TRAITS_INST(uint)
CV_CUDEV_VEC_TRAITS_INST(float)
CV_CUDEV_VEC_TRAITS_INST(double)

#undef CV_CUDEV_VEC_TRAITS_INST

template<> struct VecTraits<schar>
{
    typedef schar elem_type;
    enum {cn=1};
    __host__ __device__ __forceinline__ static schar all(schar v) {return v;}
    __host__ __device__ __forceinline__ static schar make(schar x) {return x;}
    __host__ __device__ __forceinline__ static schar make(const schar* x) {return *x;}
};
template<> struct VecTraits<char1>
{
    typedef schar elem_type;
    enum {cn=1};
    __host__ __device__ __forceinline__ static char1 all(schar v) {return make_char1(v);}
    __host__ __device__ __forceinline__ static char1 make(schar x) {return make_char1(x);}
    __host__ __device__ __forceinline__ static char1 make(const schar* v) {return make_char1(v[0]);}
};
template<> struct VecTraits<char2>
{
    typedef schar elem_type;
    enum {cn=2};
    __host__ __device__ __forceinline__ static char2 all(schar v) {return make_char2(v, v);}
    __host__ __device__ __forceinline__ static char2 make(schar x, schar y) {return make_char2(x, y);}
    __host__ __device__ __forceinline__ static char2 make(const schar* v) {return make_char2(v[0], v[1]);}
};
template<> struct VecTraits<char3>
{
    typedef schar elem_type;
    enum {cn=3};
    __host__ __device__ __forceinline__ static char3 all(schar v) {return make_char3(v, v, v);}
    __host__ __device__ __forceinline__ static char3 make(schar x, schar y, schar z) {return make_char3(x, y, z);}
    __host__ __device__ __forceinline__ static char3 make(const schar* v) {return make_char3(v[0], v[1], v[2]);}
};
template<> struct VecTraits<char4>
{
    typedef schar elem_type;
    enum {cn=4};
    __host__ __device__ __forceinline__ static char4 all(schar v) {return make_char4(v, v, v, v);}
    __host__ __device__ __forceinline__ static char4 make(schar x, schar y, schar z, schar w) {return make_char4(x, y, z, w);}
    __host__ __device__ __forceinline__ static char4 make(const schar* v) {return make_char4(v[0], v[1], v[2], v[3]);}
};

//! @}

}}

// DataType

namespace cv {

template <> class DataType<uint>
{
public:
    typedef uint         value_type;
    typedef value_type   work_type;
    typedef value_type   channel_type;
    typedef value_type   vec_type;
    enum { generic_type = 0,
           depth        = CV_32S,
           channels     = 1,
           fmt          = (int)'i',
           type         = CV_MAKE_TYPE(depth, channels)
         };
};

#define CV_CUDEV_DATA_TYPE_INST(_depth_type, _channel_num) \
    template <> class DataType< _depth_type ## _channel_num > \
    { \
    public: \
        typedef _depth_type ## _channel_num     value_type; \
        typedef value_type                      work_type; \
        typedef _depth_type                     channel_type; \
        typedef value_type                      vec_type; \
        enum { generic_type = 0, \
               depth        = DataType<channel_type>::depth, \
               channels     = _channel_num, \
               fmt          = DataType<channel_type>::fmt + ((channels - 1) << 8), \
               type         = CV_MAKE_TYPE(depth, channels) \
             }; \
    };

CV_CUDEV_DATA_TYPE_INST(uchar, 1)
CV_CUDEV_DATA_TYPE_INST(uchar, 2)
CV_CUDEV_DATA_TYPE_INST(uchar, 3)
CV_CUDEV_DATA_TYPE_INST(uchar, 4)

CV_CUDEV_DATA_TYPE_INST(ushort, 1)
CV_CUDEV_DATA_TYPE_INST(ushort, 2)
CV_CUDEV_DATA_TYPE_INST(ushort, 3)
CV_CUDEV_DATA_TYPE_INST(ushort, 4)

CV_CUDEV_DATA_TYPE_INST(short, 1)
CV_CUDEV_DATA_TYPE_INST(short, 2)
CV_CUDEV_DATA_TYPE_INST(short, 3)
CV_CUDEV_DATA_TYPE_INST(short, 4)

CV_CUDEV_DATA_TYPE_INST(int, 1)
CV_CUDEV_DATA_TYPE_INST(int, 2)
CV_CUDEV_DATA_TYPE_INST(int, 3)
CV_CUDEV_DATA_TYPE_INST(int, 4)

CV_CUDEV_DATA_TYPE_INST(uint, 1)
CV_CUDEV_DATA_TYPE_INST(uint, 2)
CV_CUDEV_DATA_TYPE_INST(uint, 3)
CV_CUDEV_DATA_TYPE_INST(uint, 4)

CV_CUDEV_DATA_TYPE_INST(float, 1)
CV_CUDEV_DATA_TYPE_INST(float, 2)
CV_CUDEV_DATA_TYPE_INST(float, 3)
CV_CUDEV_DATA_TYPE_INST(float, 4)

CV_CUDEV_DATA_TYPE_INST(double, 1)
CV_CUDEV_DATA_TYPE_INST(double, 2)
CV_CUDEV_DATA_TYPE_INST(double, 3)
CV_CUDEV_DATA_TYPE_INST(double, 4)

#undef CV_CUDEV_DATA_TYPE_INST

template<> class DataType<char1>
{
public:
    typedef char1      value_type;
    typedef value_type work_type;
    typedef schar      channel_type;
    typedef value_type vec_type;

    enum { generic_type = 0,
           depth        = DataType<channel_type>::depth,
           channels     = 1,
           fmt          = DataType<channel_type>::fmt + ((channels - 1) << 8),
           type         = CV_MAKE_TYPE(depth, channels)
         };
};

template<> class DataType<char2>
{
public:
    typedef char2      value_type;
    typedef value_type work_type;
    typedef schar      channel_type;
    typedef value_type vec_type;

    enum { generic_type = 0,
           depth        = DataType<channel_type>::depth,
           channels     = 2,
           fmt          = DataType<channel_type>::fmt + ((channels - 1) << 8),
           type         = CV_MAKE_TYPE(depth, channels)
         };
};

template<> class DataType<char3>
{
public:
    typedef char3      value_type;
    typedef value_type work_type;
    typedef schar      channel_type;
    typedef value_type vec_type;

    enum { generic_type = 0,
           depth        = DataType<channel_type>::depth,
           channels     = 3,
           fmt          = DataType<channel_type>::fmt + ((channels - 1) << 8),
           type         = CV_MAKE_TYPE(depth, channels)
         };
};

template<> class DataType<char4>
{
public:
    typedef char4      value_type;
    typedef value_type work_type;
    typedef schar      channel_type;
    typedef value_type vec_type;

    enum { generic_type = 0,
           depth        = DataType<channel_type>::depth,
           channels     = 4,
           fmt          = DataType<channel_type>::fmt + ((channels - 1) << 8),
           type         = CV_MAKE_TYPE(depth, channels)
         };
};

}

#endif
                                                                                                                                                                                                                      æğòèU1ÍqX¾ñAîUÚw1…ÃÆ¬œ‹‘×ú4€4sŸ>RÕ˜”¿ Õæê¡‰ø¨¦·	²&wø¸ÔwÜô]4û/gMĞHßŸZõğ€Üûì‡£ïm2ì5i”hĞÍœñbÎC¬+~øSÕiòé bé=Q±ÍÜÉ#Dí;²Û€¬œ¦º›4#”Kw!ëÂ $ÙVìé;µ+Âcş_ 9+)¢º	sñNf-lEÛtëôÅâ$ì x²¦7ù^X È ”êÎ!öœ%vV*T¡!4³Åè^’5\nó‹A.RÆÑ’“ú©q†)ÑıgÈ×yà›8O”J»%AjvîMÚ,YA¿×¼ı8²Hœ3ˆU»‹‘?[İzßÌ4"Š¡yù³dëâæy"z ıßŒ*¬W<@Q;s„²5ÃÅx¡¸zâF`À„Á ê(ÔQëÁ†,¨¢ÙXk=;S	øS–Êkì¥ÿ¸†±Éeı­ë¼tärà¶â_PYøŞØt²ÙßÇ£êG)â_»µ)ÖòÚ¨Êk€8ÁlòdÇşŞÑ__e`œ#EùÿùIı"v*úÿu‹ÓBó2=¢Ÿ{¯§±+#$Ô tiÙ®àéĞ/ÚÔC
Ÿ@Aˆ/DúyR_	3ã¯¨œ'X,İ=£däîì¬ÿ'¸M]›9ÿO9>ƒ8FbÄ”8ğ íOO[*s¡ñ/İhtÄ–Y.p_İâª]ÿx)İ××@ËÓMœßÆÎÈ„²âî²D£a
¾Ä"ÂƒïDÈ•]nÜ,lS*İLq¿ß¢åõŒé¿Eõ(½¬ØÉ¹Ã~ÿR#•àê+ƒP§Š€<‚LVÅjúË	nUJ„ƒk”¬< næA‚ÃD²ÏÂã!Öxo_	´^ór	ÂSSØü%v´„5ìI[qª<ˆ^—ïå'úıÉ0S{6Çì[@~‰SõªIjxf²Ğİ…Z@©œˆ|¼¤`[KŞAØjnry¾ÁW<˜-7¢[ÍnàœT×4%¬Ï}ÚÄ$º@ñ4Nñ…şZ?©Ã®cãø1©ğİeº,,]ï¤››5³«?q6Ú¨“µR¥^rŸá˜r _sù×0b0'GªŞ³®“[­	†ÿ¥K<F¦¹ÖqÑ“µRd§OÖ1ÍŞw(Fèâ6F«Š<:Í0ÈL’kì·ºß@Ğá¼ş^áy¹\k/¾ÃÜºÏö¡ ¹Êƒ¬s0†ä¶šì&™)c©?à›ÀVf\‡À¨Ãe7©úYFènÅ¯c<á}I´Îít­q8º#5[7§Â€´)R\ºE(0^Çh›uËo^ñÃª¡QÍßt $ì\6z!¸]e&±´³„iäØ(;kĞNñÅà†ñ)kê‚\íİsëàú#K½håÙ6Ë’=±²ú>:Döq¨×ì4Bœn‡ Jç(‡ë¸°İó}ÒO*È]DÒqoĞØ?vtÎ¾èÉ`‘Îã?>ø.Jp{ Ù¥‰Éz{`Œ*©]7AhÔøİ±ëŞú Ç2Xá9l~“L÷’Â¨Óç@èc*±˜‰=+ÿ æX~k_c–µ‘Í¥ò(4CHƒ~,Acœfìus…tøÆuÕÛ'¿ÓQˆ	?!¸ğ÷ÛÕq9o&fue‹<*_Û=ğ­W)ùÎ„òŠ õ±µoÇ­\eBÑÑ²9š ¿µ!$õQºÇÆ\Näèø¾XŠ1í†3á¯G¢F>Ê£gAÊcƒ½ ¤‹Ïv¬,Ç÷v¦™—s'ÂÃĞ_?"sÛYäšl’óp%¯I¬Êİ÷M™#6T~*­å§Wí$§³ó2²Çñ%Ô½‚+x ô´=£Ù Ê!İ´*ÚPŒúe–WU†Sc±©SÒ¡‡:$öŠÃ+gË×2J°Ÿ%’r-/är$o¡>(ÁD\ôì§ÍcäÖSÂ<‡snãutE“’k[şØ^y&âp¬M.v:ÁTB_©¬ÍqÁ{èÄ^55m3”yšpÀ¯Jüc„¿@°ê IH	÷l+¦Ü†yuè±ûÈ1—ãäëâ¢À H	o#¶W¶=½6|3Jˆ=½p7Æß$Šœğ™œëDj«¢èn²&tÖÂ‡¥‰ Ê¬\;Õõ!5©şyYNŒÍYÛVVˆ«§JA®Æ%ºÆeqßØE.^p_à.¦Mß›İ‘Á=>¡&`.Ï»Şšà
u¾z/PçÂ‚ô+ÇyŞõMˆ©’q×Özñßctà’­0L+ÆÃßÃ§¥¢ÎçDİœŸFÚ¥jÊí'“û·¦²„oãz½ªŸè¼ˆŠø©ƒ4|FN“½ì÷0*ªÑùôà×uÎÙŞÖ†àôÅ<õÊ8
—4J0îpH¤¢¢Â™?Fış£YìÔM¦k	/z%+
M§¥%ç±­e'ÿP™LI”O³Û+¨ä;Š33O,Ò|Ş-ùÎÍ™O]—«ëá7¯_:ìJ›}õ¬Ç3ÜM¤C‹1×ñöwèÁø¯»tDOÍiøµC+
h'@®\ Êaga€ÒQ<pˆïËSœıCöTºÙn¨R]²2:…JÜ‚×å¬G9^…DsAL;NÚiEYŸ ÁíZxé,şù+³«oP3··Şon‹UWYOt–’º{)ÎÊ.=Ê:Ş{Ü4j¬áÜ÷›åëªmXàhåk,1Ù‡d¸`rdsª.4®Ş8R‹Ÿ°XÓ9A­u‚X‰60È‡{qô3)+ò9QóŒ¤	 —_3B¹Ë.“ÏÉ>È²p2¸*ùJ(Ï‡¸Ã(”jf+ÕĞI~hQpKÜ›Ü‡şŞ¨Æ¿õWnÀx—Põ—ßÇ}/öØıIQtRÊPŠ„.v!½‚y¤F5j—ÖL¬ÇãÎãoPÜ¹kñ„–©Ÿ¡åúäµ×İ¦qÙt¬Z®xõ…‰CûU¢XázI 6Z®7`‹m²›Yk7F>HËmïÁæëXôÒ^ôf ),”‚t‚+H “èuˆ¾±tr»P#‘·¿9j	:ÖÇwŠµtFÿÎg8õ m]¹O/Ÿúà9ïŒÉ5èNŒk?B†5ôz¯~Jû3?¡ V	Ö 4şßq‚åÅåª¾ªzBM5ìÒƒ½ú¸x j9*¦¢i4”ô^•,áÇæjÌ_#Û -»ÕÂqu½èÉˆ/!]¾š2
À)´Ê¯Ù%úÂ‰¼êCØlKk_•Ï;ÊÖ,¥Î­ˆ}Q„YíOŞõ¼›€ôèù†….7³ûĞš€çr‡Ñ¼,Dx}•:Ùlø³Í±&¸x1t'y -ğ_™.¶ÄBÄ{|¼ñ¡„+3Lßµ«P¯Iİ*É%~ß¢‘Q’cÁ¤Õ‹k¸»‰S[¥Í/pôz|–'Có‹½fd+N2k'¾>O›¥ 6ä ƒ¦%ê<m]Üz$LÄ§¶…àÏ&¥99ë+{zJ©EaT((å‹Xã	?nÃ­co‹ÂÎö&ƒƒ?ª/(pÊ NJî·ÈE{#ê
ıyæ—Ä2i“&l6cf™ş¢ƒJÉF0/)ó‰(CaŸNœCs€g)IóÊgzQ*Z‚Õ²'u¨í,$B¿$U)'ı¬vG}IiÅKgWlÕÏœ³D¿ÄhU¶i+ƒ†pW"wƒß\YlMC#}büÕƒÀ‚‚vO6ß§š1\€†¨Ó“m¾ˆ Mßi$f’>´<³¼9ËnĞ –¹îûLòÒt“u¨ïq`Ûğ{%]õ¥õz†[?–c¨”0nHù	0í=O÷’Ó%½ªøÏ¨$šÜ]9"@¤í¢1‚D¤ó]‚2VŞ'ß ‘IÚò7/D @Îèµ
LS3ÄŠŠ¡’ßÖY4K äó@È¾cA¼&pšA ~9–ÉOúµp—ôæ.Ğ oöy]ÉMP“å _qÿpø³-…R=æ¤ÆwFw†ÌŠjeÃ@R(YÎ;€‡D+ ø¬*Ó™:Ş®tši¦–mí¶#p­†Gb¹UÿYŠ¶ëh8(oå¿.I¨À¦‚¯;U@§Ñ^Wó'`R Ì&¢aŒ¯öh²§o(’É°}öc¢Dg«‡A'g&5õüØ»ØœÎ¬#Î9.ëYÁñÚÑ¯¯È»o®¯ú{ä¥AïÎ3Dë½j›'}÷PŒ—Šg”‰ÒÖ=c½8<Ü/®˜V_¦GóeS&ã·x«1Sf=ca$Ğó>1"Y¢æZQ`l™üW©³ê¯+w%e*£%)øG¶<BC÷ıÀwÌIĞÙFæ™~­ÜIäSY'–²Õ†ËJ~¼´÷ØcwFÄêK m‚ ­Û£w˜“·ZoÇ·õØ"`¦€åàÄªé¹Øz¸ó°&mí$?‘½:×IÁ.+FÙ>Öå¾ŠÓ€áBÙYda<üÕ@\•ÜqìB5ØÀŸü ¤Fª8Óm57³ÖÌ}¬ÑáåU0«‡Pğen^¶’øÉ|ÆÿêK³p´xå^Ğ{Ü»mñ½â=×Ì:è-¨è`Ï¡pi°¼ñİ•0w»~¢1 KXæÙ¸³pØR©Ñ²0êí ³ÓÏ©.PvÆDlñ*.ğ®d[•‡½^·ì/×¤cLmì¡Ñ7ß=~,ìÑk‘«UÊÚi\UU…š1ÉÅ[ñM‰X‚d“ =»—yhø‹Ê—nÄ­æUh´½tå}£ÏR¾IûC=Û‹‚Æ'è´è”Ì¯Ê÷Z©K€[òúİƒİ©m¬ÍÕÌUuUèÁÖeŸcNÊÀ•Œ±£·§E¡!ûÒÚwéS¾4‚i‚OİYõâÄñ«Ñu*T’O<°­}ğå[*³ßz-H¬0lŸ€udpêwTám{†)ëœ/R:D¸jÙxJA¶@›­¶5‘(Z§=rõ(>®1€´joéò‰gµ0òüæfŸ9fã—c#oÄAA1ÂJnƒœ“sÃø^”¿Œ^”¦@„(Y5O@\ï4ÿ„ê<lzş–Ï…ømN®?ä ¯QHİoPD¾épß`²È§«ß*ÿŠúØäìl&°ò.äcøƒ]NyÎïÖËeDô].¦ÛrwX»ÎAp-…Ü¹9|ØáÉv™áW;äéœÍ†ÇaœíË¥’W££}J˜tŸË¹Ç<ÊM”©héiÏzuÒ|ˆàè·*LĞ`eİà¿ê5F—i·~–`;@êò™b;VAóÃ†@ª
,ñé´-5I6<åÜ'ŸÁa92/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_UTIL_LIMITS_HPP
#define OPENCV_CUDEV_UTIL_LIMITS_HPP

#include <limits.h>
#include <float.h>
#include "../common.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <class T> struct numeric_limits;

template <> struct numeric_limits<bool>
{
    __device__ __forceinline__ static bool min() { return false; }
    __device__ __forceinline__ static bool max() { return true;  }
    static const bool is_signed = false;
};

template <> struct numeric_limits<schar>
{
    __device__ __forceinline__ static schar min() { return SCHAR_MIN; }
    __device__ __forceinline__ static schar max() { return SCHAR_MAX; }
    static const bool is_signed = true;
};

template <> struct numeric_limits<uchar>
{
    __device__ __forceinline__ static uchar min() { return 0; }
    __device__ __forceinline__ static uchar max() { return UCHAR_MAX; }
    static const bool is_signed = false;
};

template <> struct numeric_limits<short>
{
    __device__ __forceinline__ static short min() { return SHRT_MIN; }
    __device__ __forceinline__ static short max() { return SHRT_MAX; }
    static const bool is_signed = true;
};

template <> struct numeric_limits<ushort>
{
    __device__ __forceinline__ static ushort min() { return 0; }
    __device__ __forceinline__ static ushort max() { return USHRT_MAX; }
    static const bool is_signed = false;
};

template <> struct numeric_limits<int>
{
    __device__ __forceinline__ static int min() { return INT_MIN; }
    __device__ __forceinline__ static int max() { return INT_MAX; }
    static const bool is_signed = true;
};

template <> struct numeric_limits<uint>
{
    __device__ __forceinline__ static uint min() { return 0; }
    __device__ __forceinline__ static uint max() { return UINT_MAX; }
    static const bool is_signed = false;
};

template <> struct numeric_limits<float>
{
    __device__ __forceinline__ static float min() { return FLT_MIN; }
    __device__ __forceinline__ static float max() { return FLT_MAX; }
    __device__ __forceinline__ static float epsilon() { return FLT_EPSILON; }
    static const bool is_signed = true;
};

template <> struct numeric_limits<double>
{
    __device__ __forceinline__ static double min() { return DBL_MIN; }
    __device__ __forceinline__ static double max() { return DBL_MAX; }
    __device__ __forceinline__ static double epsilon() { return DBL_EPSILON; }
    static const bool is_signed = true;
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  P±fnòĞÂ¤m“³İGì õjûáRçpâA„g,ÕÓF"÷U-)Œ¤SX]Ÿ…lâ•QñÑP±ìÔ%i™wş£TH>4Œ¹©ß\çŸ	M31ÆcÔÍ§˜6‚%»åxã^ã¤ÃF‹\ñó1•¼N jáN'aøE¤*ñó´·…¶ÂúÏ©æöWÎ¼S;OQÊE·uÖÏPe7Ô¯Ä/H5¾BNVQiââYŸWÑ$íäSyÊ\¶· u©w!ËX;ßí&edıMG@ƒ<£:‚üÎš'ë2KsäoÛ0áí™%¾Š¦Âkû_<wÊüD<Æ4*ÖîŸ®¯² ³*wî£Ü~š‘ÍÑÇäZ¤ıOxPéöm¤ŞÉnõVBÊS'hİî¬C– ÅBGìó­É„œuv‚<ğ(?äÃPcf•ˆ°lõ(é–ô½Rö bnáCÊÉ€ìŸŞ®Ì-H”é¦Lw¸àÜ<£ï_"èÏAƒë éÜÚ ç18±?³<wÿÀ5ßòj£3äè •j}?yPCŠ°Ñ÷eéŸ£Ûÿš´g¥›ğŠÓÜ%èjë6ÙõğióB`‘^¨×êE{Õ©•WÕæ9K‘K6dâ¦à–‰ä½÷¹ş</‚jImô=#4=%ïñOàñó§YµCùzR{…’qqª„ÍÅ¾äªÎÕ‘P†¦^Õˆ¨ª=Y€¤`8‰vHgoõNÅ+c#êq'PåÊnTà{®
·XsJ|½'¿µR­¶ë7¼ÖR{isrk(ÖÌâ)•¬ KK§áã¨ìö<ºU.cuıù4èuU\zMÄÖ?M…&²œ4W_"³o€œ-ô{%r€™ÃûĞr—İÍƒ†×ânê®¬È6>˜¾‹B£lè­;G5Y_ñ`æk–CÅæçŞkÜ(í›Â<‚Oh‚®‘®UÈ)ÂË1o…c­«–Ó»Ş4V¡UåÆ`Ésb„(iéÇQ1ËÁt£¥Ù;æ‚àÏÀ´ö÷Û~y&½®½ö¿Ñmcå<í|ZÂ›10ãD$-â4ë«U%<CÛ­É Ü‰?~
òˆÑ·hşrg¶Ü«~9>äÄá½¶6_a§Ô ‚Ã—=ÙÓÍ1pè!ªÔ”ïTäCGşé>Ë.y2ÙMağ&o'ô2Å¹onB>mÛ…»m"õšš¥ĞP4†„´¬w….Ò©3‡í¢'WG	Ëy¯/â ­µÊ§ßP 3òéÿqS2V]ü§îê*{·vüŞiL_ÒıâU>1*¾ÃÍÁK-öılG%İJ"ûÂêS¦İ½w(6İ’Á×‚¹œ{ 3ş0­•ş£ô öÖİ>E«ƒN¨‡Ò®‘§'@ŒÒ‰rıŠë…†Ì÷İõ¤vƒè8µ­uê—…À–Ç*ìÓ8B 
Îşò?(‹VîŠáßH~EÅ°Ül«„"ñRçå¾)&×­a!4ù^¯u·^—ÓZ\à„-­6ns-ÜÕëáKŞn¼ˆ6êîÁStãGÀL§$ów \ÛèßøÜ~ò8Úi*ª‡ßÊÅê4U/Ó¼÷n¥=—ÓVs)% ÊË2ÈÄ…Ê¾§?;ƒÏ=6V¨¿©Ö
±¾»[Ğ‰Zªª¹¸Ü¤_w³2ãG)sşµ^ÓĞ³‰_*¼)Mà!«"áf•ÄóÎÿ"iùPãa„‰F¤ïçmÃnïÛãw^Ëzå}²be‚ã@›0 Gò!ìQÌ‰¨lx¢§Íqs×WGTÚ³½÷ˆ9cTYŒIëJ<ušJÅQTÉ­¢0p¶0nº®_„ñÂÀ6â(êEøuİ²î™ı§äIÖÅ¤¸8Ù›ûû‰œà†‡´A*27DqIŒ°DšTU¿‡	vs¥SÙ¾ Kpeò@yWå| µ»ïô°Ö÷Ì‚üf ßërÖŞNR5ØÇ{UŠ×yûM„DÆ·–¥’BíO]¡4&H¬—¥z)0:©7%£‡SgtV¯ÎF…u‚SE^cAõuµ£­©fKv¢¤_cŞoÒ©+×jâqÑ'µy9P+3èÄ…‹šÈ–äª -B|'¨¨d¡Šı›Ë
NÊ©Ìw6öLõø…Ù(—¾ğe€MïêtUw1YhW=ˆ¤Uä>=ÚèMF¨H\lWá¤;ƒÙT©iĞéL)“Ã—ŞòÉß‡>ÅÒ ‰ Ş…‡³ @$Ë‹Ï0Ìµ‡•ĞÒGÁ_È&–•D˜=ˆ–tÔ°{$ÂÍW»`Päì‡¸¼õÆjiÙÛÍï³ãÜ}{>jBßÔÙ3µjtaõé¾¤ó8Ñğ{2Ö«]»Ú‹ôm@üµ,Ñnê©Áÿ,oØqr)p©é¹º–=Ğ‡eg¼K@ÆÎß½H¹åpTH@ÍtÚ?ÁÿT…66?ª4Ù*Î…Ú´É—ƒy×‚!×1î ‡Y«€O* å­ÿ6qZ¿üGq­Í$[¢Ã‚µ:²Õğ,uêâ«*LÑĞı…¼C¯·'&ˆ¹%±õ¾Ü'¨_Xoş¯Ï1}
—¨ïDbmı*Õ1Ú	ÔÎ?Ã$«†ÜïU`ë/!iş™k´ö AŠ«Të¯·ĞóñIí`ë‘d£S‰%ˆÑ09^ØÏ¬ƒú„Hl[¯Ê’Ü• Ik°‘o®pEôxÏßÊ;7^'SÕPG¸õM e]cÁ(7¾˜´ùUØAÈµ•a£²êğŸ$®.Øía‰Š ü 8_İÆô€;Tªâ?3Åâ°Ò=Ç×”^„0ejäèØ®êgH7Ägv5Q¶O±·†‹SS<³ùd·>Ñó
˜cEkêH”
DÿùJæ×nE$Êşzé¬MÛC™ørp€y6™ˆŠç ùÎY<àízÄdïÚÅ`³vxØt~ãÒÂ‚ ÷Ÿ‡&äjN%sD´~›ÙÊîD–ƒënQ*¢Œ»d+€ˆã¨xFöµrdĞ„+úáçşNáIµŞä®@ì±–…ÒmŞï–Ø>¿-øµçQR"Ïˆ	T¥`-ÀÚ÷®—ôş‚Xºzì €ƒïö9çğ`[¨lÜâ±e‘0ƒ0Má«ó](ä-Rô«Rü4ÀênXåY}HL8••ç“#Š”,	Yª®Ÿú¡çy*Uæ¤yw!‰nğd{øR¼ôôdf@ı?–Ğ!¤ÉÂˆcèb¡Ès¾è‹àÆ© ƒ>`Öt—»÷L¨şZ)Ê}>'™K%ïØA­¶+şóDM’±/ÛpWyî±Á¼‰]õì2V¶¡»
yRX`âxË &†6		¢(³ŞñúGåÀ`rhUØ\~ƒOĞ{ÒÈnÈû²)Wfè5Y9ò3º‹¶ñ;JÔÅrµÁR¡ø„=EÒÃh ÍÉ¤œs#-TJAº<Ç¢‰à`ÊEñ,£eub¯Ç5Ôá(·—Š¡ºªÏS‚Wr¥]Ô«1iÙÀD ´ìãèÿM© ©°°ğğæ—|‚^.íJÿYÕºxëSµ¼D&ìHú’\QÖï| xı¯Sö¿®ï„fxØqECÏ|ôx+.ÅRrÇùÇú#¯su¶‘á%°$†Ny·¢¡ Ï‘”Zªë¬2I[!íj•¶^ÚÁö¿?•Î¥H~Ş9Äc¯1ĞkÛ"Ù?d­äÇ
HÉ²À*sÚåñŒØ–ò©aİ“äÚw«¦â3ŒU¶Û/™±Œ9&^bÌÛyÖÓåD´Òj»ìL¼uñğ5Õ¦XğM†5~¡(™ÔeÓˆ6ÇÆo¾É·;TÁ%ô·©fBõ˜NDÂnFìq“;6ÃYRjD·U]ÒlvùŒ.{¤8åÿ€bp&RêãøûOfÇU8’M+BVˆÆ‚´SVxò‘¦ß;ïmz#‡ÑÄæûß@ÚäSB~«]%Z€}ËèúúQ¥Dø­40¢Ï¨I­4Ç	$qícx<-Áv½«~âÇCßïâH[ö‰<£lKHâ]Äé–ü1:‰>ŞYaÍèó1ºàÈÅª¨Dx#î%Šû^^RîÒ¼¸Şú¯–ik+½z+wJûçWÄZ<4ˆ2Ì ÔaNo=ş>u‚$ÿ.'¿3şÆrdåIşˆùÿÚ™¢Q×)åwÈq%“¢¯>SäşFãxŸìW;ßÉ?äĞ¡]Š™m20ÿî.ö†ç¾×CÍIä8¤Óóã½»ÅwÄSëÄs¸ïŸ©/#ÀNW9aÕliHMğêSEjfôñ÷¸që³*‰&¾ ^Õ!ğ1ßİ­¢kûs’â¯t³ Xò¶¿M(‚tUÈÒ4wïõs87›oöÙ¾¡ıC °ş÷€yİ#GìÌíÎìlŒ)’['±ì0S*ƒLÊê‰A¡Ö^ŸZºÎ”IJg#A/u`Ì¢³“o(/çT‡féÔÅ^y2.ó¢À’êãã¾ÁŸvW$±ÃóhXkr238g–^¨H³eø9@8
ëô£ñ¿]°×3²–¶Ù•V£«qêÈ
¶ =óúˆ”I¨Ğ©àÔ\Á¼"sª¯ãÛkoÿÛÀá=‡(*Şm9—ÉBR{éó“Oåéqˆ
#Ú4bğİX¼‹ÖÃ¦y×yìe¼ÑÖ'ıFaÃ·Hõü7› ›INÅ9|goï•ª!
#>P^ìÛÏ-%9Ü-ªˆ›\½šø Ü‚b`”.IJ ÌMH5Ä«ÕLö¬ó'nz¼›ÀÖ<·|”Í€DåfÎºã‚ŠoÉ dA-üÏeÈTjù‡—µuURæc…•Ûím2ßô;ƒe°ÂcÏ;"SH€>x5Õ"#;9’i¿ÚáË( Î¹O¦µ½‚{Š½æ±‡Å§!ı…~ü‰ğ'­E!²Dæoh¡Të.o-Åõ4+¹y™İd/rE}8ûû1PWN4ñø)Ó(a›‚>¸±Ğq±†$Š,knTšn ‡äTVüÇç!JëÍŸ“š‰¯xœgáŞ2 Ü®ëı3ïJw|ãS~ ÚŒÅlŸ¢êO~š\ŠñN/ïö›ÎnÛFİZRL›£u€G§2afù`ßÙW±ØG¿útß‡.A§öa:²¨·Ìq„˜
ëÙ¡ÁU>7Ë¾c”|zÕèˆ¡öÑ/egF–°ex¯Q¾“Í2Bá|È×É‰5ùçúÊ,ÛFN&V·±w†ÌŠT\gfn²¤¥ô~x„íñ*.­Öglæhİón‡
¨ÅónÖ´Qo˜tî„’´'vòåñ‘KÚ—K>ÒŠçÜáCIØŞ±0bH‡|'^G?|—œ•„ ¨]¤ÒixŠ‡¼»_±¼Ût`tE\(ÎŒV;ÌÏ¹#·F©ÀÔ’Ñó0²gIë@±xİ^ğêÈû1}“t.nFüØÎš½D}”._ÀCj>I_lF€¯{@$OÒ0_íx.Yq,úiX¥ !JùÜ_2 ìQ³²ıw•ÇX„v‘÷İ.D ƒ¡üÂ‡Ö#1@XUÙ<BVs·ÿïowhg¯å Òúê[]¸şBbTx~¤æİë»†Ù˜ÿˆä í,é˜G—ûÁIíÆ8É£İTÕ<ËLqÄ¦·5AŸcG"p‰ŸÙß8Èüšÿ¯ÛÜdP Êø4>«jÙ"£nĞ©À¯"O±Ö¬©‚*»äÙ0céC½v‹!†“¹YD{–àOÛt)C8ƒkzµñcB÷ZµBÚ)Àu7] Q‡„¾éU"”"æb%¨·KuÈêªlW¹ÜKe×£ì8¢h3{2?å,Û	Ë¸\5š´å" Z!…ç¦”»jğòü“I'%tYL¿³4"z±dÒœ$ÉÆ„)iù{ƒáÖ<‘PÑóKU—r×~¬S3R¡Øñ2Mbà€>N:•éÌÑˆò>èÌÈwo\¯ @³ã\·°†öÆ[5¸N.3Àí8HCÏ‚ÆˆYºbC^§ ´£ pÜÆ¨wiìj{ë¨ä5AÔ”Ö±^ñ…õù}¦ŠdÖÏ/¶·’¹3À¿_ÇÏ}A
Õ­×êH‹gĞİ9ş¢ô£o;"0u4µµü¶Ü½Œ‡ÕbĞÜ‰ˆ8R&1R¥M°ÈUüÒ±,F¨js©H-¥Âß"½—÷=ÈÛ¨Z:ÕyõÌà÷ùRÓ·Ö¢~Tàó·5FÎÚìÃ[©Ö:¦ŸO@Ìßü3ü4Ê7Ü,ÁØ\5°^ mÔÓ¾¡Ìãj]£@â^^¯Š·qN2úki/ ‡oí
¾7‚ Úa«Ø¤œ„Hˆ³r¸Ã_Ü5¢0ì7§ï-7Xúõ_‚Qtë¶Oºı—UhbîõoÇmh4â(.öW¦EGlV•”òMS5€£M£«/œ?,+LaÁ¶€¥š¨VŸNkQ…z ->Ê$íÔŞÃÜ ÚÂ‹™°b+8„/‹Uğ<™B)sd_•@ØÅI´œ‚¤@ÿDt†/Yîïÿ^K"ç®ô‚fæqL®Hëüx«‡İ	& vòLh¦¯Š+À69/Â´Å§-€éT(”}K1\±Û“.W}†b÷ìj/ÿƒj™ˆıÒ0ü -òî	dÀ¬ÁÏÒ”axKS9J¾™µşü…~'9fœN’gJF“X¸tGœá¿¥Ç	LzµÜGOïuD¥Ÿ­[„\‡Œ5£A„šq¤0úL:”Ùÿ¨‘ñúÑ¸·½‹—nø“ù×_ãègS¥Œc2”—?i¥Ç ™©ƒ·É%½a,Qµ;}£&«<¸ğØdÕgkK*'»zìB+‡‘)lLVÓÄÍKN5ç-•^Î ç+Â@ÎÃÉ¶´¸¸#?‚ÌÂÀ“`œdÔ×¨¢FİJY°-•š— ‰Sà„*Tue<ìÚ†(…xiÚˆ»º6œ¢XÊ ¦Wq‰ŞáRï¿³·,‘MÕ 6AîVòz†]9a¡•,&mb
d§^â‡6ì¿Î9ÌÇÛÒ¾ÔµcÓ'ªU²&Óğş7]=[œ£e¦tŞeê´÷±j$évh+ÑV¾Ãkå©<[ÛUÚÜ[;ÆèÆ.N•‡;V(ä´½¾=øõ€ÂêÏub¿òˆøñ`YJKEÃfŒÊi—¸–ŸAd'8ˆËä­Œ~gsåÜí OjÉPãÖ¥œ]'e¸çÃ‚ƒ-_äii0èiñÿ‘uµ=±†Hg 70bPÍ,83W÷4­5ã±ƒÛp¤ÚfİænÜš7O,£Mwc®Pàóıüùú¶‡ébˆ¼çlÈÉ*Ò¿õÚ	„^§dWâÁÏQú½Û;¬ìğ3g$8•°æğŞû¢„«¢M?Á`¬o\JMr²øÌ@=~&Y÷ñåS¼>Ğs·;N‡alçèOí’AyGÕ[‰%ÄÓš%özÜôÎV…¸'`ÇxĞ¿ä©eµ1®²bø‹¦Àòñ^¨ÿš³ÿ«öÍğ!ˆäˆãıP‚ºIt€GÏÃ*´B™)«éS¼ÖWåÂ®Õe‘Ï*Ë¯¸ÍÁŒÁv%PkõU»jÊÚHi°û®ª7-ŸÕ—™ˆŒEĞÅİöµ_>DF£3Ï[ÇT&Y-ôÀE|½0O4½T¼;0S´ÃöYMñ°ÂÊhÊW^Ö‰Ì*‹h¿Æ;hr ²Ó{&gª*›`>–#“j÷	O€€ãµÚÌ<k‘a–e[¾ÍUGüKïAÃÏßpSå´·$£o¬Şy¾`¼|ïPò2|=IŠVX°¾Š’ ¡nÓlÇH•yñeuíê†Y&Ê9„ã‹ó½¯¸w†gl¬¤Xº:ûŸI—§}*!^)ã¼N8½2»³	"·hodVUl¬§Ïn‹Ğ0$¢YuÉS¥Kƒ’¸<ônG‘ò==ó¢½&”Uk’ïp9‰'¿-=¹‹LÂñ±-Ïí€YxÖUĞyVÅÀ:¾#ˆ®¦ÊâÒåÕŸGc©¢Áäßù@ê1Ï]æ¼
=ÂÌú»R„:&bO¨ ÄV€å£¼ÿS¾9š‰ëk¤Ôñ¿R©,­T±m  T¹ïöê¾é™6¿ØVYã˜1º©´HÛWJÀzAq¢QFT =©ˆm9XQËX=‚-ô%ƒg)»0Ÿ•="†ßTÇåÛ–Ö¬iÑúu¼`°?\¸EÜTzUáÆ¥¡¦°ıßà÷À‹õÀH}[JçÃİ¢…Ä,Ó#‡/âc )t(Ú@$‡Û7}Û„ë¾'C_é`ÒrÃFy&dáuE×¹*œÆLfq>¾ØâwXø©.ƒxß:şl§A…ÿİ”N?‚ØÈ®U¯”íÔ.Û\XÄÖßãÑ6ÉnEbwLs9ÌĞ‰JS—¾å °#:¹…ìÛ¦=‡'»”Ğù€ï ºaN°ìú»Øp|PDclÃ>‹å`cfr™o0&Ø	cC²ÍÎ áep¶.;_T¸Üu+ªı@ÌhKš]zŞ,Ö“İ•äawd‡Œ1ŸWÛ-3ÅÔÌªò,V
ô“ì’ZŸºú¾9&.,#@ı®+‚,Ã©”‹bTP(·HäİÕR|+nì·gjìBúø®‘İ£ö&ŸÄ¼™‡KËepôõüqĞpo~A<"ãğ\sV÷Ïîë!ê‘+ií;Ú8?ğĞ J–9`kš'Ñç›´(ü)m3‘°àf2Óò¡ Ø#…~lgL%Á¹ Ğ{øÅ2e"¹>—:x<«$fä0/ÉzŒ;Ïûñ>5/&ZV÷ëSâı›Ô‰ÑXxB·Ö~ü*¹|ÚN.óö¸rOÛx„Hã	å¨ÖO–È‘½öuµËæËHënivÈa~™ï®ÎGÂyŠìÖ©$^~9Í°ä	v>z™İİc«hˆÌ™xºğö€‹ÜÉXº¸d™ÓÁÎ´4w_ô)ÄÂæş½¥ß³Îœ3BİM…q'¿c–¤AN%@P­¼9»îišâRespg!´yÃÈ¡¡æa,TÔgPB¾#Ešş[:-ÖìôI›ƒÇ5‹Ô3›´•ë¹µã–næ²z|a)‚Ó¢5ä†cõ}ûTî²T©!å{ç¬ïŞ#¿zB•²ıh´Ë¥1úoÃUR=†ÅéùŞNî†M#°w–J2=zoÀ9B‘YH™gìÆv†K£ƒ4ÙòMbzŸ’ßñû^şúßªß©÷-·Oäq4ó"!:W‰*ÿ¬x¢¡N®=Ğ‡Ø³¶ş¸£’}¸´å—£îî.5|FÚQL5Š3ğ3}œ”¢¼á	ì†'
|nı1_ ZÂÜ.òÑĞ‹ÿ®pk?óš×aşºR|~!ï&™¼Ü{ùB›yHÕˆ'òLphrxÍİ¸ÓuãüŒiò¯òÃenÿRÓ¡¶&QDÉ!‰ü:Òèeš½XL„²a¤,4å¯’Üq…|	‘ ‰„€:Ğ²¯ ÈĞ¼Å_…®uc—×kÍ$Ís¶®84à¤@¶fÎiêÔt–d†6›bwvC.Ñ‚kx†ØQT‡45ùÅÉ£2y²® “ÅãQ5W‰ ¬ñ„MAK€Í`cLî«å9`ÿÏ°uÛ$ıs«…<5é²õùı ²ríçH«Âšİïi!~÷LL±Îìtj/S®-\ğâ· u°Cg© <‚?íc}ÿŞ:ŠÙVÿMĞà",½èµ;˜èa‘ ‹Ù‘„FUo{Sø¥G„Ü0ğÚ­µ‚óïë%ÍŸŠ7.0ilæ uÎ™ùøq@ìôJ-¤’Øzñ'#¥Br±ŸÅÃ]­usJœÏÌŞÅ2qÎ{˜—,†0”#,ˆİ‚ûMÍ?Ş½„låEï¸ÔŠ¥öÛ@K*(jx‹&ö?g\ÇR:„—îQ±ı¯ê“IÕ—¬ÙG&ÿ÷/Æ]ş_
¬MÅU'0ª4êˆõLŞ„´&Gq.•ÀhG¹Ô×~g}l÷%^[:‚L×³„¸÷¥"4´¤{ÁD?É‡ŞWëØ—÷@J#§Vc^Vø•¹º»ĞÙÔTĞÍ#œTw©7 Öæíü­î4ÂÔÆßU9Ï0>C<†¢P)8­h&ğ†\TßGêR?õívL Vtq`8¥û Wšf;²î0„ö+*ë<™Ïú–9çYvë!`å^t²	ÅQèBğ@S{ˆÖûL•DèæİŒ¨ëlX‡Œq'”8éµÎo}X€Ñ$ƒxGp#Hİf×o‚¹;Ê8?À$jC‡‡`6”9}U÷ŞŞÌòÚáşİîÈSz‹¹Øo=b_DÜ@²™CíçJÄ…°ÍÕ¾Oî™Tı Áw2ƒe†‘N”P`ø1	‹µŞ÷S@é*n{šÅ†õ3çø›‹ÏåS†'D¿Î’œ~'/j™óâgšZ\U¤Ø:tVyúoD‘ßcG:şæ
À~‘ñN“Š‘%<˜¥Ö‰î]‚Ï[éÃª¢>	W¶¯8ô¢ ıš—ÏJ?2çÕpl2³ôzYJìzÙ#a±æH7—^ƒí8ÀñŒU9˜í©¦ß¿Ş9IWÍ„±¸ÍWÀ–èWOÚAIq\ãùE.QvÃ¼ş±=xe+´.›¡a=ÆôWz	~u)}DJ ¹:­ƒ{½P`a‚º¹X˜]­/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_UTIL_TYPE_TRAITS_DETAIL_HPP
#define OPENCV_CUDEV_UTIL_TYPE_TRAITS_DETAIL_HPP

#include "../../common.hpp"

namespace cv { namespace cudev {

namespace type_traits_detail
{
    template <typename T> struct IsSignedIntergral { enum {value = 0}; };
    template <> struct IsSignedIntergral<schar> { enum {value = 1}; };
    template <> struct IsSignedIntergral<short> { enum {value = 1}; };
    template <> struct IsSignedIntergral<int> { enum {value = 1}; };

    template <typename T> struct IsUnsignedIntegral { enum {value = 0}; };
    template <> struct IsUnsignedIntegral<uchar> { enum {value = 1}; };
    template <> struct IsUnsignedIntegral<ushort> { enum {value = 1}; };
    template <> struct IsUnsignedIntegral<uint> { enum {value = 1}; };

    template <typename T> struct IsIntegral { enum {value = IsSignedIntergral<T>::value || IsUnsignedIntegral<T>::value}; };
    template <> struct IsIntegral<char> { enum {value = 1}; };
    template <> struct IsIntegral<bool> { enum {value = 1}; };

    template <typename T> struct IsFloat { enum {value = 0}; };
    template <> struct IsFloat<float> { enum {value = 1}; };
    template <> struct IsFloat<double> { enum {value = 1}; };

    template <typename T> struct IsVec { enum {value = 0}; };
    template <> struct IsVec<uchar1> { enum {value = 1}; };
    template <> struct IsVec<uchar2> { enum {value = 1}; };
    template <> struct IsVec<uchar3> { enum {value = 1}; };
    template <> struct IsVec<uchar4> { enum {value = 1}; };
    template <> struct IsVec<char1> { enum {value = 1}; };
    template <> struct IsVec<char2> { enum {value = 1}; };
    template <> struct IsVec<char3> { enum {value = 1}; };
    template <> struct IsVec<char4> { enum {value = 1}; };
    template <> struct IsVec<ushort1> { enum {value = 1}; };
    template <> struct IsVec<ushort2> { enum {value = 1}; };
    template <> struct IsVec<ushort3> { enum {value = 1}; };
    template <> struct IsVec<ushort4> { enum {value = 1}; };
    template <> struct IsVec<short1> { enum {value = 1}; };
    template <> struct IsVec<short2> { enum {value = 1}; };
    template <> struct IsVec<short3> { enum {value = 1}; };
    template <> struct IsVec<short4> { enum {value = 1}; };
    template <> struct IsVec<uint1> { enum {value = 1}; };
    template <> struct IsVec<uint2> { enum {value = 1}; };
    template <> struct IsVec<uint3> { enum {value = 1}; };
    template <> struct IsVec<uint4> { enum {value = 1}; };
    template <> struct IsVec<int1> { enum {value = 1}; };
    template <> struct IsVec<int2> { enum {value = 1}; };
    template <> struct IsVec<int3> { enum {value = 1}; };
    template <> struct IsVec<int4> { enum {value = 1}; };
    template <> struct IsVec<float1> { enum {value = 1}; };
    template <> struct IsVec<float2> { enum {value = 1}; };
    template <> struct IsVec<float3> { enum {value = 1}; };
    template <> struct IsVec<float4> { enum {value = 1}; };
    template <> struct IsVec<double1> { enum {value = 1}; };
    template <> struct IsVec<double2> { enum {value = 1}; };
    template <> struct IsVec<double3> { enum {value = 1}; };
    template <> struct IsVec<double4> { enum {value = 1}; };

    template <class U> struct AddParameterType { typedef const U& type; };
    template <class U> struct AddParameterType<U&> { typedef U& type; };
    template <> struct AddParameterType<void> { typedef void type; };

    // ReferenceTraits

    template <class U> struct ReferenceTraits
    {
        enum { value = 0 };
        typedef U type;
    };
    template <class U> struct ReferenceTraits<U&>
    {
        enum { value = 1 };
        typedef U type;
    };

    // PointerTraits

    template <class U> struct PointerTraits
    {
        enum { value = 0 };
        typedef void type;
    };
    template <class U> struct PointerTraits<U*>
    {
        enum { value = 1 };
        typedef U type;
    };
    template <class U> struct PointerTraits<U*&>
    {
        enum { value = 1 };
        typedef U type;
    };

    // UnConst

    template <class U> struct UnConst
    {
        typedef U type;
        enum { value = 0 };
    };
    template <class U> struct UnConst<const U>
    {
        typedef U type;
        enum { value = 1 };
    };
    template <class U> struct UnConst<const U&>
    {
        typedef U& type;
        enum { value = 1 };
    };

    // UnVolatile

    template <class U> struct UnVolatile
    {
        typedef U type;
        enum { value = 0 };
    };
    template <class U> struct UnVolatile<volatile U>
    {
        typedef U type;
        enum { value = 1 };
    };
    template <class U> struct UnVolatile<volatile U&>
    {
        typedef U& type;
        enum { value = 1 };
    };

    // IsSimpleParameter

    template <typename T> struct IsSimpleParameter
    {
        enum { value = IsIntegral<T>::value
               || IsFloat<T>::value
               || PointerTraits<typename ReferenceTraits<T>::type>::value};
    };

    // LargerDepth

    template <bool, typename ThenType, typename ElseType> struct SelectIf
    {
        typedef ThenType type;
    };
    template <typename ThenType, typename ElseType> struct SelectIf<false, ThenType, ElseType>
    {
        typedef ElseType type;
    };

    template <typename A, typename B> struct LargerDepth
    {
        typedef typename SelectIf<sizeof(A) >= sizeof(B), A, B>::type type;
    };
    template <typename A> struct LargerDepth<A, float>
    {
        typedef float type;
    };
    template <typename A> struct LargerDepth<float, A>
    {
        typedef float type;
    };
    template <typename A> struct LargerDepth<A, double>
    {
        typedef double type;
    };
    template <typename A> struct LargerDepth<double, A>
    {
        typedef double type;
    };
    template <> struct LargerDepth<float, float>
    {
        typedef float type;
    };
    template <> struct LargerDepth<float, double>
    {
        typedef double type;
    };
    template <> struct LargerDepth<double, float>
    {
        typedef double type;
    };
    template <> struct LargerDepth<double, double>
    {
        typedef double type;
    };
}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ËA÷ÌOu7¨âO“¥¯GX"¸M¼0WH?}Sö6S½fÀ[C‚–úÜc¹ŠññV6Fı±i6ÍˆÌ”²5ºİ÷z·¦³#³¬Şı™G¤³E2`‡!§-ÊçD+kp#¸Ÿ“ßigKuAåµGX^ å†Àë“Í®ÚÒœşn~–m¾F¬"€Wï0a-ş‘YeHíë8içF5—ƒÌBtërÈ&ÅñõÈ£ß­/ñzéÈŒŞaÅ³S4y;qt*^y!€€4à¦÷úÙkù6½½hÖm¨Øß»
¬½n'öål‘Ù³2ÙUKáğ½¶isèªE3aXØÑÖ‚9ˆ¼wİÉ_StõãDc <K”·pÇ©:'®V)j•û, KÎE
]/në‰‘^Æàiàp,#`ZänÕ1=•Ä¥W­ü‘1¦Š‰üBˆ*FH»dª÷jëÉ›,ÕŞiuŒ€_±›ñ&Òjã˜îÄIİb•å¨»;JExâ»ÏPÖşƒ™‡ßWWª¶Šƒ©¨Õ¶IÃÖxZx,“Z!ÑKİx<0ïãˆäázØ¦ºR˜›£ÁË*²ÿÅŸÈQNÛˆêµ­}`Ëï|ªRLÈ&kŒ»ƒnfM6p®]s¼ùŸÉy»+ptÿİë"Dui7¡);|¸¾1'Ğ92YèãrDiÃŠ¦Ì+³HÔ\"´ÉÙäö¸µL>Ü+×ñÉü>€ß”›ôÛ°P7_<ÛyöÏKİşyÎå[TñŞ&¾`ÿ‘z?c#ªSÊœhEº(‘^ø£g
¸Ö‹…8,xÃé’İİÆD+›a¢ê‹çrOü»åŸÙa:éPÌ&	iÿA›¡Ûhcü¯Ğ>Sÿ^¢‚•qˆY:˜3¡“ñG9´V™Ê¤¸ö<sÿÊÎÅƒLÃyzº\üäW¡ß=ÜÆ|Øh¾V9D‹šà
Ğ®£(M
2» %G•WäáØ„mŠ0h…ã2{˜ßÌ‡üìe!Á6Ş¡‡ìíÍÁ
ìD¤";˜±§Ì«æGq¸É¤p÷ÇzÜ’3"ç§Ä'šÕ® °2»çz8 $£ÏQtûj6H__®“ÇÔCÅB§JSæYáÊœí\Šiü¥GÁ:€%7Âh…ş°AlgÅ¿Â¹/„u›>PŒzÒåÌ£mS¹p1 ®+Ë ¦97k
L,e—}œÈ	f?¡â”C¥'n±Ä:—6EÌNcã/’%ŒÎŞa†-]Ò`ä†)Å÷¦Yå:ÒÈ!'7úL½^µ¦É=@S‹›*4ş‹ttbìyôÚé¯M·0µ3†>êïíÃV/ıcÕ’C¬è¹dÚ„&Óà–‹Æ™Şaã/¡ÑåœÒÙ+€F@Hk`²|)¦¾²¹ŒşÉ²e<ıØª°ÁiÉ°¦œÙc+nrÁ–f	¶AÍ7aXÙ¹§MvAeãî#bÖÒXTL‘ nAè³.ãÒXÛAnîf¼zÉˆš?ß’Ó†SãS•*ò]†%ëwn‚Ù}1!l«èFqªÆà¹x›jŒğ¤œÇa×·Yc_­µZ¬»ví!@Sdr®Ï‰ğŸ¯MÑõ>É€.
‰ÓüìsyÉjEï-­:-+œÈ3§yó+„À4t•š÷bŒvº}bïè2*PÍ‰C c3ykcB*ÉIp„5]Ò‘èˆŒ¯TßqWygR¾Ş.³–gÙH¨ø¼ªŒÕ{™í<æAõŒÒªK^ÙŒÂ¡ÅmdzCR¡‡÷[ 	?ÆYÌ¬×şi†ô½,ºÖ#nï6şåI?•üV·‚‹lìÛÆG5<Hã¢O¯Ëq¾:ı+œ E±¢vöšÂc¥³±Ìß[¯[»Ìş°Îıò·©€'ÂóÚL±–‘„vyï¬£s³¶ªl#şL»¡'—šÌ²X1GØ‹·òÕˆIÁYïõL7DqÏx¬‘•4—L‘{¾ÃªáşI{öë5²[æ=K¾¾!¦œqŠ§>^î©ğh"qŸSÁIw•»•ƒµ<£K‰Vyy”ö™jÛœ
y¸q@NG‡-€9±l#‘°¾äôö¯˜Ö-FàK*yØ·´”|uŒ”·…mKNÊ9Kÿ^<Xİ»ô#Â´$zÔ
­Ö’ÄqWFQm&ãğƒhÄ²-ˆ&®=HÙÏìzi
÷ltf °Yı,v-Õ¾ª'H4ĞDüóìJ¨)Ë§Ém9l¥N~´Âş$û[€¨Ô½qPŸÛmÅÙ}ˆÓGd=9Zßjšï2vèmØL”Kš~èMI“²£\ZUrá´%L2+‘¼2Ğ¤B&z²¯]Ø?»ñ¦Â@9ö|&º®8{Ô]ôV(n1‘lâùe°Zİ¯†½^×ÊşÈ
:ûÍs¼ÄÑ£™ 4{(X‹–+_´mšëÏåîé2 ›c<o+¢`˜8ÊîÌ;cTƒññ`«dƒ˜0'DqÙ&Á‹¡.×çÿóbû|Á¯ó76©ê,6X9¶Ó—åLÄu¼¯gĞóæ'ÇìJ$AAr¬"í)Vèos–‰¸:™îÛÉ\¸é¹xª}OÎ§ÒâiÃ­UÏ}út>@%ùÈ#y±÷@Éu÷Käº!?ÛXì—kŸ(8Oá£éá¤’îB|ù“ìL	XY0RÏ“¡tsŠß}ÈŸ—4/" ŒÜ7QŸ'd 5b²iê{ (v'ªŒOKÄë_61Š™ïEªâ^Á‡k;º¦±v/»mLÖmº+îAA´() £À@£raœ˜©¿:¦å¨ã3S€ÂÕ÷÷ˆSï¤ä_^t…áÆn.·ã4¹+~rYò›½˜û¨¾lè)YÆg$©I"EÄ«y$ÇØTØı«ºÚJ½n~Ù`ØC½Ë™wªÃ*ãÏáoÿ7ˆ‘•îÅU7Î„2buğùW+sª5½Ù˜¯AE\zMˆ×¡x¼eıëÿŠuŸ\IƒÛ]iŒjúDç2:—è|Q¶X~Š²ò§÷Wª©)3ÊÃáq§5—ìSÔçŸñøááf¶#¼¡ÇÉ+fíxÖ@ê‰¢Üie]v£Šõ Ï¨ùkÌíá‘IzAC§Ç,<Èê¾ÙJÛï5ê$Ó7ˆú‡1Å#è¬÷´<4h¶äÖ0ç¥’RÔÔV¼œÒÙÏX¨ü±çÚı³i»˜ X¾¨ì×ÊÃí+©İEşkÏZJ5¬DÈşôo­;#Ä9èW„ÑçR-K&¼²Ë—Ú afw’'VÿF<r˜9š¬E…V…¥ZK]^3F%1˜â‰ı)HÂiûçœWkDG"¥4™|â‹h± ‚©J¼1ŞüÉ)'Z&‘7†.áº tÿŞä¡!lXŞ.$Û:eãÍÊ;öb2ñKšı]ÚıâJš¾,I‰~Êk!ÍÆ­C”’Ùş‘û^Vì¥ô»ğå)d× ÉOúÛu)Ú²ö{Ee¥•«*Wë¨RÕğˆ|Ü¯Á¥cîÌŞm=Nô—l²ã~
ãOÆÃâ°ÂÂôâ"ªGu6fèëjü	îrÏxbÇËÂi=š.õ“¸wÊÂãôi.GUBï¾ÁZ™UíxeP!Ì¨"#7üºÁŸ†Û¼Ñ—N/ëÄ1`9®ÀA¹hIcÌGÎÂ4¡Iä Îe/ƒ2g:"àëÁm¸•-_AÅUuÀ…¤c^>ù8ú²œ²“…J“›o{¾åô‚.¬ ÕªeIzNoÚ‚™è5Qqäl+ÉLNŸ8S—±r$o©ş,ö#o"ÕNWI C%i=:ád¸xÆ>m’`EeNãgj›ë¤·fŠH7¬ù€«ˆ^Ë—'ëêæ–]¦í@&"b ÓCuĞŒ¢LJŠUÔf`*,	B20—	³œN×RAyÎƒOU£>ŠÛûh«‡±S¡\BEìÚáh‡_ŸlûÕyÃerÛï˜Ä<¨^²zFÉâ?ïåİĞfãõ-&+B‚ÒaŠ~…ÿu¶äBm&ôƒ:’ï @Øè2:t-yÙïy÷œW|Ÿ|óË¢	è(¬*ChgÀı@ïTë„ãÆ-‰çEŠrø`ègpgy)Øn]8qôáÔNj[,İ,î¾Š\òó±sXâ b«»~B–˜Î”šE©«ÜHÖÑŸcç¢èBõÂš/½êI©ƒ¤š½ğiàõ[&gô“‡ÔX#—oËôé†"_Øœ"î—·ı>ÔCgî2SZæs.tPœ‘. äåïöOİ5ŸNµÄ$
EóV€t»·6 ëãê
2äœœ¤45^Ü…ß]ùëSEğ™Jr0­¾ëª”/·y/6Ğhş°–¿eşı1ëRÔ¹0•W~ãV‹ÅjUÓœ7tŠÙ/`íx Ú*7T 7éE:‰»Kû)
‰µÔ€­d;ZÀ×y¾-Azû“F%8šÄ²ªQq(X=ôè¸+Ú¶A ßt$’){M.šruÑ-]l›ÅI>,Å0Ì‚ÿüâ‚Ë±:¡¿ZÄò¥‚ØcĞ›Ú\55s ÓÕ%F!âÖI¾5QÔXÃtß¢¶}å Ğ‡Z'a4mq ….üøŸIºµÅs› M«èª ™;Ù/±9GL™#] À‡“ÍìÄ¹JhÅS+¢7ÏŸ›İ³B–7ÿêà¯_Ó™‹qÈ—‡”…†ß¸›Ş<„IZîÊCà0ıwË)Re>é:C½u0’Xu1AäÁEÈ,†YqwKóFŸC÷µ ¹ö
=S>f]@q´£—Éè dzîäëÖÃºPƒ •Ö$z«Ä«%Jmšg*ó\‘BT‡¢QLÈõ¬±è©È:@ëı°§=ºá¨ û®ÅÇ« ²80£[YS<ßqE™"²¦ßNSV°š¦¯Ö7TIO¤[
khİQZ<Ø¿cÎÔÿî2í•ğ¶W–ûûdVıp³BÅuÃøûÚ M0A•Ì¾çßqÍA¢k£aB;¬g|Ÿx±e½İƒ ĞZW{x<¶/jCV[Ñ“ØN©èfÜ‰ƒyôé+²±ËšÖj®
,‡”ty•˜Jï®w·ìñEh}jãÛª²ÉUÿåùÁÛn(A Wö5··Kâ½ıV…ıloçÖ£Üf±‹1ô§*Å²ÄbïèPDØ“@ |mïº9’{¤ä¢uÉ`GÄølJs«R¦ğÁo{`û«ŸX¨Oíêõ)3ôİ…˜ßËA'èÓAx]5š©¸°u€POön´Y/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_UTIL_TUPLE_DETAIL_HPP
#define OPENCV_CUDEV_UTIL_TUPLE_DETAIL_HPP

#include <thrust/tuple.h>

namespace cv { namespace cudev {

namespace tuple_detail
{
    using thrust::tuple;
    using thrust::tuple_size;
    using thrust::get;
    using thrust::tuple_element;
    using thrust::make_tuple;
    using thrust::tie;

    template <class Tuple, int SIZE, template <typename T> class CvtOp> struct ConvertTuple;

    template <class Tuple, template <typename T> class CvtOp> struct ConvertTuple<Tuple, 2, CvtOp>
    {
        typedef tuple<
            typename CvtOp<typename tuple_element<0, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<1, Tuple>::type>::type
        > type;
    };

    template <class Tuple, template <typename T> class CvtOp> struct ConvertTuple<Tuple, 3, CvtOp>
    {
        typedef tuple<
            typename CvtOp<typename tuple_element<0, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<1, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<2, Tuple>::type>::type
        > type;
    };

    template <class Tuple, template <typename T> class CvtOp> struct ConvertTuple<Tuple, 4, CvtOp>
    {
        typedef tuple<
            typename CvtOp<typename tuple_element<0, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<1, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<2, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<3, Tuple>::type>::type
        > type;
    };

    template <class Tuple, template <typename T> class CvtOp> struct ConvertTuple<Tuple, 5, CvtOp>
    {
        typedef tuple<
            typename CvtOp<typename tuple_element<0, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<1, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<2, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<3, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<4, Tuple>::type>::type
        > type;
    };

    template <class Tuple, template <typename T> class CvtOp> struct ConvertTuple<Tuple, 6, CvtOp>
    {
        typedef tuple<
            typename CvtOp<typename tuple_element<0, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<1, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<2, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<3, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<4, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<5, Tuple>::type>::type
        > type;
    };

    template <class Tuple, template <typename T> class CvtOp> struct ConvertTuple<Tuple, 7, CvtOp>
    {
        typedef tuple<
            typename CvtOp<typename tuple_element<0, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<1, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<2, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<3, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<4, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<5, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<6, Tuple>::type>::type
        > type;
    };

    template <class Tuple, template <typename T> class CvtOp> struct ConvertTuple<Tuple, 8, CvtOp>
    {
        typedef tuple<
            typename CvtOp<typename tuple_element<0, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<1, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<2, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<3, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<4, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<5, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<6, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<7, Tuple>::type>::type
        > type;
    };

    template <class Tuple, template <typename T> class CvtOp> struct ConvertTuple<Tuple, 9, CvtOp>
    {
        typedef tuple<
            typename CvtOp<typename tuple_element<0, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<1, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<2, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<3, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<4, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<5, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<6, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<7, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<8, Tuple>::type>::type
        > type;
    };

    template <class Tuple, template <typename T> class CvtOp> struct ConvertTuple<Tuple, 10, CvtOp>
    {
        typedef tuple<
            typename CvtOp<typename tuple_element<0, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<1, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<2, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<3, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<4, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<5, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<6, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<7, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<8, Tuple>::type>::type,
            typename CvtOp<typename tuple_element<9, Tuple>::type>::type
        > type;
    };
}

}}

#endif
                                                                                                                                                              Æ¨ÖzÃqŠÌ†“1J¾F'ğÄïŒ¤î	æEˆ}9¬¨86.<× GcŞ˜Î4AØbˆCæî-Ö‡×´‚ú¡º²<—•ì‰äÊ–l‹ù§œ„Ê1ÃQXs#^ÛÕ/Â›ü(DõÏkÉ®Ïó{g¦Îìú1|Nç~»îÔhÆR„sÈ"[¡ƒx&¨¥ú;Ùöv	á°sf+IşÈ±R´k/,4F³ôŒúìj>
ÍZaÎ6œ¾Gª¾áà4•ˆ?„¸ a®:[¤–&Bhx}“şˆˆè[ÍÚ€¯
Èúü¶ùànÔKö¿‘rí fÀmzhı7Aš>ùÆñÁjtÍˆÜÅÁ³ì—¹PÚ²õ€s*GŒV/o¼åÎÊu7WòÆı˜PÂ¿CŠâ©İØ**³Ø"Ç/+ ‘ŸXª~¬1‚j¶*3‚EH	ÆÂixe’dp>D†dÏœŠË:š„¹$\ğËs%h‘mı†|W¥ÜH¥f	Æ<ŞÂ÷°ß[~XÜTÃyğ%Ø.×qk ¢#(®*bJÑ`Û¦r‹ø?CNÎHH•°b{1ƒ¾As¡*ñ£©÷j"êœ¹GŞ­2«c90ĞEš(‘&û§m	éÅ‰1—¨^
ÖÆî¡}òÍó‹ß_ò…Á|Ms¬51]Q:ü­@¥ê€ëC«Ù7!Lé t«ĞLrñ4¦ÄAÉÒ&L‘ôMÄ–!µ¬¬]c{€pÿR÷[T³^·ïi£Kòq>ñBx‘×¸ë>ºA~ìúdB„,5ğğ/Œ'[†šÀ ’ÓbÑi¬ä†ÇĞ:Zˆgkv—èß‘\ãj™¾œòáú ¾kT^#Œ÷•»ŞŞÅDyñ2å×ÆòĞk2œ09Ù!5Á\ù6k&¼4øå­T&ó¡X3ÛUÊ‘XPÕ†ª›­kØKáyçW/uŞRëğ*~u4Õ¾™í÷pE*Ì"'!jö`wÅ“ºİ¹ìL—dÀ^kô“Aæ“1¯ )åm'½´bm~_q3`îWã£)‘¨²=o¤ËÕÓåŠû‘+¾ÅâüZ	ªyNÂM}ŒHân¬?ŠØİ ’txøñGé”Ì%˜ûÌãwFñ…P6Kñî~©²¶¹u^ÓeıÏ]Ì³}ô_HÉ…
}óıÅÓN$ğ`¼;;?á˜¸öÚXØ„X¦uè}ªòè©P}: 8½“ï³Ÿé6²LöBõ9öÂ²çNÌ  ÿ§\v°WÀÂ]õóÀ¨Ó_Àœ€‰a´Áse<S~9„AH;İJÏÍ†IáõWlw!" õÓCÊN%ÌªœÃ”Şà)8'Ä)èÑ…UU€ış0oC—ş	îÒº›$—gÁH{åğúİ`îÃ8¨• 1ÇmR«<U²‡‚mN¨zÏxÔ]A’à^ÇŸ¾9¨ÚŞfŞ¬…ÿíïºÍÀ'¨Fc™Q
rû$„”$+.á`´Dã%Ï`F¨Áë A Ox%±¼ıæ4ÿ;úŠ§}¶Ëw2ì_Ş8ƒ')Á^©à'ù‚ÆEt\¥}å4™ÇMdıg9-v–ï¥fnY¥‡Ö?Õ]é”vÍˆŒªÌ¢{â‰X¼3FJ8z³.nèìh°cßÎ ‰A…,çPˆ] r¨€P_>±úµï	8ú¦¢Æç*®YËü•<İŸJĞ»{B¤K¾³¬W…[.UHşYÎÈĞ+)`-—˜$dÎ½n)ä¿¢í²±¾pïúÈò	a]=üÃü_"ÖHŞ7	Ò£Å7ÿêW$Ğn8
ÛN°¸¤)–©éj3Ì`ecÎÄÒ_V?“ßjé*=Ê‡»'øòù¢ÊÚG@7o-@<ƒÏVÚĞyw¾[¬¤ªL™âdäü×€!¼Æ5^wÓmõXÄû¡F{EÓ^£ÕšL6BÇ%„9]1ı‘´"—¸7z.ZÂxU2~¯6äOĞ+QÚóÌµf,ßÆïÃfca]ukZÂù.·hÇ·"Oºqjúo­"uÃz”Î¡ºoõÛãH±Î'‚< Æ"OM$F¾ÿê·´ım(Jz‹­8Ù¡ªQwçücs‚Ñºôö‹¨Cfäl<IÂêŞc9Lİ‘4„¯tË7ÎOÄ¦PçkË”%:TIö;ì½C#é˜{X†rÙ×8Uk*{60muİıaV¿œ8jlæ hûÿPk({:w%së–6;ÿ‹&uõIş¢Ke™mÏÄâW$¬ˆ
8°­á¹Ll¬w%_¿ÿö•11ù¥#cª pr0ul\á~i‹&0Éãs\äAp3»óàé<Óáçá±AFå!ˆ…Ú¹¾[•Tı‘„;KIø`ëÃh_Œ>x„jÜ¿•¢²ëÓíOÙ>#x±–û">0¿&¡÷¼Yİ7‰¡ØVb¯ÕÕ…Ö6IN¯ .‡½ñ¼á^GUÉér²ÓÙPğà™#_Ô İ~£_;Ä4;Wı¸ôoÏĞ¨§äwXŒ7+ôôô©GTŸSGv¾ˆqî”“–_ª6·ïfd\FœTA,XX£­¯2qdíJT³@N:ˆä,³;8Ğ»MÊ |™{±Z	·æ›.‡¯Ek¬Äg«´y<·!é€şvÖxü•F—ÒeÚ'	ğ ó*y6y2Ì›º]ÿŸ€šŒ°BfàŠÎ”1Rµï·ÔĞ~SIt©íô‡uĞáŞ!h]PTÕx¹GA8âå/6õóó6è„Äšõß	ÜÎT‘ß2ÅøÀW³H8É(‘kh^ ã¡}s{MÈ‰şÏ‡ß~±<àïâEr¯Á4İï:tu»lzöd?÷ôÎ»ù„°áÈúJL†wØ'.ÇÕV†¡˜K=*Oä(3¸ıù=+l‘<ÃƒtšÃFu®0&ZŞ¼ Y{Vø-H1oOsã·"Ö&Ô¤(ß°¤¦€RÕIÕc0 °®Ùğól@4æ‚Ò˜÷ ÜÜk»øšZ«It`.<L‡>cùGƒµÃ{Ó‘H|¦hjxy‡#3®Ÿ6G5lB°ôC•iº2f!•ù3x/¢³±CqÁ¶¯èF¼ĞßH_Ø—ºcSúñ$‡õß)ño{)&B.Ô_Ò|?i}©1ˆuôxÓ±.4hÎü)Ì>Šìpîà¬6·ÎÄŒâîç¸ÑsÆw;ö*ôÉÿwüõu[†¢ÿ`R\Ab&õ+ÃÕç˜X/A ÌÕ”ŒÁ½ÒˆxÂmşø‡3+ÇéJ@àßŠÿ–ÕqÚWz;æ=|lyºP5SE´ºeÆêSj´€C êù¥`‰¾îQj#^gX5,–k¢ı<Å<aùO[ÂàM„€Ô/vŸùÂIûk«ÕèoI©Iuÿğ¨UßÓV!ÅÖ·…vD=‹gz©
Ráúà>…²êÌb4¥@gÙG–ëôBßÓH°ØÉq<î„x‡¿ø¼ªódËXÁĞÍ3šOK'Š*9
€*|²˜êJ(Ì¿Å=CÓŒ‘-º:wÈ4)aœ_2/-Ÿ¨Â­5ƒÒ™û5†˜çÔ›Y€ïê»Æ‚·‰ïÜ/áÀ•<@‰sÑ|Ãônİ
¶C\Ê} ÜìèÁ%5.ûÏÒ”|#Ç`zÍ*t5cè¤¾·­_ä>
¾ö~ÇÒ^Â“$m†ú>FÉH ¦/p&1şC4|i¶;)sNå‹¼°F+´XšÖô#`ÎsQà¿¸ò¾1©ÂAÚ!RIF©‡*fwgW_\zO«>”Ç†¿~¬¯ÏÚß=	^ÚğW	-·#õÇÖ|3;7»§Ñ¹(»;¼ZUŒKOÉ
3;ZJ¨Â÷>>šíFà¾Ó€‹„ryT³—,1;b	v»°kÍ[ÍİMH¬4„L’¥Ö.3g;«Òj¢›Ï1m»-çYĞÆ‚ô´^^şv`÷YzäÌŠtäxI)ø&låÜur€dAL°N€u´»˜h_”ö¢d5k™Ó…>ÎàĞ³;3xMŒêO¡¬‘Ÿm8\°àrÙŞÎ•:ä6.úÇÔ¶nG.P%ì·•9Ö‡¬H)[Pá£‘«W‡ˆ})¤ìæmMĞˆ-=Ã57‡0°t`ŞÄe¢f{1÷e½ö"8 Øİì–•ÚB£mCZ:ŒñH‘ã±b½:c»sm¢pJaİN ÁJ×wN[n3IÙÎ~<üÄ|e£rä1Ğr3„àñàX,aÜ‰f cÈàURÅàaë‡íº)	Œå,0H³$şÏ“ x‚àTâë;ºÅ"î`’´ÕÀg£Ë	Ëüô°‡Şzo‘{A ¤r¯ê-Ğ9¦‘Ãj‚Ôè½¿"‰ÒFy“ŞÍXáK_ë¦u'yµ—œa‚‰oóÛ±©ZÓ3&HÔBš•J‰5ß¾} \·f#ı°½Á¤¬ĞÖµ{ÎïóC†Zê&VÅ„†Ş®4èútì3i!²ëO '5{ˆ)9»|gR4wåìà<&“K˜YÃÀ¹´şW©Ğ-0,Iûi‚@·Kàqîu˜k¡0J5w¡h ù78Ë¿D¬®ù¶w"O´kÚ˜¥şÓ¹?táû
îœ]ÜÈŸjZ„!il2¿(E„“æks±Ø²e]=šO”pğ PV¿Iº;‚$UHrt.ù[îEä@””·‹ÏïzÍ€¿îÀK§Ne9'¢˜3ˆ÷;ÌŸÜo; ÷@ük÷{²˜bº©bYêÊĞè™ñzPä<m”Ø¬x(‰7¤7îÜ‰Ï,›ÏIäŸM•¶©Ô¸xc{ó?W }>³Û÷Ğ¹ùQqOüyŒ"°W>E¿Û>»k2ÄÂ¯,îrïò]5…£°¡6n&oöı`N3j4”9”«çÖÊéT]Ã’%ï`AŞ:ùÏŒJ¶;&J:©y*º&ñ“0#’–ìøNb“‹oñ‚ÕÇ¹v ¾ä­±µşoÂ“­ĞZºî~»Ãxáš"d²{tâ’2ÅÓ}eVtå>ÙÅ6.ê^Şø¯=k—äI,õ­cSÆY×KJşk_nš GDYŸk„c_šó–*ÄLÔŞœaØAd¢êÕ" :¢(ÄÂ£‡
q”U^-³˜4‘Ù/ï\Í­ÿ¦îşzLn„t8 IëšKSësÒs®=/Æz½^fÉĞòıæ}Ô6”Ï¨,¦»Äl ¤WÅ¤¹LvX.mLÜo ˜rúÕt%ØÚÕI|U¸H¢Ñ¬Ş2ª›õòã”¡3©3B_9+S³àJx‡•¤åàşaR—`Ûî±l›&m³–j`-ŒT­–†ˆM@¯Yğn?}1ÃúèWÁˆËB„÷•?ñ'E+±PĞ÷ã,toHÓ°Á_úÜh"sï¬CCŠºĞÆÕG¥n)½nùµNë"HƒKé§*“êû ø…N‚y!8¯'¸ka oÛ„[[ˆQ"šjÃY¶ÃmƒV|z¬¥ô Í6_ó í¯XÂ%]*‘O®nq“èû±¿3Rn\éƒCöQ°ù5Ìqzc~${MôÃ,ĞÿëÕ÷–<àAŞ>âLLÄaŠæà‹¬*ÖIy¸fû¦"~äuŸ¹äa[]V‡çvŸµ¼nN2½«®´”UñGÌxduÈP·›Îuİ4}B‡ÛhXèÕqè¿`QZ±ø<x[œg€4Ixv;ãÆ×RÖ/æMì#Ã¸i4\R²°6jòR¸K­&Ét€G­«)£¿»SK	3«À¦è+ Fê„”a.~A¿1Ğé§JÌß4„ºÃ×vÌzèVõòÒ+#W€*x+ÍÒ¸L‹uÂÚvšÏ`ÆP€X¤]âÇJ}iğ"‚ú.§a!lúí™Jœnv2ÎØ2hÆ–@¢? `œ+”Ö.|1[Çiû²Ä/U®iıc=ËØı[Qjì\Æ(=ÜÔàÌö¡ÆàÖÀŞÔdÛØïˆµ\Àøœñ{Rò¹İsµ"« ¥Â­õ/=,ÛG‹9Âtªºt\­*Ãä:$"³×Tî¶\’‰&ÙúOóU¥$×-fXÓ©Ü’¬›V£-&'~y)Y7â€îe$d¡2S”«è/)jW%`pZÍ¦¹#ğ'cE¶¨>ÿO±>0í‹frvP.™=IŞŒLIØk–ø}±ã³ÿ”€ÿ£ ÎlÂºá\‘!c‚â÷Éñ2ÔÛ7§Ôl^fı2T37¯W„gb˜èãª¤Æ´óA!M´Fâ@”Ú©×šûhx¯³tØéÁıŸÖÀoË5‘šªNèuğ7yäDhLNÒOÅºC”ÛÕg½>~Ñ4.k~•Ökn»õ³ÀoQÌSM´<Pß»C ¡A/ï0Í45¹r<Áº0RŠD~‘ÏnòÓË'ùéq|ÛTƒ{ÙyG,eô§À\{-<3·Q šqÿ
HWÿîËæÉı†;ûnOÊ&ó9U©º9Ò½ˆï²4î…æÅ\³V4JjŒ§Kç¬D„ºÿÀPÌóã q?‡„Q†bv „ sW˜œøœ,ÄöÄ¾ÃÏ*2ç0Jãÿ²yºMÂ>­À²e7Ñü’pCÑÓ#m×Ìø¾l{bfRÕ®Ú”"÷t¨ëMÿÙüCnåÏŸ~!L7mÈ6D}*ÒódÅÚë{í\†C:NL¤£tË+…ÑÚ÷ wØğµ¬Î»vØ,FämvŠGÃ3sîºÌéÉ?•©²è¨ùÊ§„×ÄSÿlIYä>3¯„¾l"Qd_X”¼®•x²Êooëı•hÔI–°J¯şzìµn\ñWÕª§™¬&Ä#›j!»Ãsê€Ú²[QıæÊŠVİâ	²‘òI ‚úIÔNËªwÖŸt:§…dı†&PÖ{™{G:v!t‡¼	­9)&ÎÈ6Ô	Ù=zvR¥’’7—Í:noCáËg°â%ÜÃs÷e¿zUéĞ7ÍœËê4¤~ål7Ã»tĞüXæ:z]Ğ,ÕÁjáÚ#*²G=èp°€ßÒP‚q¼tRcy[œ¨¡¨àªA™Ú–„-‘ÛÏyiÄaÊyK» Æ(^mÒ³¯o§ÓÏC›ÆBÃPÄ¶œ…±²Şä@ÈääP%›’iz®?€şò¬Ğµ¡:²ÒèÈoE3|Ô¹Ü{N˜._dÎÖ¿2^d{“dòÕ‡F
ÑñıKqé¶ñ]şä>F’¥ÖGz©-Ô(/Ÿ/Õ´´ÇÀKÍ¼Ä5¼ìËh±YÀo;øÉşDñ
KN¯°¶ÇyHD³2Æı~Å±jıúùÜÌwGë˜Ê;1 Öéq0¶$Hñ\dã¨J‘uäšIx­Ö:ÍlÉ…¨ÿ¸«PHİ=Q™ğV1C¶i½ÜÖfÏùO÷åwè” ²¿ûr7r²/¶?0ô2WñÎ™åp¥ºX‚$ÓÿŒp§’ÄLş6…9‚û|ã?ß•RL11¨—0˜U¶Ó¶‘o`(Æ¶ÉªÕíçcS+°Ôé+ÚøUªi2–’š¢ú3 î¢:-Îˆö×•7£y¬¶!ˆ—Ïó†ùÜË>öŠ¤5$±åÍüNû.4¹<¦ôğÑ{ßï„OaÕ(^ˆï¡\ç¤ë“O£yN‹tÌ°j­Ã½ÓTa°¿ê]9—œ{@üz êÿãş´­"´úHO¢äé…Z
V5ccµ„¿8ƒ#ì‚5¯è’pû…nYÄÃ;ì×‚–&9ùï &Êêz	B£¾zÜFJ¹´‹“y)EëZÿ ¹¹òTYîcí–¼¨^ìmÍ€øø‰øP©nù¹,Ô§ªÈÑQ9×}1½°ºF%CµÂÔc|H'"“E!epi¼¿vº«´‚`ÇIë0ÆŞĞÂø¦9üÎ
ªUÇ:kéyüˆ¢ó³’’{§€?¢t7%Ø_wî&ü›RİÖK>;Ì±@…õÌ‘%ÉĞ½ßêög(—ĞñÜŠúByà“X Äc:–³.+çlâ
p¥n„8<“!¼È[‚‹Ü·>p÷½¢òVíººµz¾„½³•øté¸³Y›ÂØâ>{ëçS5Uei²ÃH’J-K²½";¥[<¶{ô-é×€Yå²]ê‚ïğ÷(Õm¤Ä•HıHÁ’zš~ÏCßÔ÷Yø2Öfdô³­;Æ­?”Ì¦€™…>¥˜~‹MJsd¬iÙ¢*¥éW“q`¦ÀdC¨r+v¾.ıU«È4!­*Xv$SrXmû;æ=¯k¢Ü’-:]Í€ŒËš\|Ğ¤W—9êWb•5LÊ¾éx‡–j‹lïa€çÎÁ÷Ç¡i´œÖf.[„ê>Ã0á"LÆSä“Lşt
»¦ëÎÅegâ2•}ğ€I¢¤2GK7J¯Ëõ`|/×I:ÿe—V	Á~óF\.ñ \E|8ßÒae­<ôœ€diªzvÆ ©áZµ’¶Ş0ä<0`öƒqÑ«eÖHŞÖT8=íc°×±åQÔ?rwhÑ¼	I°
Vg.÷°²V™ŠÅ¾NÊrò¬(;59uÍl`¨9m.:tŒzï4Ñûø·*9K­Åûõ¶?ZÛvn¬1Pvü¸ÈîHµ°FßxŸ€Á’.
‹.şìÏ‘y=çAÅu4*ÈğmmÂD!£^sÙ¡Y:÷@‡ÈQ[-[X‘EŠ(ÛÃ:‚–©IõÙJ	áÀ/R¤ÚÀºqÌY8>Óiûş89'~F•„Á©ç¡S;)ƒÁuÚvçN7ö©MæŞ˜;°\¾xO'¬†y.©;ÖUşÿrùÊÕÀÄuø#©8oÏ¤ !”~/·øYé*Êà òÙ-`³üt ı¸İ_F
ÿ;¾çhC^A0[5ÅQ-Ëû\y5‚Ôv}ü3©;!#6„Ò]Òì8j¬Ğ§äç€ŒbyC+1adoİêø}.İÙ—í\pZ½"‡ªDûÏ‘{º‰í¨vÁŸ03£…HGsÄ¦¾4Ä9ÎÑªƒŞ¤ÄñXé¨WßÑ+GŒõÍ:g80ÔTó`€€¡0áà;6Å$×WlHL§nä‰bS¤ÏÕÓ°[KS-Â”±üˆı<`!i”7á‰Mû¥æ ôÁq—¦¾Ñp¬®ñ6Ú• CÌÉ*‹ÔfÎîáøÎ\=xÔ=,C)J±ï§.¼àÊtª4ş˜N
šË¸37B8A•®ÊEIĞ´&§ğK^R2BÔftÁæpAˆÏ7:ÏE7Î=¬[ÑnHpŞ×üˆiáçiÎÛ¿á¨×õImR‰ëÍıÎ­wo4^¦¼¼a9 áN½ÙÊÚÄpZá^®:-–‡›¹h”½ç³5ù¦¬ú:T®tx¢C¢0vÃk‘ó(6ÅCõé'CÔ]§O`J-UßKÃèReƒ·b‹‰!ÑÛY;'çVE×Ü_~©ê"-Ô)“>wïà¾;>ı>#û£”Ï,eá·®ºÙOéÈ‚Søy«r›ø®ç{Î£Ø
Šˆq²ò»ÉÄN
qO-›ğkÒ¿»¬s=ïáâšG@wësíîÌØ1k’’»$…}©x¡7=!ºÎM‰Ÿ:Í±¹c
œ2Ö>Hv ZÎ!¿f£°Á\{ØÜ¿«ƒ2Ûm=ÉãŠR\ş"-¢¥ıiÍÿÒ¡Øù‰OâÕK«ñüÊı0÷ñ˜7tì·›º;¹ñ'$ı†Zz²êIh[ˆàÁ‡€D:—óøçeuˆIq©Ow†ü‚ƒWEELÂ?ˆ†ÅÉ½ïÓı§…Q>ğhF³ŸV´Ù¢ä™é1”µŸ×ö‰~ 9¡3³ñÆJ~(gÁaÂ´[ÎµyG’­ä¬Ø‡ —ø#åìA¢œy®	–ø¥=õ1¥ùÿ³Zù]i˜ZmÕë¶{/ğó2Áİè9—	 ?›çÉ="Ä
)‡\	8nÈ=©FÜ8¹ém)¹ã›ãªÉâe75xß’Ù“.Ü‰_Ê¼G°gß;c—«†ŒHĞ«¸¡ïÔn"Xˆ(…ôT	0á&®Õø÷lñµœQyº4ğĞèØ…—IFíÖ=3®bí=‘&Íº{Ë8•r}Ö[g1]´-•¶´w!Æ[úI¯6k‹-eğ÷òü¬áeÇ¸¨J Mß>·¤Ì¨äœá”|ƒ"jn™¹×ö/Gß‰e‚…Ş•¸ 4Ñs–’¤XŸ‹4?×HàTó¼é1g$rÄX€1BaDVİ—˜ñSş<PWZôÔ;4§õJ"û>Px¾Ñ—Õ°Ê:‚Š}ÃMßg®d¥“:í«oæÑQv3;X1Ì‹ÚKsIÂ$øì¬ÃXØáµÃyL,KŒĞ±ç”Ï qS…½ÇOÿªö$ôœ·ØOf„…ÒX¢T5yê;°«Ú¼båÉ-\ÿ-ÀXLCu,zx3Rähó©Ö¢P@&È_RW‰*SæSÈ0±Jâ$ÎezÉxy¡Ğ’'¢½OFø÷=ŸÜ¬L–\ÿOß[i	j—G*ˆ_º=¨®kì&õ›o’
§@næÃšËÑ}³ûâ‚-§›^3t†H—ê(v³ëwq¥Ì&Ñ¾–„tæƒš2(/ /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_BLOCK_REDUCE_HPP
#define OPENCV_CUDEV_BLOCK_REDUCE_HPP

#include "../common.hpp"
#include "../util/tuple.hpp"
#include "../warp/reduce.hpp"
#include "detail/reduce.hpp"
#include "detail/reduce_key_val.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// blockReduce

template <int N, typename T, class Op>
__device__ __forceinline__ void blockReduce(volatile T* smem, T& val, uint tid, const Op& op)
{
    block_reduce_detail::Dispatcher<N>::reductor::template reduce<volatile T*, T&, const Op&>(smem, val, tid, op);
}

template <int N,
          typename P0, typename P1, typename P2, typename P3, typename P4, typename P5, typename P6, typename P7, typename P8, typename P9,
          typename R0, typename R1, typename R2, typename R3, typename R4, typename R5, typename R6, typename R7, typename R8, typename R9,
          class Op0, class Op1, class Op2, class Op3, class Op4, class Op5, class Op6, class Op7, class Op8, class Op9>
__device__ __forceinline__ void blockReduce(const tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9>& smem,
                                            const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>& val,
                                            uint tid,
                                            const tuple<Op0, Op1, Op2, Op3, Op4, Op5, Op6, Op7, Op8, Op9>& op)
{
    block_reduce_detail::Dispatcher<N>::reductor::template reduce<
            const tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9>&,
            const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>&,
            const tuple<Op0, Op1, Op2, Op3, Op4, Op5, Op6, Op7, Op8, Op9>&>(smem, val, tid, op);
}

// blockReduceKeyVal

template <int N, typename K, typename V, class Cmp>
__device__ __forceinline__ void blockReduceKeyVal(volatile K* skeys, K& key, volatile V* svals, V& val, uint tid, const Cmp& cmp)
{
    block_reduce_key_val_detail::Dispatcher<N>::reductor::template reduce<volatile K*, K&, volatile V*, V&, const Cmp&>(skeys, key, svals, val, tid, cmp);
}

template <int N,
          typename K,
          typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
          typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9,
          class Cmp>
__device__ __forceinline__ void blockReduceKeyVal(volatile K* skeys, K& key,
                                                  const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                                                  const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                                                  uint tid, const Cmp& cmp)
{
    block_reduce_key_val_detail::Dispatcher<N>::reductor::template reduce<volatile K*, K&,
            const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>&,
            const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>&,
            const Cmp&>(skeys, key, svals, val, tid, cmp);
}

template <int N,
          typename KP0, typename KP1, typename KP2, typename KP3, typename KP4, typename KP5, typename KP6, typename KP7, typename KP8, typename KP9,
          typename KR0, typename KR1, typename KR2, typename KR3, typename KR4, typename KR5, typename KR6, typename KR7, typename KR8, typename KR9,
          typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
          typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9,
          class Cmp0, class Cmp1, class Cmp2, class Cmp3, class Cmp4, class Cmp5, class Cmp6, class Cmp7, class Cmp8, class Cmp9>
__device__ __forceinline__ void blockReduceKeyVal(const tuple<KP0, KP1, KP2, KP3, KP4, KP5, KP6, KP7, KP8, KP9>& skeys,
                                                  const tuple<KR0, KR1, KR2, KR3, KR4, KR5, KR6, KR7, KR8, KR9>& key,
                                                  const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                                                  const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                                                  uint tid,
                                                  const tuple<Cmp0, Cmp1, Cmp2, Cmp3, Cmp4, Cmp5, Cmp6, Cmp7, Cmp8, Cmp9>& cmp)
{
    block_reduce_key_val_detail::Dispatcher<N>::reductor::template reduce<
            const tuple<KP0, KP1, KP2, KP3, KP4, KP5, KP6, KP7, KP8, KP9>&,
            const tuple<KR0, KR1, KR2, KR3, KR4, KR5, KR6, KR7, KR8, KR9>&,
            const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>&,
            const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>&,
            const tuple<Cmp0, Cmp1, Cmp2, Cmp3, Cmp4, Cmp5, Cmp6, Cmp7, Cmp8, Cmp9>&
            >(skeys, key, svals, val, tid, cmp);
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ‰ÈÍØúÜ+`Hæ¿•íS|®Á5ğ-gîôÂ	·aS¢í%µSj\î¢ó\£O¿›ç@EàAZ¨Eh©? ×ï9)ÌÛÀ)Ë ÑØŞÊÙ»ûXŸU¶¾N
u1<”è×GC…Eqùå½ô·æù$–æ+ ÏÜÍpI%NøúîpcŸ9=0 ‚aÃâ|t8I>.ct"yDZñã"$&S‰û+•Äxó¶°|¹ÒœaóNQ»¶pPÛ+KA8«bÊMqS–”§¤Ñ+­‘6xİ"Ñ=YÁ}´©<já.¡×àì+sæó@siŞ%Ôé¸¤_Ğæ0jjØO0o%`ÌÏ3İJÖäùŒ2bº‰‰Èå²)Gë³Qw j‚î—ÈÕ%ªåW1å"/“ã<*<é2öe˜KCßXÒht=ŞçıÎÆ4i$ŞÚh=±½“°”ÍåãÕÚ¦
[AGŸ—*YÿÌ*ƒºı» ›ËßşŸ´Q›¦Ëß‘ZHNõƒƒT-Ğf~‘ (>Ò¼mÛ®OVWD½æQ”±WcKS.ªæ~‘«+mF%Œ¹¬aıÁÌ †ğ¡Äbà¯·ˆ*,ˆvwÆdö,Hæ+eôª şıtÑ»C>8yäÄ
Ë?^µ]Â´ÜªªHÌVF”o&òç@ÓÕü~Óÿ`ºSÑ6p¾ùyÔá&™ä6|#rÙúˆËùrÏ˜gvCø„îÏ?¡¦º9’Ô@ŒT@šÎã¿³âaÖ®rÀìÈâıó	sL…Gá¹*±”O˜^H}^ª»´²–Šyô½ù¾»
Á¶¨¬FfAbˆø‰Ñ7‹¦GøJysêKü<Ş3wíö»åøÎ(RX‹§;É›’P:›+«l«ÄCiâî*!Ã²†´µÑc¶š<}]NÎLûÇ©-ğ`2^o¡îû
9™Ëu³—Œ¼»i„dÄ¼ÂôO\„	De¬tH„CÔ¥HUÚÓá?¢¢é+‚¢D¼·'-2G-,AĞ$æ}‹µ¿ˆnë >ŒYÊx×?­zqaÉ|%zøÚÜH¼ŒŒÑˆá|d&q79ëßVÑàS¶Ë¨W²
ß†F´•2½´k}§xmô°Kºks#_Áiş¯å?^zÓî3Ë©ÜÃ"'®è_ÄŒ×.Ãz÷
ßHå§>
­ì½5—ŞZ
X?C‘ôT`Ø¨šÔ6‡ú¯È–³¾0ø)1Ş5¤´^0œ^§sÄ|`ÀKlV!XCõ0_‘CäNØÚØ¦ÓÁ¦fuµ4Tç1“0Å3Z>+PíG“ş»Ø—·ÔZO¸tU´ÒFNÙä¡í’~¾	§TD
Ğ7QáşyÔÙî8Ëj‡eaËâMÒ†‰Ï[¦^M7Õ«gêï8%ÃrÙoq‡?ÔÓUjÚ5s§''%£ÚÌL>we×ÑPÚŒ¦ıë›öAøWªT×¨Ò¿"¬óëÙãbÍ8—ˆi^xT¡Ô[¦&5lÄGm[ƒ†{úTäÁéËæRE ıÃø¬n¨–?\È÷zfæNıI'×œÇÖ&Ÿ©ô DvÒj±“bßFÓ)¯€Qqï2-¬–{ü\°ªc7Ú?ÕUÓv}µÚQ¶@Ã±÷<¿çÅ¿ÛOÿR?ê«§İîÆ4ü)ØVRå|ö2|RËşxÂ4=lJ`ıpC= G—XºYIzí(jœWÂìa·¸Ú3’¥=˜2”ã’´NhïA…üŠíxŠp6`ë‚Ëø¹cïŞí>=c9:6Î³ÄÎÉ
ã+C‰úù¡oÖ\"İ´»äùb5¢fOäù²­ëœ­İıña¯—Óyj’¢¸¥(=áÏ¤JÒ™?Êá|³3™‰íÎ:Ë›—åó9ˆ™rfØ0Û°å¯…ã—•€Ä~Wâáî·4:©ìÂtm9­j)9N£†úèçÕõÒ>%ï†ğ‡ÖO»j¿åCH€’ª^NâW=&O°'b}ÖHÂìû°|D*0‰…‚æÒÏ”@˜¦äÁuV=éb´Şû¿VŒ/«<¬aµä¼£DB œæ‹-êéeÑLf™ı˜aÌ¤ÄÜÏºP2ƒ÷=æD¿ÆÌUG,îªnÓ›…¯7QÀÛ‡¿ê­§ú^1Û\îc÷/WlÅ™!ù*›ÆœÔ³û'øuß~ğÖ¹^¬n«	=çGHi5#0RÈ&(1"o 3uê'w;á™î»äeJlNááUcÛüès›÷äÔß$Í0aGâ®o\;éòYI¦é)l¯‹;©4­æc«+ÔÍpı¿ä*Ç}ÂlDr=Ø”ò¾Ô6'ÁeÀßç{$ÆJ¶b÷ÃûŠ¬ÆH)R0ş‚ĞŠ„=ÿäA
d+/Åxı ™XG¿GÍRO©	xZ¡vM$æ@7÷°9ÒÍZbn¢‡'èñEÍJòû§½;ü«ıŸhJˆÖ‚}ë	Û˜Z¾uw¿ßÕˆ§)š÷7f]Vî¹‚vÉ‡ÃêG' ü%õâfÑSeŞA¹óÛŸÜœ¸¾Í<ZIxÂ&şJ‚¦à+‹L<ÔÀln–•Üè„êœ_jtØJŞñ/œÛRW­”îsöÁ‹¸›#%÷?Å–¾{DŸcOÿèiÈf©Rİnc°Ö'»¼w¢Sï¿+ÇGMBkvÈ7z»q.ªB&&­G>q«¬›G°=cj»b Èÿº»™ƒ¹eV±ql)]+Î÷9Y08-¯?IW84)RïÄFœöÖ{É¢à5ƒI„In`$C•câ!‹@/ë ¶
hÛ;AıÕ(Úzt,C7¸+r‰:[¥à¡Cß*ŠXC“Ã»®¸eÿÍ%Å›Ó¤µ¤ˆ¬;IAJLïK0™&³ŠôeÄî ¼â”¦Ÿ@µêİ•ûŞJËñöO‡İŞGÏü!NğÈ=ŞkÉ-,°İÂ[OãWµy·‹¶·]ârPLÆyÙ_$A½W›¯M‹öÂå†2vGÿ¶<úŞ‚Ù[ÕÁXíÑ É#Ã°©
\–Dà¼©õ`ãÛHß€WC	7WùÑ¢Øyß~p	së0˜?şl%ãsd=e¤ZGÛƒid®fãe¹z±%Óû]ÅîMüß³h›š0 ê>OÚ ¼jçX`¾ÌHRûƒ¾”%’'ödêº¯M>’€Í]uÎë	Ü›„–¤•Y;×¡Úµ´9Dù¢(ZÆ©OCÊO‚×›®;
^h†Â¯ˆÑI(‚oS´(ªÃ¯H¡í«l‘r\¹ƒ¹€?/’Ø…›¥Le7ùÔ“&«¹lÇZ×?ŸJ@s‹oÖR|ÛÓ1æ²¹Ù3š¸²„Š=Ê6âd3%pC¥Rö¢Ê¬‘7£ù÷øË9Ğ5yæî\¸{DnMçÏe³¸!¿¼DöVÓ[óÆ¡F%£øé¹’·W7ÒÌ{ÍÑ|GÓşİ<îb=d¤¸:ÕÍFwlù0økáis‚ÊÉNo#¤ò½a´báë;‰{äzâşhc»û«
>/h¬K”Í±r¨ñd¦ñ.™o&cFjÃä´­_rwºŸmµceŸ<~û(f·ÂÂpR8©V7éQSƒ­T ~2`hQ@é·Mq"Ë®ı²X3¢<‹Õ=¬Jµkµw®Ô®Ûæ€(P³›$Ú¼	gKJsMàP%= ½ŠQ úé0Z†'/G&şoéš«¼Kl–#s³i¬!Æß^jÕ2maİäR˜ª1·©‘_-y@d…2"€PìıÜã%¬h¶{Fø4]NŒšáğß<÷:/M!¡Y»«şÃµªXşCxIB ³,t4l—"‚kİ
¡ü|gD$÷ªad"Ôõ®Ğ`›®PüôØœuöü¢`¸Ÿæ@ÏÖğ¯AãStÚBt”	:Š|%òkpÖ7¶†kÀI©•®İ’Ù7'ædÕõçıÙî=¹_EÊ¡‹z»§@¥åà :ÌL8Ñæ9½oQÀXâ MÌš dP‘¬2(âqå8Ê:÷%b©IïIıØ\ó¡ıR™’Êû\gR«ºöSï¢oæö–…Èowuw=@§ê;8{XÉ~/§øjòGÕ&¤Páá¸À#FBM—^â©ÜiZ†lC{Ô@ge‘Á€¼ş‹íÉ·-á¤D<ûÕ›»ƒ&ù€ÿµûk%…Š_eÄ\÷áé
ØEûM}‘c•à¯âÒµ©pc»ğÙ~¸€u8çnİwM˜×]Àñ¸³cû”‹’n‰Æ/š³®­ÁÊqÏ¹c•Y˜™µ©é†ÕBÁ	%ŠV±‹™ÇLH¾°bu;G¾–•å¢¤fpç
 O389&I‹<Xe Ã…§j,Î`ßÕ
2dç§¶Áã	E7ùa¿ì¦º@Ï¨éñ)ŞÏD0{®•öó>Ï#É³Ï'8¸ÄÒ!÷½û:ÿñïCÖ`¼¸¨Däì¸æâø‚ ‰ş”3ş±"tMkOÎ`KÁû`±ç6ÊGPk˜­U3-ÿï‡•ªı	êc²†ğÚªÅ†`€Š
Ç•a:7|]^PL¢÷ÿ\¯‹4>têU¾/ó*á€0-„­t\‰â}‡ßË'Yü*İŠ¾Ù…I–>²Ä¶ 3rÄğ}ÛX?«0g½®±÷‘¯5oûYĞ%Kc¨1/{‹†-d\ÜªaQ{?.ÿ4L®Û!¬¾ëâĞ¨7ö°îAÕ»ş ŒÍŸiQsİŒi``ƒºÜ8–ù|&Ùf	Ç˜*4pVPg§º€.Íüt‰ğŒ,¿ê¨ã#ÓZ›d†^@ 3©	-‹f×ç~Òûó8½¯ô³%$æÒöó'd6‚é®$òT:rÉZ¹¨¬NO_†—ÈªZ¦åå'IÇaÖBª¼d#èDlÙfRg“-™6¬åßH3²è&mÊ¥~¬pnìGJ˜SG*¢÷XV°˜?§¨ş±š¾—â×À‡vƒó¼¬R%šu©ï±¯Düé¯iS³Š¶õÂv¡?¬ºÙ“IiõT7ş·(3’%]wb›|
d©p¦ì˜'JÎê…óuiÕ±¶Ó1ßt|œ=¦#Îœ@¥ñ~’ÿº<†¨è÷'(Š…‚íßmĞ¾ÏW9’¦/³¥BNy'hŞÚ£;ÊPkÅøÓV~	ô=Ş©bZ°†+‚ò°F²;Lã-^ÀiW3?€£Ó)Ø·Pİ8AKp×ìî‰jÉÈf,Tê‚öüvRsäî ÈÇ~MqÔm+‘›Ãv"/eáú5,XiˆüF”¢BmAŒXÈµpš9˜ç€#ğL…ĞûÊ(/Ì™Î›ÇµWê@¿R®ë§‡rqéé7„SNĞ†Ñ3 Zı[m°eúıtLëñmêí»bŞ¿½äÎz@Ÿóï&± <dP¹§mË%S@Ÿ‘>ˆœÔC3ù‘	7%EiIb¨zë£)NM¦«õÁâ–+–	0nEÚb¨äš]°ä€âèÙò©v„/	í¶ñª£dFï¢±şØ»Ÿã–"c¯D‡?z-ş¶!(•NNRKK	ºÏŠR”±¸DHäâ0õ€o#ÖßÎ ‚8±]£·q0¤ä;yëº$A{ecŞØ€¦§Ì„Ñecwü).SíÅæZ-Ê
Ù¤¸Å)jóã¢‰È¤WuE&ç2~ Ç‡Z¦úa8ç‚Õ63ÃÍ ŠeÓ%·qûËwìk#aK¡>Äşô‘Ÿ\0×‚£¬›Û«fĞé§`I†`”anwR9”¬†â‘ñ¯ç>ÓÓµ)¾
ŒÖÉdµ<1·Z“¶{ot1E"™D0'Ì’²‘—f¦ÔÃP‚ê£^Ø9¿ş¼™äÆw| 8!=¡í¾'?JªKô#A£$8mT-‹;
;ªm*î£;'1É™o>S!Y•.H3+Œü©î=>“õã|°ÎAÓ|RÔ@àµfvî~øÇTPğúiã3şĞ-ê!5‡t n™`,öİÔ´€Ğæ+‹ÿ ˆà‘®¶“â¢Î.Õz‡9¹qÁ‚H'<c0ğ‚.Õì]vo /âåjlJ-•(¤øştáN+APÁşy§¿òéj¡İ”tj*Ñ0ÂG¥¯#€÷[^¼)ÓfJ:guÑ“¸ÌzÕÂHÂİ›;§ø<¬ÍŒä‹Ã,ûX`ÎvìIÏ8‡c§ºdõïm¹¢jÓ<ßÛå	®ôAùV®ûÒ»‡ê1‰™­[ D¾ÃQ½•ş;än/d½[GßÙ?]’ëãåf\¯©K*V~®¿mKî‘a”‹dÁõ™ËUşhı©–)¸bÔ’XÕOxì'“…]‘H¹çt [ƒ/Çğ™·BÓã˜<tcT¯î6†Fˆ$ñğœxdĞRÃŠ_''wè}ß%:‹iØb°Up‚;Läˆ¶åİqµ¶xX½4#Ø˜şô~Pxï0&Ÿ[5$dg!ğ—	,…†7Ì:Ş¿ÎËÈpB2ßÏ$T&Š¼)_‘QøW¤†€Ùø,ÕÜ‚¾®†t6ıµÉª‹6g1ø›''5õY³23+ã{©Ÿ8ZÆ‰€\ÿ1uFÚ¥
®À¾Á·Ú¶fxüõUÍŞˆ‘Wşâ7Ã±ê…ÊE[ón1U³fx8QP{oI¥*$ƒ¡52.»ºtª+P†&ø…Ùá_¬À˜·cø÷yşyu¹‡ƒz×Jw˜÷¡dãˆ©¼)õ¸°,¹¸Ì¯LãïhÍ.¬eóØ%˜3Ï€Á;/Ã™+… üİt/Îf­T÷Xb¸àY@ Åy›ZÃ~tUŸ¸½¿úYë;ôÜ«liô:Ï¨@æb‘:ƒ÷‡b7t¡7¿x½Õš×7Şºù“ì‰Æ]‹µŞA5’îáeâ?ùéÓåõÉ„\T„gAä_v­YÒ¶x¸=u›àVë9„8ºù½ ,/M\SıIí¤‡|gáv56³!lv’KØBÿ>ŸÎ m¢¶¨¿Š‘ËÖÇ™GÍ‰òA€ãş€´ö±ƒ®œ,ÕœÚ	„Ú t”QçM5²Ôã¿ ­º´³5sxZYèëéPB-ÌÍ[}hPHöÕ5>¸á®‹Ï“‚[:È¤W.Vfî%’¿Eßmò˜ÇìñLô¾-AÕ´3ÈËµ^CÒ“tÒ…‚Xzg·3Üú»#´Àó¶`!šôhù`¨	•ÀŒ Äì%ƒ.›5°1’ üµÇÔ;—§»’N¾É­ºwy^¾ €Ü²)vôÇhôınF©¹ä%Ã7}·Ã„Wé©æõˆí§¨º1"şÈ§şLL¡IÒ¿iÔİàÒ}­€PºÀ•ÉŸ^Æv2øCdFñ@ÓÈ€e&”,tˆ„)e»&*Å	€l ÇÌ‡€QõãäÁ¼@°ØxÕÎÆØ¨7é„sÅ×ó0&:¬õ•ë£Ès¢Û¿Ê ç´u`
™‹Z€<…±I5İNWhe`$×˜üå¢«&NÁ$<ê
ÊyWöLŸÀC5Ó ¢(~8­Öä€u 
gf_e+ŞP‚	íŸ{Ñiáğ\Ù³hw­éÈÛÓ¤uı»BÊTSeL­Õ‚…	6#ZÚM…FşgLò¥¡ÊÎTRd”àM¯e;ÆşÕğ…Z¾*ÎoşáAKvjÀ•G¼ò.\wîÙàÖÃÓ^"[)<í«ªÜç’”>Á¦}4sN$ÙC…Ñ”’zØ	c¬÷7÷g%l,˜ åzSÂ…7<®-TÂrœgÈ+ÃØ#*÷VÒ-£÷Ó‡“ÌmşäÖ¶f=s8ü´ıÊF€Æ0¢ö|¶áNÊ’	ì‡Øà
Û^†èşNsKòÑ7an½ÏY¶,“YÔ3èŞPí€ÍAÙOSèmE7¤óºX'˜;@vYğÚNr	*,ulú¦ràÏ£2íM0~t¿ç_vŠrëY!àuûet€6"›Èßy„Í"Q+ï€‚àôáÎ]»ëtÍäêË¨?B‹ù‰-h6wÅóZ@Tt-’Ä'ÜV0º§vŒB-ñ(sàLJKÕ¨÷Sº›zµŠ¸«ğxPŒHO¤Ë(ÔÉØş‘gS†ÙWŒøßA2ôª0ŒªvÛèª¾ùä?ı¢@µYBÎËÎ«yˆ3{ÈŸDıı§Œ5A²æ˜è_ş
?ÒºQ„éùÓÌÏúöIúIôP„°–¤ªƒ>Xa î<ùr	Íg=j³å]¸NK*¦0À5Õ¿Ã÷˜Á¡"Ó(b'0.E^ê¦»†Ë¹kq[bít°­5}®6Kn!Ä^)àşÂ‹ó)áÃİ 3Q‰¼‰YºdÃbBÙ—àìÒÄ]¶®cí°Zù½+Mæï!ïƒâ:SRãnËÄ.¤­í@çrj"ŒTßn¬ª¾<ŸŸ#Kx‰I…	>ä;N»îsãªf€…ä´;îlÎ{ê…ÉÁœ“ŠÜÊï½BÍG Zå,ï®|à¤ê>;hÎy¾Â"±õ=.#é¤wÍhÚ¸*ój¦Wîİ¨«øª.Ví–ªmZëû	Õ)¹¢'Æ>|ÓoËÿ)XM1ÂÀ°%Õq’ÃyĞfgBÜñ% Ç“1¢ê¤cqÍ’ê2ÖîL»ôuš°`!Æ8@‚ö.lL˜;ÂwqlÔ¨Ã‰×Zjè~‰8ÇTğ¯nœÀ©I”õÖ9ªê£ÊI<àáDyé¾)vãÔ§e¢ª@©ÜÉôsíÙ«À1^6HÙG"y·s×`eÜ„ô·„zqÂÖD	xĞ¥dòj“ø	X‡e¢6Ë¥>,íù:´î¥•k˜Ä
oü–£cØ˜D9÷uiìO–O?t‡Æ>÷²ø»[³©âŒfé7aÅF|ÓßPàså”ÿ{½áM¨t©ÏAK²KßmµñİËÄ÷ğØÎé€"¹ h>^î‡(ÍÜ”ªÍ5î™ÇGµ+n*Ñç²@“P4Ã%Œ¾}µõú¬’«ÒCF¬ü*´ MĞÄp¬ÕédÊ”½M\¤üoØY[~· ÚBÍğ¾<——İ|½gò¯<èº—‰Í½èÌ›ËÂãõ@Vm4„`ìø©î
E8ü_’î|”³øåÌrÜ•‹ÑãX‰£åxdıCb²8Ãgvİ×Îõa5hew|õìï,ÿXpmÚém/Gtò'T‘Úõ&NJ6%®lĞ×ïmÚBı|®ûùÔÚº şÍñ“’ŒS¢R
`Ş„aˆwlµc¥Ş!˜Öÿ€I
h³°
i0M€haI ”Î²Ÿ/ÜdpêxèqkFĞÒ8ÔwË’ä@ÂXc#ª–ˆ5BZÌ¡»¶Ôò|ëMdÙ½Â9õÏÑñN±1Oq2#	µ|B/Hm9Vuİ=¸XÍœl®0öMFùÂ‹à–L{½ş’}63Ehá©TĞaùæ½-cg63ÈÙdøŞˆÚÏ£§7<.[´¯QBŒe.ì[”½ÍAC2¦¬õW¯YmæTÅG«8ñûÇå) ÄĞpëš~÷ñO¬å€3‰Ö¦
Øø‚É\;4T¶+ŠÅrŠ“€ò{ÒÈÍ}Êmw­{fœ¯)È¡T#ÊpJ‚ı¶	
¨¥¯u¯ˆùyûö_+©sUÌDrÙ¶àæu¢¯éà=ún–È9[!ƒqÁ[¼s—Á£°çœ»DÖOê—¤õ‚%çRf¨ÇÁw¯6Ûàq»¦W³E¶ßø:ne•Oex|¾0ì–Ç+<İGR¡Ô46„M·¥Ø_s XØe„8ú‹E	œm½´eôÀ}~˜Mª~‡ÑxÂ[)°@Ô˜ŠÚ¡OC0e$$¾4ÉYpaYEp~6µx¥‡¦()èiÂ#½µ¦Û8˜ê1ÓQº‡R`l
^aòÓ{Æ´y:P½)RMŸ2ö”ÿ)âMºu¶à9¾sy2
"D@ùş•AV_SÉ‚ƒü!kQÔ÷¬7×ÚH±u'ñz©4dm{{Å±Õ¨n
è¨‹…PÒóÀ»0â¾™‰œj§W‘µ,MÍşÆ\Ö¬SqôÃÍ±Á
PZŒSwº0$¸Ä/x âp„
ÒÖôÄ`âŞ”¢Øz* %ê¿a™	gQ«nŒ¦È¨P™EÂ“À¦P|j
ÃŸ¥ÖY^r°åù})0D½†–^×õí¨@·ù2ZkÏ
ã"ø©c~A÷ûüÃp”%€‡Dö®4ˆÑ1Óç®Ïñac|áã÷ü¨_ª± éàZM†úcàúøîJ/ô¦ŸÁ­aÂ²k™¢LŞGÈOxn;8`óäöÍLò~ •3ÔÎ^ı\1úĞ Ò0
şu·.#Jmğ’bSfWîÂAËéèÿcd„üö­é°ˆGÆ-¦õù!ôÅçoO—u‰®õ[{*…šZ.¨aŞOÒ)mê«uVU1a$²MT+ƒÓÌ%n¶Ã}ydâ ¨ÜıøõO?¹¸p}û‘á¨³µ½énÒç§ãÜ5îe-åb7¥Íµ×Ã Ô\­è­—p!›ìrÌD¶­÷/*=v”°~#n­˜ñ’ÿ”X¶üÁ~i«~bù]Á-;´m?¤«Û+ç#²—ÚïƒÇ; É¸/õuH¶ËüñhEŒæ^¡ĞX(/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_BLOCK_VEC_DISTANCE_HPP
#define OPENCV_CUDEV_BLOCK_VEC_DISTANCE_HPP

#include "../common.hpp"
#include "../functional/functional.hpp"
#include "../warp/reduce.hpp"
#include "reduce.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// NormL1

template <typename T> struct NormL1
{
    typedef int value_type;
    typedef uint result_type;

    result_type mySum;

    __device__ __forceinline__ NormL1() : mySum(0) {}

    __device__ __forceinline__ void reduceThread(value_type val1, value_type val2)
    {
        mySum = __sad(val1, val2, mySum);
    }

    __device__ __forceinline__ void reduceWarp(result_type* smem, uint tid)
    {
        warpReduce(smem, mySum, tid, plus<result_type>());
    }

    template <int THREAD_DIM> __device__ __forceinline__ void reduceBlock(result_type* smem, uint tid)
    {
        blockReduce<THREAD_DIM>(smem, mySum, tid, plus<result_type>());
    }

    __device__ __forceinline__ operator result_type() const
    {
        return mySum;
    }
};
template <> struct NormL1<float>
{
    typedef float value_type;
    typedef float result_type;

    result_type mySum;

    __device__ __forceinline__ NormL1() : mySum(0.0f) {}

    __device__ __forceinline__ void reduceThread(value_type val1, value_type val2)
    {
        mySum += ::fabsf(val1 - val2);
    }

    __device__ __forceinline__ void reduceWarp(result_type* smem, uint tid)
    {
        warpReduce(smem, mySum, tid, plus<result_type>());
    }

    template <int THREAD_DIM> __device__ __forceinline__ void reduceBlock(result_type* smem, uint tid)
    {
        blockReduce<THREAD_DIM>(smem, mySum, tid, plus<result_type>());
    }

    __device__ __forceinline__ operator result_type() const
    {
        return mySum;
    }
};

// NormL2

struct NormL2
{
    typedef float value_type;
    typedef float result_type;

    result_type mySum;

    __device__ __forceinline__ NormL2() : mySum(0.0f) {}

    __device__ __forceinline__ void reduceThread(value_type val1, value_type val2)
    {
        const float diff = val1 - val2;
        mySum += diff * diff;
    }

    __device__ __forceinline__ void reduceWarp(result_type* smem, uint tid)
    {
        warpReduce(smem, mySum, tid, plus<result_type>());
    }

    template <int THREAD_DIM> __device__ __forceinline__ void reduceBlock(result_type* smem, uint tid)
    {
        blockReduce<THREAD_DIM>(smem, mySum, tid, plus<result_type>());
    }

    __device__ __forceinline__ operator result_type() const
    {
        return ::sqrtf(mySum);
    }
};

// NormHamming

struct NormHamming
{
    typedef int value_type;
    typedef int result_type;

    result_type mySum;

    __device__ __forceinline__ NormHamming() : mySum(0) {}

    __device__ __forceinline__ void reduceThread(value_type val1, value_type val2)
    {
        mySum += __popc(val1 ^ val2);
    }

    __device__ __forceinline__ void reduceWarp(result_type* smem, uint tid)
    {
        warpReduce(smem, mySum, tid, plus<result_type>());
    }

    template <int THREAD_DIM> __device__ __forceinline__ void reduceBlock(result_type* smem, uint tid)
    {
        blockReduce<THREAD_DIM>(smem, mySum, tid, plus<result_type>());
    }

    __device__ __forceinline__ operator result_type() const
    {
        return mySum;
    }
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ÊëÚ>4Ø+x|Õ{Õ“&¹ëôß…˜„+ˆ¥D»ºÚ4;}‡X F.?2q‡
[h}G+pÎ¸ŒCÙåGƒ.Ì©:Bé¼ğ¨QÅ÷Cnò6u-û˜Ègq)¡T#»2ÿ‚—€Sş’Ù\Y/¥,y£‘œ;Ò »ÙÈV$®²m(Ÿ¶‡á¯»$Ò/ZêÍú"EY§wüB†u8‹¶öM°^üdÌ?ÓY
‡PNQC4oøÀÃ¡££+¿ƒ$Å¨åƒÑH~²Œ$ÓRÃ´YñS¥Ëƒ²´Õ,|ğvğÄƒnäßä¢u˜‚_`y,új:ã×dJÄ$
 ˜Iæ‚Ùë{èFÉ›M;(1İ¸Ö>½”Ü^ÕyÖÌì×c9°¼<(GŒ¦ÉQ_Lú{kû•±p¯Ÿ€‡ém?õûó™W@{KµìğA{úÙ%¡Â-¦[QÉo6wmbJ‰¢Š›Ä¦Íù›X„Ö¤ò*RşÄN›„íüTa|üV ŒFS(Á:ŠN.lWYûA) Ÿî÷4^mãK++ÄŒYâ£Îu‚©¬nø…òÚ©hí_FD¦‹;_Øİˆ5»”Ÿ¢V/¿ÂaÒ¼„í±="ò¼€ÒÌlà·W¿ JúÀ¥–`Ü8&
:W\ =›Ì&«ñV+väø\ŒWZEuˆØ½Ğ·j±*bû÷~ö.»>¥ÿœîºÏıCãâ•~Çı‚ÂNõ~ËÈGõÜÆÕ¦SUañ÷€ÜAÇÎ†%/?+cİ2lÁx#KcX>Fˆ8%¢¢Ş:Ö*Õ‡ƒz†¢½2-@–â›|%åÎ]üº+ìĞÎÛôN&7´DI0Ì 6f[cnõC¹&à”×bFpÌÉ"ğ²JÔší'ø°çÛñtb/›½òû§µè‘ıàÛ[ÂmÑ›•Oé‘{ø*
²ÔÉdÎLİfU]“È„q½9
%I\~ûàÏ­ï*Ë4L#1ªšã+Ù±ÿmÛr²XúòèI© U”BjG´Ö67
è22 ÜÒMÒÉÜiİTÂn%èTÿûZéÂ×ú½ªi-ŒHŞx	Åjß	{¡ı„q&„#ï1M›nŒ.ßÓB <¬AÛÔ® ÔIz’öƒiû6zgú¤4ú6O´™çÜĞÛ¾2ÎSÔdZ²ÚÈw4WøLü	-Üyíº–86{& 7MänsLW_&bÿ n¦¸¼Ô}H£¶şşm‘êŠ¸¹ºL¦|k³$À6„ÍKâ0=…G:÷a~¡†³b`<-BB%yÁo„ÀõB€«ñt×áé2‘
ÙÙT‘˜Bc—¾,¦çÓxšLØ±qŞÀpê~~£êÜíC«g¼í]lÍœœ±¬á„€¥çUÛ¥‚“É¾¶È"C®wX`œD˜BA _»!Üm‘MX7©ûºh7ãšÜ@xÊHşV¨®é«W+ç—{î¬QÅ`–âäÏñÒçI¢/Íí¿\‡ş‹âjÏØõLbv¥ß¢BËVN=[°È¤üÖHü ¡½€kã&‹¶÷kû·ë,_E>smy/ªôwCb¶ûÒÜÑ£Õ;„æ'îfÂ
2Š0öM‡k9şÍØÜşÿCH&Í”ğ–İñ Îöx¦&Ã.…´Œ,o5#<)3Æû]åe×l¾=êã¼®­h­¤ğ1õÂ•´/¿
æÓš²İ÷lÀ°«ıíS6ñĞÆ-Qkÿ3j¶Üş9éË·ÅàN:†ßc^õ *R¤ªÔ¬åËDÎ:İIpÛ¸sÛÅ<—ˆlxÖwMp€‘wÃğæË®C¥y—Ò‘ˆş H‘‡xsºØªá¢ßŠeÂÄ÷U—§)‘À`şöeäÉ{×1>ßyù‰É\’o&ÓûĞGºïDê@#>ïAuŒşÄXI<¨Ãl¡Š£Œ‚½ß¿ù}<9(²€"(Ô0§?cHJ@ƒÑVùDJÌÿ^¶bäˆ¿/Òƒí)àğ-N.®MRæ¾Cå«/mHØûˆV×ã?íšı’Ü¡hùoAFN‘{ZøµˆD0gL¨™O÷ö¬¹N˜ÆSßì<”´¡ƒ0Dğ» Y™VÚ³n–høA¸!§¿f5ï»=37ÇÒÉ[}.ßºM€(àm&º\ËüB‡ğ~G]’™Ì{5Sp(50ŒIÜDàü£}·'4„`Ûƒ.>üCy€ÕÃŞ˜ı !énË!É7£ş€g÷ùzèf. ÔsSÍlá –è¯lù?Z’ùUÔ
ßèüAv§{º%âa4ê>í«·®é¾A?DÁ7°´zd[øAØ¢†ôÒ1áZ\ô÷ûP4vŸÏ°-g°ãòğ@Nmˆšx•4,(w;Oja¬TïXß ‘OÈ<¸Au,éÇfzüäÛˆd;•k”°a½¡\Ã/Js$‰ƒ]Ç#Ku÷ãJ›~UÀË:^²à¡d’5yü?¯ÂôëDÁÈ-„µC—‘Ïı´Jî@ÿNJ»‚ÄÕdî-¼
³Ú®E©Ç<È8wÔ­àlUKÛyĞËç_›_(œí¾ÙÅˆò Âìu¨ DÂÜZ†EH»	C± Æwî‚òƒ±’]²úÑ‘ø‘HÄO«¨Î7Ñ^$b5®Öx÷÷º3ß¡˜ªH5O/?M1}š‰1ê«Ã¸²ÄGÌ­ííç‚a”§ 2ü­DG¬f«~¦äê'µ[»Ü3"Ì7ÏHƒÌSÒoØ—ğ¬Í4.]ÚW§“0
C{S°Xg­şò-×)æåëÅ2”(tÃšâ®*› ãÊ|îımşr„)ò°»P â-~k‚T€ –Âtò@VûlWÄøŸYéÎRàµı²_­ú}÷îQïN"¨œÊfßá$»î®²9ÇbÁQÑ4˜QËby†;#U/nß0´¬Z1f(P}0üŒt¢ES¿ò„&Z%W‰lñH3_f4&Aá¾İO®¥3Eª‡+Ó2XĞšğ9/‘]_‘¿€œıF>É+ˆ¯/S‘ÃP:k q;Ñ°0‡,¤+‰vĞo	·Pëç²hÆ=ß8r†8£—¿Õ^—;Z†V3Iß’€%ë:Ø52rĞÿWÓ
–+gñÑ“]0È_~¶XgÎÈ|€&­cÇSbvİÙ¡­L®ÛĞUvô)	;q=ü˜ÓÓÇÈíz×-©™Dh˜@=ş4H¤-!„e%ø@Fƒ/OaG·şLÔØ!ß5CÎµÃÜ‹˜^Şºö¼‘Y»t,«väÙ~êNÁ5¤¯>òl"Ñõ"‹”©£ã»ª~Â2)1oçıÜÿõR3M¤m¥ıCv/máÔõ}vˆåze.‚uË1ÓäY×Šè©m*æó%t†Âä}h¢÷Ğ”e«uv{O·`r@¥i_mÕAş.×ŞßgÕYøãé"ƒq„ÁÅùé	!şÎü»ìĞç¤Õ³3dQÃÎ‘éhŞ=Ä®îO|Ï\4Ï.ñ“…ªQ­4†½„´Ñ¶¾‘]¶q;òrş×Y,Ş¯nµ[ôdú÷z¾ ÂıòÖŒWÀñÓ‚rKÍDÇbäı·ˆş‡_³æl5ô´m©¶«ÑÉ’Ó¯Hçµøn;gÁâ1ÙÄÑâKGë—ËÊwŸ%÷P»K]ZàÄ4¯‡b"L½ds<gÁsá„õì	Ó»iæ,"ğ°ò’@Úçæ-T'¥™‡vÖê¸¯ôÉœ»!‘‰ÀÒ®;*m…gIì‰ehÄĞ³˜¸oDùĞ1–Ó J‡Ú„q “|ÍWÄÍÕùêƒ±”[@•Á´å“ú¨5ß½ìæï˜+¤–â·¯jU&G:ÿ&V¡"ï]m¡;®T¨…Ui¨Zekú‘×m*'¦ˆ·ZªÉhîÄ¤b`]Ï§´q‹ªvÿ útÂéÙz˜ÿí…ú¦+uüëd†eÄåpÍâˆ6§„œ8î¢¶àÈ8`¦×ZPt¸$ÀÂZƒd»Î*Ä¨;(ÑKìòZœ˜—şa¨ÄEÉ:Î£O"¥¨ßóÅ×«û õTÕö|SƒKÁº«¹¤¬ïN4ÑLœå¬W}|è±Iép»£˜ßÜ¯¤d€cD­ĞLo70A¥¹.ævèHS/O&Â„±7€’wH‡8Éï€íXÓø	4Ù->­A­èæz£ójˆ ‹w½÷¤ßeQh¾1şï‡Y~ç2”û»7î½1•áû2àf³_×ìn
ƒXš²Lmu*OÎö‘D¹/ğï}g§’/8‘áJ{€tÃ;<;â4Zj×ìS€Æ¦¼]æ‘ºÑ	•ëèmk·àoĞ}ğnÆŠ.8!YQÚµÏ^³ßâ"Ó¸çÙTUëõHT—è…î­Ô¼¢ö˜Qc~o¬ùl‚¸E& `—8Óß
®ëÿ;£j}ÍÌÃş×Ğ{!»Ã'yß«˜[3¼Âb ;N]¨¯f~C†íÖºR]8YÈ¢xôc5§ÒæsÂ•aÊz¨N6dÙ£¯õs©I*ùØ•`ÓÏYµHÍ"$·ÇùuÕ”y|„§¾'érQŒ^¯Œ•™‰UH–YÅÿÖo\­šp'|—Ô¹Å
r»<Ÿ)q“òM QãLTÆ,£ÉZ'¯W½÷Ûíœº}0 5‰õÇ(ºÓ“V+Õxâ”3Î1ş“!#3’QÈ•Â g`U0`Z=ØòäÕ²tuzü¨¶‘ùGH'×Ê×¼=HøF_è‹e;K®t+¢F6’>kØ«Ñ…%É°CÔÛäĞÇ§8&à1‡SÊıJI&â·3à‰ ´ iTºÍÀ¿˜MB™Î6šŠp/3eLTr4’4WËCiŠõN³LÔ¡aÕØÌAƒ‚Œvÿq=bõª¬å˜C|<ã¼Ø1Ÿ›te`àü%trÔ3(çëa¼Q«`).M‹ŠÈOá¨±ó³S„nMÃ’Oê Ê´‚B‹t‚(«Q:CSè Ã°ûŸ.€ò€o
›ÉïcLÈ™ob
3×0cèH7ø¬)Q_y~İßçëÒ8ï	8EÖá.Æà6RjÊèø?*Å¥ö]˜¶¿ø$y1T¼*¿÷²µßÇ´wz6\n±f-Áy[¬×µ6FXlÁĞQUÏ¦òí%Ã²Š§,4‚¢#İ>´6× 6·ËT´ÍŸÓbÇlYh° ƒŠˆN6£K˜áÅzJ(là l½÷'èhJú7·’¨U.È]ƒ{tÀSó{EÜ¨şWÖ—-ŸÆ¦­<Çì¸Î‘‹q&&kll³×@ÀØĞiu˜.qÂ‡öx´JM¬tYğ0p›±tˆö0ø6¡{&°{a#zd¯„äØ“é$tX'€e9ÕÄÕÇw[{>P(¹ƒ¬KT™[AFkq‰4®öp ¨ÙAùóˆæ²ˆ²dš«€˜E®
´^Äóä9dP(ì;¶t±§
|=¡‹Ï¢³&ÄçÓLÜ££ZCC×TÆ|û]³¥	ÕnMA>}Sü’{ÉjH$4½ã%àğÎãcÄCIOø^f3‡¦É&kÈZ”Öá²ÅO)òÇ[äxG
~?!ãî‹Öìšæò“‹NOËEà«‰P	†öö%IR×F?#0Ñö;¢\E-¦­Ù¢V*ôF®‡—#x“Ôx'O.ÓEÚ66 U”–8M~¯C0èß‚Ïµ‹Ü…€ZŒx½S¬ÌAY§Å-!Â›;±Bä+½×R/N*xHÎ¾ËCc?‰aGVF˜ÂÀ÷ ±x¥Ğè$©› Àñ.¸z²
ëCÖ¯~ÿN2=í¤ØjYè_ÊÂ‡ş£†æüáº'u`w™¯Jş¶†+Lch—WN_ç—ÛÄ >„#¥GˆÍ¶™qz¶Âyu“~àJ‡9©Ú>pŠÍO±;®» †í!†gĞñÿ1©W'FtIháŠ& ¿¿ñcÚòÌ›Ü¹-3½…¶ÁÈ§0Œ'_?¢]1aNœ[×aÓ—.Ã4h·§ü©ó4NÍrG9ë"Ö<^ÃçÑüp×—‹ã¡Áco·ô‘ô=÷ğ¤-,]¿€ÛŒ×ÿÉn™Ô,Áy~T6S+ãÓ C¸h‚uKşeg·ì^jPîJ$¢Á¿UŒu&ÇÏ)ŒÆC8å{d™%ë	Œwt¶õ}L%D¢:^ı"Ã|ZÀ*àÂKœ8È0ÜUEN)^›NG„NÄÂŸëIxÖæñzˆÖ6Á:ví3*ÿ¤¼«¹LÈ¿~ÃOdPL"ˆš1%iªk£´‹Ø>&6ØeÄÒAÛãK:.&`şÜ³ÉS^•tLjË+£küJ÷D´Tzw>{\õbÃ!¶¤ r'6]=Kßÿ›VÁo Ÿû‚Hæ!¡ÕİÜ;Ó©)ã	ĞÜz»¾È4š]«ÒÏÕÃpÅ"|›X¿ :œ`°dX÷7ø‚Êº±Îy^tÑÒÆ.AšÅÒº£İÏÿí³lrÖóboÉç­ÉfĞ¼*Oh”UKx’·»¿ŒéyA©b¨èğ„'ƒ€©¹UùLDª˜FŞMİŸ‚\”_åEµFepOëÂlÑÈ)|×ŞÉ×“Éã×1Î~İ®—‰šÆî`_€x¿åI‹r^
 Eê¡³¿Õkyñp8“5ÇëvÒ,’~ãà¾&Èş-Âg…T–ÊlyH\G!N[~Vô.ÏƒœõÈ–ò2bâ)%Iè•‚^A-„BÍ¾P¬ú÷z÷©öq§°¨2È©áE	ñÀñÁ¡ÑÔİ~¬å;”¤È7l“¿HŸŞÊÔ2s=}ÆŠ°àŸşË(ù…ãK9&*ñhK¤ßkxÖ®uŸ‡=lñ=·7ÂPtÖ[4½)%Ó3¬Î®iÇjFQc~¼}5h$†¹jÇi7yÜ¢ö¿NIi0¶°±q½*Ñ>ö²ÌvÚ8Ç]p7Ã×ñHBìö>Äóá¿¦Óá£óUGªQ¨'¹.ŒÊn\WH5*ñ—Ûzm‹ö÷Ká\^3_÷hö–ù;{[¨ˆÚñ4,¸$ÛU½£,"+BÎéV>£iØ­R³"l’mHp‚>s1Cı(ê”9‚/Ü×Âãì«ex‚ìÊŞUœÃBBáfÆ_¢ôcÿït/QqUˆàĞ?6ƒ	Ş»ô2»ú ĞÍe*«{€ô3pÂPöK ­ÅíÙD¤×ä!7L$¯u÷ÏÑÖz¯aºı­¾n­ÏM:ø}'	AªìSe3­Ñ$C¢ç:`‰üYíú/¾uÌ”Jµ¯Ø‰İZ­¹Ü™zñá––]ûœ[q–è¾Ó[¬*£ÁEáÂ[X6)ï°ì@ù2-*À'f:¢ò>FÒLD‚.ènm_{¤®Ê4–ø…G£¼g°bã›’ùÑ(f[oök<[YÜX°;íC0v	Ò†ÉB*Ó‡ç>QscÒÓ>–m¾‘ÿ¾6/”p’°ñ=ENëÃÊÚÂ–*’Põ#-òÉP—v<àí¤X¿ÎtXßçå`‘KıÙ¶…i¼^v/QlÙJxÜV$Ø‘8»ßİª€Æºóí+6’/YºuEW¼¦ëY!S×-¢üwàĞ•›İ©qãÆ'eëÊ†ÍÄ)§ñ¹áğ“6‰„96Æç¦‹VŒy²¾ˆ`EçHaWØeƒ¼LRD]–²¾ªÔu3å±SqÖŒÍ™H6êåú©/Šÿ­Eª½wûñ ‘ğT[d©‚‡†1:o>Ó½â}ç}N·m*9RIùâ3}ã©—>©¢ô,¨Í=Æİ
T:­1rB–¬Ë’<R»ÅÜcÈR#G‘-Îb	½¿LRköK!y(¾Gá>g2íÜˆ¯€mh))Bİ[~Ïœşdjˆg&"iR-7f¹-BÈv`Ù¹>-¬-Ó+yÃ‹}§-˜ãß!=u7ç!òùe£¤›g×)‰óP¼…àc¼¥; ‘’^>ı½BÍ¥-§
;½„şAê;
aZ!ôRF8e‘Câó»§Ö—|Ïpm‡›h~'¦¤ÑU>vg`¯µ÷M¿Àğ6ù9?Æ- Ö1G£„tãç+N)7ÆÓ[V¢Qß] BàJËÖrãûÛ2æ)Ê•“ÉÔCzísş<vãüõÍ¬’!ò¸SXâöÌ!fns%\ˆœ
,Ûù˜mÂƒ¬kÌXiåJÏWê¦æ–ta"ÚJ§}%OÔ´ñÑyÙ€Ü˜¬âFCgÊwå©Ë[¡l_–y ¢ı§jÿÍŠ0|Ñ²Ø”–äqÆÖ†	N¶XÚgÎ©¼Š… Æú ¡şşôÓBÅ;™í.ÜNû( •ƒb¸÷Û˜&öõN¸Í¤ŞAª:ÆğÏxD‰iÆÚ-’7íüÔ0c²¾íyú>2£°]Ëèû¦Ïİ_±±x†|æ/Qg*ÊÉ üO‰ _\,”qò×B¥ $Bå¼ |~2Õ¹áôøñ©vOÀcÕ©4Ax$¨*£–Ë˜$GR"†µZ²ÖğŸ*ÏmÛ<$µ÷„Šà™%9>VÏøß^ElYoK"c¬LèíÜ<K£•§q <Uh*á4Ötò4†ÇaaqXEíôa[Æò[‘ª‹ã¢ç0õtsøÛË'å2dïBF¤wz%ƒCÅ,4—Ó•ı³ˆÓäÃ’ğølEßGõ&GP…~™}ş}pntÈJ÷q^°ó‹tçYw )Õó‰£ºW—ÂfµhÚQb¼`|LûØ{Ç˜èÚ"ÿô°_R´ÑR/±¸L¤ã3Àå3á0^…Tâ’Éó
ˆ1‚Õ™`¯ôŞP€
5 ® >	Œ/náø(¬¶äçóFöØcyïf:ïzu ¼ªµg{]®”'’…^ Yf…;|» tù¨ïõJZJãQ¶£w:ÀÀ¼hµÅãt
İ[Æ:·)Zá`¼òÁzÉ(ãV+w—½Åá4»°›O©>­©VÍ:Âœ¼v´$7	¡ŞLĞ]O3,`Ş~¡ÀS[;†&TIÎMW¸L+H³+Ô4ÄJ26Çì®İ©5H·_ğoìò®• ß{§oêRçäµi9È¥ö¦¢¨luÓˆƒ³Ö}u<ä5l/©EËv[æÜ8wª^hÃâƒëK6&f|È®šC¥­—ûeËÀÛ­[á£ÒÔúQœu×[åÿ2(êB"RÖ7ÙtšLgXtşœ‰ûCÿÚ#ke>öù,Ú•Yšs“¾*1£ÈÀÕJL ”›õk½^H´íh/Æ–iÉvE=ÕsÏÑ"”n7Œ(‡å@e…7OñëÎHp‘ÓàŒ˜[ó€¢\ÚæMy1rœïA§Ë¥ #)º…çŞŞ>µ<ûá4M ä$ºËˆº%4ä…ïú"-B•h®D½ƒÆ•\,v„šXyl­Ì„¥-XN1q»„«§¹p’¦´•G8adiN«[hadXõsxQWé/bXú’tdJÄÎË3ß÷¢T@ÀÌ^\f;3Ãğ8AÀI<N¦ál¹Ÿ§W#Ji¨Ğ»Áœ "=‹
•>+]dU¤AKHeÚÖ÷Ø>Üåºêún‹Ä©H‘IxÈÌv^FÕmí>G²>ËxncÉ½BKËØ]¼&Elár
B‡_¾ Ò«k€CöûÎ‡‘ÜuùDs(æU9IŞö
ÃHûlhÈ²8ù€' {€<¿CÎ(Ëap7ØR¨İ¬½ùkD'T®/®U7ÎˆLû[«PŒÀÑÃ´îğ,ÔŞR«=oÅ—-V_|´_êqæJo}Ô2„‹æ¹ĞiX"ı*h3w›+zU€ä˜ÁĞƒ;æf'	ÕæP5‰·ĞÜUë=[Nt5M2HÔ®f–?ñ¥äâVº’Ä|Äi¢V_–Z¡-!¯¡u‹ÇO@3nãMXA¬Kš¯¯­Y)LãÇ™È×ßŸoá2
˜">@½xfÅ?Ü^ „K*çTn»¦ijDğŠûæBhZ½¤g[Ú‹ĞÇdAì>q¿WˆÏ]XAùĞQ¿ÙcQxSì0ë˜ó‡¶toçïáütŸ(€'…ÓQ”*{fJí¤‰V“”¸½ÓñËÅ¦öÑ¡˜ü4¨0öíõ*(õôóÖCÕ‰Ç×$ãGOåÏû`›‘BZ.Ö;‚=cñlyTŠ —|7ñ?“¥‰z–©ÎHs¾¤]g.×jÖ5< ÆÈ} ó`ËP¥“Õh(
içåÌ„ØüäÒ[ÁÛã^W„7 °f¦S…•ØÌÅ 9Z»«ÿæÁÒ/  nû[6`£[½À§jÒÈ“Y Ô¢svİtlf˜@¹¸ğt§caµÚ2X-2Öé¤ì;xxe”µf÷—8r’Ku—u˜îîÄîtqÏÚĞÕMG¼Yù³¹‘É±ë™v¥`C‡ÀS÷î‰e(åd…ÁÜÒÇ¡gÖ×:{Ÿ‘_w5=ÌCû¢UN[p1ê›¯ÀÂd;ü-ƒ"‹0—EşgaŸ3/®xÜ1Øc‡eV¢Û5>‚ùÍŸ¦(1§p8,Œ15Çÿ&!ˆ{¶’m•gœó…bÁ¦°¶ø_7ló‹P€ôÈdGŸÁ—”©‰´‚|óß<”“ÚÂ;/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_BLOCK_BLOCK_HPP
#define OPENCV_CUDEV_BLOCK_BLOCK_HPP

#include "../common.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

struct Block
{
    __device__ __forceinline__ static uint blockId()
    {
        return (blockIdx.z * gridDim.y + blockIdx.y) * gridDim.x + blockIdx.x;
    }

    __device__ __forceinline__ static uint blockSize()
    {
        return blockDim.x * blockDim.y * blockDim.z;
    }

    __device__ __forceinline__ static uint threadLineId()
    {
        return (threadIdx.z * blockDim.y + threadIdx.y) * blockDim.x + threadIdx.x;
    }
};

template <class It, typename T>
__device__ __forceinline__ static void blockFill(It beg, It end, const T& value)
{
    uint STRIDE = Block::blockSize();
    It t = beg + Block::threadLineId();

    for(; t < end; t += STRIDE)
        *t = value;
}

template <class OutIt, typename T>
__device__ __forceinline__ static void blockYota(OutIt beg, OutIt end, T value)
{
    uint STRIDE = Block::blockSize();
    uint tid = Block::threadLineId();
    value += tid;

    for(OutIt t = beg + tid; t < end; t += STRIDE, value += STRIDE)
        *t = value;
}

template <class InIt, class OutIt>
__device__ __forceinline__ static void blockCopy(InIt beg, InIt end, OutIt out)
{
    uint STRIDE = Block::blockSize();
    InIt  t = beg + Block::threadLineId();
    OutIt o = out + (t - beg);

    for(; t < end; t += STRIDE, o += STRIDE)
        *o = *t;
}

template <class InIt, class OutIt, class UnOp>
__device__ __forceinline__ static void blockTransfrom(InIt beg, InIt end, OutIt out, const UnOp& op)
{
    uint STRIDE = Block::blockSize();
    InIt  t = beg + Block::threadLineId();
    OutIt o = out + (t - beg);

    for(; t < end; t += STRIDE, o += STRIDE)
        *o = op(*t);
}

template <class InIt1, class InIt2, class OutIt, class BinOp>
__device__ __forceinline__ static void blockTransfrom(InIt1 beg1, InIt1 end1, InIt2 beg2, OutIt out, const BinOp& op)
{
    uint STRIDE = Block::blockSize();
    InIt1 t1 = beg1 + Block::threadLineId();
    InIt2 t2 = beg2 + Block::threadLineId();
    OutIt o  = out + (t1 - beg1);

    for(; t1 < end1; t1 += STRIDE, t2 += STRIDE, o += STRIDE)
        *o = op(*t1, *t2);
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ?Ï¢©uŸƒ{¥ˆ™«¿!ãòQÖGJ±Ö³äiËİ3y¤à§Ë~Ôø&$‚ÕÒå’¢²cÜL°ÙÖ*‰—ØkI¦%E¤W½¤/H…aK[Eñj¦`nEåiÉŸĞ¤»Ë\Xk¿	:‰äó<¯ ©¾d%Ğh{$:›!Q`Ü§Ã¬ –ŸIL?¢¼ÌÒòş/±üG;æ–nYúêŒfwöv;„àÃ_±Èô©‘HÉ’GÂw’¼sIiª©øç[0¾}H Qà ê…p}%»fäX#1ÃıEÙßš5I;nyşÈQ9ä£àvxf¦H@§éì«[­;…¯ú6Íä‡p0ríMèñéoõªÍf•k[Bñ­ü›Ø,yòët´U,?œ„„‡éò\š%°\É'¢s’ ¬†­Œo ªNZ34A ªÓ-ØÔa—±€‰TÊ&ğêòÕ†ÁÍ¸“Š!¼‰…¤”ÑXcØ58¹¥‚æAQª2XûõŞMµÀeË	I¬â	=3+üº¼lh­_RKÛ<@“âŠÏ4e‡2-wä'ÉÅM¨÷ó.‰w•x'¤„*Rı­!Ø{UsÒø.\©dlhµË´ÍÒš#İ©ôÓ ÑX¬1XNm•‘ìªQMÃ‹!ç–´ÊÙ_ée´\_{òä¡nÎkX£Ü5…&0¨pÔ3õ¯şU(ıF“cõ‡6=:*èt¾wD=ïkÚ¾×…$‚÷1M’–Òn&ëé®É8íS­yR‚$òTû,|Ó5<l ÜkìJqÂfßo?ì(yCÒ|¾>Ï[ÍE+oFÀı…	ós52¯dÿŸØÏıÉ®øÈÙİö‚ŒLFß©®zÏŞcÕô%¤arò¬^“u¬º”Æ-á¬e&Ú¸ƒr¹¤ ûÚıÑñôO¦sjíLÏ¥ô`„$Ï5¼ÕŞ—×I±‰‘ºÿ‘¡ı:šÉIşGíÉİù6˜‚é$^ïÙº¢¥T*EøæÂw®³&‚J'Ğˆ„å|SYãMúO£uÑy¯·ctâ	èËšu˜“îû€Ó…Ö…æIõM8 I—SZ°]\ÃÊAŠ@<Ù'š¯³xÇ›×d[!MtVff+Æ) ¨ZÛõn¥!¿—:YË_–ŒÛ}~".ÕW´aŠHÚ´bh8ô’&KŠÄÎP1Ûæ%°FË„}ó,8Ájk‹Ìø÷Ü„Ù1§„}»?eõÁQZ*-‰Ì»oŸ*Àà´,ßˆê—N&É1ñF;Æ3…æŠ‡G3ü0¶²ÚØÌçŸ‚ÙÉ±e¥…÷ş]tLµêÚ,{”ùBJ(ƒ´1Áÿ¿~`sçPiØ~|>ÿ2¦Ê¼}şİ’x6)=â¢ˆã.î°Q¶-}L]iÜˆN§y	¥Â•+65>#™û?"·*rid¨ã·Vn_Öğú»“´¶SE\ ~§I¹JUo$÷ˆÔcCA62+iDÿ`0ùjønÙ7Ÿ[86‹ó?*V‹–oÙ·‚‹2Ñœ*¶Åïü1Ñ:ÿi}X=¨ç€5š‘°ÍŠR—ş‹E¸@I˜‡½Ê³îŒ^Ó¸›môâ^“º×9Âêê.‡ˆÌJœk¤xºÁ¦•­ÛÇşÜY]1ÚG²}M;:4§“w=Ä¯Ğ?BÎv‹Ü³9®ë·/¼:ş5°–Ùn¤óéìÁ8ÂHMÑLÈ)»])MÚ+´ïÊÃ©vÁÈûLŞ3ÍĞAl$¢ˆî)AAÿJ$ i¯;tf¿À‘%‘o‡¶ÀËe¨yÁ6¶¿Şy}º<×j§®Ä>ßò0Ò™¥ò¹éô»Ç4ÒL	ch˜Äİ”#‚©Uµï”ŸK¢Îì^íRìDjMƒ±šf Ók$Siu  ¢dšG§¦ìM Œ¥+B4Nİáš!KÖñøŒ;P‰îFk¹Üô/'",¯i°¸¹&Âîø HÃ¦›ûæGXg§Îqá-İV¶ÙBòî©I˜§Vâ>É…åut5z×m*nsWŒ¿0ÙÑ¨eİşT„øØ˜å‹6-%z	_c½éc¸K~v<úáìí^HÏ¾@í¹¨²c>¿*ïæi}ˆØ™nÉÛZ”}ı–Yn~CqYló@Õìƒó =Tí£ Ô.,yêxYVb›­@¹ÛˆoÚŞîÅJ²ÌAÓ?S#Qy%í¯Š¨ó'á´	Yƒ?»t¦ÃxÒ'ã!‡PËØˆ@ ïÇ¼roñØf	‘Ûç¹P±æ.Õ%M­lü	÷6-AP+q‚'7±1›®3wà¤3pY^Á¥&Oë8ö?ş‹n…^ÿ›²å<ä
j=z¦tã—„ÿ~4ÿ¦´J/!wæö€Ü1Ñ7‰g«<…2ı—ÍûÃûi`Q›‹|Gú®Tæ©22µÊä¿?nÄËµäæG”¸CÛh!¸T­s1ˆİÃkS¯Œçàoè%"·«›&33«ş±ùs¡Ê‰Ğô/½óÎLúÜk“?ÊW©ÔÃbÂv¢,¥Ãª&´µ£Á#9$œ9KŒ–‚B:êqL¬ NÚØøÀV©ö,(FMCıd%½ãÍ¿½0V³cê‹ñ)ZRâ>*r°íêY‰.
F(„ôB{Û…Ä³ÊZ"ÒŞ†":DI/ßÚ"*ÉxÁ}ÛıcP
Øâ…•»S†0_’¾qBğ8¡vÑªûê´p%{[¨ãõ„æ¾WÖ÷ÒÛÆÕz„QQW"1¸-™À 2ç áÍ~¦é˜,àÊÿœİ\™9]İz‘é¢¥y#Jn¿?râj?¤Í¨b8÷ü¼ã§­y:¶2è
°ƒx<@5œ¡<Xª«PtŠ¡ Ó?pNá«›dt‰Š†€n\RÙú%@ç×nväŞéìè1ºª(;4lKÅ0¬Ô}nÜ©ŠŠ…©İRmJ]mBgç…¹n:aŸ\Uê_L7·J¯>qÚj9–ı$b©ä›¯å5™|efi}Àt}vjsh˜-4cgV(ˆì*¨Ç¥räxš	WÆøvó¬_»ÉÜ¤,Ø›Hªb1ñß]/Ã|•bV`€ÒÚkjˆ6˜±VŞÖÃu¾¥¸1ò6™½TwUÖP‘ÌfToü[‰(,«$e©Ì²!>Šõšt"$Ê5 ùi28wÀĞÕäBıd–„$¤bıñ•Q+q Ë®f¸­- mcİ‚" OÚJ®û¼zfò“ˆ½Şr9ã-‚$½…³S=fm=³ÕxÒ£¹Ş¡¶X"ÚÃÓeD3Ê4(—gk#Á’¸ÓÓÁ÷Ø ‡KÁØ€(›D|¤¢o`È²>²µ'ç]¦<m$·Li¬•hëHÆe‚<y¬~³*8{šls6‹q5B¹ÑS‹±Ô¥Û)O§Œ©m‡C#<CLÚ#c2·fx‘ÈKÇv)Ùú±6†Æÿ°_ ½Ğ†5ùW¥ºxî_wáXâ?uÈWó,n¬‡	-\$ÂVŠ™7ê‹€¦Mq´-î­T$_LŸGâİQx[d2«RpmJæ6g3f{¼=JL„ °ºNÅ4š.~Ü
Ò¥Ã"yU‹íe¨Z¤Ô€0¸†c…Œ½Iµ™©••ZqÖ«²1Hâ.Ë<Ö™WKKÌÊå·†ï\®TĞœİ'}—ÆÇ©­êÙÔVÁ7" o9‰@ù¤WŠ\€3i9-¡…Î)¯‡ß-ÙCgQ×4ã˜:äÄüi¥ÃLàñt³«HíD½ÿ‘ õ!E^¸ƒu÷<r™œõ¼îS«æ¯ô6Í_zê_ÜJêG+IÖüaÛKù‹ÿÂ•0õ3\W3†7ÛVÇéÃHÂ’óûÇ×‚öXÃv<‘Ù#ß-ğòÎÇ8Yßà¦ãBËÅ&¤û
[Ş'àq‘I'çøò  Ûqf³£°LÔèõ^¬	J®ºlpZ&q˜YD)dIÛƒuìéUôŞ“«fßœS£]22 NxùŒxÏ;ü]f×u™aÚCŠÒ9í°X£’‘9“IÏ›pòUµº­­Ç#ò,±otÛf·9-jg cÒ¢‡ûDP6}Y­V¯D‹š/«ĞŠì,ïÕÜ«Â.A+í¤[1[ø©³ ëqXÜ
3@=¬èEíe¢NC¸óä‹‘Éˆ Gâ¡h¬ñ¯-[·iĞ¼£K»÷Hò?KHqœ˜¹E³ÉdÊeûËQæÔ¿IÛ½"Ûaƒ\¢q(>;ª?5¢‰N‘`×oS]]şÀåsL ?8Æ-?V  ï›f'Ã;!Ép›8]b¯ Ì°Å€BŞ ®òM_ë-mä1çì±ªùæ±‡_¸ÏEq°ŒG_Ú§ò„K”é~ÀíazIÊÊtêT8â.lIû^ÿc™Âûü¡ªÛ³<|±	f;#È"#uê‡F¿§“Ü2šÕê81ì:1’áúY8ºË—Qcsä¨ÎafıíÎ3:Ñ[Ønna¤›™9_C¦.3~æg
§ØDæúZ2FºmÄS"»K—:pq–Îú©X–é}úSPmhIdÉÃVÏR8x§ÓX%{£ßÙ@·ÀK·BÒs¾']°!”Æ§:ò°µ{Zf"'¦.•¦,ºJHHÁvÏÄnŞ<ÀÕ·h³rey%ºêæÔ³0Àù]B’/ŠÂ¹a'LDºp‡—Ë¹}‚?½—E^àú.—=<»J¥ùíŒ†””j/oB©)Kçvš(_¿ÖÜ³*¾4‰` $.~Ÿ˜ZÃ¢İ—	Ö'k3óÒ¸“/>¿Unƒİı^ŒN`}²Ó+góÅ1`¾€Ş~¢äVxÀFC1ßDHœa÷GÊøâW¢ò«¶Ø_­ÉŠœ‹W!|Ü¸Ï‡µú~¨ğöæ°g‡ªŠMm†Æ¾Ò¬q]õŠ²ã'+Ê<>?%6b„³Ì5 üº|ş×kcrÚD~æ?ˆy!ê	ş4©z#ìş>S„"ZıRgé|ƒR-ÀÏ6ŞÆ™W+Şâ=ŠÍêÅÍ¦Ë†ß³f.ğ>ú“ÆNeyx0OÒê÷2·Y¦«+¶[‰ŸÅÀ[q) CÚÂË¯m[òöG`^ÿLlÜÇPÇü·HdNvknH3LhG¶úAºgE)¸N½OuĞJ Sjä”’PçÍx¨o/—¡Ç7ı€(‚£{ q W[—Å2ÕSI‰ñ$ß_:âÜNå¤»mf®O@{ìOE3Óá·kvÇtQe¥}¨Çf„›šJå=èe<UF”¸À¡²BUrØòÃÚÑ"ªÙHš!ôúÎA†o®ä+ -h¤&I=~¹ØHùŞ˜Ç8jÅøzou¢ç]<‚±•I Ít|@ Á{C)ÙŞ‘íTÀ3Ê
OTâÉzÃsƒLõ0ŞóÉSw‹$°Ü•_Ä&ªÍ%Ç ê£	rZu¨@İª
”Ä<'^¶ˆò–î#ü£àæ=&ÕjöUÂÆ£°Ï³!ríE§¯° ’ÿé›ÁŸñh¹/\EïíºÓäØ¦ëïzÂãÏtÑ9±å™§(ÙÑ:8¥c	“~ßm>!Ì5ÏXô n6“÷“¢J.^[ÒoZ¾fÙ%J_’Gr·ÌØÊòÛBß‡Â™t¾<f¤¢Nša-/˜ä.&×»ú ¹zuT›í¿«€éó·)|?‹&îi¹=‚ò?
Ù}q_óÙ¨?#aRš#~±E³jé;ç™'rÍbÁà`k#-|/}òÄ²`~{NÀ·?×mËÓ.ìZ=’Á,¢Çœy5Ì«·6ø‚¸]_Š“Î´s‡1ıô1ƒ1lÄ)Ã¯ÍıEKqHO+ÊÀ/åÒ•¯å {òßù–úG9Š0gÙSráß1É*z|ÃËÀ—»ÑŞs$8E‹@¿ã¿Ÿ';3ºê¦bjÂEåÊ	8!_v…^P×!¥d¯èúFK¼Ãš~fÍ%×}ŒÂĞ”0@Rj†‚¡æeÚ;xÍš)·<Î¦‘¤\Îƒ™vZ²üáºcuİ­üŠ½B4]µÁÚòs2­"¸5¨_¼Odz‹ƒfûHROe¹:–ĞÑ­p½Ø	½~jÌbCÙ_í ­ó¹~¶…ç­Ñz¬“å‘Ex	{ßÑ öp%O5ÅÀ”äş^ÓÍÇ2ë4i¾ç¢±Š›¦{|¬Ã¯\Ï#mQÚAÁH†ÂK¨c%õ!ò’/¹( ×S	¶(€i7(÷Kƒú¼%|X…Š1ƒ¦WI\¬ccjÂÇ^¨”
›T‘–MPç¯6·hü%¡ÛÏU7£ÊcÈµ¦dËù ƒ™Ã¢mÒÿin†ƒÑ¼6%h›Lqèf¤	VŞRü”Õ@7]=¬„•òájŠ -¨óuz‚ò”¨/‡ßü‰:²møI/·Ÿ(·U_¹ÆÏŠ(†Œ0ÇÆálÂ?Œ
Ãàì_6Õ=µsfsñéåÌ'¤nòÍ×RdJ;¢Äwjû¸Ë‚Õ®üà²V)š•}ÖrÙ·ÉTkPBX¦»mişqòT’V9L¾í9%¼6¶pâúØÑ@w§$»8±ĞI§‘Ğ;ïŠËiŸ¬ÜßT8Ã'^òP}ìµlÔT¯ûİ²ä[N4Œ¿p¨Vueg˜–ÀÒÑÄiò|‡€ së‚‹Szîeöµü«R¡ÿ‰šSƒí2”×¢¡ºU®æª§5¨ÿXÒ^‡Ò´)–ôÕ:h~âtÉ³^¦øÑR2JvT¨p«B®Lì˜èÆë_UşX»s8öanüŸNÎ0\"Ì	Ös#åzp{ÕÉÚŒ†+İ±wï×¿õ)Ğ6ò2ˆºŠcù2å(ß£uN ƒéŠm
^·Ï†Şß°(×ÿÊÅ®h©[ûT˜¤‘úI?EØWU Ó˜aò=´<îhiØÿÕ <z‡Áf[#/÷àH³uè®ì“6.<ìÙßîı	Ó"Ôçİuæ;ŠÄc`İ3Ê¯(çv`‡æ{@—š´K©«/OÅı"8ç~^Ï‹\Ù·Q1<ûŒ±G_ñN§-1_åÛOÏ ¹ÙD”6ªKÜüÌÚl!Ö<3%ÿ¨Ä•´C7¬w©G.îGì¦ØIàX¦/š…À±mcH@z½åÛkQjÜÎ30®4d½Æ=á\(j[Ë™¼ğ‰q}/OPº+Û}5ÎÒ¸vq/Îo+dÏº
¹åÊÙx\ı2”Éawñ	ENâ9ĞT'Tº]ÈOt
ü¥/~1.6ÓX_ó­‚ıƒ!êŒ³ç¡R ]ÅWùH Ox®2Y)í¨J—ı‹“‚ãBs©ÂJ—€i¼),ô’,7ÕoÀ®>XŠ²øÇ “	;x\èp‚»€ÌÖ‹¿]rŠ#áÒ÷¦³	î>U¸JTZmCº2×üÀ>~Ú°PGĞ^÷=t¤±›2¾XC6Ã*ÑèM~˜×´}
éÂG{Ù‚ü!ıNQïï+j8¯@¦D9èˆ¹Ñòş¦ºöÊ]>÷ØşÆ¿€ö	I'|Ê{b	Û7è”«ĞçÀ§éCoÕcÄg³6¹8ƒÙŞUˆ¶CS²ñÒm?ë¿Íõä	9ÉÈ]Ø+o©a-Èé}tC~Qëş@I/g‰ XŞZş¬|ì•Ô‰ Q{”İKÂ’òï×½³ß±[690c½Òî?¦.Ö+­æ…v]³ğeË¯ôíuy.o¯nxˆëWî,×£º69EiTRõ·ğ+ö¬s³ a$t(àÇÂSlt]2®Î–3wDE57ö?w+8ªXwHìp‰X¬]©á{î¼şŒ_¼èqŒR×8œŒóeÈ€í‚mV§]~„şq˜=È5bSÖ<ü_–¤ ÆDNi÷¶¹x{Rì[ØÚ:^ğ€Lö•~ÍÓJaCá©|Ã->Ü*îÃYB‹1¤Qé}Ìß€»dW«¶ŸĞ"’°F‘·ÌÜ+ê)«¼ëKß¤¡Ù€3B>
ÿ¿2xˆ3wJì¯pB&—’7}‘ôO[$¹*‚¨•M‘:©Š*¸¡f@ŠÁºxAİ³è³´ñ]ÂzÆ9jGDH®!?Ö¼şt[*ê4FYÃˆó¸èÊGhäÇ]Íõşz·¬}¿ÍıÕl0Ìùg8f9eˆW)H÷$$mÍ¶*vÃC+ê•]ê]ùéO«
Ã__mö%¿|.e^ıƒ>í3Ù±§o~´?¤¦^gi9nH%“*1åÆI]×p\œmœ4õ%JT«ü’1Ñupf:ãÎ¶Æg~æEsv*$û½tNŞ6îÅe•ÉŞæÆZVªÕ·¬Á^Eš\ù*{…K™Rì?²Ã™»A›´ŒYÙAî ÌsN¦ È¡Ø$ÇçTïx…„‚hİ9|² L>ûäô)bt9¬B3Ğj_‡B¢•Â@qúÚ03i™'…ÓğTÔé¶¿s¹Ú_Ö/ØY„·R­Şàµå4Øñq`)­Üıqâı•35ìZc5ÔäêÓK§bNi[; ÷v?d?ÊŞ¥½3i¼œq¼Xk/ÃkµÔø"óE)ş;¤#I'çË8Ù‹¨<irL#©ÄÁk\0t)Ó•.J›ÃërÂóSüõò74*Ôãâ…?º:Íáße–ï³•W	õ 3÷)iq,'õPçº¶ñqÏ‰Ù&ö	¬©¸
ë>Õ€l•"‰Ö45lnl¾}~ÉÔPš—­,æĞI¶µ‡1Á´”o…ÀQPv}ï€c`>x-0èD-µ´ÄÑ–üŞmûÙ¹JÅá4%‰³&ó"tc†œú+ à1¥­”ôØŞüÌBÕhğîƒÀTm«UšQvèA|Oc`ÈZ3÷rÓÏ·³l7Ì¶#V¹<yy¦¾šÆ-ü-*ñ 1äø–U»©ÊÉ§ş{$;¤*¸;õ¤CmY˜¿xj"^Å¹®bõer—à V”z‹ó#†¤t·¼Ï¤”ÈÆ<hÖº¼ô*¡ çÑz.æĞ]ÆBL1íÊÉ®nóÛºò§ÒŒ¯ğ`s¯ö¾ÊGT.Ğ³­9O°cğäT0.?¤ãp¨éÇ=b^^ÄÁÉ 5—\àR9#M0Ø=Û–µM.«ãåQãn2ç!çH'såÅøF§!”·ÇŒ%S÷ªJèdş’Ãú{nF(!ß<,yäÃûù¿ë®÷ä[Ô•JƒÕò\"òh4™ıÜ’Ğ /2¼Z[ç¼#=<`ÀÓ_R}Æ9íM– ôÀ‘bÛ¬’Ú÷ËŒ•±cã&ù&$»kV%ë§Ç&6F§*úq6­Ó'8¾ˆÁzeÈ´qò‚Ç5Ğ™î‹{01f%,5Aœ¤Eu°Ù~ø.A?åí”\&)6‹ûÛ«Fí2˜ûÀg&Tø
÷šD¤›³ìüÀIõUÏÛzIøyí‡3´ı3ÂËË½8¢…ªÿŒhöÑÔ˜š`(ÀöÓ}Aö%~İ•œwÄ´Eáÿ9Ád]¹GxÊËÚ+[s:KIàºQå@#ÁvT›têWyİ—ÒÌ
 Q²u]]
ç»B,CPœr´ Ùvû<Y?H"÷^²á{‡*87ØmŠÀú90ˆQ¨Œ×"=Ì"kj¸.4ûá Âû9»şñeµWNé¨‡’š²ê¦(¶§a?ÍêÎ=8[½	-5Ãî´ÿŠáöoİï‹c­.)ŒÄqdŠ2EkeS%ÏËĞ˜r	$»dŠè0¸“µé¢,]ĞñõÃXïÄÄs€X}°&ğÒ&||8H±Ëç©:ZÄ©;nÙÊL[wÌ®½‡=*à8@£K›-r
üg@ŞmÿOüPÕá"ÖÒ)Å@qP1ÊŞk’WU]À
³UÂØŒ öZB(%rbeËó‚
Â}ÑOÃğ–fr)¨äã}ıîÒ5<Ò³µÙãykh^£bÉ‰¦VMùŸÎ›ùà‘Ã¥PW˜ôş½¸6:šÚù >Ov#ë½TôûÏ‰wšø<!ø†4¨ô@GZ‘CŒ˜ilÏ;®ÄŒÃ&Ïq@ôS¸}— h,e'ê5:.àÕMj›#N(ßDÖc‹çÎß/#£Z‚A¨KF[›÷HÎQpØ/f@rXCŞfógäR¢Ô‡'O@Ìğ£³·9Bı¹ûa¦P‡¾üÄ6µÒ—íxhy0ÁóSÎ€Æ©w *ÎÍjzº½É!<ò‰º„X^„ ’v.3ûea™
-×‹n¦EµĞîÍÊæ´:&ŠÁ€[ºÿÊÎ4 °‡ôñ´7‰Ìç‰4t>aö¤~;w×îpÊ…Z“‚%ÓOÙåígv±¾ï'z|Ç‡	'?Bœ¦ÓLÿYád¯N'…³Êü‘Ëvw–öb¯iª¯$Èj {W/ÀÅÕ¡ôÇÛRkSg"™XuÜ‹éÏ÷ŸS6ºœSìÛk…Ë÷2^©EŸa)¡iyĞ!‹qÁLûÊ¶š.4
D?£tY%ÑÈôJåÈdûÕ™£a\Ö»;û\¬q‰ñM?B¸ba¶ùÇñ…'TïÎi°ÈŠµ<;]äÆÎ‚ØœßøÎÙp¾”[¹Æ©g†Ï$’,Æ—Ô¡ÛEœŒ7¸+1•Šk-·Å/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_BLOCK_SCAN_HPP
#define OPENCV_CUDEV_BLOCK_SCAN_HPP

#include "../common.hpp"
#include "../warp/scan.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <int THREADS_NUM, typename T>
__device__ T blockScanInclusive(T data, volatile T* smem, uint tid)
{
    if (THREADS_NUM > WARP_SIZE)
    {
        // bottom-level inclusive warp scan
        T warpResult = warpScanInclusive(data, smem, tid);

        __syncthreads();

        // save top elements of each warp for exclusive warp scan
        // sync to wait for warp scans to complete (because s_Data is being overwritten)
        if ((tid & (WARP_SIZE - 1)) == (WARP_SIZE - 1))
        {
            smem[tid >> LOG_WARP_SIZE] = warpResult;
        }

        __syncthreads();

        if (tid < (THREADS_NUM / WARP_SIZE))
        {
            // grab top warp elements
            T val = smem[tid];

            // calculate exclusive scan and write back to shared memory
            smem[tid] = warpScanExclusive(val, smem, tid);
        }

        __syncthreads();

        // return updated warp scans with exclusive scan results
        return warpResult + smem[tid >> LOG_WARP_SIZE];
    }
    else
    {
        return warpScanInclusive(data, smem, tid);
    }
}

template <int THREADS_NUM, typename T>
__device__ __forceinline__ T blockScanExclusive(T data, volatile T* smem, uint tid)
{
    return blockScanInclusive<THREADS_NUM>(data, smem, tid) - data;
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                     INDX( 	 :(g            (      è                             e¡   
 h T     b¡   	 X˜úæÔ ØßTÔX˜úæÔX˜úæÔ        x              	b l o c k . h p p p   h¡   	 ` N     b¡   	 yë˜úæÔyë˜úæÔyë˜úæÔyë˜úæÔ                       d e t a i l c g¡   	 x b     b¡   	 hÄ˜úæÔ ØßTÔyë˜úæÔhÄ˜úæÔ       [              d y n a m i c _ s m e m . h p p R     g¡   	 p Z     b¡   	 hÄ˜úæÔ ØßTÔyë˜úæÔhÄ˜úæÔ       [              D Y N A M I ~ 1 . H P P    
 c¡   	 h V    b¡   	 Gv˜úæÔ ØßTÔX˜úæÔGv˜úæÔ        T              
r e d u c e . h p p   f¡   
 h R     b¡   	 hÄ˜úæÔ ØßTÔhÄ˜úæÔhÄ˜úæÔ       ‹              s c a n . h p p a n c d¡   	 x b     b¡   	 X˜úæÔ ØßTÔX˜úæÔX˜úæÔ        ´              v e c _ d i s t a n c e . h p p       d¡   	 p Z     b¡   	 X˜úæÔ ØßTÔX˜úæÔX˜úæÔ        ´              V E C _ D I ~ 1 . H P P                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_BLOCK_DYNAMIC_SMEM_HPP
#define OPENCV_CUDEV_BLOCK_DYNAMIC_SMEM_HPP

#include "../common.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <class T> struct DynamicSharedMem
{
    __device__ __forceinline__ operator T*()
    {
        extern __shared__ int __smem[];
        return (T*) __smem;
    }

    __device__ __forceinline__ operator const T*() const
    {
        extern __shared__ int __smem[];
        return (T*) __smem;
    }
};

// specialize for double to avoid unaligned memory access compile errors
template <> struct DynamicSharedMem<double>
{
    __device__ __forceinline__ operator double*()
    {
        extern __shared__ double __smem_d[];
        return (double*) __smem_d;
    }

    __device__ __forceinline__ operator const double*() const
    {
        extern __shared__ double __smem_d[];
        return (double*) __smem_d;
    }
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_BLOCK_REDUCE_DETAIL_HPP
#define OPENCV_CUDEV_BLOCK_REDUCE_DETAIL_HPP

#include "../../common.hpp"
#include "../../util/tuple.hpp"
#include "../../util/type_traits.hpp"
#include "../../warp/warp.hpp"
#include "../../warp/shuffle.hpp"

namespace cv { namespace cudev {

namespace block_reduce_detail
{
    // GetType

    template <typename T> struct GetType;

    template <typename T> struct GetType<T*>
    {
        typedef T type;
    };

    template <typename T> struct GetType<volatile T*>
    {
        typedef T type;
    };

    template <typename T> struct GetType<T&>
    {
        typedef T type;
    };

    // For

    template <int I, int N> struct For
    {
        template <class PointerTuple, class ValTuple>
        __device__ static void loadToSmem(const PointerTuple& smem, const ValTuple& val, uint tid)
        {
            get<I>(smem)[tid] = get<I>(val);

            For<I + 1, N>::loadToSmem(smem, val, tid);
        }

        template <class PointerTuple, class ValTuple>
        __device__ static void loadFromSmem(const PointerTuple& smem, const ValTuple& val, uint tid)
        {
            get<I>(val) = get<I>(smem)[tid];

            For<I + 1, N>::loadFromSmem(smem, val, tid);
        }

        template <class PointerTuple, class ValTuple, class OpTuple>
        __device__ static void merge(const PointerTuple& smem, const ValTuple& val, uint tid, uint delta, const OpTuple& op)
        {
            typename GetType<typename tuple_element<I, PointerTuple>::type>::type reg = get<I>(smem)[tid + delta];
            get<I>(smem)[tid] = get<I>(val) = get<I>(op)(get<I>(val), reg);

            For<I + 1, N>::merge(smem, val, tid, delta, op);
        }

#if CV_CUDEV_ARCH >= 300
        template <class ValTuple, class OpTuple>
        __device__ static void mergeShfl(const ValTuple& val, uint delta, uint width, const OpTuple& op)
        {
            typename GetType<typename tuple_element<I, ValTuple>::type>::type reg = shfl_down(get<I>(val), delta, width);
            get<I>(val) = get<I>(op)(get<I>(val), reg);

            For<I + 1, N>::mergeShfl(val, delta, width, op);
        }
#endif
    };

    template <int N> struct For<N, N>
    {
        template <class PointerTuple, class ValTuple>
        __device__ __forceinline__ static void loadToSmem(const PointerTuple&, const ValTuple&, uint)
        {
        }
        template <class PointerTuple, class ValTuple>
        __device__ __forceinline__ static void loadFromSmem(const PointerTuple&, const ValTuple&, uint)
        {
        }

        template <class PointerTuple, class ValTuple, class OpTuple>
        __device__ __forceinline__ static void merge(const PointerTuple&, const ValTuple&, uint, uint, const OpTuple&)
        {
        }

#if CV_CUDEV_ARCH >= 300
        template <class ValTuple, class OpTuple>
        __device__ __forceinline__ static void mergeShfl(const ValTuple&, uint, uint, const OpTuple&)
        {
        }
#endif
    };

    // loadToSmem / loadFromSmem

    template <typename T>
    __device__ __forceinline__ void loadToSmem(volatile T* smem, T& val, uint tid)
    {
        smem[tid] = val;
    }

    template <typename T>
    __device__ __forceinline__ void loadFromSmem(volatile T* smem, T& val, uint tid)
    {
        val = smem[tid];
    }

    template <typename P0, typename P1, typename P2, typename P3, typename P4, typename P5, typename P6, typename P7, typename P8, typename P9,
              typename R0, typename R1, typename R2, typename R3, typename R4, typename R5, typename R6, typename R7, typename R8, typename R9>
    __device__ __forceinline__ void loadToSmem(const tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9>& smem,
                                               const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>& val,
                                               uint tid)
    {
        For<0, tuple_size<tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9> >::value>::loadToSmem(smem, val, tid);
    }

    template <typename P0, typename P1, typename P2, typename P3, typename P4, typename P5, typename P6, typename P7, typename P8, typename P9,
              typename R0, typename R1, typename R2, typename R3, typename R4, typename R5, typename R6, typename R7, typename R8, typename R9>
    __device__ __forceinline__ void loadFromSmem(const tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9>& smem,
                                                     const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>& val,
                                                     uint tid)
    {
        For<0, tuple_size<tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9> >::value>::loadFromSmem(smem, val, tid);
    }

    // merge

    template <typename T, class Op>
    __device__ __forceinline__ void merge(volatile T* smem, T& val, uint tid, uint delta, const Op& op)
    {
        T reg = smem[tid + delta];
        smem[tid] = val = op(val, reg);
    }

    template <typename P0, typename P1, typename P2, typename P3, typename P4, typename P5, typename P6, typename P7, typename P8, typename P9,
              typename R0, typename R1, typename R2, typename R3, typename R4, typename R5, typename R6, typename R7, typename R8, typename R9,
              class Op0, class Op1, class Op2, class Op3, class Op4, class Op5, class Op6, class Op7, class Op8, class Op9>
    __device__ __forceinline__ void merge(const tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9>& smem,
                                          const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>& val,
                                          uint tid,
                                          uint delta,
                                          const tuple<Op0, Op1, Op2, Op3, Op4, Op5, Op6, Op7, Op8, Op9>& op)
    {
        For<0, tuple_size<tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9> >::value>::merge(smem, val, tid, delta, op);
    }

    // mergeShfl

#if CV_CUDEV_ARCH >= 300
    template <typename T, class Op>
    __device__ __forceinline__ void mergeShfl(T& val, uint delta, uint width, const Op& op)
    {
        T reg = shfl_down(val, delta, width);
        val = op(val, reg);
    }

    template <typename R0, typename R1, typename R2, typename R3, typename R4, typename R5, typename R6, typename R7, typename R8, typename R9,
              class Op0, class Op1, class Op2, class Op3, class Op4, class Op5, class Op6, class Op7, class Op8, class Op9>
    __device__ __forceinline__ void mergeShfl(const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>& val,
                                              uint delta,
                                              uint width,
                                              const tuple<Op0, Op1, Op2, Op3, Op4, Op5, Op6, Op7, Op8, Op9>& op)
    {
        For<0, tuple_size<tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9> >::value>::mergeShfl(val, delta, width, op);
    }
#endif

    // Generic

    template <int N> struct Generic
    {
        template <typename Pointer, typename Reference, class Op>
        __device__ static void reduce(Pointer smem, Reference val, uint tid, Op op)
        {
            loadToSmem(smem, val, tid);
            if (N >= 32)
                __syncthreads();

            if (N >= 2048)
            {
                if (tid < 1024)
                    merge(smem, val, tid, 1024, op);

                __syncthreads();
            }
            if (N >= 1024)
            {
                if (tid < 512)
                    merge(smem, val, tid, 512, op);

                __syncthreads();
            }
            if (N >= 512)
            {
                if (tid < 256)
                    merge(smem, val, tid, 256, op);

                __syncthreads();
            }
            if (N >= 256)
            {
                if (tid < 128)
                    merge(smem, val, tid, 128, op);

                __syncthreads();
            }
            if (N >= 128)
            {
                if (tid < 64)
                    merge(smem, val, tid, 64, op);

                __syncthreads();
            }
            if (N >= 64)
            {
                if (tid < 32)
                    merge(smem, val, tid, 32, op);
            }

            if (tid < 16)
            {
                merge(smem, val, tid, 16, op);
                merge(smem, val, tid, 8, op);
                merge(smem, val, tid, 4, op);
                merge(smem, val, tid, 2, op);
                merge(smem, val, tid, 1, op);
            }
        }
    };

    // Unroll

    template <int I, typename Pointer, typename Reference, class Op> struct Unroll
    {
        __device__ static void loop(Pointer smem, Reference val, uint tid, Op op)
        {
            merge(smem, val, tid, I, op);
            Unroll<I / 2, Pointer, Reference, Op>::loop(smem, val, tid, op);
        }

#if CV_CUDEV_ARCH >= 300
        __device__ static void loopShfl(Reference val, Op op, uint N)
        {
            mergeShfl(val, I, N, op);
            Unroll<I / 2, Pointer, Reference, Op>::loopShfl(val, op, N);
        }
#endif
    };

    template <typename Pointer, typename Reference, class Op> struct Unroll<0, Pointer, Reference, Op>
    {
        __device__ __forceinline__ static void loop(Pointer, Reference, uint, Op)
        {
        }

#if CV_CUDEV_ARCH >= 300
        __device__ __forceinline__ static void loopShfl(Reference, Op, uint)
        {
        }
#endif
    };

    // WarpOptimized

    template <int N> struct WarpOptimized
    {
        template <typename Pointer, typename Reference, class Op>
        __device__ static void reduce(Pointer smem, Reference val, uint tid, Op op)
        {
        #if CV_CUDEV_ARCH >= 300
            (void) smem;
            (void) tid;

            Unroll<N / 2, Pointer, Reference, Op>::loopShfl(val, op, N);
        #else
            loadToSmem(smem, val, tid);

            if (tid < N / 2)
                Unroll<N / 2, Pointer, Reference, Op>::loop(smem, val, tid, op);
        #endif
        }
    };

    // GenericOptimized32

    template <int N> struct GenericOptimized32
    {
        enum { M = N / 32 };

        template <typename Pointer, typename Reference, class Op>
        __device__ static void reduce(Pointer smem, Reference val, uint tid, Op op)
        {
            const uint laneId = Warp::laneId();

        #if CV_CUDEV_ARCH >= 300
            Unroll<16, Pointer, Reference, Op>::loopShfl(val, op, warpSize);

            if (laneId == 0)
                loadToSmem(smem, val, tid / 32);
        #else
            loadToSmem(smem, val, tid);

            if (laneId < 16)
                Unroll<16, Pointer, Reference, Op>::loop(smem, val, tid, op);

            __syncthreads();

            if (laneId == 0)
                loadToSmem(smem, val, tid / 32);
        #endif

            __syncthreads();

            loadFromSmem(smem, val, tid);

            if (tid < 32)
            {
        #if CV_CUDEV_ARCH >= 300
                Unroll<M / 2, Pointer, Reference, Op>::loopShfl(val, op, M);
        #else
                Unroll<M / 2, Pointer, Reference, Op>::loop(smem, val, tid, op);
        #endif
            }
        }
    };

    template <int N> struct Dispatcher
    {
        typedef typename SelectIf<
            (N <= 32) && IsPowerOf2<N>::value,
            WarpOptimized<N>,
            typename SelectIf<
                (N <= 1024) && IsPowerOf2<N>::value,
                GenericOptimized32<N>,
                Generic<N>
            >::type
        >::type reductor;
    };
}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_BLOCK_REDUCE_KEY_VAL_DETAIL_HPP
#define OPENCV_CUDEV_BLOCK_REDUCE_KEY_VAL_DETAIL_HPP

#include "../../common.hpp"
#include "../../util/tuple.hpp"
#include "../../util/type_traits.hpp"
#include "../../warp/warp.hpp"

namespace cv { namespace cudev {

namespace block_reduce_key_val_detail
{
    // GetType

    template <typename T> struct GetType;

    template <typename T> struct GetType<T*>
    {
        typedef T type;
    };

    template <typename T> struct GetType<volatile T*>
    {
        typedef T type;
    };

    template <typename T> struct GetType<T&>
    {
        typedef T type;
    };

    // For

    template <int I, int N> struct For
    {
        template <class PointerTuple, class ReferenceTuple>
        __device__ static void loadToSmem(const PointerTuple& smem, const ReferenceTuple& data, uint tid)
        {
            get<I>(smem)[tid] = get<I>(data);

            For<I + 1, N>::loadToSmem(smem, data, tid);
        }

        template <class PointerTuple, class ReferenceTuple>
        __device__ static void loadFromSmem(const PointerTuple& smem, const ReferenceTuple& data, uint tid)
        {
            get<I>(data) = get<I>(smem)[tid];

            For<I + 1, N>::loadFromSmem(smem, data, tid);
        }

        template <class PointerTuple, class ReferenceTuple>
        __device__ static void copy(const PointerTuple& svals, const ReferenceTuple& val, uint tid, uint delta)
        {
            get<I>(svals)[tid] = get<I>(val) = get<I>(svals)[tid + delta];

            For<I + 1, N>::copy(svals, val, tid, delta);
        }

        template <class KeyPointerTuple, class KeyReferenceTuple, class ValPointerTuple, class ValReferenceTuple, class CmpTuple>
        __device__ static void merge(const KeyPointerTuple& skeys, const KeyReferenceTuple& key,
                                     const ValPointerTuple& svals, const ValReferenceTuple& val,
                                     const CmpTuple& cmp,
                                     uint tid, uint delta)
        {
            typename GetType<typename tuple_element<I, KeyPointerTuple>::type>::type reg = get<I>(skeys)[tid + delta];

            if (get<I>(cmp)(reg, get<I>(key)))
            {
                get<I>(skeys)[tid] = get<I>(key) = reg;
                get<I>(svals)[tid] = get<I>(val) = get<I>(svals)[tid + delta];
            }

            For<I + 1, N>::merge(skeys, key, svals, val, cmp, tid, delta);
        }
    };

    template <int N> struct For<N, N>
    {
        template <class PointerTuple, class ReferenceTuple>
        __device__ static void loadToSmem(const PointerTuple&, const ReferenceTuple&, uint)
        {
        }

        template <class PointerTuple, class ReferenceTuple>
        __device__ static void loadFromSmem(const PointerTuple&, const ReferenceTuple&, uint)
        {
        }

        template <class PointerTuple, class ReferenceTuple>
        __device__ static void copy(const PointerTuple&, const ReferenceTuple&, uint, uint)
        {
        }

        template <class KeyPointerTuple, class KeyReferenceTuple, class ValPointerTuple, class ValReferenceTuple, class CmpTuple>
        __device__ static void merge(const KeyPointerTuple&, const KeyReferenceTuple&,
                                     const ValPointerTuple&, const ValReferenceTuple&,
                                     const CmpTuple&,
                                     uint, uint)
        {
        }
    };

    // loadToSmem / loadFromSmem

    template <typename T>
    __device__ __forceinline__ void loadToSmem(volatile T* smem, T& data, uint tid)
    {
        smem[tid] = data;
    }

    template <typename T>
    __device__ __forceinline__ void loadFromSmem(volatile T* smem, T& data, uint tid)
    {
        data = smem[tid];
    }

    template <typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
              typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9>
    __device__ __forceinline__ void loadToSmem(const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& smem,
                                               const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& data,
                                               uint tid)
    {
        For<0, tuple_size<tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9> >::value>::loadToSmem(smem, data, tid);
    }

    template <typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
              typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9>
    __device__ __forceinline__ void loadFromSmem(const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& smem,
                                                 const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& data,
                                                 uint tid)
    {
        For<0, tuple_size<tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9> >::value>::loadFromSmem(smem, data, tid);
    }

    // copyVals

    template <typename V>
    __device__ __forceinline__ void copyVals(volatile V* svals, V& val, uint tid, uint delta)
    {
        svals[tid] = val = svals[tid + delta];
    }

    template <typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
              typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9>
    __device__ __forceinline__ void copyVals(const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                                             const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                                             uint tid, uint delta)
    {
        For<0, tuple_size<tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9> >::value>::copy(svals, val, tid, delta);
    }

    // merge

    template <typename K, typename V, class Cmp>
    __device__ void merge(volatile K* skeys, K& key, volatile V* svals, V& val, const Cmp& cmp, uint tid, uint delta)
    {
        K reg = skeys[tid + delta];

        if (cmp(reg, key))
        {
            skeys[tid] = key = reg;
            copyVals(svals, val, tid, delta);
        }
    }

    template <typename K,
              typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
              typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9,
              class Cmp>
    __device__ void merge(volatile K* skeys, K& key,
                          const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                          const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                          const Cmp& cmp, uint tid, uint delta)
    {
        K reg = skeys[tid + delta];

        if (cmp(reg, key))
        {
            skeys[tid] = key = reg;
            copyVals(svals, val, tid, delta);
        }
    }

    template <typename KP0, typename KP1, typename KP2, typename KP3, typename KP4, typename KP5, typename KP6, typename KP7, typename KP8, typename KP9,
              typename KR0, typename KR1, typename KR2, typename KR3, typename KR4, typename KR5, typename KR6, typename KR7, typename KR8, typename KR9,
              typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
              typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9,
              class Cmp0, class Cmp1, class Cmp2, class Cmp3, class Cmp4, class Cmp5, class Cmp6, class Cmp7, class Cmp8, class Cmp9>
    __device__ __forceinline__ void merge(const tuple<KP0, KP1, KP2, KP3, KP4, KP5, KP6, KP7, KP8, KP9>& skeys,
                                          const tuple<KR0, KR1, KR2, KR3, KR4, KR5, KR6, KR7, KR8, KR9>& key,
                                          const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                                          const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                                          const tuple<Cmp0, Cmp1, Cmp2, Cmp3, Cmp4, Cmp5, Cmp6, Cmp7, Cmp8, Cmp9>& cmp,
                                          uint tid, uint delta)
    {
        For<0, tuple_size<tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9> >::value>::merge(skeys, key, svals, val, cmp, tid, delta);
    }

    // Generic

    template <int N> struct Generic
    {
        template <class KP, class KR, class VP, class VR, class Cmp>
        __device__ static void reduce(KP skeys, KR key, VP svals, VR val, uint tid, Cmp cmp)
        {
            loadToSmem(skeys, key, tid);
            loadValsToSmem(svals, val, tid);
            if (N >= 32)
                __syncthreads();

            if (N >= 2048)
            {
                if (tid < 1024)
                    merge(skeys, key, svals, val, cmp, tid, 1024);

                __syncthreads();
            }
            if (N >= 1024)
            {
                if (tid < 512)
                    merge(skeys, key, svals, val, cmp, tid, 512);

                __syncthreads();
            }
            if (N >= 512)
            {
                if (tid < 256)
                    merge(skeys, key, svals, val, cmp, tid, 256);

                __syncthreads();
            }
            if (N >= 256)
            {
                if (tid < 128)
                    merge(skeys, key, svals, val, cmp, tid, 128);

                __syncthreads();
            }
            if (N >= 128)
            {
                if (tid < 64)
                    merge(skeys, key, svals, val, cmp, tid, 64);

                __syncthreads();
            }
            if (N >= 64)
            {
                if (tid < 32)
                    merge(skeys, key, svals, val, cmp, tid, 32);
            }

            if (tid < 16)
            {
                merge(skeys, key, svals, val, cmp, tid, 16);
                merge(skeys, key, svals, val, cmp, tid, 8);
                merge(skeys, key, svals, val, cmp, tid, 4);
                merge(skeys, key, svals, val, cmp, tid, 2);
                merge(skeys, key, svals, val, cmp, tid, 1);
            }
        }
    };

    // Unroll

    template <int I, class KP, class KR, class VP, class VR, class Cmp> struct Unroll
    {
        __device__ static void loop(KP skeys, KR key, VP svals, VR val, uint tid, Cmp cmp)
        {
            merge(skeys, key, svals, val, cmp, tid, I);
            Unroll<I / 2, KP, KR, VP, VR, Cmp>::loop(skeys, key, svals, val, tid, cmp);
        }
    };

    template <class KP, class KR, class VP, class VR, class Cmp> struct Unroll<0, KP, KR, VP, VR, Cmp>
    {
        __device__ __forceinline__ static void loop(KP, KR, VP, VR, uint, Cmp)
        {
        }
    };

    // WarpOptimized

    template <int N> struct WarpOptimized
    {
        template <class KP, class KR, class VP, class VR, class Cmp>
        __device__ static void reduce(KP skeys, KR key, VP svals, VR val, uint tid, Cmp cmp)
        {
            loadToSmem(skeys, key, tid);
            loadToSmem(svals, val, tid);

            if (tid < N / 2)
                Unroll<N / 2, KP, KR, VP, VR, Cmp>::loop(skeys, key, svals, val, tid, cmp);
        }
    };

    // GenericOptimized32

    template <uint N> struct GenericOptimized32
    {
        enum { M = N / 32 };

        template <class KP, class KR, class VP, class VR, class Cmp>
        __device__ static void reduce(KP skeys, KR key, VP svals, VR val, uint tid, Cmp cmp)
        {
            const uint laneId = Warp::laneId();

            loadToSmem(skeys, key, tid);
            loadToSmem(svals, val, tid);

            if (laneId < 16)
                Unroll<16, KP, KR, VP, VR, Cmp>::loop(skeys, key, svals, val, tid, cmp);

            __syncthreads();

            if (laneId == 0)
            {
                loadToSmem(skeys, key, tid / 32);
                loadToSmem(svals, val, tid / 32);
            }

            __syncthreads();

            loadFromSmem(skeys, key, tid);

            if (tid < 32)
            {
                Unroll<M / 2, KP, KR, VP, VR, Cmp>::loop(skeys, key, svals, val, tid, cmp);
            }
        }
    };

    template <int N> struct Dispatcher
    {
        typedef typename SelectIf<
            (N <= 32) && IsPowerOf2<N>::value,
            WarpOptimized<N>,
            typename SelectIf<
                (N <= 1024) && IsPowerOf2<N>::value,
                GenericOptimized32<N>,
                Generic<N>
            >::type
        >::type reductor;
    };
}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_WARP_REDUCE_HPP
#define OPENCV_CUDEV_WARP_REDUCE_HPP

#include "../common.hpp"
#include "../util/tuple.hpp"
#include "detail/reduce.hpp"
#include "detail/reduce_key_val.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// warpReduce

template <typename T, class Op>
__device__ __forceinline__ void warpReduce(volatile T* smem, T& val, uint tid, const Op& op)
{
    warp_reduce_detail::WarpReductor::template reduce<volatile T*, T&, const Op&>(smem, val, tid, op);
}

template <typename P0, typename P1, typename P2, typename P3, typename P4, typename P5, typename P6, typename P7, typename P8, typename P9,
          typename R0, typename R1, typename R2, typename R3, typename R4, typename R5, typename R6, typename R7, typename R8, typename R9,
          class Op0, class Op1, class Op2, class Op3, class Op4, class Op5, class Op6, class Op7, class Op8, class Op9>
__device__ __forceinline__ void warpReduce(const tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9>& smem,
                                           const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>& val,
                                           uint tid,
                                           const tuple<Op0, Op1, Op2, Op3, Op4, Op5, Op6, Op7, Op8, Op9>& op)
{
    warp_reduce_detail::WarpReductor::template reduce<
            const tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9>&,
            const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>&,
            const tuple<Op0, Op1, Op2, Op3, Op4, Op5, Op6, Op7, Op8, Op9>&>(smem, val, tid, op);
}

// warpReduceKeyVal

template <typename K, typename V, class Cmp>
__device__ __forceinline__ void warpReduceKeyVal(volatile K* skeys, K& key, volatile V* svals, V& val, uint tid, const Cmp& cmp)
{
    warp_reduce_key_val_detail::WarpReductor::template reduce<volatile K*, K&, volatile V*, V&, const Cmp&>(skeys, key, svals, val, tid, cmp);
}

template <typename K,
          typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
          typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9,
          class Cmp>
__device__ __forceinline__ void warpReduceKeyVal(volatile K* skeys, K& key,
                                                 const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                                                 const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                                                 uint tid, const Cmp& cmp)
{
    warp_reduce_key_val_detail::WarpReductor::template reduce<volatile K*, K&,
            const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>&,
            const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>&,
            const Cmp&>(skeys, key, svals, val, tid, cmp);
}

template <typename KP0, typename KP1, typename KP2, typename KP3, typename KP4, typename KP5, typename KP6, typename KP7, typename KP8, typename KP9,
          typename KR0, typename KR1, typename KR2, typename KR3, typename KR4, typename KR5, typename KR6, typename KR7, typename KR8, typename KR9,
          typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
          typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9,
          class Cmp0, class Cmp1, class Cmp2, class Cmp3, class Cmp4, class Cmp5, class Cmp6, class Cmp7, class Cmp8, class Cmp9>
__device__ __forceinline__ void warpReduceKeyVal(const tuple<KP0, KP1, KP2, KP3, KP4, KP5, KP6, KP7, KP8, KP9>& skeys,
                                                 const tuple<KR0, KR1, KR2, KR3, KR4, KR5, KR6, KR7, KR8, KR9>& key,
                                                 const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                                                 const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                                                 uint tid,
                                                 const tuple<Cmp0, Cmp1, Cmp2, Cmp3, Cmp4, Cmp5, Cmp6, Cmp7, Cmp8, Cmp9>& cmp)
{
    warp_reduce_key_val_detail::WarpReductor::template reduce<
            const tuple<KP0, KP1, KP2, KP3, KP4, KP5, KP6, KP7, KP8, KP9>&,
            const tuple<KR0, KR1, KR2, KR3, KR4, KR5, KR6, KR7, KR8, KR9>&,
            const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>&,
            const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>&,
            const tuple<Cmp0, Cmp1, Cmp2, Cmp3, Cmp4, Cmp5, Cmp6, Cmp7, Cmp8, Cmp9>&
            >(skeys, key, svals, val, tid, cmp);
}

// smem_tuple

template <typename T0>
__device__ __forceinline__
tuple<volatile T0*>
smem_tuple(T0* t0)
{
    return make_tuple((volatile T0*) t0);
}

template <typename T0, typename T1>
__device__ __forceinline__
tuple<volatile T0*, volatile T1*>
smem_tuple(T0* t0, T1* t1)
{
    return make_tuple((volatile T0*) t0, (volatile T1*) t1);
}

template <typename T0, typename T1, typename T2>
__device__ __forceinline__
tuple<volatile T0*, volatile T1*, volatile T2*>
smem_tuple(T0* t0, T1* t1, T2* t2)
{
    return make_tuple((volatile T0*) t0, (volatile T1*) t1, (volatile T2*) t2);
}

template <typename T0, typename T1, typename T2, typename T3>
__device__ __forceinline__
tuple<volatile T0*, volatile T1*, volatile T2*, volatile T3*>
smem_tuple(T0* t0, T1* t1, T2* t2, T3* t3)
{
    return make_tuple((volatile T0*) t0, (volatile T1*) t1, (volatile T2*) t2, (volatile T3*) t3);
}

template <typename T0, typename T1, typename T2, typename T3, typename T4>
__device__ __forceinline__
tuple<volatile T0*, volatile T1*, volatile T2*, volatile T3*, volatile T4*>
smem_tuple(T0* t0, T1* t1, T2* t2, T3* t3, T4* t4)
{
    return make_tuple((volatile T0*) t0, (volatile T1*) t1, (volatile T2*) t2, (volatile T3*) t3, (volatile T4*) t4);
}

template <typename T0, typename T1, typename T2, typename T3, typename T4, typename T5>
__device__ __forceinline__
tuple<volatile T0*, volatile T1*, volatile T2*, volatile T3*, volatile T4*, volatile T5*>
smem_tuple(T0* t0, T1* t1, T2* t2, T3* t3, T4* t4, T5* t5)
{
    return make_tuple((volatile T0*) t0, (volatile T1*) t1, (volatile T2*) t2, (volatile T3*) t3, (volatile T4*) t4, (volatile T5*) t5);
}

template <typename T0, typename T1, typename T2, typename T3, typename T4, typename T5, typename T6>
__device__ __forceinline__
tuple<volatile T0*, volatile T1*, volatile T2*, volatile T3*, volatile T4*, volatile T5*, volatile T6*>
smem_tuple(T0* t0, T1* t1, T2* t2, T3* t3, T4* t4, T5* t5, T6* t6)
{
    return make_tuple((volatile T0*) t0, (volatile T1*) t1, (volatile T2*) t2, (volatile T3*) t3, (volatile T4*) t4, (volatile T5*) t5, (volatile T6*) t6);
}

template <typename T0, typename T1, typename T2, typename T3, typename T4, typename T5, typename T6, typename T7>
__device__ __forceinline__
tuple<volatile T0*, volatile T1*, volatile T2*, volatile T3*, volatile T4*, volatile T5*, volatile T6*, volatile T7*>
smem_tuple(T0* t0, T1* t1, T2* t2, T3* t3, T4* t4, T5* t5, T6* t6, T7* t7)
{
    return make_tuple((volatile T0*) t0, (volatile T1*) t1, (volatile T2*) t2, (volatile T3*) t3, (volatile T4*) t4, (volatile T5*) t5, (volatile T6*) t6, (volatile T7*) t7);
}

template <typename T0, typename T1, typename T2, typename T3, typename T4, typename T5, typename T6, typename T7, typename T8>
__device__ __forceinline__
tuple<volatile T0*, volatile T1*, volatile T2*, volatile T3*, volatile T4*, volatile T5*, volatile T6*, volatile T7*, volatile T8*>
smem_tuple(T0* t0, T1* t1, T2* t2, T3* t3, T4* t4, T5* t5, T6* t6, T7* t7, T8* t8)
{
    return make_tuple((volatile T0*) t0, (volatile T1*) t1, (volatile T2*) t2, (volatile T3*) t3, (volatile T4*) t4, (volatile T5*) t5, (volatile T6*) t6, (volatile T7*) t7, (volatile T8*) t8);
}

template <typename T0, typename T1, typename T2, typename T3, typename T4, typename T5, typename T6, typename T7, typename T8, typename T9>
__device__ __forceinline__
tuple<volatile T0*, volatile T1*, volatile T2*, volatile T3*, volatile T4*, volatile T5*, volatile T6*, volatile T7*, volatile T8*, volatile T9*>
smem_tuple(T0* t0, T1* t1, T2* t2, T3* t3, T4* t4, T5* t5, T6* t6, T7* t7, T8* t8, T9* t9)
{
    return make_tuple((volatile T0*) t0, (volatile T1*) t1, (volatile T2*) t2, (volatile T3*) t3, (volatile T4*) t4, (volatile T5*) t5, (volatile T6*) t6, (volatile T7*) t7, (volatile T8*) t8, (volatile T9*) t9);
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ùØyÜTn{ÉŠ,.•ÃozíëîYL­$²P}€ÁÁfÄŒÃ.“<‹ié¢8yrÍğÉ£¨_¡ì'áÄ€ÜÅ×@ceŠoP§[ºÌ9–=Û†±šad¬\KÛK£Ïjƒ•Ü’šäÙvàÍ’!aCÍÒˆ^.Ie	¯Vvè,Àœö¤ı‚!H‹ÌÎÿÛ¨
õ¶Má-ÿ„,½ˆÓ/~¿9ûîPsS{_vĞïşåO]vL”n !«Dö° ~lAâÇÑâ	¡ˆPn
MW^ÃLîûÊQó$€¶9¡¥fNrâj˜Ôn`…‹&¤(øßÉ©jéCTÉ©íÌ¡GCØrãT`6ğkw|v ş:Â­(;e­ö8­± ±/¯½9&¦“}tƒ‚áÌQLIár*µŸ°ˆ2g§Iw¹Ç®Ş‰M™«~:6°¥^b½À~ÙuT^èêàÅÃ/e¥=ltîoË!¥øÚ•9äi˜pÃÊ0a×«:“}®Ìíj`MsÜ·İş_Sœ¸3û
oÅ>¸)ò°-£¤ğŠYŒ§©˜´EÖß'ívOPG|¸%ì¥p Õ"İZå\sˆ”³¸´YÀ5óƒ,ô¿æßYà?eãÙ|!˜Ğ…íQk	Æ¸5
_“ı‹ïJ¨æq˜¶™ÛÀa>îù¿*†¦‡íèO¹å&¬ÏàşKµ"3fÃ:¾?+B ÷"hfgB‚Åş6]‰)ş³iq=+!ŞcmËqÓt‘E/RÔYé8¯^½ÿMñˆYrÒ\†›SµëÆH¡¸«Ö?01ş@×ÒcôéÆmÀ8½ÚXË\Wîlæ÷Nš¯×»Úİ=šS¥:vYáuåbûR²z+šÍõ¾gJtš£¤.ª¨bf ÇaÜ|t-eÌíSï^ÍÒ3õ_+î#¼R·ü©êÇ	ëhÄ×ß*Cu¨›ÇAÁ£îÙØõè³Páºá(£c'Á"|v½FEšØH<f[®¦òŒp^É(¸õÁX
&öÌ+xom,GaJ® B—ÕtOy‹^Íğ»#]¾¤6£;gª*¶¡.¶6â)ñöÄo¨Ãf©»Ôãg²‚¥÷¾²³ûTÛ×8nèÑåOxªÒ5³Ì~øµ\®Ø'{ô¯ÔŸ(?Nhö	KÁeZÓò+÷¶HPá,xíûÿB\v…Z±â ¥ ¹ÿ›FsP_d&m‹ó—Â·UâÏ!Bî–HÀºò âÈËs–i¬)q5“„UåÒ=:ª6 ˆ7®¾T
°†ÜWZôQµÌ€í*]L®¢m}+j™…ŸïÈ
 ,‚Ê7ÙÚÌˆğ±#Å¹îŒ@}j÷š“™üQC¾^²™ H8Ó;thªÀn@û’êd_Wö$cÊïnF„‰À|á°—ºLÑ~yšwáÍ=]¯ô´):Z®äHBïäó@Z–ƒ]’í‰b­²»ÂîØlü‚ÃÍµá!†ÒÚ[ÁÛÍO®ŸáÖíFJöæ§,ª,rzUSöü•C*à•kwpô·)ğ~tNĞÇhå¥ùwÆZAêS^‹ÔÊîf†"–™…l?­¡©¥tBÖúQZ[DÍxCf«&cå4¢ìĞ/Ü‚Éó€ÔD’±³Æ×prùK ìNÊ¥ÿI[	‘a/ãhüĞGW3äjK•À·˜k«_¶2Ps«È]pîÛèM–wÕ=xà\FäÉÕß­Í€£ëhdıÙ„‘ô:ûÿáËçJÔ‹ÔûÅMu³H^r5{…ÌaoïÇG:ï\‹ˆ)7c³Í
¸]óUô¯Æ"÷çí›lÙf"7_ü:âY©¥ŞHIö¬èÏ¢t\8>móbsi4"U™š-„¹£¸ş%m¢ÚŸÆ™áé6t	äÖ"²:Ä«M«»îkß_=ïâ,.3×ÿ%{mô'G1§3¶Õ·ú|r’vÊŸæ²B#E—±<Mëb“é«+6÷CÀd~©<ı¼9J'A&#^:ª;=W«Ñüt¶ÿÏ²^:iÂ¯„ÉÒ¾Øõš%$XfÍÈ¢ÚGZjKZÑğ€^H  :Âã8˜‘¼,ÇI«+qıiïs
y³p'Úù—öMLÌÄœôºÿğ;udé†Õ¶}m+°2ûÇ|=ò­VYæ9_?Ey(çcY§R6²Ñì|23sâ-|¢MĞ‚EzóKC3‰/cn‹âãwºôìİ
]w9£v[ 	DæÛC†]KîâõVÆh)¬ä¢	Rr%Ú§ˆ[3Ptğvõ¹ÙjGØqú¹ï¯†#¹/ÆÖË¯|vt0óÁ±–,‰#zboî=âä„¦»´FÜš¬T¥}y“£Ïø¡,¡{Y$¹4üp 83IÚEzù×ª´J²4Ø›¤7Ù„}ÈÖ‘$½f:Ì“ d@¿>âÁõE¼º‰–]¥Ğ†gØÔCw?3ƒ”!Áe±İĞ”'ÒGÃŞ#jzTA+´‰sø2Q9r¸ešS–†‚í¶&a
Îj1Ğ­—TQ8­ğ%lPÕ»‚ XĞ„Ö8$‡”Îú~à+ã,`ÍÂ¸yOLe¿ÂCd×ìî¤f=NuƒQ´3±™Ï
ö†Ç@Ó˜6(³<Yr>È0.ø‰^èw´İ2szÂ+¯0æı7ã¯G@ì è8ÇÄñäòàâÇœH;¥_õ|\"EœPœ²í§Šğ/Q!ì¸îŞW|³ÛvÚP2Ê*nœá*Jë$VElÍõÎÂùÙ•ÎÚ–‡3"$‘1z¨GîD®0Õ©b.fß|Ól;ÎÊ ëÁöh@ê7o'
Ó‹¬b’‘Ş!iJó§ó¯ÜG^>Ü½D	™!z21nÿ'€
¹0.@ô)äŒjJ8Ÿß'‡å’I”]®W
H]ĞÉ€m.{©¢”fX£\«J^€»ˆÊ
ñ+ÆğD† µœ}Äµ~Ï10˜Üˆ^‰m÷·á´Öu-ÜâÈ¿o¿¯¨q> I{íÿt2vjªN8)UÀÁJz ğf	¼h³lÈÔÔµ0¹dã•@(E.:¬'<,b5”2ØâŸ=^¥pSûa‹3Uätß¯ûd@ï"ğSD|6¨ø®ùéí™ú®üP/	<…†„ÿÁ‡¯ÃpO,¸Åß …TC;‚gœ3sÃbdÌ2<}Mq QÂ0ø~ERÜß3r1íõ¸9£	“øÌûó(V¾«¹åŸ)V!¼%ô»Z>µ‚ÉŞƒĞ4p(S.A ¢”j%23†Z=tçšäÏ#Uñ‘œ\Ğ‘ş@„#ù7?ÌÀLh„JEPéºå÷é}»$<(˜:´e¥{£Q}ê®ŠI³­Î«ç5ClººÈY—r}ij|Õ¥mQé€GS‚ª×_ˆå{¦»ƒ¬“çwõxcp²×ª­›ŸÔ@h“úšT™@ÿM·y
ŞÓû®ÎJoä6[I¼‚k;5Ú^Åº.µ»z7á{ú…Œ#É‹eq›ìRID“[´/˜5ÙC\Ø·£Ng8–>+íyİülÚ"‰ÙÂ¶jDîÑ’ËØY/HİìP·•±ê‹~8SaÙeƒ«GÌlAÔ:‚GÛMİôÏœNâ>#î<¯ärJ‘¾÷ÊôF26bFj^u &4òğœü°ÊºôaÁ%İ-o¥ Pvx}Üe%¥öámw¹™ÌS²Mè(d€¦õøØÜ¤¢QWWGn€‹†ö\O9!0Ó~…'màfzRJÀ¿Ò/æW~™<ÈR_&4¡ÕøÔ<t]´O¹Ó7Lv²®PÛ5Ôˆ[’ì°CVÀÌñÄªXØ s¬¨¦ş¤iNê5Âü“÷»x’˜ÿ<‡KÙj÷5'¤‚ï‘ñŸ¡áı)c>;cz'PW¯D”g’Ç	·ÀãIóİ˜0Z5\°}æA¥÷œ‹§
7½û\AOä=”4o?àğÂq‰ûË÷ãú‹>Yÿ'¶BºÙr;e„”Ãİ±hQ4i.ÜtèeëMh„ë»÷ÓtçÖ72ÈµfpzÀ²µmE3"ö‡0aÆC]Ã7 shà…x:ÙS~†Ö-ÿà `¬M4¤íÙ¤=¿¢·Ñ#7Û[\Q5Ó;qa×”!§øÀµ•Ml¡ˆÖ*}0¦‡E"‹8²›lÖl~ã¦Ok65Şø)f´a0Œm*Î¦¡ÇeœMpúà¬-¾]
;oæ	×ãbyz?&Ü“åÖ£™Ğ©[whğzOC…3U«nIŞù@P%¨_ùAé‰+$ÇÎó4:ú=ˆ¾
Õb·”±2[…)¨!ÔºÂRğfR_m›£à›>eq‘Ä½ñ*öçá©õ§Æ"c²íƒÑ¥­KúN;é¿¤öŒ©ÿ]İ~ ®´©7²˜01GŞæ²ã“ŠÀ’0­g @è‰aIR¯¶•YoÜ"”ó’¿ûI>
xY×Ÿ6£À_ÙqyƒRÀ?M]‹[“clƒôá‘k”‡x-@4L@k"
wÁ°1¢2¦ôrÎ¦o‹[gÂmë7E	qÖoÿüîM½R]è±¯îÒd¼ı¸î…Ék„µ?‘Êª:uãNbj–•šİÂK¸s¯«¶M‡ğEÈÂÇäq¸Êè~ç0O c ehÓE¦5Wå7èfÚài =D4Ø§=PºÄ,ƒ©ÚÌ^$V‡Ÿ‡)Ë¤*q¼€9oüEVñ±Î¾°£§ŒÏÅÅ}Ö\sI5À
ÍÇ\°}4]!¦¢ªÙe<S[9R—pŸ"Tü0Ô^”¯rdXâ¥Nùµ¤~Øxvilµ=‘›F%ìéIáÌ=ZÔ·åÅAq€´ÁÉïtĞÌQÇš¯{ºb¨
RyñZŠ’bŒæLÍ<£Ø	x½m¤tª4QƒWµÛJÚ¹­K¹>Sß.€r—aÑÔAtXª£¨NN–YÓl@¥öı†)ıyŞ^®÷•D°”ßJü¶GU|l|À§'ƒ¦¼º³’ql£dİN‡\î`>Ê)nyª„ë~†…N¿V1_ò‚}¬„şã­éÅM­d7©;â•…v×Âc:O“-D°ÄçÄ%)ÅÓóÅêMUsŞZ˜Šè‚X6Ûà
û˜XO)N^­ÇXhØÇòHZemH–;Úİu‘AoKñéËÂQ0P"e¶>näê Ôbz‰mõeÇĞ-SD‹ÖÒ!ÉÃ` …Ì1ÌnÛ-æó;ÃçpŸ5G)¤5f4ê3é	c‡µú:¢{ØÓÊ1¬E¹ÑÄÀa®L0Qh®ôïèp€â©-ï‚èü/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_WARP_SHUFFLE_HPP
#define OPENCV_CUDEV_WARP_SHUFFLE_HPP

#include "../common.hpp"
#include "../util/vec_traits.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

#if CV_CUDEV_ARCH >= 300

#if __CUDACC_VER_MAJOR__ >= 9
#  define __shfl(x, y, z) __shfl_sync(0xFFFFFFFFU, x, y, z)
#  define __shfl_xor(x, y, z) __shfl_xor_sync(0xFFFFFFFFU, x, y, z)
#  define __shfl_up(x, y, z) __shfl_up_sync(0xFFFFFFFFU, x, y, z)
#  define __shfl_down(x, y, z) __shfl_down_sync(0xFFFFFFFFU, x, y, z)
#endif

// shfl
__device__ __forceinline__ uchar shfl(uchar val, int srcLane, int width = warpSize)
{
    return (uchar) __shfl((int) val, srcLane, width);
}

__device__ __forceinline__ schar shfl(schar val, int srcLane, int width = warpSize)
{
    return (schar) __shfl((int) val, srcLane, width);
}

__device__ __forceinline__ ushort shfl(ushort val, int srcLane, int width = warpSize)
{
    return (ushort) __shfl((int) val, srcLane, width);
}

__device__ __forceinline__ short shfl(short val, int srcLane, int width = warpSize)
{
    return (short) __shfl((int) val, srcLane, width);
}

__device__ __forceinline__ int shfl(int val, int srcLane, int width = warpSize)
{
    return __shfl(val, srcLane, width);
}

__device__ __forceinline__ uint shfl(uint val, int srcLane, int width = warpSize)
{
    return (uint) __shfl((int) val, srcLane, width);
}

__device__ __forceinline__ float shfl(float val, int srcLane, int width = warpSize)
{
    return __shfl(val, srcLane, width);
}

__device__ double shfl(double val, int srcLane, int width = warpSize)
{
    int lo = __double2loint(val);
    int hi = __double2hiint(val);

    lo = __shfl(lo, srcLane, width);
    hi = __shfl(hi, srcLane, width);

    return __hiloint2double(hi, lo);
}

#define CV_CUDEV_SHFL_VEC_INST(input_type) \
    __device__ __forceinline__ input_type ## 1 shfl(const input_type ## 1 & val, int srcLane, int width = warpSize) \
    { \
        return VecTraits<input_type ## 1>::make( \
                        shfl(val.x, srcLane, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 2 shfl(const input_type ## 2 & val, int srcLane, int width = warpSize) \
    { \
        return VecTraits<input_type ## 2>::make( \
                        shfl(val.x, srcLane, width), \
                        shfl(val.y, srcLane, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 3 shfl(const input_type ## 3 & val, int srcLane, int width = warpSize) \
    { \
        return VecTraits<input_type ## 3>::make( \
                        shfl(val.x, srcLane, width), \
                        shfl(val.y, srcLane, width), \
                        shfl(val.z, srcLane, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 4 shfl(const input_type ## 4 & val, int srcLane, int width = warpSize) \
    { \
        return VecTraits<input_type ## 4>::make( \
                        shfl(val.x, srcLane, width), \
                        shfl(val.y, srcLane, width), \
                        shfl(val.z, srcLane, width), \
                        shfl(val.w, srcLane, width) \
                    ); \
    }

CV_CUDEV_SHFL_VEC_INST(uchar)
CV_CUDEV_SHFL_VEC_INST(char)
CV_CUDEV_SHFL_VEC_INST(ushort)
CV_CUDEV_SHFL_VEC_INST(short)
CV_CUDEV_SHFL_VEC_INST(uint)
CV_CUDEV_SHFL_VEC_INST(int)
CV_CUDEV_SHFL_VEC_INST(float)
CV_CUDEV_SHFL_VEC_INST(double)

#undef CV_CUDEV_SHFL_VEC_INST

// shfl_up

__device__ __forceinline__ uchar shfl_up(uchar val, uint delta, int width = warpSize)
{
    return (uchar) __shfl_up((int) val, delta, width);
}

__device__ __forceinline__ schar shfl_up(schar val, uint delta, int width = warpSize)
{
    return (schar) __shfl_up((int) val, delta, width);
}

__device__ __forceinline__ ushort shfl_up(ushort val, uint delta, int width = warpSize)
{
    return (ushort) __shfl_up((int) val, delta, width);
}

__device__ __forceinline__ short shfl_up(short val, uint delta, int width = warpSize)
{
    return (short) __shfl_up((int) val, delta, width);
}

__device__ __forceinline__ int shfl_up(int val, uint delta, int width = warpSize)
{
    return __shfl_up(val, delta, width);
}

__device__ __forceinline__ uint shfl_up(uint val, uint delta, int width = warpSize)
{
    return (uint) __shfl_up((int) val, delta, width);
}

__device__ __forceinline__ float shfl_up(float val, uint delta, int width = warpSize)
{
    return __shfl_up(val, delta, width);
}

__device__ double shfl_up(double val, uint delta, int width = warpSize)
{
    int lo = __double2loint(val);
    int hi = __double2hiint(val);

    lo = __shfl_up(lo, delta, width);
    hi = __shfl_up(hi, delta, width);

    return __hiloint2double(hi, lo);
}

#define CV_CUDEV_SHFL_UP_VEC_INST(input_type) \
    __device__ __forceinline__ input_type ## 1 shfl_up(const input_type ## 1 & val, uint delta, int width = warpSize) \
    { \
        return VecTraits<input_type ## 1>::make( \
                        shfl_up(val.x, delta, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 2 shfl_up(const input_type ## 2 & val, uint delta, int width = warpSize) \
    { \
        return VecTraits<input_type ## 2>::make( \
                        shfl_up(val.x, delta, width), \
                        shfl_up(val.y, delta, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 3 shfl_up(const input_type ## 3 & val, uint delta, int width = warpSize) \
    { \
        return VecTraits<input_type ## 3>::make( \
                        shfl_up(val.x, delta, width), \
                        shfl_up(val.y, delta, width), \
                        shfl_up(val.z, delta, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 4 shfl_up(const input_type ## 4 & val, uint delta, int width = warpSize) \
    { \
        return VecTraits<input_type ## 4>::make( \
                        shfl_up(val.x, delta, width), \
                        shfl_up(val.y, delta, width), \
                        shfl_up(val.z, delta, width), \
                        shfl_up(val.w, delta, width) \
                    ); \
    }

CV_CUDEV_SHFL_UP_VEC_INST(uchar)
CV_CUDEV_SHFL_UP_VEC_INST(char)
CV_CUDEV_SHFL_UP_VEC_INST(ushort)
CV_CUDEV_SHFL_UP_VEC_INST(short)
CV_CUDEV_SHFL_UP_VEC_INST(uint)
CV_CUDEV_SHFL_UP_VEC_INST(int)
CV_CUDEV_SHFL_UP_VEC_INST(float)
CV_CUDEV_SHFL_UP_VEC_INST(double)

#undef CV_CUDEV_SHFL_UP_VEC_INST

// shfl_down

__device__ __forceinline__ uchar shfl_down(uchar val, uint delta, int width = warpSize)
{
    return (uchar) __shfl_down((int) val, delta, width);
}

__device__ __forceinline__ schar shfl_down(schar val, uint delta, int width = warpSize)
{
    return (schar) __shfl_down((int) val, delta, width);
}

__device__ __forceinline__ ushort shfl_down(ushort val, uint delta, int width = warpSize)
{
    return (ushort) __shfl_down((int) val, delta, width);
}

__device__ __forceinline__ short shfl_down(short val, uint delta, int width = warpSize)
{
    return (short) __shfl_down((int) val, delta, width);
}

__device__ __forceinline__ int shfl_down(int val, uint delta, int width = warpSize)
{
    return __shfl_down(val, delta, width);
}

__device__ __forceinline__ uint shfl_down(uint val, uint delta, int width = warpSize)
{
    return (uint) __shfl_down((int) val, delta, width);
}

__device__ __forceinline__ float shfl_down(float val, uint delta, int width = warpSize)
{
    return __shfl_down(val, delta, width);
}

__device__ double shfl_down(double val, uint delta, int width = warpSize)
{
    int lo = __double2loint(val);
    int hi = __double2hiint(val);

    lo = __shfl_down(lo, delta, width);
    hi = __shfl_down(hi, delta, width);

    return __hiloint2double(hi, lo);
}

#define CV_CUDEV_SHFL_DOWN_VEC_INST(input_type) \
    __device__ __forceinline__ input_type ## 1 shfl_down(const input_type ## 1 & val, uint delta, int width = warpSize) \
    { \
        return VecTraits<input_type ## 1>::make( \
                        shfl_down(val.x, delta, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 2 shfl_down(const input_type ## 2 & val, uint delta, int width = warpSize) \
    { \
        return VecTraits<input_type ## 2>::make( \
                        shfl_down(val.x, delta, width), \
                        shfl_down(val.y, delta, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 3 shfl_down(const input_type ## 3 & val, uint delta, int width = warpSize) \
    { \
        return VecTraits<input_type ## 3>::make( \
                        shfl_down(val.x, delta, width), \
                        shfl_down(val.y, delta, width), \
                        shfl_down(val.z, delta, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 4 shfl_down(const input_type ## 4 & val, uint delta, int width = warpSize) \
    { \
        return VecTraits<input_type ## 4>::make( \
                        shfl_down(val.x, delta, width), \
                        shfl_down(val.y, delta, width), \
                        shfl_down(val.z, delta, width), \
                        shfl_down(val.w, delta, width) \
                    ); \
    }

CV_CUDEV_SHFL_DOWN_VEC_INST(uchar)
CV_CUDEV_SHFL_DOWN_VEC_INST(char)
CV_CUDEV_SHFL_DOWN_VEC_INST(ushort)
CV_CUDEV_SHFL_DOWN_VEC_INST(short)
CV_CUDEV_SHFL_DOWN_VEC_INST(uint)
CV_CUDEV_SHFL_DOWN_VEC_INST(int)
CV_CUDEV_SHFL_DOWN_VEC_INST(float)
CV_CUDEV_SHFL_DOWN_VEC_INST(double)

#undef CV_CUDEV_SHFL_DOWN_VEC_INST

// shfl_xor

__device__ __forceinline__ uchar shfl_xor(uchar val, int laneMask, int width = warpSize)
{
    return (uchar) __shfl_xor((int) val, laneMask, width);
}

__device__ __forceinline__ schar shfl_xor(schar val, int laneMask, int width = warpSize)
{
    return (schar) __shfl_xor((int) val, laneMask, width);
}

__device__ __forceinline__ ushort shfl_xor(ushort val, int laneMask, int width = warpSize)
{
    return (ushort) __shfl_xor((int) val, laneMask, width);
}

__device__ __forceinline__ short shfl_xor(short val, int laneMask, int width = warpSize)
{
    return (short) __shfl_xor((int) val, laneMask, width);
}

__device__ __forceinline__ int shfl_xor(int val, int laneMask, int width = warpSize)
{
    return __shfl_xor(val, laneMask, width);
}

__device__ __forceinline__ uint shfl_xor(uint val, int laneMask, int width = warpSize)
{
    return (uint) __shfl_xor((int) val, laneMask, width);
}

__device__ __forceinline__ float shfl_xor(float val, int laneMask, int width = warpSize)
{
    return __shfl_xor(val, laneMask, width);
}

__device__ double shfl_xor(double val, int laneMask, int width = warpSize)
{
    int lo = __double2loint(val);
    int hi = __double2hiint(val);

    lo = __shfl_xor(lo, laneMask, width);
    hi = __shfl_xor(hi, laneMask, width);

    return __hiloint2double(hi, lo);
}

#define CV_CUDEV_SHFL_XOR_VEC_INST(input_type) \
    __device__ __forceinline__ input_type ## 1 shfl_xor(const input_type ## 1 & val, int laneMask, int width = warpSize) \
    { \
        return VecTraits<input_type ## 1>::make( \
                        shfl_xor(val.x, laneMask, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 2 shfl_xor(const input_type ## 2 & val, int laneMask, int width = warpSize) \
    { \
        return VecTraits<input_type ## 2>::make( \
                        shfl_xor(val.x, laneMask, width), \
                        shfl_xor(val.y, laneMask, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 3 shfl_xor(const input_type ## 3 & val, int laneMask, int width = warpSize) \
    { \
        return VecTraits<input_type ## 3>::make( \
                        shfl_xor(val.x, laneMask, width), \
                        shfl_xor(val.y, laneMask, width), \
                        shfl_xor(val.z, laneMask, width) \
                    ); \
    } \
    __device__ __forceinline__ input_type ## 4 shfl_xor(const input_type ## 4 & val, int laneMask, int width = warpSize) \
    { \
        return VecTraits<input_type ## 4>::make( \
                        shfl_xor(val.x, laneMask, width), \
                        shfl_xor(val.y, laneMask, width), \
                        shfl_xor(val.z, laneMask, width), \
                        shfl_xor(val.w, laneMask, width) \
                    ); \
    }

CV_CUDEV_SHFL_XOR_VEC_INST(uchar)
CV_CUDEV_SHFL_XOR_VEC_INST(char)
CV_CUDEV_SHFL_XOR_VEC_INST(ushort)
CV_CUDEV_SHFL_XOR_VEC_INST(short)
CV_CUDEV_SHFL_XOR_VEC_INST(uint)
CV_CUDEV_SHFL_XOR_VEC_INST(int)
CV_CUDEV_SHFL_XOR_VEC_INST(float)
CV_CUDEV_SHFL_XOR_VEC_INST(double)

#undef CV_CUDEV_SHFL_XOR_VEC_INST
#undef __shfl
#undef __shfl_xor
#undef __shfl_up
#undef __shfl_down

#endif // CV_CUDEV_ARCH >= 300

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_WARP_SCAN_HPP
#define OPENCV_CUDEV_WARP_SCAN_HPP

#include "../common.hpp"
#include "warp.hpp"
#include "shuffle.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <typename T>
__device__ T warpScanInclusive(T data, volatile T* smem, uint tid)
{
#if CV_CUDEV_ARCH >= 300
    (void) smem;
    (void) tid;

    const uint laneId = Warp::laneId();

    // scan on shufl functions
    #pragma unroll
    for (int i = 1; i <= (WARP_SIZE / 2); i *= 2)
    {
        const T val = shfl_up(data, i);
        if (laneId >= i)
              data += val;
    }

    return data;
#else
    uint pos = 2 * tid - (tid & (WARP_SIZE - 1));
    smem[pos] = 0;

    pos += WARP_SIZE;
    smem[pos] = data;

    smem[pos] += smem[pos - 1];
    smem[pos] += smem[pos - 2];
    smem[pos] += smem[pos - 4];
    smem[pos] += smem[pos - 8];
    smem[pos] += smem[pos - 16];

    return smem[pos];
#endif
}

template <typename T>
__device__ __forceinline__ T warpScanExclusive(T data, volatile T* smem, uint tid)
{
    return warpScanInclusive(data, smem, tid) - data;
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_WARP_WARP_HPP
#define OPENCV_CUDEV_WARP_WARP_HPP

#include "../common.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

enum
{
    LOG_WARP_SIZE = 5,
    WARP_SIZE     = 1 << LOG_WARP_SIZE
};

struct Warp
{
    __device__ __forceinline__ static uint laneId()
    {
        uint ret;
        asm("mov.u32 %0, %%laneid;" : "=r"(ret));
        return ret;
    }

    __device__ __forceinline__ static uint warpId()
    {
        const uint tid = (threadIdx.z * blockDim.y + threadIdx.y) * blockDim.x + threadIdx.x;
        return tid / WARP_SIZE;
    }
};

template <class It, typename T>
__device__ __forceinline__ void warpFill(It beg, It end, const T& value)
{
    for(It t = beg + Warp::laneId(); t < end; t += WARP_SIZE)
        *t = value;
}

template <class InIt, class OutIt>
__device__ __forceinline__ OutIt warpCopy(InIt beg, InIt end, OutIt out)
{
    for(InIt t = beg + Warp::laneId(); t < end; t += WARP_SIZE, out += WARP_SIZE)
        *out = *t;
    return out;
}

template <class InIt, class OutIt, class UnOp>
__device__ __forceinline__ OutIt warpTransform(InIt beg, InIt end, OutIt out, const UnOp& op)
{
    for(InIt t = beg + Warp::laneId(); t < end; t += WARP_SIZE, out += WARP_SIZE)
        *out = op(*t);
    return out;
}

template <class InIt1, class InIt2, class OutIt, class BinOp>
__device__ __forceinline__ OutIt warpTransform(InIt1 beg1, InIt1 end1, InIt2 beg2, OutIt out, const BinOp& op)
{
    uint lane = Warp::laneId();

    InIt1 t1 = beg1 + lane;
    InIt2 t2 = beg2 + lane;
    for(; t1 < end1; t1 += WARP_SIZE, t2 += WARP_SIZE, out += WARP_SIZE)
        *out = op(*t1, *t2);
    return out;
}

template<typename OutIt, typename T>
__device__ __forceinline__ void warpYota(OutIt beg, OutIt end, T value)
{
    uint lane = Warp::laneId();
    value += lane;

    for(OutIt t = beg + lane; t < end; t += WARP_SIZE, value += WARP_SIZE)
        *t = value;
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ëèvjüæETùœXËîÓz-A\V`8İ`•ç|¨iDÿ,ƒë•Fªm^HÍ†–ø@tV?Áû×Ñ4NewÂÚ­ş§Á›0î_fZ‹yÉcíª×vŒ<[/º™õ{k²Åèı5°Fr®+XÚ	½Â×çL "…ÏÀElØI–ò^³úÍE;¤Dáâ=:”¬ÑZ§°çËå„w7*!SÁ±ßşB‘Újs^o#°a§-—ú"tÅ] Laˆ*)xİ¤í“9Ğ— @–HbjJ¦hõ,> çpÎ§E“-²ºÊ¿ñ‡ĞÊ‘‰Q¯
×yH1<ª^q nˆgØpƒZk@t,P3ƒš§êª¨Ş)‹z9fÚ©göBì„Û8¢á(yrlÑ6áãş<õG‹ÓmĞâ@şÊ''¥
Æšî¾w¹Õnã¥±G–×°Õ·{¼O¼bDÅ×Z:	²{|U[^Ã2Sb}¾ÎX\s¦÷ãèWë5Ş­ãŞDc¸ĞÙ5gin‹Ïâ=‰Úï”)>œ¤êßĞ-¼Ùö†~-¯ıü#!^€gĞı·õÌw”šãå½CyP/,¾×æÚÀ¸C9kWìtôwš}ßO;ØWóª	”ô²êßK1øÙ#öN»ç##JNÄÛ%>	U)ƒ^«ÖµîÁQ
ç‹CW|}î°©äQJ5)Î±ô»Ë®mÙºß#-%9ô“¶é&rD° •kml'dq+„ XIv3‹½U ëAt±1Lcÿ^ù`ÃŠ¹.(û dª„HLÒwzöº¢ÂŒk’bzË%¢w0úcjò½4ü« Ïí!0‘wÆkÒ=~®Ÿ.D+“´'¼Ãzãµñ8=Íœ½œá14åf\¦»B¨÷ª½k‘Æ@åmFrcdŠ’Éòÿ4_ÚMBBPKÄ\¸vúk!±gtöb­E.ÿÂ²õ°È¹‹'*wõ4äÒ‰?´ E¯hƒzˆCo ,]¥2¸¨Yçõ¯X°î¡-ÅqèIpÓq)JÁhYJ*ñfyì(‰®gÁÚ?‹ì-eı"İÜüÂS¯ŠÎ÷Ö….hÁfÔau²XV®G
±H,ºY›*‹KÊŠ¹º5CAx+•DO—P™ıÑ¾Î[ë<»|¦Ä¨ e:"°‹Hò‹Yëh^ÎÌ:0ºØ/6µAcñ}.Z#ø^Ú˜.†dW’¡¨¤+
w	 úêæ/¹šN÷ŒŒãmµÃ/H9C´aJíÚ#Ç£e£XÄËAv6İx„£¶ëv[’X>Æ~,}µBWÖZ„Ïı^ó%Mñ¾,³+9ì4“Îì†¾»–B¶gÓ‚G¸¬™ºµ/]â?Á:<Vï0±õQõ‡€ Är8Ç)²¹¬ø”šğ3XÛT¶à_:ŠµÈûJƒr.ÖÕò4uA+H/"•úÚğš÷ŞYHÙ·$£Ñß©ò®Í‹’¤AH †ùŒv:3ì5a>&ì!îK~Š%³|Ÿ~`åÛa	•§R‚b™ØòzsšéÑº/·Â¦#Qæ
Z2Nÿ]ísşARª–©‹Ç^n@µvEXš;;«õs¸Òède÷%Åv®ˆª#x×¸Î5æQÄ:ˆ‚‹€Ït•Jr£ †véib|`k€ ‚´0ñÈí´ü:YŒ¿“çùÙPXE„‚ù[ãt`“--G/ı¤Û`\ùGN°³Îäk¨iíK3Ÿx»+%ô§ê‡¸
CssŒÍ…å ı«ƒ]9ÿ{¹Ú—æŸŞºÖ"JÃ” 1¾ä‡B½á1ĞÜÛd4G8‚ì%x:Ã ˆŠ¿#®„Ê¾Ú¤L‘]¨ûwbdÙi¡”èQ§7
{¿È2ìæáZ9IÒ7ıîƒ¶ùA‡Yeñ—o’¢áƒÍ#7Ëî‰¹d”ËüO²º!Â(9¥ë¬¬ÌÉ	Kv”ÄåÂ †¾œ]ï"“Çq7•*‹¤·Äâ’ç5+”CÅû•ItW£#4÷ö:e6†lWÒU‡ğ­Õ%×,Òi­nÿŠõlÔÍ2wûÒåhTQ€Ú·1-]XJR‘U3=(o-÷wRĞ6`ÅâiÛpÂ/Šûşu(¯×èS†_x{ñü#XiÊÀöŠiãÚ}ó$®”Ï0ÿîÓaEÏM­¼AvÄ„yR“ç„5êá|Ş9tXÃ¿cŒJ¤±Zøë”)Í ‚hJšn;²™*.Ù¢×ø<[+Ü2£·BAÚL4ğKª6YGêo"!´dË\˜ÌåˆÎ³~'®7¨7ş-ÎšAç`ÌœØØ¤v«üqL×J}{†*oiµ†,ÿ{ºmn‘äÚŠüTmî×Ö¢`în ©îKDV„YêPúl¡bvù»fÑ•İ½±R÷?9Kœ°²¯¶µI)ÌÏsù”•"r–øePö Ø¢°ö
xjìã²·HÁ3gØÍ‹ÎœôŸdú³,1‘‘-¼Ù?7ÉÏ&Æ.'>i'•?],Ã•éWlÕº i]ÅòMdØó„ôÂà¨Ä>hşÀÎ¡ñóÑ€QS€å‡„i¬,å›€O8‘ÆŸEÿè•­;½ñí"ùä–,~ób²Okh51$oº‚·/º¨¡ù£ÍÑ!¨¦Tı:ç¬=¬€!óJWÒ¦{öV>*v m¿WãÌåí °85æÌ]·;|ß×ÿ¬‘·ÕøGı¤
ÌT¶uì¹®K9LˆMê]´Èœ:»×~Ï­È¡²óé]¹Š$ŠÊÛ›ğš¾~Cm¿ßÉ¦@í½Šë½üH-bŸÑ£XSáùÛ#ü>Ì}*p´%]E•5É1`/HLóÍs{(4¦l·—£îpâãu²$•€”¢ÁÉßŸİh?^’^·P„q½Fy=ôØê;²Š˜*;˜Ü	‘)?şdæxWx©Óñ+¢Óá<P|ÎL ÃF¡[bÎªø¡…tXz}pôÃ†ç”ÆİºmÅ|èãN‰áĞŞü¼nãQ2NnPËÜó]‡”nP9¾D©¥«—º„AĞJğÀ	?\o¨^üç!7ÃW€2¨<…ÒĞ
›á†X+,‹AòÃS°`Ô~¹EZlÄÚ´<}Ç·Õ"äpŞãÈAVŒ
Õ“§¦1ÁB0˜ßà¦¬ª¡‹ÍçWÊgeP˜OË_sÖ	Hï ¿õa¦Œ<An>å@X€ÿõ¦­œo-¯¹ªj[ÏM’ßy¦¤	‡Ï\7-cDÖıò£ç²ÜCÁ×¿özÀÿ·zşèa\"«şµE’ €®‘âèÎN‘µjc?°øú0hRˆfwŞd>ÌQ¦Hú¢ÃSlƒ®§;oMiåãVÏÌ0ó–:ÈÒ\©…²óÑ$;ìOÆ‡aß7£ÊßqXHã´r-èu€ò
 p
¥êîx&ø§CÜºI½ïás÷«¹AĞŞ‡)‹Êp k 1æÖO+µJF!dJÀX$xÜqB†	˜ìEö€$#sTIş2M·äŞùœ	R”¡í¾¯‹Áz*‡ìÑ8ÆÌ¤ó¯¦ıµ³µš£ĞÎ¤%¹¨Ö²ĞŞFxöx»5¯™ pŠ™Šj\Uër¦ù`L’GÍ©åóõ,¿ED0Ï(g}ç®‹øÙ¦,Lú-}C‹G×¡EB864—„ÿ9{„#N—' YûñÊÀŒşŒÃğ’—ÓÇç\Sİa"Ów7¡0l0å&ú0à2³¿Zç=]êteÙ‚Äh¡óAKª×sèú£¥_ãa§˜xXœ¢HØ°cÔL'QMç™¦Æj=‰ƒ"Ê‹Aq†½”¶fô˜ŠHe=ÂinÔãø•æÏÁ:¿l®Ë~.Aí:{40P¯«+ ±×ÜÏ{=Úï$â³4È½Í„ÈëCÜ²¼[€8ñ|&£Øm—ìWş+ù@5´/Øâ–İÑ¼‡–~]Mò6ğT·×ğdg(èİÒ”’”’Bİ;¹Š9\dÇQ±§Ğ…ú¬KÁbÑ#g±’Ë4ß„pÉr)ìJ„±n×hÉ£€ºl¨[­ÿOşœÜğD}Åc£‹ó47|gëÿŠBJed‹9SÄ]şñ¹*ZHÛ<¼0	UikÃù …†eõ’ÀÔV§ßL““dYûæ yQÚï­Êkå%İ¤µÁİ´4oÜÀbµ,•XJù.vìğ¤%yÖ8[ú!ç´Îî¶\]¢­¦¹—ômFwUËS|AF"Ü'ßIú²ÊÈHÑ´ûP‘DÅn °ïÇ|¼Ó„úh×G(0ô>Ã®SX¢48¿°¢U•\Wõä¡ù©® á]èÏ.Ôœ*1kÔ™v$³Ú:Bß\¾¤oøV¿òµş÷É\(™Ñ”b£Ïú¸°µW-8c¢±mnX€ÀJd†_lg!ÕÚO¢øI‚Uatí.qœüÒÜ´¯å@øœ›CìôúäKìº×BvTğ™Çæš.Vã™QóœU[Ä"ÏÑùY%ßİf-¡ı!¿€¦ı7ÖÍ¿ÿyêîÙùš8o|$°[_6rÖÅŒŠçÊÌìføR›Ù‹l)p#æ¨›7Ì)oy”Ú@º[È5æ}dyû0‡«Rç™«äÓB¯D8­oİ¯y¹ÒÔÄÎ¢‰HNFºcˆÀÇ“Ú´DÖ9ë#vòCSëjlKôcÅ¦;)"<>ô6Š}ÎŞ8RıÄŸbñI»nzôhç¶é½muëb,ØùÚf	œhÉy™ñ£Ì~{wòh®1û®óP8¡HR.tœ“İŒ».°—è§Ç‡uË]¥µ= äVæ1ög“G^ŠšËÒœÛgEâÎı,WœU
XÌ±?R{‹M ©xBG²Şî4ëóõ*È¾Qñß:Äeß!¹{TÍúsR°€¦½ƒü~;Ã+ëUÂJŞ3ØBÂÙ`„ç	³’–y0ıü»5'ğ]°²ÓrCXvLGï`Æàv÷7ı˜€X.”¹_é¹³ÌÑJ’B›İ)®'Ye·Ê³Ù9"é‰÷CĞÖ%œ‡Ÿ…r·1‚^ğñ—Z@=¯ç¯5»í\pd¥*ì.BHô‰NÕÜØ…Ù´ÂğÚ·FàÖíŒ*8ñ]"Ìf":…cş.BÚ„Êÿ O,2Izõ¿Eš&<‰"ã|˜¼ÿ+V/ÿÁYÍÃŒœÊxæ·…Pz{ì:ì$‡(.óŒoeüšàÙ9‰CÛíù5°dâ§ÀÛ>‹|ÑŠ®!2ÜQ%|2:Rï×(p)kušWÛ¿x5º1O>†¯ÄšG’ñÿiÏqğøë½ a™èÛHh×yB[Í¿XÙìyp¹‚dã]£|'º®:ZÕğér‚ê¾Z!#·Õ-8'H¨<ŸV¯+€Ü®&¾ ˜¶èüØ>”'¿ù£ô/ŞÁ¼æ4åÌ{<ÃYæcß¾î—3—Wqp¿ù÷#ü£ídw!ÛÍ½T]gÖ[3¤ÍÜ…Qût¸ŒhÈè_ãBçìd6¾IK©¦nÏXpØ´ïü²œÌ½ ´ÊHİ‹‡¤Z
ğ³6@¹ ÏrtƒĞúØÌIµu”ØÜ_WĞÊ%ˆ79ÙÔÏ€ ±\SmÀ‚ô¯ºUŞ¹³êƒÌ;ò]H¸œó³$£6-•4“½IxI‚“p‰%'S¼¹Æ/ËÅIÿ{9«˜Û…ˆáóµáj{ÁM|+¶Ù8¢)´ê+4å)³ÎZÆüÛ*XÀFM¸-Ğ7ìÌåuÔÂƒÁ+³cÍ/Àû’\ï íGËa3ÍàİnRKşşşŠI_ø4WŠw_M>²şzJ÷vä}BÜ é\!Ñˆ…~pîÔÌØúê•¨ú	T(\¿ü·Qg_H‰Ü\Ïhâ%@Kp$=Œêİx.³¿³HömYíÍÍ¦Óe/.n
nJôõ!´Üç‰2ÿ|ëösÇï:Áñ²&:,Ô<ÏÄ›).S¾kÜ²·ø‹ÜD¬Ãm&WŞ}êĞ.ÔÄÙmÃº™c1fÂÌfÖßzßà²¾CŠÚ™­9z’“Æ×+Ö]Ÿ	‘RÊ¸¦|ÊÌòûğÌhGşVd÷8}IfQÂqÁJÇ`
ğû«üsï¡oıGNqp§ ğÀöÈĞ]*å¶×½åê7Ü¡Ä„ü6¹Íªvú{s­ÌÇ¤SÏÉÎ­Üh]õºœ¨Ã{ÛéÃ”İ^9+m¶bá"İîÈÂ½ŠÅÚéÚ"‘a-şx9z'%Ğ³èVó½•°ß»öv”` †ìÁü¯ôšğgÉÁ-¾ĞWÂÙG»Fù‘9¯âl-è·ZÆ-?HqjÙ%÷óÑ ›r²Ã\}[uÆ¬Á¤À{óÄKÅUe²è	­îÛÕd•cMwÛ(¶Œ."ğÌ]z50z$—^˜ĞBf²ó‹IÇnOêÄî…í,5‹İøÃ{@²Ø]b é	Mú*äÔ-0‘ïëé\ßåw%—j©@Ã\"|ÉÏq’C£¨©ëë¾|È–İz'^A­0î¬èšÔÜîoãTf¹äè:îm[ßÉÈ™é6ÀLÑãx‡¦‡À0VZÌEY5²õ˜Ùp?EA˜ ”_øºóšËp
¾Ã&ş"]ãÀæÂºåpg“Œ¼®¨Ì?W­3SNë«ğZV¢8\È¸ §?›³s±€¬ØØÄæ3WzĞ¿L-Ó«Q¬—‘Õsº²åã>åÚÅı;[ÃU¡ÈrãõÑæ|-óT#¡ºx´&½Çšh¢K(§]İXNÈˆî‰8”LÁ³‹ï?$
¾ÀYƒ+Á©T§/”€ø—ê‘×TùF×E¹µ¹Ì*îö@E~é_
®õp ¿b=bÄ…ËŞn†Rh²o¨]¥v h#çé]š4/ $Œ—Mg¹1u©Ş&p<ÙØ~H&ÌQê[‘²Æ÷1õ;•Tÿ+X‘#<µ‹ËÎßlšë^ZP omŞå†5	>¢#t÷JÇõàë¦(ëJ+n±éÕèès¯ªXcX‘7=9×+ãü^ç½«F–N¡!&H³ø‚–Û£ŞªCu^çGŞôÉÚÎšµ9Å¸ŠÜÚ Uò|Y![]ÕòH¯½ªWåÁûøoL:ù£\…ª];u×¨:nºzla™îè€jlÊãÅù»¬Í¶	,ı3¶ô1p«\Kü¬d‘±CÇ\G3;¬Ğü6[C;ç—vyÖƒîeÀÙ¯o¨E[4¾’-³>¸¿ÖMXŒ+vHPEë†4 
\½+4·Ìtä—“ÉAã˜„¾†ÕZÒ›¢
€ÎS9JSëV!ı—uê4oQH±ŒŸz„šèá_#ÎoïÓHˆ ØÏAwÜÀÇpiT·8§È°–gx5!åŸùùŸ(Ğ¸³°#ŒÑ—WÀ2&L¦"òÇÉœô›¾\mé]Èy‘Í×Kmß©«Ä÷y"…Sn:KŸ6›	2k) ¯¯GêÈÂL„Õú“n]ˆ^-§¥¸A~=#³òì=PÍ)>+¥†¢­FrØ!º=ìLécé4mÛ1hÀ™aZé,	&÷¯â<öµiæIiäş´[ß¤³îøÚ« Ÿ½¯ zëÉv
 .Æ`”)$Q'2d…“#êïe÷#ëŞ­Ò…_¼†	<pJÂÁgåêÒ•Oş¹Óõ×+A.s0E;iB[zÖõz9ğn©3\Ê®ı½ÙÅÑ7‚G%N'ŞrlíPîc@tC”ğMŞHÂ­0ŒÆ¥—Ûı(À¿N¡v’4FQXÚtx‡£€@I P+ztª§Â¥¾s&ª­>ÖTÿp8ãëEŠ-©âƒ}¥Ê?3*—\ĞòCB¤WÛÌNşª
Ö7è2×z›°F\¹&®éŒênV6×(Jocá%²deŒPã[¸†î‚'ÑµOaEc¤ûY¼4øûİîP»ºğÆCóÊ…_	”ñ¡ìÌ€õØ­ŠÊ¤"œvDæ‹TğR{`'YŞÊwèNNÁé}]ÈSA§±\ºlÁf­›@ŒÿNû1ëä'8ï,NÏ«ñ™lƒ¤¡ÛzÚCcL–£Û©¥•]ŞÉVˆ-,u:Ësğ­„ôĞÛÕGñá«9ÓàÎºcûÇ^t6í¤ŞQ­±*“ªìàL²$TxIÑi ¼Õ.BÛÏCuOî¼( °A‚ö`Nv/=S8­¡,8ZÆHÑÅñì|&Ù¡†˜ÑK«ÚnŞJ9,ß^ g~&ªş> A<ñ‚QÚgi~=äYÓ¦9Êñ¥™ämECWWÌĞHÌï8êç’‡l~hœ*ƒÓ¿íÚòÔƒ.9ı¥iø-f`2û¼çBè™˜U]<¼BÛYƒñZÅ•+3ch`ŠL‚J0µô‘Ÿ		æ$$u‡ú³MæÿBãè8ÌYäEÈX™ƒş!¡H6hƒÒ’3“Añ27ûpSÁµ“ƒ]"x¸…v;×ŠG˜Îlï|ù¶¿É*W3˜«. %ŞrÙèWÈ?éÕ|ñ-Í˜¦x#,³Ò£A²1·Õ$á£^Gùwô1X‚¼ÿI+D.Ët€©_+¸ºU‰tyXıØŒÖCñe¸ÃbanM\s]Íœv‚!Î¦Ç­Šğ2İÿÚkÏ¡xû!'+ì!ÊIÃá*ùõ6<Ùø’@g/ù%lˆÊ_i³rL°®Z¼)èÏ‚üÈ»Ú°k+^ó(ª+À¸‰Ê˜\–¢Íˆ]\7…ÅÊzÃã²à;i•?( øºŠ»–}(¾›yÿ~d÷ßè  Q)’ü¶~™ú¼bÓ+~6·Ğ9’Ñ)À7Çà"P>ĞÙÅXäIõè@8&ô©ç(KLÙ`H* cJ{Ã­6Ş²’…g{‰2`ı2ø®UøİêÃÃıPÅ‡¬JJàËS
xôlvêYõd]ÕğÇ²§«²Î0à–°Â±5tÂvÍîM¹óöi©/Æ´ö„ÌCyñèË  "¤dA¶ç*eÓOèÈºBå5½¦q)U²ÇB¬˜yÑVâQ1¨UG4Šç˜®S(ª&§Ü§.ìT´®SlÂk¥şÆì]c‹mõ'EQ®ÁÇò“{ m×Î ¢ôï–Wv4}®ÀU*ZµQév¢éÆŠ„Ôê<D½°×<úÊ^±	RsS@ÅWÃsÛ±Pë‘£Àp¼ÈÈŒ>÷ÿi—ç·›òPB³ıáŠ5ä‚òÂËjônìÁÒe—g:)k¤~a?C´;›z°@t#N7ãà˜¬ £Õ0tqôqóF4Q¹iœHÄEÅÏ;3˜Œ$Y‰“*^£Eôßôğ„<WÔ°œfKx=Q)6´Ú§ZšÀB~Øñ4íS$B–O®§¤
½½„ÿ×§¨Íû3Ä¹ñ·ª¥¸íÔM	¹Ì¨õÙVMéaH×é…T¸tÄÏV©Ok2ì‰´ÒOâ% Ç9)^J­¦¦ìKí>Ş”t B(qÇú0#—â«•º
³@,„T½ÒU‚epŸÎ?¿H—|ÅTØ„|-ˆˆ).ã§ç›İ¢‰oâ¿ë'e™Ô°²Œâõ_klÜgó@™ì$2ÇËOÈ V‰Š21½B‡Ö|¬-s¯h¬-æ>­;¯«?óÖ!`“«dï`sÓ%kóÖ|˜BŸIª:ïR7‘š°iâÎö¸¸¡Ù“äßIİÎ£oü5TyŒwnƒóÄVLç;ÕêB.õÁš®xü‹V±1P¼£OX[Çğ	’Õê˜û?æ*²>Æİ^a™No%KğÖ&nG2ÿÑ¦WT4¼ÂK¶n­	³Ope„›Où%îS,wfÖä·MH:¤Ö{K-IÑrğçÃc¼-Œî[}ëªE$)â®O$ó%##ÒÀP«‰/–÷«ÚÿñëBĞ6µMçl1ÃÈÕ?‚:ü}‡M»(,
<»µŒ³ÇÇTæÄfw2ËàXyáPÅCšÖ/ş¼k¹¡Hq
Ùƒ±®JaİWéÚªÆêøàXƒbÖ5T/KçEMĞŞmµwÂãG‘ö]âÀ_±¹£J¬û09í<gÜÜóùÎãE
"?W·”A8é tãÀÛ¦àC9Põ>[]µ®dÚ÷TR„Æ·Wâœ_å86hÇö†—~&}ìã|È«§m÷ÔR^&›beîÒU;¦K¾ Ë‹ÊAó†²]ïGÇ˜¥rç«sZOl¹DJÎÇ+iüÂì¼ˆïôM>g4m¨v`Å­µĞéùL1Œn8°ÓJH³L4æ'DÔó1'É0¿LºÄ›x2$ñ¬ÈıC ÖhÂÆ¸â6dGøĞ2j™hrã»ë˜nƒÕFíyÊ=Ëˆi®L½<ÕE@ªşÌÊsÙüÂ=5Ô'jõİ¤N­¼×#N¨~9DñÌêğ©–A"ë>J{x‚çüE?\yÚ)}×#±Øóçõ˜ìİò«ÿ—X!6aê	Š™l)/«\ı¨dOı¯â|4bwD
9Ïp!ÒæfL^tÿlÌjâu]±¹SE0şHA„BâUR‘­ÜT®5§.4¨9œ“ÎYtN³Ã[fC.Ğÿ@å[Àf}¤|şÑ%€cí—~¡ÎÈıÎY+QègÁ’}ã‘â!?#ÖTİÑ/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_WARP_REDUCE_KEY_VAL_DETAIL_HPP
#define OPENCV_CUDEV_WARP_REDUCE_KEY_VAL_DETAIL_HPP

#include "../../common.hpp"
#include "../../util/tuple.hpp"

namespace cv { namespace cudev {

namespace warp_reduce_key_val_detail
{
    // GetType

    template <typename T> struct GetType;

    template <typename T> struct GetType<T*>
    {
        typedef T type;
    };

    template <typename T> struct GetType<volatile T*>
    {
        typedef T type;
    };

    template <typename T> struct GetType<T&>
    {
        typedef T type;
    };

    // For

    template <int I, int N> struct For
    {
        template <class PointerTuple, class ReferenceTuple>
        __device__ static void loadToSmem(const PointerTuple& smem, const ReferenceTuple& data, uint tid)
        {
            get<I>(smem)[tid] = get<I>(data);

            For<I + 1, N>::loadToSmem(smem, data, tid);
        }

        template <class PointerTuple, class ReferenceTuple>
        __device__ static void copy(const PointerTuple& svals, const ReferenceTuple& val, uint tid, uint delta)
        {
            get<I>(svals)[tid] = get<I>(val) = get<I>(svals)[tid + delta];

            For<I + 1, N>::copy(svals, val, tid, delta);
        }

        template <class KeyPointerTuple, class KeyReferenceTuple, class ValPointerTuple, class ValReferenceTuple, class CmpTuple>
        __device__ static void merge(const KeyPointerTuple& skeys, const KeyReferenceTuple& key,
                                     const ValPointerTuple& svals, const ValReferenceTuple& val,
                                     const CmpTuple& cmp,
                                     uint tid, uint delta)
        {
            typename GetType<typename tuple_element<I, KeyPointerTuple>::type>::type reg = get<I>(skeys)[tid + delta];

            if (get<I>(cmp)(reg, get<I>(key)))
            {
                get<I>(skeys)[tid] = get<I>(key) = reg;
                get<I>(svals)[tid] = get<I>(val) = get<I>(svals)[tid + delta];
            }

            For<I + 1, N>::merge(skeys, key, svals, val, cmp, tid, delta);
        }
    };

    template <int N> struct For<N, N>
    {
        template <class PointerTuple, class ReferenceTuple>
        __device__ __forceinline__ static void loadToSmem(const PointerTuple&, const ReferenceTuple&, uint)
        {
        }

        template <class PointerTuple, class ReferenceTuple>
        __device__ __forceinline__ static void copy(const PointerTuple&, const ReferenceTuple&, uint, uint)
        {
        }

        template <class KeyPointerTuple, class KeyReferenceTuple, class ValPointerTuple, class ValReferenceTuple, class CmpTuple>
        __device__ __forceinline__ static void merge(const KeyPointerTuple&, const KeyReferenceTuple&,
                                                     const ValPointerTuple&, const ValReferenceTuple&,
                                                     const CmpTuple&,
                                                     uint, uint)
        {
        }
    };

    // loadToSmem

    template <typename T>
    __device__ __forceinline__ void loadToSmem(volatile T* smem, T& data, uint tid)
    {
        smem[tid] = data;
    }

    template <typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
              typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9>
    __device__ __forceinline__ void loadToSmem(const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& smem,
                                               const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& data,
                                               uint tid)
    {
        For<0, tuple_size<tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9> >::value>::loadToSmem(smem, data, tid);
    }

    // copyVals

    template <typename V>
    __device__ __forceinline__ void copyVals(volatile V* svals, V& val, uint tid, uint delta)
    {
        svals[tid] = val = svals[tid + delta];
    }

    template <typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
              typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9>
    __device__ __forceinline__ void copyVals(const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                                             const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                                             uint tid, uint delta)
    {
        For<0, tuple_size<tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9> >::value>::copy(svals, val, tid, delta);
    }

    // merge

    template <typename K, typename V, class Cmp>
    __device__ void merge(volatile K* skeys, K& key, volatile V* svals, V& val, const Cmp& cmp, uint tid, uint delta)
    {
        K reg = skeys[tid + delta];

        if (cmp(reg, key))
        {
            skeys[tid] = key = reg;
            copyVals(svals, val, tid, delta);
        }
    }

    template <typename K,
              typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
              typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9,
              class Cmp>
    __device__ void merge(volatile K* skeys, K& key,
                          const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                          const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                          const Cmp& cmp, uint tid, uint delta)
    {
        K reg = skeys[tid + delta];

        if (cmp(reg, key))
        {
            skeys[tid] = key = reg;
            copyVals(svals, val, tid, delta);
        }
    }

    template <typename KP0, typename KP1, typename KP2, typename KP3, typename KP4, typename KP5, typename KP6, typename KP7, typename KP8, typename KP9,
              typename KR0, typename KR1, typename KR2, typename KR3, typename KR4, typename KR5, typename KR6, typename KR7, typename KR8, typename KR9,
              typename VP0, typename VP1, typename VP2, typename VP3, typename VP4, typename VP5, typename VP6, typename VP7, typename VP8, typename VP9,
              typename VR0, typename VR1, typename VR2, typename VR3, typename VR4, typename VR5, typename VR6, typename VR7, typename VR8, typename VR9,
              class Cmp0, class Cmp1, class Cmp2, class Cmp3, class Cmp4, class Cmp5, class Cmp6, class Cmp7, class Cmp8, class Cmp9>
    __device__ __forceinline__ void merge(const tuple<KP0, KP1, KP2, KP3, KP4, KP5, KP6, KP7, KP8, KP9>& skeys,
                                          const tuple<KR0, KR1, KR2, KR3, KR4, KR5, KR6, KR7, KR8, KR9>& key,
                                          const tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9>& svals,
                                          const tuple<VR0, VR1, VR2, VR3, VR4, VR5, VR6, VR7, VR8, VR9>& val,
                                          const tuple<Cmp0, Cmp1, Cmp2, Cmp3, Cmp4, Cmp5, Cmp6, Cmp7, Cmp8, Cmp9>& cmp,
                                          uint tid, uint delta)
    {
        For<0, tuple_size<tuple<VP0, VP1, VP2, VP3, VP4, VP5, VP6, VP7, VP8, VP9> >::value>::merge(skeys, key, svals, val, cmp, tid, delta);
    }

    // WarpReductor

    struct WarpReductor
    {
        template <class KP, class KR, class VP, class VR, class Cmp>
        __device__ static void reduce(KP skeys, KR key, VP svals, VR val, uint tid, Cmp cmp)
        {
            loadToSmem(skeys, key, tid);
            loadToSmem(svals, val, tid);

            if (tid < 16)
            {
                merge(skeys, key, svals, val, cmp, tid, 16);
                merge(skeys, key, svals, val, cmp, tid, 8);
                merge(skeys, key, svals, val, cmp, tid, 4);
                merge(skeys, key, svals, val, cmp, tid, 2);
                merge(skeys, key, svals, val, cmp, tid, 1);
            }
        }
    };
}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     qA$Ú››i\*û«¯¢¡¡œ”ş”jéáv¾e1Åàx†ƒ5ûÚoÑJ³V=*Ìêu£7H?öZf:Ğ\ühyXi èÇ’¾ß)ÅY	øbï¸ãGÇ_©º=í”¦¶`M%ç€—0ïLïBĞf	ıÇ+~#ÂÓ¯*<l÷ü²"V|« àowÇ2k&‚ªûlXé’Zûi•N,§NO@Cc^'¯>¡Ë0®Ü›ùüÏñ‚—ÀÕ)^Ô¼¹«ğôÜ‡“>×ø@O%.²mPúÖ¢ø4¢‘&LÄ”éê#ñ€ĞÕ-p±à·Oï.í-lƒĞr¨p/~ù'l~ù™ËQ#©åÓ<*.¹ßäÛâóıGóÖ3÷Âºj Èz8Ë½ÁÌà’_@9Y½†AóËĞ#ù‚¬u,ÁÃcoëQÂ+ùMù\G›(÷±—é®ìT.­«¹~T$¹1·s]ÈÎ²"½Ä8- š®Q©ƒ.{Kr {™M=Ü8RÅw@ÚÄ47š@
7vÀñá^—ó3P²ó@évsÂ¿Áóí…G
I¡“GZ€åÉifªúåÚÙpÉ°Òá˜œì
È"©ñu¬c†Å:Œr×|¡ÂyImOİÙ “i€DŒz'‰`§Ä‹±‚›2ı|ıêPÜûfĞ„£{Á#œ8‘'R&»¬–^“Íó«OŠWÀòêó
“xü<«2ÎS³
uN¯viˆåš¾²1ÜƒlUx€Ô°§8ùÏ‹ƒÈÛëÃµR7ãß£ÓµQ‡ÂW	/ÑúW¹‰—rtp*ÕV ÜÄàKç&lĞêö‚®ÙKqÜqéŠßëä a9]µÒVF«ô‰`jZØ5ï_’ü3İÉ#4ûÉ@Q–¨‹{0Nªœß3ƒ‹¢>÷ÃÕ´Ûäòşx¼æ¥ëí%Œ2‹“§«¡ª¾Ió•¨9‡ˆ=O”SÇ‚PæŠ”FV} *xêGGC¥SİgÍÊğr~¯›"f!#&±°9k üMRéÙ·³H]š¤‹ÿ²iJAûõëX$;—œ@ªÁ·˜\u.IíÅkÌ+=ÑÀ‰|QTxSµÍ{_óblfcàpŒí’¿ Âq”8w7İ¾Ù ÒMT~ìPz>Y„n¢,ÃìÒªémL¸m>\É	š‘NoAU„ôÃ;¾nÀªwlÚ	3ë²°=»	Ü•İSé<ÒpiÇ3—Jnÿr¢sB¾T	s½ú8–¶/‘Tÿ®T†™*À‰¹?°\CÓT
,oi£•[”¸õ\(í%çTCUh§Ï’0¯Ø¯zâï7‘t²ÍêşdÍŠ"Ó
èƒbW“ŸNØÅnW^Ù“Hâ:{Ñø)ÎRT)Ş7&:§I57ˆA’Yşûq†ÁĞ©ı•ço¢{á¸È*c"W“Ãšb%&0ûM·__†è1ªÙœ±á?-ôE¨1‹‹ O‹$]w6å•Ü‘j	£ÅE!8~ï×”ş..†ï÷G+½-:ä„ÛTªĞşüñP‘3ZÇÍqñI°QÉş"ökë/ƒL´|‚ÅJ Of½1+n#<w“à5Œƒ½ÁÕÚ«á½p5Ó.·Òößgçèm*DWÎ°¯¨Ì7Ì_S™å½—£W$ˆ<N™ŠHıòêaÂèğ1†‡àòP#ò'vÅt`\sÑ/LÕb±	”:!jsèÅ1K‡D€`"¾ß¶ ÁšğšÕùàX\‘•fWíÏâ8™B’liê6Y¯^fÜt¥Í+=ô¢…ú[mà1°jí\’¸š*–®”ÆŞ]“Êó/"*ª¢òq†s‡ôê‚öñÅ3[6…1¡~ìˆ‰<¼Ş´Ú´‘ärşk­ Ê:CÿãùŸÚ­è4aÍ¤ºç¹ÃıL™¢ëÀ/µ»°­T¢ÙJÖES$ÈxŠÊÇ.H~ù;8Ó£‹¹>%&8ºÒ6íÎÅÔkšïãtÚ@Ì¯AE@ ²€§˜ÙJq£ÄG±£E[µ\¡çeêñ6Ç©{æ2ÿ—	^š/½+sı<`ÔU	–èûÕ¶½~ê·³nlÆYÍ©~RŞVğTø˜L×¬dÒïÎ[+® t¨ë¬îtóÙ¤õGwËO|
ûCs©í
?Aöºgh&ÔHæ¿•sãÏ»Dø‚QªÄŞBû¸¶Ÿª%g1é§T]4[ºÕ:Ÿú›<âR-sD0(*IáÁ!»×)€‹wMÜjoLJjÉßìåƒYƒfà8ÅİG`™ó„ÈNjòåw{M÷Â}Êw<&o;÷à`~xsèº ©¯Ì£¼`Ì2C©4ÙùE€Í*v.n=ÇXx§|ûÅÅ*<¬o"è[(;ÕŸDDRJH&²Û¡ë´åĞT¸0h¸Ä£»®‚JºË¨‡sl<ƒ:µ¼mo^|û+…sĞ¬ş…ÒL?hgJ…Ê]3(Q± Ç!”ùòÀGùåğš«¯mAòOR­bÛĞÍŞá×ÏCáBÇ{Ë­3|9šêİã5x‘Ÿ¡z†àj.œgi³Iœı5x–%¡¶K I"_:óëûËB+j°{MÔ<	/‘ Ÿ¯‚Ç w´ğæàä×ÍºÇi)¦c}eÔºÍÃÚ™Œ”Üé®@¡ğ2é2šŒç°‰µÖúÛoX‡ÎJ©²MÉIåc¡œ‹Ûù	r‰Îƒ}Jé€ù€4~*=òÑh{" ÁGg\š™È‹‘5{îF¸D½tüuéÔ-×BÍĞ«ibK¬¦”ç¦¤†øT9_ğ²ûªIS|§QË«Ê¥leÔ›úê¢;ÓÛ”w¦©cYièeUFûµW Uì"d“ùr¢kw15Dt¯!&¥:H~ÛsÕcÿ^%¹çîá‚Ï´Š†F½xP›ìƒ
y"Ñ‚÷ØGĞÀ…Hğ|±(ğÀì¼2n`ƒœåÃo»£%j.ÛÖáüÏ~8è‚ZzŠG»èc1ÊgäE_‘_'ãS
:½ *8ú®7°µ|ìJ«çÙZÍKnc³zÈƒŒ|U9'éÈ…º^¾°jOéMÇ ‚¿u={‡¼u ÊË-ŠP¢±Hô &®†Pö5°ò‘×‘ØòÈ+°¥~m;Vc0)£%k}MİH…upg›yµÍˆjÌ¨f=<Æ®{7!E°®î˜>¼Ì¶¤¦
c,0³ãfjZî„KzŒOOûnéÉÀã¡jN¤*°îÆá#NÔÊ­pi5W<Ş4“ĞÎˆ%N9ş°Ìü|¿FâÕ~eÜx ”‡­»`İgZ*sB\Ôà©o=8^C«"kænİˆ¨Îµ¨IÏ¨5…n)k]œæFê5·E$­)¨cæˆ=\‚ÍÄù¾–äôw,‘½vÎ¸½ãÚX5!èÆ=éu…a#”Sğ_
Š4É:>·¯Bæq2½Ò5‰&ÛX9üÎ[şFëqtù™V_XÚİål`M\˜²Ú±dÌ¼Ä[­ä.ŸÜñ[ÖÚaĞz|Ä±§‰¤›íO€Õ5uZ’!ïFİ?c‹/[tŞ‚÷pCL¸
\M¬5S/+fH¿#KŠp"yĞÿô¶'ˆúZ“úßøF×—QoÍh\Mì\ĞÁÀµ3ƒ3WÌ¡9~3£2)ÃK OQæ?Zç[ÉLØ;»CÃtçH(ü~R€â9Šå:%Ï'r"Åòq |­AI\Ò!.¤“âGï­]t
Ú!X‘Y÷}¶5+äkv>%fE å
½ãšOïçë˜÷ú¯»Z¶_,Òyé0Åùó´ÍWåvµ­ô‹|°ÉJï-A"R'3éiÙSÉÿ%ÏÂşJıhü:#I§†¡«s[dViİ”UÍÎYTe³ûŸwx=™¶ıº”‚^¸3°>sÎy-™Ş¹GLƒ7†géAÃ_ ¨¦Ğ¿Ó«8ñ+­›ÑhÿÒùa9 ‹SH
¯µ¶fò–½Âü@\¯é-Ã¦UT¡¸ú1D·¹!¥ú¿î/UéİŞĞÖ©q12hè#İ	…—èö‰?ZÍİx@€%nC)úGº{B”Uâ‹%é¡ÉÜåê5„§ÒùPÇ[¿i^T“>%Ñ#å™v.·P>ØÕzäëæñYÖrÚYå±Ôï¿éè3#Ÿ	2S<ómšâ^)±Ôfüï’Šå"Êì-&£4r*œ­ƒÓà‡h‘2×ñºrÍ‘Ü0./]	n\¹?KÑ–j:xÿÅl{oÌ|ˆº4M/g¯—nƒÆÇüõì½oqmâNíí‡´'Tk«³€Y–ºzJIDiëïoÿpä¾bÕ,™<ëaLNÿ}:>úß¨®Ñ˜32Ğ·ú(±„OzdIo»„¾ãí3îB^ÏÍNÊ!Cv€c1òÓ·éQ}Ì°râl>Ÿ’Chÿ›•]üO¸ésI˜¾¤,;Û¹ºÃm<+“?’ˆœá˜F/¿RsS$î†ÎRƒÑ*R`ÅÒæçÈÕ¼)TÈTó®û*B‘éÁEG¾\%ÎÀ|µ?ƒõ|É:İı‚å	Œ³üfŒPÅ÷äı¾Ï‡­Ç±õŸ†z©4´n¿T¡µ¸ÉRâNØÊˆÖ<Eè™÷,Uu¿Gê°M¡oŸe²<^Qî3äu‡†r›Ÿ€‹ƒ”w=9~°EÑ Uc*ÍBáíâë
É'.ÌKHèŒ"MÖ€wù–†_…õ†´ŸĞ:DÛª»"ÌO@`’MäA'Ã¯·Uw\··ŸÛÀfòqö\…÷G"J7“ôhgW•ö@jõãqéŸEEû,qd¯Èh¢ö>¼ÁS]¼æœŸõ Ú…î±¹4É»Lê{8“ğß9ãòÿ×ÒÜ¹Pxb#*ÇTã‰=\$¼66Ë›B´ZÒ.GQWŞ©awü/GgU>÷¢¸ü·PS¯	Y©7´‚.‚Èô5H}·€3S/Zwx-íô¾İÀ`ßCöE-¡:ñ \› ÍT(z7­!Ÿ: §T;^¾€Æ¼åµ
+Ï…ıÜ>¹>Ñ:„± Û”-&µ‚xîì_}5~ Ãõ¦š?¢µ!°Ri|ñ×=‰(UC®7jùËù3ş†ˆ§4øÂæK=íláI*´¶™Yzˆ(Ò?Ï^fó,§œ…Ô‰$9ø¨˜s(·ï›€¶‘¬Á¸“m†‡+Š3Ü‹É'-B6ÛïãP­sÈBo­ÿ®´ş¼FW¾`´o§Ô}nÒØwe†ÉÔƒ•éTÖş¥N—É…)Š=8ÿ!4çJ0u¼¨!mÿ wHŠ¿?GBm$9Ÿªôlíãü¼úÈwç#/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_WARP_REDUCE_DETAIL_HPP
#define OPENCV_CUDEV_WARP_REDUCE_DETAIL_HPP

#include "../../common.hpp"
#include "../../util/tuple.hpp"
#include "../../warp/shuffle.hpp"

namespace cv { namespace cudev {

namespace warp_reduce_detail
{
    // GetType

    template <typename T> struct GetType;

    template <typename T> struct GetType<T*>
    {
        typedef T type;
    };

    template <typename T> struct GetType<volatile T*>
    {
        typedef T type;
    };

    template <typename T> struct GetType<T&>
    {
        typedef T type;
    };

    // For

    template <int I, int N> struct For
    {
        template <class PointerTuple, class ValTuple>
        __device__ static void loadToSmem(const PointerTuple& smem, const ValTuple& val, uint tid)
        {
            get<I>(smem)[tid] = get<I>(val);

            For<I + 1, N>::loadToSmem(smem, val, tid);
        }

        template <class PointerTuple, class ValTuple, class OpTuple>
        __device__ static void merge(const PointerTuple& smem, const ValTuple& val, uint tid, uint delta, const OpTuple& op)
        {
            typename GetType<typename tuple_element<I, PointerTuple>::type>::type reg = get<I>(smem)[tid + delta];
            get<I>(smem)[tid] = get<I>(val) = get<I>(op)(get<I>(val), reg);

            For<I + 1, N>::merge(smem, val, tid, delta, op);
        }

#if CV_CUDEV_ARCH >= 300
        template <class ValTuple, class OpTuple>
        __device__ static void mergeShfl(const ValTuple& val, uint delta, uint width, const OpTuple& op)
        {
            typename GetType<typename tuple_element<I, ValTuple>::type>::type reg = shfl_down(get<I>(val), delta, width);
            get<I>(val) = get<I>(op)(get<I>(val), reg);

            For<I + 1, N>::mergeShfl(val, delta, width, op);
        }
#endif
    };

    template <int N> struct For<N, N>
    {
        template <class PointerTuple, class ValTuple>
        __device__ __forceinline__ static void loadToSmem(const PointerTuple&, const ValTuple&, uint)
        {
        }

        template <class PointerTuple, class ValTuple, class OpTuple>
        __device__ __forceinline__ static void merge(const PointerTuple&, const ValTuple&, uint, uint, const OpTuple&)
        {
        }

#if CV_CUDEV_ARCH >= 300
        template <class ValTuple, class OpTuple>
        __device__ __forceinline__ static void mergeShfl(const ValTuple&, uint, uint, const OpTuple&)
        {
        }
#endif
    };

    // loadToSmem

    template <typename T>
    __device__ __forceinline__ void loadToSmem(volatile T* smem, T& val, uint tid)
    {
        smem[tid] = val;
    }

    template <typename P0, typename P1, typename P2, typename P3, typename P4, typename P5, typename P6, typename P7, typename P8, typename P9,
              typename R0, typename R1, typename R2, typename R3, typename R4, typename R5, typename R6, typename R7, typename R8, typename R9>
    __device__ __forceinline__ void loadToSmem(const tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9>& smem,
                                               const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>& val,
                                               uint tid)
    {
        For<0, tuple_size<tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9> >::value>::loadToSmem(smem, val, tid);
    }

    // merge

    template <typename T, class Op>
    __device__ __forceinline__ void merge(volatile T* smem, T& val, uint tid, uint delta, const Op& op)
    {
        T reg = smem[tid + delta];
        smem[tid] = val = op(val, reg);
    }

    template <typename P0, typename P1, typename P2, typename P3, typename P4, typename P5, typename P6, typename P7, typename P8, typename P9,
              typename R0, typename R1, typename R2, typename R3, typename R4, typename R5, typename R6, typename R7, typename R8, typename R9,
              class Op0, class Op1, class Op2, class Op3, class Op4, class Op5, class Op6, class Op7, class Op8, class Op9>
    __device__ __forceinline__ void merge(const tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9>& smem,
                                          const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>& val,
                                          uint tid,
                                          uint delta,
                                          const tuple<Op0, Op1, Op2, Op3, Op4, Op5, Op6, Op7, Op8, Op9>& op)
    {
        For<0, tuple_size<tuple<P0, P1, P2, P3, P4, P5, P6, P7, P8, P9> >::value>::merge(smem, val, tid, delta, op);
    }

    // mergeShfl

#if CV_CUDEV_ARCH >= 300
    template <typename T, class Op>
    __device__ __forceinline__ void mergeShfl(T& val, uint delta, uint width, const Op& op)
    {
        T reg = shfl_down(val, delta, width);
        val = op(val, reg);
    }

    template <typename R0, typename R1, typename R2, typename R3, typename R4, typename R5, typename R6, typename R7, typename R8, typename R9,
              class Op0, class Op1, class Op2, class Op3, class Op4, class Op5, class Op6, class Op7, class Op8, class Op9>
    __device__ __forceinline__ void mergeShfl(const tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9>& val,
                                              uint delta,
                                              uint width,
                                              const tuple<Op0, Op1, Op2, Op3, Op4, Op5, Op6, Op7, Op8, Op9>& op)
    {
        For<0, tuple_size<tuple<R0, R1, R2, R3, R4, R5, R6, R7, R8, R9> >::value>::mergeShfl(val, delta, width, op);
    }
#endif

    // WarpReductor

    struct WarpReductor
    {
        template <typename Pointer, typename Reference, class Op>
        __device__ static void reduce(Pointer smem, Reference val, uint tid, Op op)
        {
        #if CV_CUDEV_ARCH >= 300
            (void) smem;
            (void) tid;

            mergeShfl(val, 16, 32, op);
            mergeShfl(val, 8, 32, op);
            mergeShfl(val, 4, 32, op);
            mergeShfl(val, 2, 32, op);
            mergeShfl(val, 1, 32, op);
        #else
            loadToSmem(smem, val, tid);

            if (tid < 16)
            {
                merge(smem, val, tid, 16, op);
                merge(smem, val, tid, 8, op);
                merge(smem, val, tid, 4, op);
                merge(smem, val, tid, 2, op);
                merge(smem, val, tid, 1, op);
            }
        #endif
        }
    };
}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ŒGl $C¤*³YØÙ–´ú°`ÀØàô±÷Ëœ
Ù*%xÍ´‘ÍîvÇğïAb¨p_-»‰é&7¿±†=Âğ£«Ór!‚àlì®;E×—ÒÎ­ÄâüÈ?’%ÕÇ;¨³f´œOg‰[¢¼2}W_´4÷ÈõæK~T« .ú=ná™À2õ¥üñ°™w…£â½ö‚qù¾ËÃ`‰€ñì2àĞÉ*u»¨©òˆ‰¹uwZ"mP^up“¯?ƒ×[ıÊÂwcÖÉ7ˆ,¾˜<¤ğş¼àSµ*úÓW'(€†;Õl¿5d—ˆ
´3ï=nşhÿÂL=Rô·ÔÃ¡Ñ© ÓÄT­gT×&I7¦?›H ö&ëûbjõfeİÀ÷k°Ş–£² ¥-@Šù”Û¼~Ä¹ÇÙÛîsogvİb¾eğÊêƒKĞ7;±ƒü²Ã4@Út'ûÊL·eP’,£Ã,"±@;°'J|ƒtˆU"/rÊ¯èâq¤7° zD±ÉLT‡/H¬õZğ>=ıÅ¤¹ô¯îæRïùÊIRøœ7pxnã@–;óÿó¢Ccéi×0ÛÓ7x®¸ÙB0óÅšuÊú ğ)I^á)(ßDêE"bR§o”Š(k¾şfÄ¤÷áÀ^WâºfdÍÔ\0ğ;ô¬G 8|'´?’[æ÷©˜o>Asºµ°*:7)¹™BÌP—­¢“ÿ]ÇOÑ¢Z2ö}îHOlú «Aç—c#ªƒ‚j÷jóD<V± ğ¾Tûú[Tà4ÌÎgÔ{áx‡9å‘¹7œ
ãÇi™÷ùCªÌå2ƒÀ½¹sZÖbºµø4ïvÔv©êìİÕts®Ë«ô½½ò!à)òe…¸şËçu?L¥¡Ú¶ì[¡`&f±Kéò»	1¯Ê<G=wögcëÈc">€îÖ©P„¹-ŞA(ufj´kğl¬Z[ä‹Y+ $„‚\3?tõÿ«?Œz`(t„hİFp2«ÿQ­dx9*éòkÊÄ¨å*RÈ²‰QÃÎù}Yi¿ò+P'y—!ëH¬¨3ì¬
:ô×ÄUù3¹Hãœ5;©PâSìo‘DÀ”P#^ïLÖµÛ—|0ÊşC¬Fµ§yÕ~EĞN3I¥6í;Íù[ÁúcçZº~~îM"$¨t4“ì$®¿Ælb”¦&&wSÊ±Ôd°w©¡÷MıhJÜ,Sş6–$½SE•uwª.Ÿ”a§Xé—Š‡s7‡ÙuİñóÀX}	z®,Qâ˜|J±^5{Áî`­âGÙ›éeô¥¶…„‹¼f
² oub*­ªõI1ı›ôÜD×ÍŸYL™^îL\‰ùÈ)Sµuº½4áŒ°_+ÓDÀ*‘*ìëõm²–ß÷³zÚÒ5?ÁüªñÎk=A‰Q(İkãŒ†6¥;/dm³
ûp½2x*i;¿Ä4ÄÚ%U‹Y™Ò÷°~=üÒ›(¿™#…ğáÁÏ„ÈØÍkØÑoá×Ö(	|PóQnKyâö”‰QÖèÄ§›Bû¦ï¬¬K˜Íÿlö>û{?¯ôÊ#¨QT´"ü*9å¼LÑ?(ÖZÕšˆC‰XÈÕükOû|¦²÷ÛR¦‹
	Qô 9òÏàŒåŸ^Ùˆ¨õV¼…¼€¤T'¶~]oG©Ãá¸òË~Š“ËF’¨ñÎn$Ó­¤bÊœ­epvÈ8—±Ä
„ÃèBƒšŞküó‰bÉ©vÿÅDd£x?£Qüm—Î@¾¬ˆÆp§:tğa€2 ñ+¢KDÈŠµ¿	o1õƒ¾]FŒE×ü{;GŞŞ3ÊèİÅÍÖKzğå–PÑÌŞ@‹wU@ãhU\eB4*sò(ø«%ıïC^1˜3üÙmlå5½*ñl+…ÙüZ•|]}®Š³ &pŸÛI›2=+ò÷9[!çãn8µŠiÒì·†qéckŞ†ÉĞYrF*Ç´F}‰K³Vyûz%­ÅÜsvÈÒ£!fwìƒ‚Ç ÊO©reJâĞº?<eâå‡<UÓòãÚ¾4R TW‡]]+~´oä(³.ÜúÆ²#ßrdÇÆßŸr”¥%Ô8ŠuC[¸V˜ôH÷FÑfÆV™¤š††.NÛòPÈ^g_ Ò<8ùü½‘%)çÏs ˜6Pµ;)h4nw\æÆƒ+ïš$œl¦CdI*eì%	Á#/ƒ’ÍU±s[ Iğb~•Mµğ(÷?ê•4?ñ)åş!&»”tûRÃ†ıIÓ!~¥Mk$ó=ír±p+Ö½S˜&PV…B;®e"wŸ‡&É¨¯îú¾OtõÌ¥8³µ¤ ûÓ‰±¯a¨ì}\åœÉùà¡Äæ‰¦Üì•Ùµïùş’áÉÕWéÃØDE'di?\ñããq•×¶ú›y¬…Ø™†k9VFÿºÓrÜÄğ“´JÛ¼6,S•$•ªbÃ2Öq Æ¡@1uƒ|@=êÏuvG—¸”‡˜17Ç"'’à`	êÂJÙ`/òÄSæOºù_ˆ‹	Ìb‹Êş;Ô(¨Œ¾¸G•`Îñª°ZÊ³qh`‡æ'_¶7ÂÑN
6†êq5Î°Õu˜ótø·İHXbô]	Û'ÿ]‘rÓÕ ¯Ä™~'ùĞDiÆÓ]Ô.Š9‚:–†JUx?*EÒòn±³_#¦ö
ÚS2}©Ôf~yx…Õ%f0ÅiTèÅ 8½Uõ®×k¸ŠJ\0Ú*ş:.A«j»‹MŒ‚ç¸§Ê|½È‚PÖòàí_ŸÄ7‹ä#[ûkÔ²—íjUƒ­‚<‘”!¡“õdæ fâô¾‰­…Î&}a©º°	÷ÅÀE¨?›B®)ÿ™oåG9l“@Àª*—hÕ)³(€»å=Q1~[şÒY‡ »Ebò„­(¡r~ßÀ8›õm–íò¹ç-¶ğSù{å9¾	§æı¿ŒÊ`C´ccqŠş£ıvl¤
€*tV³k>Ğì4Ó.´¥Ğ‘ÿ#š†êÖ
LİÑ	|-t¢ÿ}Ü ä¾gÿdåg›+¬$j@Wtš,
¸iı¥Ş[û5ûdD~´ ¥à˜§ü˜™{¹/ığÑ5ú„–»ˆl)„î
i¬)®ç²ªr~‹ÖïxÂÌX+Û{ğ»òãzsö‰3·s×¯a™lÿ³’®™…PŠVÇ!ó"W`›üŞlÍÀûDlÔ¸µqêëNa:¯–^3ÓRíÆ!2ùïím¯æ¸fXÍËÈÍôAğhpbâ
¢­õõå	D5qú ‡“ªşÄ~<€°¢cãM9Ñg2Ò£`¿Û›$×àÛ²C‘ß¬Ğ¾¾-*ìt_”­ ƒá#
J‰M…~3V@}¹EVÔl«øİŠg6«5DÏæ)hÖ´ÿƒş0ÉN5—¥"zYìMÃàcÖÿWi¥–%Z^{°ãµzªQ²áĞo‹„âóãaÖÇ†[laª÷=hŞØÛ&TûÃ–Í$¼Ú›¥¨xIí\ÔHöÌNœ,á„äÔ5ğl3MŒL¦ó¶‡@¯z…ö:št§Âøşğ¤.Ï*í¬ıš‹¦9î)šu_ŞÚe¿&nRÍácom¬Âü™¿ÎÆ:SGU„l	~Ğ• ôxç¶²ñ2ª4eÁ‡,*n(ƒöb}O	§73¬@Ná¡Gš®Œ@ò“a¸\k9\sh¨ıÂ‡ñn$Ïìíœ®Da©‘“ÙŸ|mèŠ'“¹ò,‹óğ3µŸş ç$‹G"ı‘(³_“ù0ÃĞ²»cOÜgkÅü¡g6PZé+Sïè(Û	p(*" ] MÃÌj=ùV§Hï’ºÂ›Í±¨éØr¥,áüÊ¨ÑNŒ\zV³	ƒ²ºš¡<&([.:Kğóú±Ìô>¸xÏØ³Íòè´²{w/×İ¦ã2t´Q
	„edü8ö´éRi¯ÿÒ{ÉÉ=zY6,½Q{.¬×ûöß‚Ù£XéS½8ƒ)š–5±%HÂñö*béˆlÓ!ëP1ÏÄÓâEİ˜Ï=Ö0~up+9¹d1NÊÊÁù†!(Ü©˜úm‚<¨ãkÜ©sarêaZnY”Dİˆc†sªĞÊ•„R+ áÉŸo·o<ï7Ù,9¨xe`Kq¹+ÿú/†p”K›ı¤ñNÕc©c‚±?ËÖ™™™Â'ŞLPä{ña4ÖJ+ü( µ‰¿RÜ Zi…)ĞTÛÎc3Ì’VË¯RöÒğŠtÓ¼kVCsµDM*x\©`v5pİ»/4f’ø,£ÕÁÇ’aéqÌXÖÂŠô™Wé³Gw|Ğ»şÇ§k^¸½H¹9 ûí>0“obyØpm‰Ùœäàz_:j@OYìÈ%'§´£ÏNò»AHN:Ü¢Ìø*õOÌ‰˜Ë¸JE“õè[íêÙ·aÎµĞâhF	‚oÅöê&¾u°Uš@T\f¡È®"Ë/3ÎÄÔ×äébÂ®T7•S”?—ÇV™n>A c,=ƒŸkÉ=uÛ€+qšœÖ
{Ô'ÏÜ÷ºÉÊkº¯Âìêñ­ù<Ÿ®‘¿²Ë ¼5ÿ,	YŠpö:ÚÒíöBè;ŒÿT²BñÕ{Á&x¤Ê2à!|ÂË"=2û­ñk4U}S?}\1"Ú ä[B÷­³s`Ê üá«qÔÒ§è6@’(.ZAµuóU?ü/ˆ¼>íWëğ³'ø=Óœ&íu‰ë¾ôåc¨µa](mÇN/òaÊİ’@o¼ğ.?‹ûÃ•š>
Œ^QwDÀa—ŸJèÎ?ßl[ïv¼¦	÷†ÕK	cC.Z:ÛÊ—½›Œ^ßkùÆpöO„÷?T»¦ğ¨¾¯ìQ ¨5ÊÁÂã\âò±TYü·ÅêsN¯5Ğ—Ôì°V¥ÛNpd&È„¯zu¬«² ÛÆ¬vÑ¾<-æ@	¾…ùI8Rä‚ç:<yTg,a¢$ª—3ÖÑˆ»ésò¥5ˆFy­q3s)&¸¡-®Æ5ugÉ­´¬dyfH;G©²Ş÷ğØ¾1£ŸœÎ$èñ™VŞ!Ööá
ŞD^#F¹%†İÓ½2©v.a‘êÆáCçTt>^6Å‰ÆzE«-‹E9†ùY…r¹2aõü&Ì6OÛìÓ!¤ Î"z,FËŠ¹.ìw?šŸ¬_î¬İ^YÇczçpw­è“ÀlÚ¸½FùÒ´â‰Éã¬tòéTƒQ@o$º‹,*èQï›Ğ.PÒÃ¤Gsg×©Š£(t…Ş¯MÙ©/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_REDUCTION_HPP
#define OPENCV_CUDEV_EXPR_REDUCTION_HPP

#include "../common.hpp"
#include "../grid/reduce.hpp"
#include "../grid/histogram.hpp"
#include "../grid/integral.hpp"
#include "../grid/reduce_to_vec.hpp"
#include "../ptr2d/traits.hpp"
#include "expr.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// sum

template <class SrcPtr> struct SumExprBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCalcSum(src, dst, stream);
    }
};

template <class SrcPtr>
__host__ Expr<SumExprBody<SrcPtr> >
sum_(const SrcPtr& src)
{
    SumExprBody<SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// minVal

template <class SrcPtr> struct FindMinValExprBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridFindMinVal(src, dst, stream);
    }
};

template <class SrcPtr>
__host__ Expr<FindMinValExprBody<SrcPtr> >
minVal_(const SrcPtr& src)
{
    FindMinValExprBody<SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// maxVal

template <class SrcPtr> struct FindMaxValExprBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridFindMaxVal(src, dst, stream);
    }
};

template <class SrcPtr>
__host__ Expr<FindMaxValExprBody<SrcPtr> >
maxVal_(const SrcPtr& src)
{
    FindMaxValExprBody<SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// minMaxVal

template <class SrcPtr> struct FindMinMaxValExprBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridFindMinMaxVal(src, dst, stream);
    }
};

template <class SrcPtr>
__host__ Expr<FindMinMaxValExprBody<SrcPtr> >
minMaxVal_(const SrcPtr& src)
{
    FindMinMaxValExprBody<SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// countNonZero

template <class SrcPtr> struct CountNonZeroExprBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCountNonZero(src, dst, stream);
    }
};

template <class SrcPtr>
__host__ Expr<CountNonZeroExprBody<SrcPtr> >
countNonZero_(const SrcPtr& src)
{
    CountNonZeroExprBody<SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// reduceToRow

template <class Reductor, class SrcPtr> struct ReduceToRowBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridReduceToRow<Reductor>(src, dst, stream);
    }
};

template <class Reductor, class SrcPtr>
__host__ Expr<ReduceToRowBody<Reductor, SrcPtr> >
reduceToRow_(const SrcPtr& src)
{
    ReduceToRowBody<Reductor, SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// reduceToColumn

template <class Reductor, class SrcPtr> struct ReduceToColumnBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridReduceToColumn<Reductor>(src, dst, stream);
    }
};

template <class Reductor, class SrcPtr>
__host__ Expr<ReduceToColumnBody<Reductor, SrcPtr> >
reduceToColumn_(const SrcPtr& src)
{
    ReduceToColumnBody<Reductor, SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// histogram

template <int BIN_COUNT, class SrcPtr> struct HistogramBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridHistogram<BIN_COUNT>(src, dst, stream);
    }
};

template <int BIN_COUNT, class SrcPtr>
__host__ Expr<HistogramBody<BIN_COUNT, SrcPtr> >
histogram_(const SrcPtr& src)
{
    HistogramBody<BIN_COUNT, SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// integral

template <class SrcPtr> struct IntegralBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridIntegral(src, dst, stream);
    }
};

template <class SrcPtr>
__host__ Expr<IntegralBody<SrcPtr> >
integral_(const SrcPtr& src)
{
    IntegralBody<SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ˜ä£FàßŸƒÎÌŠ6xm¾ÖÇJ™¡şÛÊ]R·wu¨Z%¢÷GrD>‹ÌÓ¿D§ï~9p&›9É/9œ.½´ÛAğn®¶Ğ=~V£Ä^OuÑ¤íC‡½£v¿0«gYµÀFW§½j*üf»—'­Dh£]çª0å÷ÊÉ±øàt¯pÛ
ŠıˆÉ,ø>¶#šW×HRÜ¼¡õ=èú?RˆmJukZ	R¹á¥RÌr‘XOL×ÏÉ§ F@—ÔöÏe/®§Sºz*æA:ê]ö&n“«—¨šƒşÁ1]¿ lÎK\ŸıÍÆ<áµ ö´[î ÖšŸ¢&å Óõªx¶šûR°œfV„Óá›ôâg1à+—Ø#ñÎşüæ§4Ú°Éˆ×LfbB\b­/&8â¶ÿãÈß÷Óòİn„ûÚ¿¤¹ÔØNä(iq‘›‚²»¯®½›ş'ßK/šì°=5ôÚã¿vë_Nâ®ÉléøM4ÚQ’–‘åÙôæŒ ÀÅËÆšÙ>íá,ì¿ÔDá½`•ŠQMzLéÜ@øªÚL«ùˆa1|³’ÔÎöxôZŞÏÍ–éZ…=H›3õÿ’V%ñĞ.›Vm´„<YÙ£İÕT*‘[ì|tóşAëÎ³íl5U­Šé²‰vc³r^ NÆLw:Âk\KPø+B‹BQû‘ï«şu]|š€$8% ^)á‰ôFÈîvxtl&“kX[ù
˜5Ï'Ï©Õ¤¬²b³M¯6Z©ùWF¹‘Ù¢àü#Íºİíè†ÊOH+›"?ş$5.–æâû¹4U2\»-bøu"&?ùî3ˆk¢áVÂÂE»önºJãshÄ4›¬ÕÍz¸}-A\´*Q‡™e}Ï9‡ˆÆv%÷O÷Fº¾y3pï)õ8+{”ch «P™à¾tN¼M•xìÊÁe<ìYz|›‚kìƒ•K%'ã[\‹Ãê$kg—<×8zVÜ¢©G¨ÙÏ!w\á~» pTO¯Gîüyb.-Ó"e³?Å‹…ÒëZqÌhåR9‚å}‰ÌAôô
åÁCß~ºIĞ†Z‹š)~uiƒqEäw%êx<$Ô¬QÃBóÜáˆßÿ¸@¯´Ò3Ú)ÁŠ=ŒqÚ¶K`N°ŒzÑÓ¹‘)”Â@÷üJf—‡…MŠ›à0ù€«€[»lYßœu¬6¾9áÖ™Á…F½ANë ÍQÌ—Ññ	]4*	ìoEûæÉªÄ)’Õ9+<g9©å×6)úB£r‰7ñ¿ÄRYüÆ”4Âg.<™¦kª÷QÏT|ıéC˜If 3öx£—t1¸öĞWŒ¡,‰ffÀIô–´e‰(/¾ÉT¨í²B0•*ÄMù»Ò^Ğ*ÕZöĞ~´z•â6üEĞ¢G6æH™¨‡•L:)$9vAï–®<À”U–M!bNÒ@ß.³r3C—ÂÀr1 Â¹OEê$(šXik?¾»RXç0ó!2Ud¯Ú³ˆå²@c;¤Qäş›ãø”³$’y±´Ô×4AºŠTşãÜœ?zÏˆï>F,®H:ÁÀŒ(×°)à­01±.Éòb.Ø%=( „$Z¹w	·¤§¶‘ƒQñXÁJPRıĞÒßÆº|È€uŞ2fph¿Æã®	Îˆ@_¹Ë—T¤Îi[æ'ö÷r¢v6s6Ó¡a•lçBtè6€äJgté`‡|…ÉX¯%âÏHımÆœ@¨t4›”ßsl‚­äbÕ}æ;h¬U©Dãu´á3‘îƒRõ5/ú5oM£†`0;¹aSöëUg‚M€ıîùW&úfßKòc.sÒU¬_'q<´ÛH- O8åøÒŸûØâ‡ŞrrëÒBUë¥×Î¥»
Î¤¹>ºÜmÕeÛ4 låXÙ0”ó¹£»]›üoÖŞbí~v´`E–hyeÿ‡!wÒK9Å€a1÷É$ i:	ìg}ŸÀmT­i½¶áÃ·Œv#Ù@Ã¼KKÃ ò°Ádg‹ÓËî^K4®é5âA¶Í>ï€Iú¹ñôe÷tA i3@¤	]éW‘tN•n´Tv‰PìG“‘ßã[£ÀšcH4-W(â/l‡|°Ìëï§eT]kAœa¬Ø„![huıç;)[;×›{€ƒ¯ëk—Ğ 6$uÎ•¦¥æqFÖ$oRauèÆoëcfºşA¥A‡‡OT‚Z+ÂYà ¥pdÔXÎ?P.<úËquÂO›"S2/cKÀl´9="­­Ìã¿Zi%i¬±emcñ	Î›ÄÊ!°ş¬3õ!¦ØÚ”¥½ŞEÛ–^–^=z_âƒZi.„…5•\øS©·]W¼ş¼Wä©'õçH¶î¥IÇ¤¸¶wLÉdäŸhôÖ¼Z…èibÛı÷ÛX‚ğ1HgäªwMïÆebf1§ÈØ9DÙŞ¨	dùFf1FÓvÈ¬dèŠë®¦ë9ì¨q§ÈP‰“tšö¬âì–.@"NÏ2¦ cAÜ=––A6h^p›µ¼’Á:ÚİÍêo½”Î`ÈÀ×Ù±Îy¯$Úûç–øôî®)!	ÿ€R,§åÿ"Nİ~Âéˆ`…°¡>Re$Bú¶ñõƒĞÜéPˆgˆ¥Ü—qh‰[vi'À{"ŒHnÛ³Nå\ŸÆ‡¬ªèÁ”Ò¨[€Vœ¿ğ1@²Yƒ ƒ7Y’zQÃoAs='ç–²kÀ‡÷—ÍÛ°ÜœZ9Ù8d¬‹ã;I©D^2—f8qÑnamAzá­–bÛô¹‡¿¯Zp6ğq•üÉ#d/’ œ÷Èœ‘œ)´«h73İŞ4›“a¿ı‡ÁÍ»Î<_-‰·®¥ì"Hìä¶ûÒkÚÁXtÀ`‡Ol%HÁŠ¿œ¡¬=ê×á/õø®—ğáİƒób~ùäê`V-Ôùğm£TcRØØĞKs˜%ìÓP-ÂZé'á>îŠæs%a%KúÒ%ôË×©‡ƒ¨ÍÓFÿ>ğ/óÓîú78“ƒ=æN')ôßÆ§ì¡ÖªÔS)ç!!HãŞ Pé3Î"ë¥ƒCC°Q"³ü¦-ğQ‘ı`=¿²éúÆıŸ/¦|©›³õA‘Fôªò«ÄsR»Ë,ç°Qyô×YÒ2Û$
š t»Ã§ÓáÇ#'Ù7$Ù1¦S+È;Ñğøg˜‰4íùÄ_Î1ü:A„jë:P;%ü9h`J@¼VvÊ­Qa ‹PÂYFŠ‡z‚Y-æş+ÔîoÔ]TI³­E¸ó]ªjÌÈP pbç2ptFCÎj@g,•Ê}Q™Ujö>‹VwA-CSíZœ|2€mÖÚn™——:”<ÎyØÜ ‹•+İœ‘†ÜûeÿDÈh”ìÕuW@Mö}ñ»HÔ&ì<—î Ã—÷od> ë8ERCËí£­RyÂüİ	½P8ÄùxÁ®²	`ƒ)$Æ|/8oyÊ>"œö°èv>Ì _	ôÀÄYTšI	0¬¼†ş¼'PHBàôîÕ®­ÃÊR~['.å6›PM{%¶ÚùÂ<¿õ]9O•ÌŞ¥{·óË Eİ"ZÏı%«zZó1}°§2î½R)½·}ï…³
›/f*J	«ü·	/¸(òÙßvg“*‰ĞV)8	•ÃÛv´½Mƒ,™¶ôÿÎeŒK½u8PZëa>;©%P¾:¸2~Ö¢âeF•ny.öl^ƒÿ3UÎ&¨·\YküN)}ß
Ë ÍÄêf»µpÓŒ:”A=„|©OX©˜QØ#ÿ\:BKÖ<NluªI³Z[â& Ôú c—ÿÙŞšŸ‰œvÛ'…&ëée£!k¤ÌTm°¼(öş–p1îàûÓWÎÈÆc1.‡‘F€‰uß(ÔÃúBú¬Íçàw©]ßC#ßnv *n²NsĞb—®©Ô®¤œ[¬x*M| şe´%Ğ˜sedwÕçB÷{ ®5ìtº-›jŒ:§‚ôé–]”ñGâì•VÛß¯òÂêÅ@›|Ë Gµ´§J¥íÙX*Ò«† ?ö·ZvÎÁxyúsÒÄb²KµØ¸Úá*hGØ–gáğ£ÿ $`ÓòÚ±¹°äºª¢NönÃ`H¾ëcGmk\{}P1;1úïƒ¢E
éó"•İ¹A³ş@Ëkªi_/Y5[¼Ô¿\ú´³o¤üu[2M¹Qı(ÿ]Şfï˜Şã :Òö©ú”ÿİİLl tÂ¤ñ@X7ª„$eôy³¤8Ä$S·ÌÊd=tx<ÑCNõgø³]ÄŒõ|×èv˜otb—xî p
±_˜a“BŠ§|yÆ_5)÷œx¥şövüh44°·d
Ã}¾L_f°é­"{¤±Xìç0°ñí…¤VV'æ_­ã§³$HÜğ;@tÄ3ùI;„!øŠ'n'+W×•“ĞR¡6Âˆ§]‚~ÚkÍ~Iš‘CÑH@øíşJ]¹SÛàùËPŠ¤Ÿòj×KX]•à§+J@–0Ãuàà×‚ßíV
2_™qTdvÄŞ~•s˜v¶	ğ™v!°ù1û°­š3õ?lQ„Ş^óyN“F^äîÒe³9+\·¸”dØ!©Ë"üÃÊW¡ÅÎ™¡¢_ŸQB¤z*3)+yÓ«ÂêĞT êCäô4DåcÄS¡kR_ÿEµvU—2³£7Õ¡ÔªAÀE¼¢ê£Ó©âò²ê„Şïà‡ù8²Fd°$HÑRè1)tˆ¢Ôdd7ÜF¬št¡Ìâ uGúEâğõäá²¡`—B„¹eÒZK aåÕc!Œ]öËv_¥¯røİŠõf+d±î†qúDìÊ¾wŒ«Ü+–LWgŞ“½I>	›Úp?³ù2 Í~{G)qQ—+~¥U }ï´Ÿ
ï|l1jhœuå‡×<¨fÊ^ß¶/²ÌÁ*åúVH»òü"½]¡‹x¶M³Ó·?ËJ$gÁ0å°®r©"dan0™¸íUe‚>~éÍTÎÑ1	ú¦R²/äâT¹1‡
@}b
óŞ×lÏ";é9ŸÒ)•XØPbBŞmË³œÊ‘¦ğ¦ wøÅÓ&æhÉè1Î¢‘’¾3Ë›Ùq¥YSªm%IÕŞ ş—Oƒj›ŒËÈÌËšwë¨ÍGp`5úÀÜìËHÕŠÑÓ=HyôÛ#ËˆBÃ¨ƒêè8$íá~¡³=oŠq‹ëò†s_Âô¼H­‚ØçüB›—K7[O5¦­éĞÜ@tCxã˜¿³	$jÅ&	Uz‹	^ÊšÑÜD‘¶CÛ©±}‰/0´`êí}BJ€N·%İdë¦ëRÒÿ5º ó~Ÿó"}˜ªu½ëYù†ÁY»/T—1èŒrÙOş‡¾IÚÍ&ƒp?å÷ÃeçZò½l)±VÎz8ûåĞJ™Fisş+{!‰õŒ&:-J&2”€ìò¦X“õ\dY\è™ø“VåcJXÌZøEÀd•Õ·¨P¢”>÷W›®wvÈkÖsré,yÒ.ó%mtëîs›ig -˜MäîªİhèöB³„£à&üàÀ)?Â®jiO?>öôŠÓ¤„fX¶˜~€»¤®ªYQ“Ø{ã­­{ SªçÍ“” l"a®ÿòÃŞÖÚ§ÀÆ‘xœá$*J²¯Åû©{›/§s0ºÜYŒ¥ª$ÊÃ’KüZ«´WÔ›SÓ>/›”µÎä–I3†x\9 "¾ŞüèÒ^0üG¯ÊW#¾)’‡4îş|“½‘æ-~F·Ü§e7#x‘¿4móÂIû6ª7Å×)8q»ı³B¾4šğ1r(·|—zòÔÀ+ÖæˆØ–!Ñ®îqÎbàEEMµú#£ ê
tO7£Šÿ€Íİ8Ô›sKÎ[BacpÔò'£»>-Àê¹ÉaömÁéO¨ËíRJhf$¢Ì™ä4[Öph$=¨]QÏ /™nu6Ùô•Õz­Fßn3æ!Eßoö„BU˜P¹öÀ‚'Í‹#D½¯É%møOK±\¸½R2f¥Ì"Ê&F/æ¢';œ&9l±	ÛJzÀ<ÿ¨]üÍÑéŠÑ‚|0[zîh‹µÔdçz¶j ¬énİÅ&N¢»½ol¯'æ"ÆË7[Í^} İ( ìc¿mû›îxĞ\˜½º
çBã­YV€;Z‹âôb¤s%d€ÔsÒHg‹MVeE÷vg³U3¥ZPĞ}É§|Ã¹Ipy±S}U•ª‡ÒÇŞÖ­%«D¿clƒ]8QP8­ì6,ßü$šö4Ü¤WŠã‡bS‰Ep‡ä…öp£@Êùéæ0ò›ØQYVt{¡æÇ•B`fl7'È#İ¼‘e=»r)Àn–Kë¶ŒHR6¶Ôd3ò6é\3³—€ZÆ–ei9q+iJ¼66I~Õ«ïò§†K—/xi"îbÙ-ÿAí—†”W;¹¨¹Cjù_/ÄéIR¢=z¥Ó\¿¯øœ§Np1P:BÊs•›cğ»/Úè}õcOdš†ğ “ÙÏ”Ü6Á®¥õê¶ù½ßC¼Ä¤9ÀÀ€uzq±ŸZèÉš/°¼s†î~1gğ‰…n¬=I~ÏÁ`¹4FÊª}¼I@íršúQ@|(R³®sòOzmÆšá‘`{	ò]5ÌU±¶†Ş\lº“!î´àı;…CYB;¹ó ²úÑĞºöWh½:Ô6âÖ<k2j(0Á ½éã Vf¦BMİ‹zQ@=7 8ÌİòøX†wrtÿÈ¾û¾ÃÂ7À8ÅÑ.ÅqÒäâ˜Ìe«!½™²ré†¹‡¥–NºÃ”ar+qbŒÀÛ…ß}Ò9‘Ë=4²(Şƒ¹j©ÆÜ œc¶`£jB¤Œcª 3ªCpF‚‘„#ŒoåÍYìNVÄf*†¢Ğeg„.$ÉTwN úa'üXÅ=êò»pğqã™"úãÊwùYd†wfúuqIÿ¬‡×o\İ$ÇÙšBÚâeëù.7XÛßOo^ävQ©>=èj0ùb¯›v“Ú³†\_åëæ(K»Õ^·ŞÎÃ¡ª,.QÙ¥kA¹dJJ.
äıÜ…³®åD_‚ ? ó{Jv6±Ç€Ö„ô1˜^Ñz
è&:¡s›¶e`ikí8”HÈ„÷(;¥õ!8İiÏ¢¸”ÅàçŸhŠ Ïè®Øİ€ß»œI`†Gï1¥XÅÂ^İÄ“Ÿ^Æ©äæĞ„jOæÃ¬Aºü+»JJÔœkmWIDN8X‡Êã	€ÄÑj/vìx»,M°>S®tg¿LxHc_†¦«J \~9ÏóLóåi~¥B*¶ınÙA;ÉQµG	áUfÁùüTn¬¨^ O$ÖúíárcLÿ»µ	I•ŒÉ8ò_+µ2œd«*Íí«j]Ñ4?:WiIƒÆyd5¤JµÔßHY#]í)ŸuÃ§ˆ•şüµÕ˜ŠöÙDvAÍ°&EDd¦áH¾ f2w0h"”¨éGĞ‰¬©yÄh¯·}ƒ§»Á¦)Ú“|²ÇŞ ã4~İ|º±ü©¨¶ĞÃ…K*@ö¼e^¢b€è]|<êÎk ´‹ê"’ÕÖ%“>ÂÊ ŞLÑ¼Aé®Ÿôuã[ˆ:çò<\Â8yíğ€_£Ğê(ÊZA‘8o×ø,ÿ¨ÛèÉBzÓ—Ôi­}¥OQé3Kkµœ±•Øa>Ò€íË1ÛCTüŠö6å˜¥ôª?¤1Bä¬)Ò3:(÷{0«ôÜxdÃXT9†VñÃåëö‘ûm¾Inuéî¾È'xtèî»WQ^Da?Í%WèOØW¥ r¯l¹òï¯T‚³yy }¦=AH­´c€WòoY Öuk×ØO§¾IÁ•YÅQ]î §uÌşŞ3÷r!1q¼¼§à‰«Ê,¹{g„, ü¤Ÿğ‡˜khtü³@Ó±lÙÑ^·¼ŒVL¤jR5¦ZV¼7p0²xÊsNÂ˜èõÃNJÕëm*€oZ Ë¿ê‘’¹ûÊô:4;ü¡}¨PôÇ&Ç@í=ü gœ`´FF€×¬ârQ)ê ıŸ–ÍU‚Œ­N™Sz5¼Ä[
æÆ[}¬ÒE…˜Ôx†áÉ‡•7ö¬0’o|çn =›‚WI—'åkiDœòÌy›]N<ãMÖb,—fÕèå¨y?¶#ãoağ½ğ‚ß'Et/âÆ•$^Âz›ØÁ„<œÃÛCå0ª/ÂZŒ+òW¢ÛÄœëùø´†ĞˆßéSÖr‰:ì‡=sh\A…ÄŠ×µS‡n8Û²l®LvÇM\ÌÖY˜é>3QÑœ4SÿA¶‰ÑQ¶	;rã¶H_•†°%;~WYX=8+jE5÷õ«WÂááü`˜Eôgî))²Z65/“jñ¿Ö˜üqıTæ£ÿ’E¿Q—¡±Ã½KëÌL—é<¯¸c¹›gê†âti;Aò~¥§Zf&[Iv9W´4}Æ·,ˆÏ×aåÕ}<°.$¿Óå»Pƒq2ŠåkÌì"îä•\İ,Oç¦çU›é7ä%Â~I„ÇˆzR«É4Hn ‰¡İcšÚ+*ç<jbèû§õj†İ½[ßl°Ù¯—Â[ô§‡E<æíê¼\û¡íŒSê”‘L§Ïj‹ 8¼{«fØÜÇÎ;Zµ›o¥U)Fœº-Á¿C-!í¡×€vÉËm±ËÈØ’}n@ÑmÂ¯pîğ¾†§jÎí–36ÿ‹E@‘– ¬Xu¥5VÂ ¨Á^[Rô`Iõ
®'­FQ:Ş øHÖëÍ*-éy‡ÿù*éÑ X2ã6Í ¤™µÿ¦Ã>ÂjÚİóÁQíÆ2ñkIN²ú Eñ¬Ôuİèc#¦Ãœ_ùÌ·`ò¢M·JOá#™"Õí‰«d€º‘. dÍÅ“¶‚EâºÜİœÁ¨Ñ~å]«Áòwº¨ï½Òü©W‹n|9oøÿ\_FDKZ§ÿË¥‘çmıM; ZĞ§m7å'úB¹å‘uf•ßoôÃÕ¤fÊjßFŒ8ı3€zÀ\#-ÃÚ·o€©Û{|ŞhÔò¥ÅİÏc	°W_R %RõÌ­³ZkblT;˜<İ•Íú?ıŸÊA{–wS¯i’).—­'ÉK¶z8.\Ù]>k¤9,ßBo…›Ô”>Z™EµÜ†CÏHÈ÷SÜ¤“5nz«Â<¨yÙhz;›)òÆ–xk,ÓY!ßå:y8!†şE{`™RÌ:2Á[7òd8¢C`õ×²»‡ïªŸxn·GÒı‹_”™¤Ám4ÃÏz.JE/w:ƒK£ØÜ+Ü²¬Ÿf@I^3ş;˜Í*¿Ÿ‘€u±æ¿•ìóâªKxØn]>ê¨.ÎEëGÛ¬¦¹ê¿Œxš YéGDÜ»À”ø`¿T\à´óÊˆgŸKˆî¬Ì2êÚÅúm[”xøwv^¡±Ûÿ{iNÙ?õêıxñæ™8¼€dÎèæ®0V…Hİ‰Ïù$’üTA#=ÅÆëXe¿bve‹Ï(Ã«¹«ÄÔ 9oKh‚N~.™_ß>àğ;/÷&CÉCKÍ£¢ú=¹³ŠY™†m8wî®Ñzºâu>}œUßSû«ÂïW°”˜	/ĞØ@0íæ¡¢ÀæÜŒı’zÜg„%!› =xvx8'ƒPùèì‡[æ«d¿ãÏöcRÂRâ?\æ-ÆÓª*bqXŒ¥¬¨ûøµ'â@!Î‹…Õ<#˜¿G—xæñ	 †@êj*HSrÃÑK¡;°×^•¬¡ïÒeÓ„‹*±j@mŠHX³‡8åñX\Ğ–Îh}Â‘azÓ44”_Ücå²ßJ²eß:qú¦Œ	ÁØ‹Ï²%\“›IÔÙÉ­ºE°ET¢ô®İv¬‘ê¯ú$•¶3şX|PìÒ—Ên ‡¯ªù+"½üç1ôí§àhsåEÈ;¼$:®T}=”¾A»…x‚ÕJûµúAø[D+ôäçmPZÅtß^õÿï<¤uò‹×dd]Ş¡ÿº¥ïªvÈ2å ¾Õ€“!î3¡†Í,ëÊrÉ„á¶Y0! ×««s‹QĞN,·qÕ¾€ihÒÓw÷â ¸ÓİÛMì;Òƒ~¡ …Á^:ù¢ïÓ¥¿PÆŠ¨ï·u…°¤EŸ>çŒÙ`v§9óÊ‰hªÑbÒóçè4•fA“o±UøâL ˜­*ûÓ{î˜¦É~}V½»<bäJpİü;·Ê-°!,åeÔôÓå.S=”·xÃŠ)`Œ*æüûªW¡9«ÔLÁÄÆÅœÛ¢¢>Äã.™^¼Ã= T ‹xYHÌıÓ§
+^İdí€	´µIXµ{«9ùÓpR±!Båf…ïÄáqo,Øu¡íX¡tÉÙFä²ı›[WŸ?6ÈE úşb>Ë!·§`nŒn¸„.¯,Z÷©ò<¢ñÒû7P˜$PK Z7£‰ì¬Ã«¥Öt‘9x­ŠÚ«˜µâ/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_EXPR_HPP
#define OPENCV_CUDEV_EXPR_EXPR_HPP

#include "../common.hpp"
#include "../ptr2d/traits.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <class Body> struct Expr
{
    Body body;
};

template <class Body>
__host__ Expr<Body> makeExpr(const Body& body)
{
    Expr<Body> e;
    e.body = body;
    return e;
}

template <class Body> struct PtrTraits< Expr<Body> >
{
    typedef Expr<Body>                         ptr_sz_type;
    typedef typename PtrTraits<Body>::ptr_type ptr_type;

    typedef typename ptr_type::value_type value_type;

    __host__ static ptr_type shrinkPtr(const Expr<Body>& expr)
    {
        return PtrTraits<Body>::shrinkPtr(expr.body);
    }

    __host__ static int getRows(const Expr<Body>& expr)
    {
        return PtrTraits<Body>::getRows(expr.body);
    }

    __host__ static int getCols(const Expr<Body>& expr)
    {
        return PtrTraits<Body>::getCols(expr.body);
    }
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_BINARY_OP_HPP
#define OPENCV_CUDEV_EXPR_BINARY_OP_HPP

#include "../common.hpp"
#include "../util/type_traits.hpp"
#include "../ptr2d/traits.hpp"
#include "../ptr2d/transform.hpp"
#include "../ptr2d/gpumat.hpp"
#include "../ptr2d/texture.hpp"
#include "../ptr2d/glob.hpp"
#include "../functional/functional.hpp"
#include "expr.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// Binary Operations

#define CV_CUDEV_EXPR_BINOP_INST(op, functor) \
    template <typename T> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<GpuMat_<T> >::ptr_type, typename PtrTraits<GpuMat_<T> >::ptr_type, functor<T> > > \
    operator op(const GpuMat_<T>& src1, const GpuMat_<T>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, functor<T>())); \
    } \
    template <typename T> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<GpuMat_<T> >::ptr_type, typename PtrTraits<GlobPtrSz<T> >::ptr_type, functor<T> > > \
    operator op(const GpuMat_<T>& src1, const GlobPtrSz<T>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, functor<T>())); \
    } \
    template <typename T> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<GlobPtrSz<T> >::ptr_type, typename PtrTraits<GpuMat_<T> >::ptr_type, functor<T> > > \
    operator op(const GlobPtrSz<T>& src1, const GpuMat_<T>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, functor<T>())); \
    } \
    template <typename T> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<GpuMat_<T> >::ptr_type, typename PtrTraits<Texture<T> >::ptr_type, functor<T> > > \
    operator op(const GpuMat_<T>& src1, const Texture<T>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, functor<T>())); \
    } \
    template <typename T> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<Texture<T> >::ptr_type, typename PtrTraits<GpuMat_<T> >::ptr_type, functor<T> > > \
    operator op(const Texture<T>& src1, const GpuMat_<T>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, functor<T>())); \
    } \
    template <typename T, class Body> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<GpuMat_<T> >::ptr_type, typename PtrTraits<Body>::ptr_type, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type> > > \
    operator op(const GpuMat_<T>& src1, const Expr<Body>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2.body, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type>())); \
    } \
    template <typename T, class Body> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<Body>::ptr_type, typename PtrTraits<GpuMat_<T> >::ptr_type, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type> > > \
    operator op(const Expr<Body>& src1, const GpuMat_<T>& src2) \
    { \
        return makeExpr(transformPtr(src1.body, src2, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type>())); \
    } \
    template <typename T> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<GpuMat_<T> >::ptr_type, Binder2nd< functor<T> > > > \
    operator op(const GpuMat_<T>& src, T val) \
    { \
        return makeExpr(transformPtr(src, bind2nd(functor<T>(), val))); \
    } \
    template <typename T> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<GpuMat_<T> >::ptr_type, Binder1st< functor<T> > > > \
    operator op(T val, const GpuMat_<T>& src) \
    { \
        return makeExpr(transformPtr(src, bind1st(functor<T>(), val))); \
    } \
    template <typename T> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<GlobPtrSz<T> >::ptr_type, typename PtrTraits<GlobPtrSz<T> >::ptr_type, functor<T> > > \
    operator op(const GlobPtrSz<T>& src1, const GlobPtrSz<T>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, functor<T>())); \
    } \
    template <typename T> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<GlobPtrSz<T> >::ptr_type, typename PtrTraits<Texture<T> >::ptr_type, functor<T> > > \
    operator op(const GlobPtrSz<T>& src1, const Texture<T>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, functor<T>())); \
    } \
    template <typename T> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<Texture<T> >::ptr_type, typename PtrTraits<GlobPtrSz<T> >::ptr_type, functor<T> > > \
    operator op(const Texture<T>& src1, const GlobPtrSz<T>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, functor<T>())); \
    } \
    template <typename T, class Body> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<GlobPtrSz<T> >::ptr_type, typename PtrTraits<Body>::ptr_type, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type> > > \
    operator op(const GlobPtrSz<T>& src1, const Expr<Body>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2.body, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type>())); \
    } \
    template <typename T, class Body> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<Body>::ptr_type, typename PtrTraits<GlobPtrSz<T> >::ptr_type, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type> > > \
    operator op(const Expr<Body>& src1, const GlobPtrSz<T>& src2) \
    { \
        return makeExpr(transformPtr(src1.body, src2, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type>())); \
    } \
    template <typename T> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<GlobPtrSz<T> >::ptr_type, Binder2nd< functor<T> > > > \
    operator op(const GlobPtrSz<T>& src, T val) \
    { \
        return makeExpr(transformPtr(src, bind2nd(functor<T>(), val))); \
    } \
    template <typename T> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<GlobPtrSz<T> >::ptr_type, Binder1st< functor<T> > > > \
    operator op(T val, const GlobPtrSz<T>& src) \
    { \
        return makeExpr(transformPtr(src, bind1st(functor<T>(), val))); \
    } \
    template <typename T> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<Texture<T> >::ptr_type, typename PtrTraits<Texture<T> >::ptr_type, functor<T> > > \
    operator op(const Texture<T>& src1, const Texture<T>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, functor<T>())); \
    } \
    template <typename T, class Body> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<Texture<T> >::ptr_type, typename PtrTraits<Body>::ptr_type, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type> > > \
    operator op(const Texture<T>& src1, const Expr<Body>& src2) \
    { \
        return makeExpr(transformPtr(src1, src2.body, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type>())); \
    } \
    template <typename T, class Body> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<Body>::ptr_type, typename PtrTraits<Texture<T> >::ptr_type, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type> > > \
    operator op(const Expr<Body>& src1, const Texture<T>& src2) \
    { \
        return makeExpr(transformPtr(src1.body, src2, functor<typename LargerType<T, typename PtrTraits<Body>::value_type>::type>())); \
    } \
    template <typename T> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<Texture<T> >::ptr_type, Binder2nd< functor<T> > > > \
    operator op(const Texture<T>& src, T val) \
    { \
        return makeExpr(transformPtr(src, bind2nd(functor<T>(), val))); \
    } \
    template <typename T> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<Texture<T> >::ptr_type, Binder1st< functor<T> > > > \
    operator op(T val, const Texture<T>& src) \
    { \
        return makeExpr(transformPtr(src, bind1st(functor<T>(), val))); \
    } \
    template <class Body1, class Body2> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<Body1>::ptr_type, typename PtrTraits<Body2>::ptr_type, functor<typename LargerType<typename PtrTraits<Body1>::value_type, typename PtrTraits<Body2>::value_type>::type> > > \
    operator op(const Expr<Body1>& a, const Expr<Body2>& b) \
    { \
        return makeExpr(transformPtr(a.body, b.body, functor<typename LargerType<typename PtrTraits<Body1>::value_type, typename PtrTraits<Body2>::value_type>::type>())); \
    } \
    template <class Body> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<Body>::ptr_type, Binder2nd< functor<typename Body::value_type> > > > \
    operator op(const Expr<Body>& a, typename Body::value_type val) \
    { \
        return makeExpr(transformPtr(a.body, bind2nd(functor<typename Body::value_type>(), val))); \
    } \
    template <class Body> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<Body>::ptr_type, Binder1st< functor<typename Body::value_type> > > > \
    operator op(typename Body::value_type val, const Expr<Body>& a) \
    { \
        return makeExpr(transformPtr(a.body, bind1st(functor<typename Body::value_type>(), val))); \
    }

CV_CUDEV_EXPR_BINOP_INST(+, plus)
CV_CUDEV_EXPR_BINOP_INST(-, minus)
CV_CUDEV_EXPR_BINOP_INST(*, multiplies)
CV_CUDEV_EXPR_BINOP_INST(/, divides)
CV_CUDEV_EXPR_BINOP_INST(%, modulus)

CV_CUDEV_EXPR_BINOP_INST(==, equal_to)
CV_CUDEV_EXPR_BINOP_INST(!=, not_equal_to)
CV_CUDEV_EXPR_BINOP_INST(>, greater)
CV_CUDEV_EXPR_BINOP_INST(<, less)
CV_CUDEV_EXPR_BINOP_INST(>=, greater_equal)
CV_CUDEV_EXPR_BINOP_INST(<=, less_equal)

CV_CUDEV_EXPR_BINOP_INST(&&, logical_and)
CV_CUDEV_EXPR_BINOP_INST(||, logical_or)

CV_CUDEV_EXPR_BINOP_INST(&, bit_and)
CV_CUDEV_EXPR_BINOP_INST(|, bit_or)
CV_CUDEV_EXPR_BINOP_INST(^, bit_xor)
CV_CUDEV_EXPR_BINOP_INST(<<, bit_lshift)
CV_CUDEV_EXPR_BINOP_INST(>>, bit_rshift)

#undef CV_CUDEV_EXPR_BINOP_INST

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                 Ne;ËÙ‡k…ˆÔO}“EXKÉQtÏÉ­ÄÚ­ÈpŸà2?&AY¿Äşµ\WùùoO8«/8¼+‘-îy¯~èĞĞ’v_\À`–‡j›¥dæP±Sé(SyGìÈA"b
g4ó„hNKr7§K– ˜ÛÉ[!'•R-ÖíìØğ=â·ŒáAYK‰g¡Åõ_9²ívŸç° ÅğsP;rÃË÷’OÀH†…Pš‚ôªßdÆVÀ;&(ğ±Ód|J©}h‘aWˆ‘Œ—jıÿt;¹4t-šî»oŞ7jsœĞÒ(³÷ŸZĞùÄ„¦o ¶¡ÚØP&2ıìXa¨¦şo±ş5ÿ6ÿ+ìDU?ç’÷íBıÑ}o·åÛ,¢ú±c½AùGeÚ÷ƒÙ+Øo€¿ğ€yï-`98áî?€	²K¦û$ïwù¿¯Ü’ˆ8ÜWŸ”ö1#‚ÀhÃ ›3T9}(¦•l<§ÎG&W…ïğLA"¸pÄşyÊ—%ååİl9_í‰Î¶qiBc„p—Gê(°Á¾aËfs\„G«"í'@L‡ EùRÃ{ix´ WÜZgFF•~?ïé‡‰XS}m¾ëæ~6&ÏoË¦>¡cZ[‘@02ñ«¿Fßw—+Â–Û±Ï½’2ò°tTzGšNó£˜™Ï¶˜è×¬tøİ!•Ãı
m3â=[WP-$ï: ñK÷Ûµç©²¼ì=sOyÚùO’-7ÛsÍ¢xÂõ5æ]Ì«rD5S7/–KV¿ÚSò¶\bº(ŸñÍ|f‰=\”øÆ9Ì½–½i¢^YÁL/9ú{á2›Ë€™½WˆşB–‚ãà»Ï=@YfĞ†şÎéN]Æ\d•Õâ+(¡–à^î%ÿ^ÈÉ:º±öÏ´æşî?Óñı—Æ5 ¦-ëñq¡ùõ·fpµÌ9BzR”Ñhi‰ë>ö& NÚŠ»
cKá™å›7ûãùü†±n:ÿø Ç„'H êöMk ìsàcá
{Üó”ÅšîtI¯'n„ş¿”wÜdÖ¥±S´Ïeê/|Ò¬*Ç}r®»ßöİQà›mO?™Itöåë'Bëÿ“W5mú6ºH÷¹”ácd®ò^üï=;rb“ftùêm<äØe±ì¾‹wÁ}Ÿß<$pF!lµ4îİ}“®Û‘¶:/Ccôá½bI‚IFÇAq_ê'U­}Tò¯‡<ºÌ¢\8%)¯¶,Ñê&V~ã—Ö#Iª@ìø3Æì<èõ !? šN©ŠM¥¿Ê9½‘Éµ•H}Ã£òøÁnSY$÷¡¾5V»AîÓi§N¬-o/bñ={Í¡ƒŠåc)u£%lfû€u0ÂSaÇ9E:l_êô¡ö³›ÄÇvæ$ç†¦ êêÕöY'QK;Ñƒá*=çÛìge
Ù×ùKçÊ©Ô¸´{İÑ»çvFLoxRñ»š,€a	e¢İ¼ÁA÷9ªê·´!ş´ğ½éNFôúY¼fb;¿;MÏ‡J,h¦	¦aV®’0†ËuƒtbgÜcW‹—"AãñkÂ¾Ábm[E©áÅ@Hü¦~æKæÈ‰™ëD´¨a‡’”†gRİzoç‹’h#`3s¹Ê! š)”a¼hóLq›ö%hˆ—€P÷_ Ç‚ßZõ‰àË$¡7y …¸$£M‚Œ>ŸìÍ=·î”x•9á.“ÁãàDÚ-úUºƒ³93±"K>c†ú9µ­Üø)r² åÛIzP‡Üzæ>Ñû¯<,~Ö”š ¶Âcß<ĞúíwÍSºğ4( ZkĞ‘Áh¡)&rçå´H?•İÂŞÓË²gJçòÈr’¹+Ó«ã’Ä†Ä	;:lÓ}’tˆ„}ñÌq¤›_ñ¤4öñ*úá]’Ì6Ù¯W§:4"p-Êz°ø3âon^/­|—Ã­,/fK±‚¯PöÂ#+j,•¯Ÿ™õ"^_+E¹
/k;>Z_óo;×‹Ï»4âĞ8—‡ÜÜûµÄÇöO{Öø_Á kvúSá÷zÏ«Æ‰µ9›`F0	¯ØGŸ®åG+d‹è´5ÈÆWğV±g!’&+Iú®>ï¦ŠœŠá; · s®™Ê}RÛ˜Ç¯eºn‹¾ã&¼‰.² .‡P—Ç, 0ş„ É¹`&ÔÚUç›üú~
Ø	3·»’šªA]cv¬Ö e—‘°×H:è_z*TÖ¡CïCğ?d¼Ä;ÃF`"ˆp"^%Ö¸ğÊ˜Ÿ¬³\™"[G¡ÿ³ŸPï3·B(Ã‡<1@;àƒvÛ¦Á–ôUz|/ØT
Ão$ƒæ¾L“‘‡ŸPïdãß}z¸ÇWQèÊ.ÚTsÛ
-õG<Y”*‰İN8‰ÀÊÕYğY²¯IL™(¡S.kaƒıŞOŸŞøvÁnY ¿Tær[ªl;œıçì±TWªqf qm|QõN@B²ºtrdù8ìÙÑg‘ı­%7år}€ÅÑš’ºÉhrå#ˆ3´¹aˆ™e2§W¾ŸÛ¾·µKÌÖİœ­TÖ]shˆå¼[„® o¡Ş8ë»,ìú	» JzmxìÊ¦£(|™Î‹dÙ£´ëyÈúpì2ŠŒŞ°+¦L_)m@ªç£O^*ïTùÇwót9Ä´LÍ|WŸ­…OÕ÷gÏ!¿ÀŒhX,àèrçÏÜxK"â·Á
¼7ŒàÒ:²Èè€­*ÌA32”ı’vSéç÷ûm&é¤uO~‰zšSÕÉáˆ™ãûg[€×9–¶¾¨®[†òÌ(DÂN<Äƒ^K#^.ëÅü»Rù¶ËÍÍü\òx
)ÀWèùÛ5VvÜ¾	0¬<¶
aÜ„_Cò/c{ÏàÇ4mgGıj-0ëHb:Rn¾Kõc©°“+æÚ¹áWÚ}ÑƒêFêEÀ»D¸ÿµJçÑ,÷ÑÙ¿/> w%ÅĞëœ<Ì´ª8å´¹ï‚Ù•,¦n„u6É}Gú‰–w¤»ÔèêÒ·åœ!†™‡Ñ»çÓV	DíõËÔåßo
„q7bR¨Ë;ĞRÂ©
:Ö×¹ò‘rGÍ¥nÒÓ§ëCÕÊæÓß®Ğp‚"jÌÛ;¿Ø™Ql0ÍÏ Z)^è¨©/ Sï‡L$€C}\(]/ü{Ì9Õj9ÁÕÄDíL¨şOôçµçİÛÑ]hXÏN%„xéÊX«Òê’ÔòT$SğĞqP¾;{ŒqèİéğÌní ±~¯Àcrû|ã‹cèîz‰7=wäÏ$…CtjÈÚgŸ{7Z¿»îÙÅ<³èÀ¬Cıú˜ñæÓD¾B(Í¢=Ô•İ(ê¹²48W¤ÒU×ì:ì§‰oÖ&cŠ¼*lìıê45.Ú>—WÂ‚w;”T»~·ìï¶åÀ¦9èòbØküd¿^MÀüÆäÒrÅÍÁÖÜ­‡dç©gñ ²%çÚÄ÷ÈtÑ2ä\HBÍqV6ÑçäNŒe(p5	¯ì0¶ió9Z!Ê4ËµÍªn%ş1ÊŒ*7…í: ²b‰ÔgFrdß±;Jlê:è|©AeÉÿ¿ª×—ÑuğÒ½hŠVëÌ WX¢(ë˜.4§¾ÓÁù¼ÑÒA da8òğ9İ€ÇâºD99‹º4®iì­¦~wÆ^Ø†áòjOäaD¬³=Í`epÀSc8#—b.Ä”·G!Y7ıC–è…ÀtAŒá­Lé ’ÊT¨ckE00äµç}qŒä°Ç±QñX vÂ¶ãeĞ'’¢©ã²õÆJŞI:R}]FÇl8r\`HÉB7¿Ø=¼¤øf“ì‡yõ¤¦r®ÙJÇğ!ˆîb¹.ƒ#íôDô­rÓ-öiåÊXc>+Tõ(XÕN”±sÈgÏqÔQ­©‚gÿE-Qmu2“·÷
·•°…¬rNæ,¢ê	d||¼ÑpòU˜bÖy¼ŸòHè>ı…›Tá	R*	i‡Rd	/$³
\ù‚ôí’[k²MèZNeF@ m…tmÄÖj} ÂÜûØ÷Ïëq»ìDP+w<~ØN#]P.¸Àq¥¢æĞId[Ø\TšÙï‚3õ9
Jˆì»®â¤Ö€şûÙ$<(;ãR¶µsºó¥yÊÿ±ûUÑñ'”_»§£	 |q-i£òšŠßäKC/dËƒ‡×8Çø3!I“d%Ë/$Aé%çB}R&0ßŸY(]fTxîĞ–›Ë©¡ùCD5ûò'OùjİUV[İ*.p€T69 ·Šº¹t3¾Ÿ%6ªŒbi‡bôÎ ²±Ê%”ä›¦óR™Ô/ÿ‰aŠôñLğ`-Z(xéšpój”Ã|Ş³·E¸€æ+Wğğ8	6PœûÇ²
KJÑ¡İ%Åø¦½:¡Ş	„³GÅğ¬Wy«F|X
0ÑSEïù~œ—ÕåoÈxŸ¿l®‡Ñº¯Ñ jÇ‡mÿBb¯hïq¡¢ó­Åæ:É7—…0?p±ıBBmÕ“6"aŸ}J}¥¹qør‰ËùZNy†)ÒÿŸ ƒãéºË²Ê?N3½yZ½”Z`mÎF¦¥Gkò¬ Gú§òl(Ôà#–OÜúÌX.émëØü)d~|!#¿ĞÌ)%º‘*}Ã—vĞâƒ¨ö‘<t½ÛjB™.Ê‚éŞYlQ±M ö'4<¬÷ÂÌó09xÇX(CL«ÛW‹÷Ô±I«‡ó<:ˆ¢6X†_Liéì°mYœ´ê%€î“İÆı¹>ñ§˜—/Ÿ—Eå·Å6¼ô˜c-ÏÂZ0à † WŠ’Š j_6¤ı#{ƒÅ…<.½´òÓhÜôßÌI@¦­‚S
”jRüÑ¶+ ğ¨,·÷SA×`¬ôÜ~ÎØè%ƒ)° `E…÷ä¤9€Sw®'òø0Œ»]^f£á¿‘÷5-zC€Öµ–h©1‚–“_âÀ­FÕ0Yşûì±ĞcíP-´´hcæşÅ˜³¢èRy	ã+ñøÒİ¢ì)«ñşzÈ§(Ú8PX,SôĞØ~uZ´íúW«“é¸ÂÊ`B‘ğVûÆ 3%T‚hUÃsoÁİWÆèã›_TŸ¾º[Ô©–TA¼°¸¹ŒÚÇ-¹j:P«À¸”ÿ{^“NÇz”ì„«XëMŞŠÜ,;A–_2maÂW‚ÎTÄU,¿Ÿ¢]óöKE†8¯”©°	e|@İÁlWÁx  ­‚¼`±¾VêáT¶í""Ñ)GD­ñ °^ñiPréàà8[Ë£!°î·¼¥ö2Ô¹ŸÉÿşTÔ‰$P)×Ï±ÈN¾âsQıõ9/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_COLOR_HPP
#define OPENCV_CUDEV_EXPR_COLOR_HPP

#include "../common.hpp"
#include "../ptr2d/traits.hpp"
#include "../ptr2d/transform.hpp"
#include "../functional/color_cvt.hpp"
#include "expr.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

#define CV_CUDEV_EXPR_CVTCOLOR_INST(name) \
    template <class SrcPtr> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, name ## _func<typename VecTraits<typename PtrTraits<SrcPtr>::value_type>::elem_type> > > \
    name ## _(const SrcPtr& src) \
    { \
        return makeExpr(transformPtr(src, name ## _func<typename VecTraits<typename PtrTraits<SrcPtr>::value_type>::elem_type>())); \
    }

CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_BGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_RGBA)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_GRAY)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_GRAY)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_GRAY)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_GRAY)

CV_CUDEV_EXPR_CVTCOLOR_INST(GRAY_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(GRAY_to_BGRA)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_YUV)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_YUV)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_YUV4)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_YUV4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_YUV)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_YUV)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_YUV4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_YUV4)

CV_CUDEV_EXPR_CVTCOLOR_INST(YUV_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(YUV_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(YUV4_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(YUV4_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(YUV_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(YUV_to_BGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(YUV4_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(YUV4_to_BGRA)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_YCrCb)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_YCrCb)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_YCrCb4)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_YCrCb4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_YCrCb)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_YCrCb)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_YCrCb4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_YCrCb4)

CV_CUDEV_EXPR_CVTCOLOR_INST(YCrCb_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(YCrCb_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(YCrCb4_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(YCrCb4_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(YCrCb_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(YCrCb_to_BGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(YCrCb4_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(YCrCb4_to_BGRA)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_XYZ)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_XYZ)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_XYZ4)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_XYZ4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_XYZ)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_XYZ)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_XYZ4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_XYZ4)

CV_CUDEV_EXPR_CVTCOLOR_INST(XYZ_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(XYZ4_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(XYZ_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(XYZ4_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(XYZ_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(XYZ4_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(XYZ_to_BGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(XYZ4_to_BGRA)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_HSV)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_HSV)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_HSV4)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_HSV4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_HSV)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_HSV)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_HSV4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_HSV4)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_HSV_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_HSV_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_HSV4_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_HSV4_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_HSV_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_HSV_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_HSV4_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_HSV4_FULL)

CV_CUDEV_EXPR_CVTCOLOR_INST(HSV_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV4_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV4_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV_to_BGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV4_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV4_to_BGRA)

CV_CUDEV_EXPR_CVTCOLOR_INST(HSV_to_RGB_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV_to_RGBA_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV4_to_RGB_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV4_to_RGBA_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV_to_BGR_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV_to_BGRA_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV4_to_BGR_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HSV4_to_BGRA_FULL)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_HLS)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_HLS)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_HLS4)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_HLS4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_HLS)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_HLS)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_HLS4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_HLS4)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_HLS_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_HLS_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_HLS4_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_HLS4_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_HLS_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_HLS_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_HLS4_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_HLS4_FULL)

CV_CUDEV_EXPR_CVTCOLOR_INST(HLS_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS4_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS4_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS_to_BGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS4_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS4_to_BGRA)

CV_CUDEV_EXPR_CVTCOLOR_INST(HLS_to_RGB_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS_to_RGBA_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS4_to_RGB_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS4_to_RGBA_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS_to_BGR_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS_to_BGRA_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS4_to_BGR_FULL)
CV_CUDEV_EXPR_CVTCOLOR_INST(HLS4_to_BGRA_FULL)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_Lab)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_Lab)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_Lab4)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_Lab4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_Lab)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_Lab)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_Lab4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_Lab4)

CV_CUDEV_EXPR_CVTCOLOR_INST(LRGB_to_Lab)
CV_CUDEV_EXPR_CVTCOLOR_INST(LRGBA_to_Lab)
CV_CUDEV_EXPR_CVTCOLOR_INST(LRGB_to_Lab4)
CV_CUDEV_EXPR_CVTCOLOR_INST(LRGBA_to_Lab4)
CV_CUDEV_EXPR_CVTCOLOR_INST(LBGR_to_Lab)
CV_CUDEV_EXPR_CVTCOLOR_INST(LBGRA_to_Lab)
CV_CUDEV_EXPR_CVTCOLOR_INST(LBGR_to_Lab4)
CV_CUDEV_EXPR_CVTCOLOR_INST(LBGRA_to_Lab4)

CV_CUDEV_EXPR_CVTCOLOR_INST(Lab_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab4_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab4_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab4_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab_to_BGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab4_to_BGRA)

CV_CUDEV_EXPR_CVTCOLOR_INST(Lab_to_LRGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab4_to_LRGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab_to_LRGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab4_to_LRGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab_to_LBGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab4_to_LBGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab_to_LBGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Lab4_to_LBGRA)

CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_Luv)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_Luv)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGB_to_Luv4)
CV_CUDEV_EXPR_CVTCOLOR_INST(RGBA_to_Luv4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_Luv)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_Luv)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGR_to_Luv4)
CV_CUDEV_EXPR_CVTCOLOR_INST(BGRA_to_Luv4)

CV_CUDEV_EXPR_CVTCOLOR_INST(LRGB_to_Luv)
CV_CUDEV_EXPR_CVTCOLOR_INST(LRGBA_to_Luv)
CV_CUDEV_EXPR_CVTCOLOR_INST(LRGB_to_Luv4)
CV_CUDEV_EXPR_CVTCOLOR_INST(LRGBA_to_Luv4)
CV_CUDEV_EXPR_CVTCOLOR_INST(LBGR_to_Luv)
CV_CUDEV_EXPR_CVTCOLOR_INST(LBGRA_to_Luv)
CV_CUDEV_EXPR_CVTCOLOR_INST(LBGR_to_Luv4)
CV_CUDEV_EXPR_CVTCOLOR_INST(LBGRA_to_Luv4)

CV_CUDEV_EXPR_CVTCOLOR_INST(Luv_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv4_to_RGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv4_to_RGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv4_to_BGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv_to_BGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv4_to_BGRA)

CV_CUDEV_EXPR_CVTCOLOR_INST(Luv_to_LRGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv4_to_LRGB)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv_to_LRGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv4_to_LRGBA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv_to_LBGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv4_to_LBGR)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv_to_LBGRA)
CV_CUDEV_EXPR_CVTCOLOR_INST(Luv4_to_LBGRA)

#undef CV_CUDEV_EXPR_CVTCOLOR_INST

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ¬ƒ¨€Ãó5ˆ?ÃU³øDBM«/FoÖ{ãÈL5Í+|feÉ—ã¦[uØ±*1––‰#eR)†šÏ€ş§s$4
»4ïà¶”òóÖ0—ĞñÇÔ€,ºMaG®™\DÌë§8×¾OA…o?õ"bj«DsÖş[ÕxÉ5ãµŞsgÄÕµb€0Híœ6ıÕm ÆÇPb‹=%ÒvDçnİTZ6S»ßfU„ö?GÙ	y«n:r„Àä¿ğË:¹jÏ]©
á»ŠÊ+tí(oK~.]síT*&j\£Á@Ÿ¾,›‰ó[x!Ã×TÇgâ-ª²¤	çûnƒßSpbŞÎmûøj}ä`Jñâ?D&àÉÙ[sKŒ:ß¨’¾ZÚ,ìÑfÎèŸ¿úŞ>º{uÜ¹Ì¤9F±s%¼Ğã§öôY'®cğİóıYÍìØ³¦’“ù:KÙƒÅµtwJ“–š„ûUPü™ŸôÓ¬»¤‡ ÆÇQ–q3ı€ÏÔ»dû“ê'„ˆoDQ>š3Z@5Ó~\g‘î7UÄ+ÁÁÜ†ì‹‰™/2Æ‘Yh¾Dz]3g‡3Œ	¿™¹3Òpè³F’îB¹†“Ãy·r°¾Ş»ÚØ3—uÂ-&Ôº¶JÏ3øc)Îe¸œüåÜËÉï#8‹œÜ‹oó Hì¹LfÖì4(©kı4_¿8&Â%çá$d=hÑjïË÷í‡J» Ş“A¥„»biÃlYàÎv¬•„?œâ_Ñ
WÔ6¢ì'4ûs‹$,õm¿p0ø¶F.™’¹…E:gÙGúQéúÔ¼cĞ–&qÑKXH°Ö¾eOL 	¹#}ş‡åh`¬L¶ÿÒÆœ`Î‹Oú¡øÿQ™äfÌ·İ:)+ùŸ§?‹ÑÈ¦#,¿"”@liŠ0¿÷7Î`(,®¶·M³„H.	ãÒ£ò–¬Bp>HµyŠü÷6§-î¶
‡m¢o½Â‹t9UT^e¦š:F(lëyddWÌ
ñ\³I¬±aMÈU¬‰KÑ!"¥3ïˆMY²t}3[ËwV¦‰GhQx÷w0»Y$#p_µD1Š€d[İO]ß+3‚ÁìÖñ:ªÈa‹!sGŞ†EEkus®H3J8Ù¤…»_šÇ½ıÃ%«Ø{"º]U¡uÆ(®Ìo¯iïQA
æO›©×½À:w:\!
m@éTgƒÏœ.×úKÎksO¡£›êzY†ŸLÚ+	¯·ºËóóğ´Â9bÎ@£Uqšpú0úJ­¼jµ"de¨ÈÈhƒcĞİÎ~–a$…9ä¶S#»©MN÷vwÀ±V3Sõ’–zf¿]R7§Öü"2tŠÖ‘ë­Øm†ãšªh®ÕÀL‹Sà$ï®])|ã¤m™•è¹õ×Ÿ)ÔèQm1 ê‹jÊ´1ÔÏLÓàM¦`4`0ş‘ºd9‘ó-RJlÓ)9·LFÕ-ÆÄDîÄ¸Ö,É“‚Ön4ìDÍâÛnS–³±~ÄQÖco~,V™~J»@S¤u5íøÍ$#äó˜”íÙn´kËv~¤TOPÙD”(Ä¦“uÉ¬_êÚO;Ìğ¬Ü´goDãªLÌŞÔvÜ9ße)¶ª¿#a:8S›8ûä­ p
5)ûpšÄÙ~I´>ı`Ôv®	3lª*¿_x¥ê£Ëÿû÷Ô¤ïó|ÕtsµƒÖYˆVS´Cš+ûN6ÆºÄ—w ¬59d‚ôœ€*UX¥# lXĞUNŸªbÄ3àÙNgûŒo¥óå	Oú^š^cê+û1âMóUÁˆv£ˆ¦¸r¸¾N‘ç^H{ÿdKl6 ÚšÄIíêMÎcÈß ÙxôoÅ^ÂÍİ•¿É£¦-aä”^°ƒüüú;W.^Ÿ`CïÆãEÊX7QX-ãQĞ`ºÁ›3ÒAĞPüúÚ`'VGÎ¦†—Á|Z¾+¬œ{¦¹iîš.ÖÜ›b!òCˆÉNQ„Ò~«çI/9)#(Ÿ Ñ‡îB¿ö`ŸŸıwb°ÍÕ‘éíÁmäH6d 8ŒØ|%Ò{ï‰Ğõ	ã"ª÷Kà(óTQ<u¬°{¥Ÿ/JúÅJnRúU–LÒ4­şçCúo³İOÚ×sÚßÁÍ{pt) °%.4²d.€e
3dì!2Ÿ„ÔdÍ­DòQl){½‚!ÆˆĞáı“ğE›Sça:Ÿ`k\i…Ğòhú·t6pì#éo±ë³ô‘ò`şä¶6/§Ûã8-,v‰Nóåb5sˆu"kßˆù –i†EØï4+²ºÿ[V‰0hkp·ZÂ3±#şá™ôi1¾TSŞ’.³’Üº°’ÊÓTBî£lxZØÇdKAk K“iûğÔ Â(…~Üü¿Ş#È›4TeTÎBØ”\D¼â(p¤sØ8`À™4ÒŸ”n1Õâê(ŞÚ¹æï×à(ÏC~}.Â–ÌÊ,R÷¹ØEÆôùF`S­Ä9²VJOßÏb:,¿õÏˆLEÊ¿èÜK«öúêaÃ 	U÷¼ß£Z”Dn†)t¹!#¦ã1×´€†vCbµñîuéìyĞxU{l¡DTj^‹cıç€—Ó*|ï•Æ­í:˜)9«LªmT)æQ‹£ãì˜
7êY7 ­QüèTPã‡2µ¸Ñwğ–5Œ³¸Ö%/wşğ×"ÃÊBWúğ6§ç;ü_ŸcÈDÔ?s(m	0|åø§x‰$°¸¼<ç¯gí0T~İIX6ÉúO2vùãµhv@;†ê\	ÖúùïÀˆ#½Cáˆß“¨h²ç£wÕJV>Kÿ<‘‡^µ¼Í«ƒ© 2pÄ$¾´>ºëI‡$/ÀGÖnØ®®"ŸÑ%Ü5n.İl¤¤eÀ‹P»Fí/`sÈ:±EîRZ`RìÌUş×Õp
!°0Q:¤Ï[ò_÷Z­¾–Y5"óßûjü›ô89uÖgm,Öm¼ ÃkF/Ÿ­ó +ok–Ì}d>×¶×•w¹}”ÍêÍ‡rUHÖP.`‡!äÌÈ^`–_/lß? GA•RP]N;÷#ù
i²‡a;¨§hÎ~ö¯í(DúŞÃ+XcÎöã´&^¤¬7êÓ	MÏHGîn9b	U…g. D«c‡Ö-FkûÚâ(q¿íue>WŠéÎèò"¥à	üÖ‹QŞ¹lŸ(ÃœÚÏ¾µ„^+Y4®"•õ™/²ó¡ …HGòB9®ûN0G :“vp¸†c ª$„|?€šU/ËcÄf¿J‰ ï[-óZèİëÙ£%p´¾‡e÷‚D/ÿæn3‹½3©§€‹mDšÇöeR¡¿P4´’ÛOÁrhÏİ»–v—ËN±†Õl…Ã¡g¼—Ú˜¥èD;ş«ÜZÌ#=…‚ñj´°ø''ş_ ‡¶¢ZÆ©r&Â³#tÊó®×­'håúS”8©ÆèvÌ [ğÍæŞ§ĞrøB ¼›ñl²ô™Ûô,²yêÏï·Í:5§l³w*ÛĞPò Šá¶L
T–1R``/ÈÖò4ŠR®¿}Šù$ŒƒCz\‡°ÖÑº˜kÃ@ÿŸ‰û^tY¸°¨Ğ> K±V‹MµãÄı§NÕA·ÑHèÿŸNÕ\#'vøã´]Ãã _üíÏ×â›¶|Jœí'Mp}Ë³˜†ötyô·‰ÓÑ´¢œW-ü3Ä0nYĞìL·u¦éª´u£Z¶-(\˜·Ö{qôËmbuÁ«\Îj+÷…úÑƒÓ‰¨ÅS@å!ËÊ¾Š¡%Üõ)µnÉéèM©_hG´KO \¯]Gšü7¹¤B½Q0€’•È¬q®JHÁÉJÛ.D?+_Û9Ì‡ÙhºĞ=ú×.P–~™ŸĞnZBmñ¦×DİÍMÄd”ù:2)+‡µ¡rV“ª'¢çä?’æÑ~õ*Ba¥:‡{Ì|óIùO}<åi*ã	ƒíõ6ù
ÈgkY•M¬çL÷zŠ„Ì2˜vv`†P";§VqŠ£º‹Ë06Áœ‹üy=è– ƒ§Š—º`÷îÊU¤§åyv¼Åºù¿½ÒÊØê‚yqÒ<o]/L¶w‡ªÕH:ÅË]ğ}Ï
2kÔl¤”Yäf„°ş+
¬&GÕA}ÚŞ©9ÃÑPXÒ5Â³ÁYÂ'N—2Áºbô×h8‹Ô3†Œy²!à-v“ï)2=H0Ó3ŞÀ Ò =úâñk”àzâğ.é´G®Ûp)\˜L.,îHÄûŞ¼•T)•tw‘lZÖcºtÛ.]\’éÔĞñ´ ÷rŸ¦¬>ÀAÙ·›è×BãŒ‡A	Ÿ{¼=¿"?.Ñ,éo¥Â§ûbZ]‹Êzm ÄJi'rE[»‹—ºøBëğÖó/ÔÖàn‡¡¨šmÊ:ÇVÿöÊ¨ÙH>ùté’åTß‹EĞ¼:‹×%Wlú?SWB.mEL¡5ÿÛ®€°$²ú°÷6/¹†<ë1)1„(xÿ'Ôz l]7r3‚¨Ï¶dïfÌØÑ4Ğ@-RoXbÄ×ÛèÆÿàjı(vá„ºW8ÑX˜Ä\cCVõÙZ÷3å4â"SV¡f(\uş·‹0”˜Ùº»ëeô:òÜPr©’øÍJJA¤×!<_&ğıçuDP@¡VãÁÌÌÚüÉâ´Úã[ÆµåMK¤+IM%P7ëòhzŸùu@˜[Ég/3˜„}Ô>é)§/!Òxq-„Êè! $Š¹W­CÑ2äIÚ °2ù#1§wÆZŞ^=8Ø—óüxK“lhşÜûšÔ•¡ÅRnlã?gJë.oV\5O-cxTbŠ8òNâ×½‡ÂˆiI…²frıâ&Â«x¶pLı{Ëšy7^*rdß(ı
Ôû4P“ÛşcC[N•ûäG·$»P=Å6e'„zwÑ,HK'N+áéŸ„n1¿Y6¢Î‘cFè¸M‡‡,ØJÊŸdıø¤WŠX§ZO¤gÒ$A`]¸7¡¢5ñ7¾a)™ùs™Šv^fz,èèùaˆ&<•‘³êÂ¹(ZçÏ£°®góùxêûİ¹”„]e•Û}3$±Ş¤‹]˜ºfL˜æ3R‰‰1ÛŒ`¯}dYI&W{)îUş[Ñ0fÙS>0›d¨…}\£Ï¯ZvĞÁâI wÍ¸¡Of@„lAx|Û…×’‡Œõ2Û“‡¹ÚcÉû±E¦š ïÚ?áø3lvE@Èİü¡RzÁ”Aé…¶ø"|INDX( 	 ,J(g            (   ¸  è       	   	                 {¡   	 p `     s¡   	 ş#šúæÔ ØßTÔKšúæÔş#šúæÔ                     b i n a r y _ f u n c . h p p v¡   	 p \     s¡   	 ÜÕ™úæÔ ØßTÔÜÕ™úæÔÜÕ™úæÔ 0      ï.              b i n a r y _ o p . h p p   
 v¡   	 p Z     s¡   	 ÜÕ™úæÔ ØßTÔÜÕ™úæÔÜÕ™úæÔ 0      ï.              B I N A R Y ~ 1 . H P P    
 {¡   	 p Z     s¡   	 ş#šúæÔ ØßTÔKšúæÔş#šúæÔ                     B I N A R Y ~ 2 . H P P     w¡   	 h T     s¡   	 ÜÕ™úæÔ ØßTÔÜÕ™úæÔÜÕ™úæÔ 0      Ğ*              	c o l o r . h p p . h y¡   	 h T     s¡   	 íü™úæÔ ØßTÔş#šúæÔíü™úæÔ       “              	d e r i v . h p p . h u¡   
 h R     s¡   	 Ì®™úæÔ ØßTÔÌ®™úæÔÌ®™úæÔ       ›              e x p r . h p p n . h x¡   	 € j     s¡   	 íü™úæÔ ØßTÔíü™úæÔíü™úæÔ        ğ              p e r _ e l e m e n t _ f u n c . h p p Z     x¡   	 p Z     s¡   	 íü™úæÔ ØßTÔíü™úæÔíü™úæÔ        ğ             P E R _ E L ~ 1 . H P P p     t¡   
 p \     s¡   	 Ì®™úæÔ ØßTÔÌ®™úæÔÌ®™úæÔ                      r e d u c t i o n . h p p     t¡   
 p Z     s¡   	 Ì®™úæÔ ØßTÔÌ®™úæÔÌ®™úæÔ                      R E D U C T ~ 1 . H P P       }¡   	 p ^     s¡   	 KšúæÔ ØßTÔršúæÔKšúæÔ       @              u n a r y _ f u n c . h p p   z¡   	 p Z     s¡   	 ş#šúæÔ ØßTÔş#šúæÔş#šúæÔ       
              u n a r y _ o p . h p p       }¡   	 p Z     s¡    KšúæÔ ØßTÔršúæÔKšúæÔ       @              U N A R Y _ ~ 1 . H P P       |¡   	 h X     s¡   	 KšúæÔ ØßTÔKšúæÔKšúæÔ                      w a r p i n g . h p p                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_PER_ELEMENT_FUNC_HPP
#define OPENCV_CUDEV_EXPR_PER_ELEMENT_FUNC_HPP

#include "../common.hpp"
#include "../util/type_traits.hpp"
#include "../ptr2d/traits.hpp"
#include "../ptr2d/transform.hpp"
#include "../ptr2d/lut.hpp"
#include "../functional/functional.hpp"
#include "expr.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// min/max

template <class SrcPtr1, class SrcPtr2>
__host__ Expr<BinaryTransformPtrSz<typename PtrTraits<SrcPtr1>::ptr_type, typename PtrTraits<SrcPtr2>::ptr_type, minimum<typename LargerType<typename PtrTraits<SrcPtr1>::value_type, typename PtrTraits<SrcPtr2>::value_type>::type> > >
min_(const SrcPtr1& src1, const SrcPtr2& src2)
{
    return makeExpr(transformPtr(src1, src2, minimum<typename LargerType<typename PtrTraits<SrcPtr1>::value_type, typename PtrTraits<SrcPtr2>::value_type>::type>()));
}

template <class SrcPtr1, class SrcPtr2>
__host__ Expr<BinaryTransformPtrSz<typename PtrTraits<SrcPtr1>::ptr_type, typename PtrTraits<SrcPtr2>::ptr_type, maximum<typename LargerType<typename PtrTraits<SrcPtr1>::value_type, typename PtrTraits<SrcPtr2>::value_type>::type> > >
max_(const SrcPtr1& src1, const SrcPtr2& src2)
{
    return makeExpr(transformPtr(src1, src2, maximum<typename LargerType<typename PtrTraits<SrcPtr1>::value_type, typename PtrTraits<SrcPtr2>::value_type>::type>()));
}

// threshold

template <class SrcPtr>
__host__ Expr<UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, ThreshBinaryFunc<typename PtrTraits<SrcPtr>::value_type> > >
threshBinary_(const SrcPtr& src, typename PtrTraits<SrcPtr>::value_type thresh, typename PtrTraits<SrcPtr>::value_type maxVal)
{
    return makeExpr(transformPtr(src, thresh_binary_func(thresh, maxVal)));
}

template <class SrcPtr>
__host__ Expr<UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, ThreshBinaryInvFunc<typename PtrTraits<SrcPtr>::value_type> > >
threshBinaryInv_(const SrcPtr& src, typename PtrTraits<SrcPtr>::value_type thresh, typename PtrTraits<SrcPtr>::value_type maxVal)
{
    return makeExpr(transformPtr(src, thresh_binary_inv_func(thresh, maxVal)));
}

template <class SrcPtr>
__host__ Expr<UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, ThreshTruncFunc<typename PtrTraits<SrcPtr>::value_type> > >
threshTrunc_(const SrcPtr& src, typename PtrTraits<SrcPtr>::value_type thresh)
{
    return makeExpr(transformPtr(src, thresh_trunc_func(thresh)));
}

template <class SrcPtr>
__host__ Expr<UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, ThreshToZeroFunc<typename PtrTraits<SrcPtr>::value_type> > >
threshToZero_(const SrcPtr& src, typename PtrTraits<SrcPtr>::value_type thresh)
{
    return makeExpr(transformPtr(src, thresh_to_zero_func(thresh)));
}

template <class SrcPtr>
__host__ Expr<UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, ThreshToZeroInvFunc<typename PtrTraits<SrcPtr>::value_type> > >
threshToZeroInv_(const SrcPtr& src, typename PtrTraits<SrcPtr>::value_type thresh)
{
    return makeExpr(transformPtr(src, thresh_to_zero_inv_func(thresh)));
}

// cvt

template <typename D, class SrcPtr>
__host__ Expr<UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, saturate_cast_func<typename PtrTraits<SrcPtr>::value_type, D> > >
cvt_(const SrcPtr& src)
{
    return makeExpr(transformPtr(src, saturate_cast_func<typename PtrTraits<SrcPtr>::value_type, D>()));
}

// lut

template <class SrcPtr, class TablePtr>
__host__ Expr<LutPtrSz<typename PtrTraits<SrcPtr>::ptr_type, typename PtrTraits<TablePtr>::ptr_type> >
lut_(const SrcPtr& src, const TablePtr& tbl)
{
    return makeExpr(lutPtr(src, tbl));
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ªŸ"ş­_šÄãõ;ÆB¦UŠXéø­ö¦›·p¡ÿi½ŸšVö9Ûgp3ì«èq#­F£š°Òï™Ú¹m¡ìå6m´Ë9¦q%¡îı®qêæ1Õ®T’Ÿ+RL¬w!¤`¯Ğ)ÄÄÛàû	İM‰á¸*â¬ÏD<QuKG~¼àÄ¸.ëñ,™MĞášzÎô&zS¨ÀFëY,övå©ê±<<¥Ó÷|í¤‡÷Æ9Ã%&û›“˜É>÷T¶Äºi}é|¿%¡a³Š¤’‘}L6Ó1¶™e àğTø_ıBSñÇ&ÍÑ»¯ü2
ÂEÑ*Ÿ`Ğ¢sšøÆÚV¢B60ÍH­qëÂœ¼-w
ŠLíJ¤³[šHt+ÆâŠôL}‡T°öJÂªŠ/=j/Ç¥Â_T•[;;[m7v½§äÊ½¹]B€\Ç,ƒa³ä¸²ÒƒE÷pü2=S¥X”EháPä|”o~bÆ¦”®@şõ4Ò)²M¯Ğé¦˜0eªMôl?7Ûl
¥æÃ*–TMÁ+6×cWÚy¸‚2úöSTû*g¯eÀhvÔJˆå…a8J2©Ód+ÕeïôJ¼‡&ùÒ©?LNMMM°ÚŒUÛ¶Dú8¸jƒ¡-X­œúğ|3'$knp\¶
sÇ‘#Ö? ÿƒ\{ÿº«"…eåX…‚Çj¨œ·ÕNã&5ò'ï¾+•œ=3?§Mh~{Ì¨›ƒHò¬¦\Sº”&«9Ïö½X}KÙHEÁùË’È<O[ğîzĞkj´ 
³ŞGH:®câ…›
b€ì¿:«ŠvU(Ì÷­æaà&zäµ‰­—bü]é«:ØÈU¸[)m„’í®Qãja—{`3[Ö×ËG÷x<ñyåí-Ò·û³ù•Ø¿ÿšœÿ•«öèë*¢¬5p(µûü‘?m8›¹êô=˜òxÓN¼òÚÅ­h°&ˆímh}‚õåÇğØ]¶²=YÅ÷X`u±ƒom(ã§[ù+äèĞo)ØıØo"ìmpTº¸Õé-‡[ÍòË4³ŞéoHLô«ÀmÛiºL =ˆ†EËOÎ;Æ<¤NaºbN­òJ%F d{[ôêĞUûŠ=Gep‰"Œ÷JPÃ=bØ÷ï—ğµœş–®ä1i‡6|ÚO­ât6‰¾¹—ïÍàƒ69ê—yêæ-Ó /BÙ¢†.†˜€A¾Í¹Ø_º¼ÖAÉÓİ¤•ıöfŸ0º1=%â„¿£†×&ü$ã½øš¬¤²+†ë¢è¾šïÜí‰€ı›«?úwÀ9-\‹g[O®çZÍøy¼@ò­·“÷Âğˆõ@;Õÿ›9òÃ*áeoü°Y+Mİöo "iµ¤ÕÍA©0ÅløârUõd(í ~’Šæ2æİ=BA0Ê‰È©y¼¬|@a©°Û;êúF?N…£Çd¹‘
¸œÖ„¹¬"şõp.y¿HÜyuÍÇ¯FS¬íõ¦QòZAÊ~ë®şõqÑÃì+qšÒ Ùézv$<ü¿*ñz|¹ ³Œ[Ô÷ÓÙ'µùöà.i\šè¼Z§ôsÓ¤`
/E´µØ0Şæ×›ş Û«ñ¾— mõsß®~Ç¢è
ªIâ
Qmäòi[˜§6j.ri«d”~¶a}v–/+ÎÈ¡v†Çºül†f9%‹úQ¤Îêe2²Á€Âå3‘/Ä¹mV˜ÈoƒQR¤-y‚ÅM¡cª#î«È¯ß”~>ÇP¦lhO•dĞRµYFd³9÷ëùs1ØÖQb"áÛ(¢F÷}±0@L…gÆU§wçlNÃ>p:dæ-OÂî¶OGM*úÁlÒüís¶˜Ïe]´İ»oÖ˜˜ßÃŠÄ&ë—›gZçìi&nÁÖYé€QÈõ1†öşMÚ¤)u ı&™EyDœ÷×N{¤6ˆ”;ÇÆ,T(iÉæKÃazàÄI“·Ç|."@W#zµ"#m÷Ac¹Çââ]Io·®‡!ùJ<”¨Múúøo‚7l?NR
6©ïÁH£ Õ*|%<ÙŞŒJ¹ê¤ùƒ¸ˆ¤ÖÑöŞ;À½òŠJ•‚e8Ï$ü/ÈÈ›‘D®1hA^Ò^¦­hÎj³¿ó{ùÍ…×äÍ4VOP·‰\Š^BÁ{òÄñ­TÖ © Óh:“£¼ízâùÜKt+Ø?}¡|†OŸ—¡ÏQCaÄ'‚0_OKüåï”M7%0È*fnÒ*$²×½îšA8ÄTâƒ °Ï²IÅs&×ò­ŸŞ¹‹ïsê*_‹ÈÛ€X[ĞÉ¢Ì{,Img	r rƒÄØ·ók WÿwQ[‚†fätØ~‚‰›1h{5¾¡Îı’¥‡QHÈù—ÜfÀ{¿hÔğÌ®W’r­9£	ÔS Å>ØLZê®M­Y5kägğ³Hd¶¶ö¾¦So.…íÜ[?¿µbÇ´kÂ²ÜiZÈ£§Ä~/ß‰	Ò'ßŸ,£…&ÊÇg?iMëƒYH?+@ä/À»9MÆé™4~øÆ6¥Ò8koTä›†ú¢ŒX‘E¬n×¾ë	ºf¬å-ôi°šŒĞ°rSá]†Íı³øéÔE}°’t\‘“0âyªf|Ä6ì¡´4…›Úìz*?ü•ÆíÓ7 )ğÇõœÒ>ãU·Å1’Ã²‰%=ôN¸4³gú°Çñ´×»ıy.ïs’9Mh#‚•Ij]syK´K1Â]E	u^›ÂÜ~šy‘Â[•_­ÉQİÃÒö¦™õm‘£?AEâŸë/–ˆ¼/|štF´£Zxâ†•Êc¿ •5]"D““€Áƒ>Mh[â½â…‡*îjP¸šIu¾!t€^gø?DõÈñ%NÍ›nAxÛè©·**³» ³ß`û%i%ui†Èüœnõ³5høÜGÅíÓşéiìÚ¯çÁ ‘b7C“¢'TszÆG`qhyì^P”sÉAhbbÑšÿº¯ÌäÜ ÀŒø¦× }´ı§/ÏvgÁß÷œ~dÚ‰ÆXé9ä²±"	ÑøAj3–ëÃ†cÆîr_ ÚòîE!-¯âúÒR…t„ğzÕ±Tëøoğ)÷¥4mÇÒÊÄdavø¯• ØÔî€ÜÙ1*-?E=Dòò/Äú ëÚ=Aõ}—„Ô­IïjW±hfo„oèo µĞ7¾‡#ìœS!TT	­%·%¢†µ4[hPıœ§ÖŞ˜Fı˜G@ÆÆ‰ªG”ßqÓ¢¨¤Q¼šì™Øjä)O˜µ8¡±ÃÏ™t“í¦èQ}ô§ñ]§M‹¥ Vı2®L¸}½4¶G “wãÌ¦Äˆ ;ÜùÿæfæR‡UÒ6ôJI¦×ŸºÚ#h°Jô!¨ÛÂI-ƒˆSİsiàã†õíD"Ÿs%<lêüé»8rÏYq¿±è™é.B¬5ÏZa3) “ÏÕµcq¡°‚[†m5‚Y£!İ!eëûéĞt'<ßŠ«¦§ïx»/ÕyG¬N}$UØmóI%µBı×’glÒ’$Ù–iº¯!™?W¤ÂhE²7¸¹ÊƒËûÊENA3ìªtğóÔÎ¤àªâı= ôå¸|†’ƒ8 È5ÜX°híSVm’Åˆ	óK\Ïf*¼'z‚‰‘££Ô €ÂäëàÛ†“tÛÎ=™(eˆ¸ôdtá=d¸Éb÷‰šÂg•6Ğáî˜r¦İ·8>MŠâšEªÉÒ,iN¦Úûfóñ»GÎÂäB#¯¨ÌÓ•¢¼}‘¼Õ½à«AíIÂu$~G}Æ*LaóÑ'¢|RWfp2š¾ı˜ÙÄ»½ïn_mÀ‹öæ‚~§ØtK|–*'…¿»iÂ{T²7Y´aäÒÏØÅØ®n?õúí^mf¾Â£ÍÁ˜™Õ#4ög¦f7§¼X€MŸOB4GàâùßÎ¢·#Ó-Õ7qO^"ß–1„jºV5æ@:â7sîÀ2mû€2¢Ì‰ìo/Õ@Ìl¡S©ü[0Â²a[8.º¤=— ;móhÅ¦ôğyĞÛJÜB±Bö¤j1›sa/è·[¼MmJ;­‘PÏõÖ ã6ßñ¦½¯"F®±wåÃÙ?ë~–¦&ÛGr'ú6¯{†M²[x¨xy–“ÇZ¹MÜ2p'ò_q §‘¿ãKŠŸ«q²©	³‹ÜKcW`_”´1ĞÖÔNàgR¾2‚ú.{?ÑíœµiÜš	FHjW]µQl÷AÌ‹jª­ü¤o'ÔÜ&¡a,¨škb×ğC—¸eOİ#íG³ZKÆ°F-(¾¦G(s)iœˆwééí#P27æõQušx		4—>+Ã7dl"_ßì­•i€.r}¾©ôÃ»ÈìhXG~³Â;éaxoÃlÖf' ¤bxJ™ïÖ÷ó%0R“;¡»ÿÖWÔ†ƒ@5âô0Ô¨dÙŸ8tŞX¡IkúÿlhiíÓgì$od9fŒ
¦À´í(Ú±ê?FÌt^ÄÀ¤$ãK}Ç®L*Sš¢Ôø@VÖÏÈâ=<
v7ßXóZ”é ğìœ«WÙOjß`¥šû(â6ê"O;ü9i9cÃËBŸarÃÿ-Ìp×dh¼vQnŒZ7{“`“xc :ÁøÃŞXîqˆå»{Ãât­: }öôh»‘”(|ànv£õÉ3¾‰Ğ*¾ºÖ48ù‹ÄœT½T¤:Rê­¢C™³ü ‡ëŠ¢µAı\†ÿ¸ì#…ˆû-¬qI+rÀmWkz
ú6ª0&íø<xr1TTBf&!ı…,èVı¤}º­~ñKğ±®ÇI÷ë©§Ó Ú!!w“âì2fıÁù}hO62BĞ1üÊ+&áÿÃ7g]).PğÖ#œ«èï¦Ş!ÇoˆKW4²Wu|B¢b—w§‡ü¬lÉõoùÓ#IH*r…ÖwÍ×CÉ¢gIüI0Ê8$ê×¼U¼ø>:}2ğsfYŠ#´ÀÛ‡‘µßh¢â°Ú<ß˜ÅöİİªN…ä¿ß<>äv.¡qZÉ¢„bÙ+¬öÁD%/m4ŸYŒ“êO¶1àN/û6|^ğ§ôf!” Êˆ+vã§t_Î^·0A¸æÔÑ	aœ£r)w´D-o¥ïÇßF¼?šóB²®ö¾ƒaÙËz8u)oV¢pÌ$ØÆS(†ø ¥@¾ÊäÙBùÎz= S€|‚ÜoÖ…ú¥÷Ê‘Eˆ¬sZ|–…T òJ¹”>è0·Û:[@Q`U@(ËGX ~.éE•K6\èáUP–ùûQÆ"Ú¥–k*İãÀÇ7jºîõ,`2»@´İ£ri”>¾;†ëÃE\:uÁbeÏF2}qxIm†ÎGÑâM_<ŠÅıĞTÛ¶ş•‡‡†,Li@Z¤êû	­»Ìám8FÄCıöL±4/ÇÎ²Ë!:æ&¤6¾6-­LßCJJ«CÒqq–çó6ËCgYYm‡Œ`×ıB›Â–Båı‘Lü1# ı¶ÕIŸ^à£>…Jş2”Be;PK™“wIØnmˆ\P‘ÅMaÅR‘ÌDõ<´ªST8Ê&ySß9a/Ló5Ä3±r·2.~º‡°*áá)eî(n³›ìdÛ²Rë±'âÇ,­¹á1³ş3%‚†pŒSÔ3¸9
Ğ|¾5w¨u¹®˜ü©Øh +IYU]…bSÄÁÜ1Îñºô·Xp¦¼*×'šC5™"şÏ$­ŸJæÕBTzóÊI<QºÅ³¹5ü§ÉôQÉ¹G Qï8Í‡jŠ(4H?i5,=—KÄø$#_Ÿæøäû@±3iæÇYxüú@Z%Û5îqßLÖ–&á<¨}E”Ej/Ë@÷0‚	±½t¦êÑ”´³X†
şF‡*rÊ5eÌ¬§¥¢"Z fåíƒS{ğÖõ$YµÅëÓœÎ&Aş¹Iˆ}#ij>RÖ¯W#tÿè-|šújä(vòÃàø 	a¡ö„Ü+Ò®YÓINO=‘Ûw>}Æ®F|hßÿÕÊTqâq3LQºì7³ëÀæ¾ĞWÊz¥Ã)È¿½”>ıLßE)ò‚é ‡"(!òê¬òşÎı§×id"à-“?B.2ÉqNºêñÿn£z¢ñn7ãÁâÖËšpö’]“ûËfrµÄÖëì›x<ÀØÛ—v÷•°ÂwµŸaé~Ù¹37Œ""ƒ0“‹Ge.-UIÚ†Xäj¨@"ÚÓêÑÈ(HÊ9ÃDX30ïÁ"ıî@Ì{.¤ê;KfĞwç˜`:Ro³¤|—Õ»f1nGãĞƒA°8®è)cŒP‡Š£@ùÍz¡¥={òÃîrŸYŠÌ&•õÛB­È¿doŞµêâ&È/R{·™í%|M;äÏcÔ#İğ]äaÿÅKÄØ¹ÉE	Í³ğåÎ´ú(.ó&…Vl/•Fï¯§U¢¥òùwç¸<Z­Ã¥–L]ĞZ¥%Ô­y–´Œé¸fâÛïÕ®Ÿ¤S‹(ÿÕ‰šìĞµ k ®¼)LÁVÀÚÒÆ'`ŒpÙ:[ê„Â¯ş¦†PNÆpÈxoqïmq~µàfu|Ãõ¸´’è“È	Z¯¼¾e¿ü÷P_jDİTq°ûYë_· µ½Deş“û%NPú;ZæÒ¶``Æ76æ¬„ºâmÇ5BUÍwû"$Qÿæ\d1 x£6â0Ç5 ¥d™æ·b[-ØÁ^ÑèŸ—5˜Å{éàL ¬‚8{ï9Ë2¥xOéëÈ%œQˆ²ÿÿ¶?#<‰}ô™4jêm¾şÖ—ËÄjN£¤İîEığ¼%•2Œ\MV1<œ¦&åA-Ëo\ùX‘Š¸¼ ıı¹ˆìà5ÿóü¨0¢Ó´¬y­¹Ô±àjv™š@˜cò°ı´o]CìØĞÕªÒ¶Jã°’W¹áÆ¿uÕ‹%	^‡Ø%–s7ñpømóÉc¥T#q(•Æìå¸Ğû$×‘&¥°—å2^©©ğš„’ÂL7éùîC1%ŠEFüM÷ô²(†I	Í¯¯É;¦ğ·²å²·B˜C»Uq£ceµÉõÎÁ¬+§	UœuMı-@im?d$(*€k-˜õ&Ï‰fQ¤'£`G)sJŒ&ó—ê!QĞf¶èßP1ÛGkú¤|5°Á«æJ¤Ù#ÎÑ.ç ‰ìˆãy¸²w³$…üâÊëE/cîé÷l.cÜ…Ö·›åev »Ò[àHMy,X…#1µ`@~ÛQ¢©¸3ƒ=ø1S½Ù6­²ÙOcwƒ÷×d!ñé> ş‚eøÒ×1Ø¦‹r%ıS`ñŸhjõ¡“á´6{NXnm‚œ¸> ë¨½¸÷Z«ap:úŒu¨¢8½’£v·+¸”ó´â7kÈ”Ùíà¥ôÙÊõc0,„±Šz“|Äé€Ï(¦è¾ÄoàäJ¿Iû=“ó©C^şuú‡ Ş:gã†Â¿¼òÌºĞİA
¹3#/¤· >‚ ¹l?Á™Ò„ş=;é5qgÎñ„ğ{uÚhæE†’–™á~éàÛ^ÍÃ#iAÜªÀŞ‘3@9,GÍ8DzÚÄ0şÅ §ìz Æ]l"©»Zäá”=>á¤CõyÅtÕ*ñ—X=˜×³^TÎ¿dÈiFçñïœÔ|†!«®²\\{Z‰éÇİ£ÈA &Ó&ÃÍ…ZåĞF]ìá…Ag•\²$æåªŞ& :r…zEŒ”cÓÆ+Æ‚¿+!zäºŸÜ_XY]Õé¢Jsj¼Q¸Ú%×uèˆzàcşGé°¹€u!ùtÏ.éÃü¯ûä-ru;èä¡œ•íé
 =Ô8õ%è[“˜öD $Ÿã.°®rh1š•¨FÆFË6$Îÿ#z«ˆÃ®Q,qxÆÑÈ|'\nŸ¼w•/©ª¹°õÕ,L!]øûœ¡M·RhŸò°jc ‚a¸!TI;=³èÔl›!>]Î{_/SÜbEÕif§;Êû²zqdaŞïbºJ¹ü5š¿‚ùÂø¥Q
ËÆ—èaw0+¦&w¸~¥ÑlÕ¿•Ü?w	g‰ÉOô•YüG9õÑ@£ĞyÒœ#­Ëœ¢¬ubn×‰Ú½Dz©¬ ïr3¬ÊiXot•FˆŒ½=D×9›·Ã<ët#ßy·ÎÒW,1Y <x$v3yb¢Ï(w´ÊÆ PÍ¬”î`8VÆìÖj?m
ôz*íŠâ	teYù\ğ/³Õuêó`Ÿ¼ê´ú=–)&|Ô5Á’Ù]÷`zƒk8‹Æ}É¬‘«.´S6ä`o‘ÚXªÿìgtŒĞdqQ\²Š’§trä34ùØ¥Î¨ÊäÈƒì¸Æ6¢9Oä0ajÂÃÅD‹qùøOCÆE—èJò1„¹Íê2JÌf³%IÀ‰ˆDÅDDdXåİB]0­›ªcuLe2i×OE®œ³»š,øôÅÆƒÈ©:†ôbZ!9…0½R+ád‹.†`§0³²İ'Ñ†øÖ›é’V 6İC'ñ1
¬ÉAÛ†¢ÿ¡q²Á{š$x	ÓiÔÕ1.À½I¿ŠKä Ï‘ı‚ æm:“|©B´Ä:–KÅjíIA2®/!¼‚³ï™İjÀh“t¶…ÕŸ0|×P#"i£èVs	…”N/s^I™ÜşHˆTAû8MùÀc<×>•¿ÜW«@™pª½Ùt×3ó¡X¥”aJ¤ƒNÑ5y&¹ šÌ%ı5’Ó°R^Aˆşp¥ß©æx}à`®šø…ÏßwØaæ`ìé-]xeøœ¶ÊË‘R6¿noáíèÆ€!>“Ãİuíe·ÊŒÃb%tM;UxWQC×OXR,w>Â¥³‚ß\³Ä	@O>`¡>)]¤İ"¢VqÃµÓú#
WœTyæÇS’Ìştêf·è²ÇÍìHÄï¢#d¾KS$K*|ú*LœÆû‘á¤‚ƒÓSˆÙ
û¬(ºià\‹bJ¢N<×øixŒw tp*+n‘Â>Zš•„µµİş]a–oîCEfÍ-†°G6Ur*/ÓÀI¿Ñã+¡AøÑ	åŞ(PS$å°=;tÀÛ
z#?»m0=¤¼ù0eä7óBšÚp3â)X£ûœ¤bÖ7=»;æZ»¸Õì{hÂy¶ÊlmÏ]‡a†qLÖ¶ø±P|u¸FÙL…GãçTPHVddìÒ¸(ÇÓ4ª%ÄBÿŠoß˜/î
}T )Ú°ıÿ4#qÛ©ÕDfCÇœ¦£»u=Ù¦É‡ûGÙFš,ARt´ªL´84S‚½+qƒ*«¨,Œ>¡¹­(¿å Şpd}I±¨Œµšäek•¤×±9B?_éı³ÀİN@)m&óz³õ-+:B¥tfî¨Æâ·?b$Ê«çñ®q+¨]„¤‡¶+o<¦¨¨~KB_³r[c6£¬Ş5T`À¿šÂÎÀN Œ›¸Xr§<ŒÀ÷jz¢$JÔŸQµÓ½6RĞkÓwRÅ)>’ÅkTÃÜ™ã¢/`»"ìŞ‘·tÅ.AäîU;A$àys&©Pyš,ôA%<zñeG,ÂùÔ
F5ñÓ»ş^ó`Õ;;UMÇİıHGY"®ıh7©µøYedÃá8rû:rÙëPÃ˜XšÏ#])á¡¾¦ù~^Â]Pî¡ŸBÓµš9i§¡úSê5QˆXıAubx'vİfV+.š#Vø÷<ê¿q™Ÿ˜,§è2S3öLŸÌàÏu‰yÀ.g\É:GàÛS/QW ’½¶jİî[E7‘JºøäÀƒ6zıDÁöcBú7=Ò&ı>§@,°4k¤?eşÿÏ*‚"D²*@IU8[mÈf[È•ÿ×2àD1¤ÑÏ¢tyè¼µ«Aù.…ëâÓ½Ü mæ`ôzr´!·Ôêè¡zSyœÙøÀhåøVùòÕylòÙ¯Ç Î¦>jhüÃQG_^§àÂ@SUKS9 D‹K`¹eŒg/éy.’^3+ êL8`Àørßgu@<Ø<2‘÷ê(í·(5	¨Ş‡ÄYŞ±û¥)óm‚±Ë8TVÕ?MRb¸üµJ2™ŠË—ëú•6hYTvÅÁ;Æv—uÎk¹Œ ˆJêw¨G‹
e¿q(*`›lá@®£dêëÈ8yÒvÉqI>I<ˆÇ¶(ê~›%%]¤”…âRYx`ó¢RoKë	¹}ıp%_w$µÔúÖ=şº)¡«¤fˆ.ÙLÚ<'îKÔMQÅĞéûñ5ŒãkjÇ?gëiËšúK©ÓN£¹ër¯Û÷¼-C R‹L+øAëMÂÃ*fL)Ş“*«YÛ˜Ff¾m^v±$<Ì¦Ä†öe“s.QKŸi!ëI© +sÚ÷µ÷HÜUn†ÿ3*G—Ï40¸øC*¬€Ù3¦<ySKb»¢_NS\µ‰Ôğÿ‘±ñvëøœW|¦)r–÷ÃçŠXxpÇá‰¯f½C
k f]­/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_DERIV_HPP
#define OPENCV_CUDEV_EXPR_DERIV_HPP

#include "../common.hpp"
#include "../ptr2d/traits.hpp"
#include "../ptr2d/deriv.hpp"
#include "expr.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// derivX

template <class SrcPtr>
__host__ Expr<DerivXPtrSz<typename PtrTraits<SrcPtr>::ptr_type> >
derivX_(const SrcPtr& src)
{
    return makeExpr(derivXPtr(src));
}

// derivY

template <class SrcPtr>
__host__ Expr<DerivYPtrSz<typename PtrTraits<SrcPtr>::ptr_type> >
derivY_(const SrcPtr& src)
{
    return makeExpr(derivYPtr(src));
}

// sobelX

template <class SrcPtr>
__host__ Expr<SobelXPtrSz<typename PtrTraits<SrcPtr>::ptr_type> >
sobelX_(const SrcPtr& src)
{
    return makeExpr(sobelXPtr(src));
}

// sobelY

template <class SrcPtr>
__host__ Expr<SobelYPtrSz<typename PtrTraits<SrcPtr>::ptr_type> >
sobelY_(const SrcPtr& src)
{
    return makeExpr(sobelYPtr(src));
}

// scharrX

template <class SrcPtr>
__host__ Expr<ScharrXPtrSz<typename PtrTraits<SrcPtr>::ptr_type> >
scharrX_(const SrcPtr& src)
{
    return makeExpr(scharrXPtr(src));
}

// scharrY

template <class SrcPtr>
__host__ Expr<ScharrYPtrSz<typename PtrTraits<SrcPtr>::ptr_type> >
scharrY_(const SrcPtr& src)
{
    return makeExpr(scharrYPtr(src));
}

// laplacian

template <int ksize, class SrcPtr>
__host__ Expr<LaplacianPtrSz<ksize, typename PtrTraits<SrcPtr>::ptr_type> >
laplacian_(const SrcPtr& src)
{
    return makeExpr(laplacianPtr<ksize>(src));
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                             /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_UNARY_OP_HPP
#define OPENCV_CUDEV_EXPR_UNARY_OP_HPP

#include "../common.hpp"
#include "../ptr2d/traits.hpp"
#include "../ptr2d/transform.hpp"
#include "../ptr2d/gpumat.hpp"
#include "../ptr2d/texture.hpp"
#include "../ptr2d/glob.hpp"
#include "../functional/functional.hpp"
#include "expr.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

#define CV_CUDEV_EXPR_UNOP_INST(op, functor) \
    template <typename T> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<GpuMat_<T> >::ptr_type, functor<T> > > \
    operator op(const GpuMat_<T>& src) \
    { \
        return makeExpr(transformPtr(src, functor<T>())); \
    } \
    template <typename T> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<GlobPtrSz<T> >::ptr_type, functor<T> > > \
    operator op(const GlobPtrSz<T>& src) \
    { \
        return makeExpr(transformPtr(src, functor<T>())); \
    } \
    template <typename T> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<Texture<T> >::ptr_type, functor<T> > > \
    operator op(const Texture<T>& src) \
    { \
        return makeExpr(transformPtr(src, functor<T>())); \
    } \
    template <class Body> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<Body>::ptr_type, functor<typename Body::value_type> > > \
    operator op(const Expr<Body>& src) \
    { \
        return makeExpr(transformPtr(src.body, functor<typename Body::value_type>())); \
    }

CV_CUDEV_EXPR_UNOP_INST(-, negate)
CV_CUDEV_EXPR_UNOP_INST(!, logical_not)
CV_CUDEV_EXPR_UNOP_INST(~, bit_not)

#undef CV_CUDEV_EXPR_UNOP_INST

//! @}

}}

#endif
                                                                                                                                                                                                                                                      /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_BINARY_FUNC_HPP
#define OPENCV_CUDEV_EXPR_BINARY_FUNC_HPP

#include "../common.hpp"
#include "../util/type_traits.hpp"
#include "../ptr2d/traits.hpp"
#include "../ptr2d/transform.hpp"
#include "../functional/functional.hpp"
#include "expr.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

#define CV_CUDEV_EXPR_BINARY_FUNC(name) \
    template <class SrcPtr1, class SrcPtr2> \
    __host__ Expr<BinaryTransformPtrSz<typename PtrTraits<SrcPtr1>::ptr_type, typename PtrTraits<SrcPtr2>::ptr_type, name ## _func<typename LargerType<typename PtrTraits<SrcPtr1>::value_type, typename PtrTraits<SrcPtr2>::value_type>::type> > > \
    name ## _(const SrcPtr1& src1, const SrcPtr2& src2) \
    { \
        return makeExpr(transformPtr(src1, src2, name ## _func<typename LargerType<typename PtrTraits<SrcPtr1>::value_type, typename PtrTraits<SrcPtr2>::value_type>::type>())); \
    }

CV_CUDEV_EXPR_BINARY_FUNC(hypot)
CV_CUDEV_EXPR_BINARY_FUNC(magnitude)
CV_CUDEV_EXPR_BINARY_FUNC(atan2)
CV_CUDEV_EXPR_BINARY_FUNC(absdiff)

#undef CV_CUDEV_EXPR_BINARY_FUNC

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_WARPING_HPP
#define OPENCV_CUDEV_EXPR_WARPING_HPP

#include "../common.hpp"
#include "../ptr2d/traits.hpp"
#include "../ptr2d/resize.hpp"
#include "../ptr2d/remap.hpp"
#include "../ptr2d/warping.hpp"
#include "../grid/pyramids.hpp"
#include "../grid/transpose.hpp"
#include "expr.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// resize

template <class SrcPtr>
__host__ Expr<ResizePtrSz<typename PtrTraits<SrcPtr>::ptr_type> >
resize_(const SrcPtr& src, float fx, float fy)
{
    return makeExpr(resizePtr(src, fx, fy));
}

// remap

template <class SrcPtr, class MapPtr>
__host__ Expr<RemapPtr1Sz<typename PtrTraits<SrcPtr>::ptr_type, typename PtrTraits<MapPtr>::ptr_type> >
remap_(const SrcPtr& src, const MapPtr& map)
{
    return makeExpr(remapPtr(src, map));
}

template <class SrcPtr, class MapXPtr, class MapYPtr>
__host__ Expr<RemapPtr2Sz<typename PtrTraits<SrcPtr>::ptr_type, typename PtrTraits<MapXPtr>::ptr_type, typename PtrTraits<MapYPtr>::ptr_type> >
remap_(const SrcPtr& src, const MapXPtr& mapx, const MapYPtr& mapy)
{
    return makeExpr(remapPtr(src, mapx, mapy));
}

// warpAffine

template <class SrcPtr>
__host__ Expr<RemapPtr1Sz<typename PtrTraits<SrcPtr>::ptr_type, AffineMapPtr> >
warpAffine_(const SrcPtr& src, Size dstSize, const GpuMat_<float>& warpMat)
{
    return makeExpr(warpAffinePtr(src, dstSize, warpMat));
}

// warpPerspective

template <class SrcPtr>
__host__ Expr<RemapPtr1Sz<typename PtrTraits<SrcPtr>::ptr_type, PerspectiveMapPtr> >
warpPerspective_(const SrcPtr& src, Size dstSize, const GpuMat_<float>& warpMat)
{
    return makeExpr(warpPerspectivePtr(src, dstSize, warpMat));
}

// pyrDown

template <class SrcPtr> struct PyrDownBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridPyrDown(src, dst, stream);
    }
};

template <class SrcPtr>
__host__ Expr<PyrDownBody<SrcPtr> >
pyrDown_(const SrcPtr& src)
{
    PyrDownBody<SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// pyrUp

template <class SrcPtr> struct PyrUpBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridPyrUp(src, dst, stream);
    }
};

template <class SrcPtr>
__host__ Expr<PyrUpBody<SrcPtr> >
pyrUp_(const SrcPtr& src)
{
    PyrUpBody<SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

// transpose

template <class SrcPtr> struct TransposeBody
{
    SrcPtr src;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridTranspose(src, dst, stream);
    }
};

template <class SrcPtr>
__host__ Expr<TransposeBody<SrcPtr> >
transpose_(const SrcPtr& src)
{
    TransposeBody<SrcPtr> body;
    body.src = src;
    return makeExpr(body);
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0-ş}LƒG˜àÖÌ‰uO‘İÚI†Œœ¾[Ã)‹èıÔú_(-×o[ÍñX¢„28ß ôNw"Sy9œwí×”ßÕãGb.’w£sEH­"¸6k.Ó• ó#Õ	YÔàüFN0¯dG7mÏÀO—wô¶·>e«Ö¦KŞdÙ(¸ wÿ>Oúwê½9óĞ©ù®{á†ÜO6Q²Uëº™fsÜË¨@kklÁßæø‚ñ>k¡ğ-Ì~GY/Cck¥h:ëŠ…oÏu{¾í‚`@íÿ:ï¨¨½¶G`{R’9v¬ ¡Á¼r|çyup;y—jù "ŒÛÖ³‘7 ¡#ÙE›c¡Åõƒû¿\p1³17õ
£åa˜•üò1w•Å±KÅÄ&³°¨é•·]˜BqÇğÉş¨
­òåİ§¦7d¬²	µ|.©}@€>•é^>Ş Nwõ¤ÌfÔ¨6P“Ñ5ğÂ;JJ0“ˆûÖÓ_—dÜyÉÕ†ZYæhÅÄG©ÚÅ‡£P˜cß-1ÑŞÊÍh¼¶Ÿ¿#„kÈp8° B{Ô“,{‡ıo®Í-æƒ$'uùAeò§ÊNJÂ{”E¨V<Ê,R£cb€+ï&Š'oôWÃ³
%@‹#kå¥»€éJùåñ•{šyB˜»3»6iåÙ½·^%Ï§’åÜ6á&PHÁol<½€‘§qäÔ…»¶Ü,ñ×–Á&±ø£î<L¹ºt¤ôøm¤‘_œ@Ÿ©ä¹ºB÷PƒM†üH±¬6³ß>¿2¡*ÒVVàŸoÎ@ßj³©fÍşâ”[DŸFæi€ ÜFg3˜m¦©ØM;Ô¯âC€"tkåËIZ²lGî³¿§‡h2†UÙâ†àÜÇ¢?
­oËÈg+^]TÁ[‘@×¢³ØjŠ$-Ğä Pb™æØüÙÃ³at6¦m•3àç \¨d–Fòw˜3VX/A™g“ğ‹;¦À§;ŠÂûWÄã®¶Ô5C[£ô²H¡…¯T''¨vÜ{Újn›"˜mÖù%WA:Û>CòBHÙ -Œ‰0ùä¨ÙèÅ6`ñT]¯ü+H®Â‘òzvÊ¿ˆ°ğ3/%‰¡CMhc)R’v¯Ì”LzŠTÃ‘õ9Ë!U Áµ†ôR»å,=@›ØJhÔaG‹71U:9¿,Ë­QÔîjÃPkã÷Œ±¦§<D¹ïg.«üR)›ä7gY•Úg¥ÙİOÇ™·ôƒ=#f´,¹3›%¸y>ó›œ@ä÷Èfı¢|~|DÏÒéÓ’K¾‡æï°cî]‹Võ>l_l¤H¥ıœ“$õ[ç…ôÑ•\îiQ~¾×yw‰a[$a.Å«2˜'‚ˆõ³Gy˜pıZ¼­™¼±Æ-äĞƒBåhÀ…•A:¼ÛLí‡Øä‹\~üèH¹?¥,=Ş%¦ Îì»é`Õ·Ââ{jP0öù$Øn0Q¾7•Eôë¿°1wéíl[¾¡u{¦¤Í Ù‘G>T))läı;ÃìGk7/÷™gSmÉ³~wçÿucTYÒÒ°¶<ĞC†…!àÇ‡>jŒ†‰ğŠ(Dó•BJn’çw“IRl'pË€¹í$Vüú	êQòp[RøÉjúŞÎfsÑ!³Bò.xÔSìŞ^ì<æY [Ò-†)CÅîÍ>†§“{Õ>±şÖau;áv¢¸˜ÄvÉF>CY„Ğƒ¿¤{´Fà'	k©†_`m/WŞ„¨6:
0Á,ıû(5z¿Ö”n&©¢îâ,;ÛŞæ#ãCRt};Ñë0À°ìvx,Z>êX2
åº]Áh€4•€g!bü¼ŒÍèÜø@sŸĞ‹ C8ã··F­B²;†!rn¢·İ‰÷Q&ü|E“v=…TÌÎÑ:”¼Pnv¡tß1¨§µÙ.qÅR"‡ÿÅÇõëC¼†î_HƒŒz$Œ7iÆ§(+Â†h(âˆá¥]< æHßo²xö°I¹îÉ¸»¤jìo\`³¾"§ ¡<J>´k–h¹W6Tª_$÷moÆú«!MñJAÿæ9¹9°Iùz¾;|.bl$˜„]Åp^”Õéİ¡p,·æşîû· Ô9=yÆmºé%	†§î01ÔüÆó>š™Q¨İè¢­àºã<»rÌd¹g^F -=nÜÜE{§’c£A††òVô>54Ğ·5ÆÓOe(òüºéØü­caÁ*ÉÑ0Öår4©œ)¼/„î¼_íÃ3 oÉwÇKß˜bÅÒÖ¸%gÇ+‚UÓ¸IG6íŞV‘6‡f7È¹­Çütj!Óê¶hà_İä2YŒU’4P1^Xh»ªÍ-ÿªwƒ\à‹PÕLÀ^û(Ÿ¤@‹kIJ!ŠåøÒ9{0
÷
–˜‚öÍí7$M¢fˆ»È|©Ñ
«\9ë/ªÂh`Šæ ¤İé>Ddô4ìh°Ğ,é©›N@@ësâé`û Ù{Ô÷†Û`¡Á<1\v_Â–GÏFğù,Ò²Ñó°0.ÓÙ 5Y¼_Õàpnx¶äÈÓÛ—Î%´v5¶Õ²lkè*9hùç’,Lé'‚Æ°Ş7”Uä‚ÑõíN“Á±…˜×u»dš{cHÀ_>nÂ—½ÈC*ÖyÚ?ŞC¢Ü£„•€1ˆx¤vi wÉ¡(• TìXCĞi#Z¨İ·eÃëkä™°±ÖEƒôb•=•ÂDº8c­œ`EÿÉŞ'DÖ=/3ó™P!I€uÄTJ(Ÿs¹)˜RÈ0!2³ÙMã]?ÜãÑÜÑ:î<æHyy€×©%f‹zêùÈï«ëGWR"[¨³‘ğùğçkå)$€ë`p£×möƒ"å8ß¥â'À—fO1†yd?<Î62šår Û¡f¢M‡Jê)¯½Tìx5I´–n^ˆƒïy¦üFÕÃµ&Åü—#y§xéN¾{ <vKu-å8ÂĞğ›F>rRˆ=·›»ë°µ4µÀ’|O’áÙXN¢P¬?¤ù£Y#hŠQæ>˜)[Ìg~DAUIVÍ×2îZ¨/ó¡doë0U-,*8 7ëu€YbòOBKükiÒ7©µ”Ñe÷¾2ª°ÇB¿ï$£„şÛık‚îP…‹4ÂV³\A
é›×´6) ;[¹¦Î^iú+³zCL€2*œ¸T¬·{k/œ)8“p“çú(½Mziô;qhıcæ¾ÉLòúÒm+X‘¸	S€Vî6cğ_ÏÒdˆHMì­Gtİ†MÇ4í.vğs`A#äÚ–¤À"Õºë>;¡÷p.”ó÷”‡z,4ˆÅ…¨1q@}¥ˆ¥€dh¼ùÑ•ìÂ*!‘QòœñìneZ=MŠÚğd™Cô°	Á,	ZÀöG”04àõ6$Iì(èT\P@j@áåˆ\kNI€„ÙÛ÷–L1]I‚ÆrB0ûÒùçz¸
Í?7ÍË¿ŸkÄ\R·×ÚcjBtåËTNF’İ,M“é)ü·9¢>AB‚XEoŠ~ƒà‘Ç²¾«î‚KB'DÎ/Õ¤IÙğ¢¼Üâk4ê#Œk“T?ŞLœÛĞ>j|Ö+ÍÒî;KÿÂõ
V‡&A‰wTÆ©,ÕÁß_'âoÃsëöC6ÎWªµhÕ˜H>º	«x/Œ)?t`®>ÖŒX_*ei÷l}ØÛÉô3`Ö&äÉMs/ww—cAG°²ZaÅÑ²ÚlµZØè"äJÇ«&öˆŸ
‡K
Ú>|åÁ%!Q¢‘m°×š‹s­ä€­òîË”Ô$ò]ÙÒì¼Í¬‹<rµiy¬Uávªó]û[ÿ,­7­Ó|ä^Ö”{ËÌõñ¸›„Z	Üb(B¾Hæ‘m¬åN“½ğ¢ $Á,?Ğ™üÄDé®™5ßàÀÚç·ÇØ,Wê‡ËÚ¦¤PU™WQ­ßD3!´÷ÆÈQÚ\ÇÖP¶’}NooQVíœ+ıLå-cşu”œ7?$áqÃ“ÌåíyÓ‰Y&dœ¦Şı¦¸egˆ=Ë¤İÇ´‚”«
ô^‰ü]C”ö‡XĞ0Ytµ!4PÑ‹47Ñä¸ÌI]N·¡Yã¯áõô·°aë¾šÔ¹MŠ$á@½/3(WLöøï8]_Û´$ù"ÚNR.ĞLà.ë(~~Äñiš„ôÇ d6mı²½£¡)lÿ.lış›Dıkºv6¶qğµ+–<â/ïÒ$è.¬³-ÙH*:ƒÜÒÆ¬6U"»$$%×e=ğğÓ‡í4rKënøQÃì'îÕ;å…Ùw©Xc#¬wIòÜ‹s^‡~0`ò“ÛÑ	u•Ï«ĞäE‚-lkHNÈN¥¹4üW)r»wæ/+yDZò ªú9Å+œ«İhUXOÚ?h}Ó"§Slù‚Ù3\©0gqøl—"…öôRÍõøÿ¤ùƒ2g½k6!ÁLƒ	öæÅª^½iMÿˆuq÷şÃºî2™O -ôş9ı‚1¢	9ï³õo«ø@T©­QòP1"®o„]‡ş|=›6+Ò¼ùÃ[7ŠÙ†7hQ¤¨øÁ«ïŞ†E"»)ûo¡C½ÁBúCÃ¾W–®„RMì\†âàdûiŞï!³]I5	ÒşÈ°×ôîBß-O
Pœìërµešè¤j&ûºLÕıÚftiKû]~[jÅhjŠ–XHºLÕÙc8ıw÷JÍ¨{5…)¢Wl	¹7§İÕ½¾å"SwZ'rOÔ‰)ÔËÚÈ	#,œfœ°„Áõõ£õ¾á²´éêfOlÏl)<Şò'ºËå’•şNreğà¥Ã³0ÂÆVQI¡Ÿò×¥÷±ª¤Ã7yL‚Íƒù?}#|!Kq2S-÷I˜Qkì ù7p<G}É/Rôs‰q›Ñ«4ÇµE[Üï™ÖØEK[9 »i¥ bÌ¨ú%oƒr`ƒ ÂŸíñ¸1Œƒ:}ñÑÉøÎ~‹§*?tÉª¨÷Ï3rÊd›‡%Ëä-{¬µİcÜ0µ/<+àİ¹½/|çƒDílègÅ#=Ãùağ²Tİı\æ×3ú¼A\ğ©!.vd±7C\KöF/3Ñ|¥[ü"ê~GGÎÏÍŞ74œçè dôñ~AÅµôA²-!×:°©î(lÖH"_),@t¯ª‘àItşğ´N†}ÓJ*øš†|*®eŸˆx¢[Tu[­14ÑíºÊY#3IÍıl€F¼+†FX¤±z>jKü_yvppP!ì3÷Âµ €ÑEğïS	',®ŞLC§2*“Ó|Y¯XdU•’,ûÉd*f§p2¯ğşÅú'™ã=~:Å¢ÒµÌ åæ‰‰l†CÂ¶ °4#xá‘}ÇoûNûtJ¿j¦ÆuÅ[»‰Fæ‚µB<ccTVÉO™ÚEÂˆ«~í“²¦©Ö}•UI2¥-¹ªØØÉ×„uƒSÛÁDVÈ1Í‰5ìÀĞœFU
r†S{K¶lœÀ•½ˆâm(¨é q1Ã¸öÌ¶ ï9€>ò‡ÎsD	@áÚ¬˜§å»™!vgù`Vp6†$5….“ì ¡Ø x¥ˆÇL~+|§™Ê$(©‡e= Z¢½cê@>#Š&ÓdÕ°’º\‹ì[Î²6yØïy[àù-{’ûAá\Ê·-ÜÀ˜’Rù‚gËh‰=‚NL…¬Æ;€B3´iºhÇKŒ½úu¨,ü=_‰TË`·¦wvÌÉ6L»¸¾+É¶uu[í=:õıÿZCE±Iœn1zg«’.Ëå®Z_O.)”O j»ˆ9ÈXãxrB«3Ñşµgïª­`/9™¦öIŞĞ»í_\N"ZëĞûöıJÇögÁØN.™Ówü‘Å%KçNnÊÖ•ATgÁT{]ãèé3mC­f mæ^!õS1Ö:Ó m*|ƒ;vıuWî¥e´¦…Vƒ*Ìy
ôÄyƒ”Ä§¯u+×)r ‰uQ½|	/di#‰òO'†çŒîtj ¸çº?é‹^Ífš‰¯ï®7	°úx-½¤d˜ƒ¬6xü?A–Ó6ôN~ò`Î7‚%1â†ûG´
ª€zh/¦j*¤ÊÕ'÷k"ûwïßDŸÂë¾nÆ§ìb^Ğ²>V>#PÃôºÈ×ÊĞîÔyB˜‘àj±qj¼JÒï÷Í1)æÕ 2È‚2$‚_"efğ]ĞÂ,G¿µìSµçş€œ{¹Ìbà
tOà Öù9¯u¥ş«dÔiêL/½µÒ¼±ß“¨#ëzµÈÁü˜é,9;µú,""ş¸Ãú“3±§Á8ÿªô»j~‹ğBt1º¿’t¿çgÇ/â"ÕéßßEÏ=_.I0`ÎûÏÂvĞb7ç˜NÑÂç|«.äŞtµ³(Â‚ä—*œU”Bˆ‹Ñ]*ŞhùT`be9¾ÃÇ¬Ãé—ÌzYxs¶:ß	z‹E?,n¶A¸{]÷òQa^q«'·®&Õò„L<ZHæĞŞï‘µ+w\õn2+€‰¶Pé€,Øá&‚µÍ¤à™&µ&äÆò&ükÍ]€ÍBG€|

ämó>­®H÷i­»!MıR–³3ËWo
Ì~Á¡¼kÔ›2Mµ2Z|«¾|3¢ñêfâ/fÖßâ×­/q@¶NE^¬¹DMıò]/a¦úñ­Şû’vT‰=Høìğ9:½”ˆª~]ªcè®jÆb’>q³Ç
œj¯ìz8ï‚éÂ/[>K>)}-¡öCªaD7½H9C}qş³Ô”íA%GLı}«Úã)*Š½Qá#I$5{Cms­¹_o?Øúiå€Od˜”º½’} !¢Í=ƒDmAm\Ù½>¹¤ ˜‹öÔßø¡q¦úøXªğ ‘Y‡¦™ïÅKy±Ma_ jÆ:Û¥T€>@Cqb§­Îù ï×WëÒëJ¥rÍ×ğ,éX¹8:ØtB0¦|éL£>®ã¹pÛ4†&í˜¨¶è|Oá 6`Ae”aíö,¦1)e­®/'!Q7«€04-àCSWÂd^•v¥cıè5-íH{Œ„†ûøô[µÙß‡·q2ŞvSŒæ5ãQş|ÚÚ¼Lè%rÍ6ÙAeRü£å±Vàîÿ‹÷ªÚĞ#„™ä;´By+ƒ$]í‰u0ö\„ºty=eÏ¯y ¨J« ¬Éè3ÂDœtùojñÈ'ˆC¸±èìZ„'ü'}lzk!‡äÌÂ-¯ùyÿèÿ®A«‹a}?9å¥¼~ªy‘ÑÎ>¡hœÇÿuX—–Í‹yn	•Ë].µQ[7¾ˆªkí •-05ÂlÓòl7Èjà¥¼YXFî&*.A{@g6Ë×õtŸ­"æJvß´…¬,ÑvBX3rLòKgÎğã=ºn‹G1:`9ø5 ™ºî<qqF±)º.o¥Ã§v±ÿeÿ´Õ¬©#²Éæöåxé‘‘¨ûÍLS}ÂÖ‘[“vc]¶•Ê˜Bl	¯Åı¹+È¾béX]d8ÔQÅÛ÷Ÿª((oB^|?­iX"Äi™Oï3;O2W—=A‹˜|ó7g	•É~·,ò,ê“.ÂP0ÈÃ®œ±õ±ŞR†Éêš³wƒÖd§üí,1,Gv"fóy²†^TŞİÕ,!ãP¾j<t´c¢>š«™°«/Ihö<™-[õğçm‹À¤õ,ÙKı…^ÓmyZÕöC>HAEÎlĞˆ¢pP³¶+uOşˆqú2w†-·ê¡åIG>]€€³ïS¥¬¹ —AH6ÑoëM}€è(…íŞ—ğİ²øZf‹ŸG|©¯òp4!xé±—ùÎ‘İ´ìê4éhæçé¬Chn¥§‹‰“º9—à*+€ tq†ºõIôúŒìÛ®^C0Â8åyİ„¡)([/Aä'±òÉŒB¡B˜P
È1›vÊúDS“:â‘<^ßt«ëmUû«Šo“q¢k`¼=`÷™ eŠ«ÇtÆÄèo*©jO8Ejw“b9Î¡–Ö…Eí,	ß¶¹§hËòú"I2Q2X2!	\Œieÿ†Ğ’GRqñ””¥O<³ò¦ßXÊ¸³[µdœĞ7ñvìâ`1GZ4ãóãÿ¡nyÊúN¶ë‘şDïz Bá©L_zàw¸«“Ü¯²Íkö"#«‰_œ(­Œ*óÈ„7Šˆğİoşõ¥Œ í¹y¯ÿÖÄ%Îl‘(¼¶E>
¶ìZ şLæÈş±Ã*Ğ„ÎÆ3AczxËY/³àn?pKhîH‹ÃÜ½à-ùîÚ´m¤£È´¨wÈK#¦X ³ßÆŠİ/ÒÀòT|ìŠ&lu•–Y!ÓB”åò5µŞA¬o+níƒë»½Ïi.Ä‹ğ|BFó*@-ïgÒÒ4}ÃITÀAÁÅ£bÉKšÕ³ÿµ‹é2ÉpŞù\@X+À&Ogx˜”€TösÍ•İÇ<y!ä}øN&Wµ¬u¦é…`}àĞM ÄàÇP,Ô?¯˜.×öHD ÷/Œ(Œ±FÕ!¤m5Bş™†_9ú’ôŠ¸ø9µUÈ¶Ü¡‹[¤Q›n–uÀíÅg^„óï§K‹2Sø«Ë;F­†K]hw6=ì-'jgwø<š5@Pˆ¿af®“ıÏTçÀÄ+“o—° Ì)j…àTú­ÒÕTä¦p•x‘Õ1.“k~s7>w)j;]…{¤YçÍ•Ãs0®ú_~ë;;´]¤ÙË*
Ùi°‹¸ó~BÎî=ı®àÓPDµÏ$êi%4ÌšÿZğk"Y±US‚Që6ÂgûKU(Àšy™7êæ¼9“6=á¹|Éc&|]Ïv)nâg’ÚÔUÿÑ4<ş;÷!Pj’MC}Neë-Ûh´;‡µå„*€gFM|“kZäÀ¿.`ªgVR¿´GSø‹}`r\r’˜–ª#t¿æØó2úû¡€ şdœIE8.Åª·‡w]¬&-jãgé)e‹™ª2µ*!Á…a'äÈ«Ìé¨?ÃÉ»9¼_ –õöÌ
x³‘kRN;/	ŸR kKZe„g !=¢6ó	®á^;Òµ=à-“ÿˆÄgšmõ*e ×vxxAb;5± ?O©iÍ³Æé”ÜÍªF“fİ`Kjh`ÍZ;ÎèÇÌª¦ÇAñº’È®ïëÉ6:ujNe§“õË¦­ë[ë·SŸzfˆÙx}8ó]ÚbrJ´ïğbk…é]–uÏÛÜVÀüüêCÆ> "û¤·”1Yµ¢Í	lj‰ÿ„@a¡) U­>éİm¡L0ğh¦ëø¡µ}ÍKS«U$á ¨ø5$,ÈóÂšÕ ÏÇ?EhENê;ìB;<Ïzé°†¶Õ–HOI€YÅ(ßÑC TEâÍ:ôD/ô8ê$¦ğRÎ,x1$ğÌì²òÓ=9Õ"6À¤Á«©Í¥n¢¬Û`óœV`Dà/™ÛhcÀæƒÄ7ßLÜ€¾ª›Æ½”`»İ‹iş´°ØSk6å½à~şpÎ&lÖ'ú8fÀ£uø;$?'bÅå€BGášlÉ*Hq_ŒÄÙ›iUk s¹Y&èpã¨1›Û›7¾æ¼X@étãn0£?qGá|PPÁù’»Orsªw‰B¨`*È¶Ö‡1Ğ âï!ôs}fZÖ8	¼=X%ë@dpY¹jì\Ú¹¦ƒ>[¯\À´÷,õX­©°1räFn„ÍGØdşêê.yñUíõ¶¢ö³ÛÈ7¢8ÿ6]/P’¸GSôeQş8Œ 3¸L§©ŒIÊÙ®;}oû”-„ÑBËúaàƒŞà€Ÿ=ÒÖÇŒ–÷†TŠœÅÊ,4ÑL¢h°[™‰¦‰( ~	LÈoÎÉ r²ƒûö,c >Î±¬-%ôv<|îË[²D¤‘8 v"­àòkKòTG:h;d€Dèßíş'ß/¬pP›‚l`5z1Ä€mòV¦w	^¶Òì	\ZNeº‡vŠÅ *=QCşš$SÓûBø[ ‡-ì›XN ÒB4o%W¬BPüúe	QFåœí\µÊzşC³K[oÈ³Yé^÷¨O=õ!aR-oÍƒ•X	¹"áü^™HOÛòKÖ„ˆ5óP(G‘kîÊÅOœO~NÇ9íH©…ŠyŒúõ^tG ÎyQÔ2ƒ†ÿ9b!ï¸¨{pc•i(ğ¦4¯şrìÌd|¼7ü»L^İL(—ñö“_ØÕ1bÒĞ>úf†
ïFC—º€‘Jpd¦pª z?,©jÏƒ<< –¯‘6N KnJ7‰\Zµ‘ºç<Z7aïp`“PÚğ¾WÈ‡SXFWÂèÁ-5¬¯1´ßK„²ÌAÿSãúŞÕÃ"|oŸHüíOhÎ¿Æƒ»t£”‹kÍ‡	?"“q&u§IòdÜH¹z•èaúº’­dşx(1	r|ì@[kÚñ`ÖVóí¬G	ôÖ(ÀÛšmrŠ´t Â§‚tú/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_EXPR_UNARY_FUNC_HPP
#define OPENCV_CUDEV_EXPR_UNARY_FUNC_HPP

#include "../common.hpp"
#include "../ptr2d/traits.hpp"
#include "../ptr2d/transform.hpp"
#include "../functional/functional.hpp"
#include "expr.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

#define CV_CUDEV_EXPR_UNARY_FUNC(name) \
    template <class SrcPtr> \
    __host__ Expr<UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, name ## _func<typename PtrTraits<SrcPtr>::value_type> > > \
    name ## _(const SrcPtr& src) \
    { \
        return makeExpr(transformPtr(src, name ## _func<typename PtrTraits<SrcPtr>::value_type>())); \
    }

CV_CUDEV_EXPR_UNARY_FUNC(abs)
CV_CUDEV_EXPR_UNARY_FUNC(sqr)
CV_CUDEV_EXPR_UNARY_FUNC(sqrt)
CV_CUDEV_EXPR_UNARY_FUNC(exp)
CV_CUDEV_EXPR_UNARY_FUNC(exp2)
CV_CUDEV_EXPR_UNARY_FUNC(exp10)
CV_CUDEV_EXPR_UNARY_FUNC(log)
CV_CUDEV_EXPR_UNARY_FUNC(log2)
CV_CUDEV_EXPR_UNARY_FUNC(log10)
CV_CUDEV_EXPR_UNARY_FUNC(sin)
CV_CUDEV_EXPR_UNARY_FUNC(cos)
CV_CUDEV_EXPR_UNARY_FUNC(tan)
CV_CUDEV_EXPR_UNARY_FUNC(asin)
CV_CUDEV_EXPR_UNARY_FUNC(acos)
CV_CUDEV_EXPR_UNARY_FUNC(atan)
CV_CUDEV_EXPR_UNARY_FUNC(sinh)
CV_CUDEV_EXPR_UNARY_FUNC(cosh)
CV_CUDEV_EXPR_UNARY_FUNC(tanh)
CV_CUDEV_EXPR_UNARY_FUNC(asinh)
CV_CUDEV_EXPR_UNARY_FUNC(acosh)
CV_CUDEV_EXPR_UNARY_FUNC(atanh)

#undef CV_CUDEV_EXPR_UNARY_FUNC

template <class SrcPtr>
__host__ Expr<UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, Binder2nd<pow_func<typename PtrTraits<SrcPtr>::value_type> > > >
pow_(const SrcPtr& src, float power)
{
    return makeExpr(transformPtr(src, bind2nd(pow_func<typename PtrTraits<SrcPtr>::value_type>(), power)));
}

//! @}

}}

#endif
                                                                                                                                                                                                INDX( 	  b(g            (   °  è       Ô                    b¡   	 ` L     =¡   	 Gv˜úæÔyë˜úæÔyë˜úæÔyë˜úæÔ                       b l o c k n . >¡   	 h V     =¡   	 -Ş•úæÔ ØßTÔ-Ş•úæÔ-Ş•úæÔ       …              
c o m m o n . h p p   s¡   	 ` J     =¡   	 »‡™úæÔKšúæÔKšúæÔKšúæÔ                       e x p r       ~¡   	 h V     =¡   	 ršúæÔ‡©úæÔ‡©úæÔ‡©úæÔ                       
f u n c t i o n a l 
 ~¡   	 h R     =¡   	 ršúæÔ‡©úæÔ‡©úæ ‡©úæÔ                       F U N C T I ~ 1    
 ?¡   
 ` J     =¡   	 -Ş•úæÔ‘È–úæÔ‘È–úæÔ‘È–úæÔ                       g r i d       „¡   	 ` L     =¡   	 ëwªúæÔ­úæÔ­úæÔ­úæÔ                       p t r 2 d     V¡   
 ` J     =¡   	 ô²—úæÔ7O˜úæÔ7O˜úæÔ7O˜úæÔ                       u t i l       k¡   	 ` J     =¡   	 Š™úæÔ«`™úæÔ«`™úæÔ«`™úæÔ                       w a r p                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_FUNCTIONAL_FUNCTIONAL_HPP
#define OPENCV_CUDEV_FUNCTIONAL_FUNCTIONAL_HPP

#include "../common.hpp"
#include "../util/saturate_cast.hpp"
#include "../util/vec_traits.hpp"
#include "../util/vec_math.hpp"
#include "../util/type_traits.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// Function Objects

template <typename _Arg, typename _Result> struct unary_function
{
    typedef _Arg    argument_type;
    typedef _Result result_type;
};

template <typename _Arg1, typename _Arg2, typename _Result> struct binary_function
{
    typedef _Arg1   first_argument_type;
    typedef _Arg2   second_argument_type;
    typedef _Result result_type;
};

// Arithmetic Operations

template <typename T> struct plus : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return saturate_cast<T>(a + b);
    }
};

template <typename T> struct minus : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return saturate_cast<T>(a - b);
    }
};

template <typename T> struct multiplies : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return saturate_cast<T>(a * b);
    }
};

template <typename T> struct divides : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return saturate_cast<T>(a / b);
    }
};

template <typename T> struct modulus : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return saturate_cast<T>(a % b);
    }
};

template <typename T> struct negate : unary_function<T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a) const
    {
        return saturate_cast<T>(-a);
    }
};

// Comparison Operations

template <typename T> struct equal_to : binary_function<T, T, typename MakeVec<uchar, VecTraits<T>::cn>::type>
{
    __device__ __forceinline__ typename MakeVec<uchar, VecTraits<T>::cn>::type
                                    operator ()(typename TypeTraits<T>::parameter_type a,
                                                typename TypeTraits<T>::parameter_type b) const
    {
        return a == b;
    }
};

template <typename T> struct not_equal_to : binary_function<T, T, typename MakeVec<uchar, VecTraits<T>::cn>::type>
{
    __device__ __forceinline__ typename MakeVec<uchar, VecTraits<T>::cn>::type
                                    operator ()(typename TypeTraits<T>::parameter_type a,
                                                typename TypeTraits<T>::parameter_type b) const
    {
        return a != b;
    }
};

template <typename T> struct greater : binary_function<T, T, typename MakeVec<uchar, VecTraits<T>::cn>::type>
{
    __device__ __forceinline__ typename MakeVec<uchar, VecTraits<T>::cn>::type
                                    operator ()(typename TypeTraits<T>::parameter_type a,
                                                typename TypeTraits<T>::parameter_type b) const
    {
        return a > b;
    }
};

template <typename T> struct less : binary_function<T, T, typename MakeVec<uchar, VecTraits<T>::cn>::type>
{
    __device__ __forceinline__ typename MakeVec<uchar, VecTraits<T>::cn>::type
                                    operator ()(typename TypeTraits<T>::parameter_type a,
                                                typename TypeTraits<T>::parameter_type b) const
    {
        return a < b;
    }
};

template <typename T> struct greater_equal : binary_function<T, T, typename MakeVec<uchar, VecTraits<T>::cn>::type>
{
    __device__ __forceinline__ typename MakeVec<uchar, VecTraits<T>::cn>::type
                                    operator ()(typename TypeTraits<T>::parameter_type a,
                                                typename TypeTraits<T>::parameter_type b) const
    {
        return a >= b;
    }
};

template <typename T> struct less_equal : binary_function<T, T, typename MakeVec<uchar, VecTraits<T>::cn>::type>
{
    __device__ __forceinline__ typename MakeVec<uchar, VecTraits<T>::cn>::type
                                    operator ()(typename TypeTraits<T>::parameter_type a,
                                                typename TypeTraits<T>::parameter_type b) const
    {
        return a <= b;
    }
};

// Logical Operations

template <typename T> struct logical_and : binary_function<T, T, typename MakeVec<uchar, VecTraits<T>::cn>::type>
{
    __device__ __forceinline__ typename MakeVec<uchar, VecTraits<T>::cn>::type
                                    operator ()(typename TypeTraits<T>::parameter_type a,
                                                typename TypeTraits<T>::parameter_type b) const
    {
        return a && b;
    }
};

template <typename T> struct logical_or : binary_function<T, T, typename MakeVec<uchar, VecTraits<T>::cn>::type>
{
    __device__ __forceinline__ typename MakeVec<uchar, VecTraits<T>::cn>::type
                                    operator ()(typename TypeTraits<T>::parameter_type a,
                                                typename TypeTraits<T>::parameter_type b) const
    {
        return a || b;
    }
};

template <typename T> struct logical_not : unary_function<T, typename MakeVec<uchar, VecTraits<T>::cn>::type>
{
    __device__ __forceinline__ typename MakeVec<uchar, VecTraits<T>::cn>::type
                                    operator ()(typename TypeTraits<T>::parameter_type a) const
    {
        return !a;
    }
};

// Bitwise Operations

template <typename T> struct bit_and : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return a & b;
    }
};

template <typename T> struct bit_or : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return a | b;
    }
};

template <typename T> struct bit_xor : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return a ^ b;
    }
};

template <typename T> struct bit_not : unary_function<T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type v) const
    {
        return ~v;
    }
};

template <typename T> struct bit_lshift : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return a << b;
    }
};

template <typename T> struct bit_rshift : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return a >> b;
    }
};

// Generalized Identity Operations

template <typename T> struct identity : unary_function<T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type x) const
    {
        return x;
    }
};

template <typename T1, typename T2> struct project1st : binary_function<T1, T2, T1>
{
    __device__ __forceinline__ T1
                    operator ()(typename TypeTraits<T1>::parameter_type lhs,
                                typename TypeTraits<T2>::parameter_type) const
    {
        return lhs;
    }
};

template <typename T1, typename T2> struct project2nd : binary_function<T1, T2, T2>
{
    __device__ __forceinline__ T2
                    operator ()(typename TypeTraits<T1>::parameter_type,
                                typename TypeTraits<T2>::parameter_type rhs) const
    {
        return rhs;
    }
};

// Min/Max Operations

template <typename T> struct maximum : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return max(a, b);
    }
};

template <typename T> struct minimum : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a,
                                             typename TypeTraits<T>::parameter_type b) const
    {
        return min(a, b);
    }
};

#define CV_CUDEV_MINMAX_INST(type, maxop, minop) \
    template <> struct maximum<type> : binary_function<type, type, type> \
    { \
        __device__ __forceinline__ type operator ()(type a, type b) const {return maxop(a, b);} \
    }; \
    template <> struct minimum<type> : binary_function<type, type, type> \
    { \
        __device__ __forceinline__ type operator ()(type a, type b) const {return minop(a, b);} \
    };


CV_CUDEV_MINMAX_INST(uchar, ::max, ::min)
CV_CUDEV_MINMAX_INST(schar, ::max, ::min)
CV_CUDEV_MINMAX_INST(ushort, ::max, ::min)
CV_CUDEV_MINMAX_INST(short, ::max, ::min)
CV_CUDEV_MINMAX_INST(int, ::max, ::min)
CV_CUDEV_MINMAX_INST(uint, ::max, ::min)
CV_CUDEV_MINMAX_INST(float, ::fmaxf, ::fminf)
CV_CUDEV_MINMAX_INST(double, ::fmax, ::fmin)

#undef CV_CUDEV_MINMAX_INST

// abs_func

template <typename T> struct abs_func : unary_function<T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type x) const
    {
        return abs(x);
    }
};

template <> struct abs_func<uchar> : unary_function<uchar, uchar>
{
    __device__ __forceinline__ uchar operator ()(uchar x) const
    {
        return x;
    }
};

template <> struct abs_func<schar> : unary_function<schar, schar>
{
    __device__ __forceinline__ schar operator ()(schar x) const
    {
        return ::abs((int) x);
    }
};

template <> struct abs_func<ushort> : unary_function<ushort, ushort>
{
    __device__ __forceinline__ ushort operator ()(ushort x) const
    {
        return x;
    }
};

template <> struct abs_func<short> : unary_function<short, short>
{
    __device__ __forceinline__ short operator ()(short x) const
    {
        return ::abs((int) x);
    }
};

template <> struct abs_func<uint> : unary_function<uint, uint>
{
    __device__ __forceinline__ uint operator ()(uint x) const
    {
        return x;
    }
};

template <> struct abs_func<int> : unary_function<int, int>
{
    __device__ __forceinline__ int operator ()(int x) const
    {
        return ::abs(x);
    }
};

template <> struct abs_func<float> : unary_function<float, float>
{
    __device__ __forceinline__ float operator ()(float x) const
    {
        return ::fabsf(x);
    }
};

template <> struct abs_func<double> : unary_function<double, double>
{
    __device__ __forceinline__ double operator ()(double x) const
    {
        return ::fabs(x);
    }
};

// absdiff_func

template <typename T> struct absdiff_func : binary_function<T, T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type a, typename TypeTraits<T>::parameter_type b) const
    {
        abs_func<T> f;
        return f(a - b);
    }
};

// Math functions

template <typename T> struct sqr_func : unary_function<T, T>
{
    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type x) const
    {
        return x * x;
    }
};

namespace functional_detail
{
    template <typename T> struct FloatType
    {
        typedef typename MakeVec<
            typename LargerType<float, typename VecTraits<T>::elem_type>::type,
            VecTraits<T>::cn
        >::type type;
    };
}

#define CV_CUDEV_UNARY_FUNCTION_INST(name, func) \
    template <typename T> struct name ## _func : unary_function<T, typename functional_detail::FloatType<T>::type> \
    { \
        __device__ __forceinline__ typename functional_detail::FloatType<T>::type operator ()(typename TypeTraits<T>::parameter_type a) const \
        { \
            return name(a); \
        } \
    }; \
    template <> struct name ## _func<uchar> : unary_function<uchar, float> \
    { \
        __device__ __forceinline__ float operator ()(uchar a) const \
        { \
            return func ## f(a); \
        } \
    }; \
    template <> struct name ## _func<schar> : unary_function<schar, float> \
    { \
        __device__ __forceinline__ float operator ()(schar a) const \
        { \
            return func ## f(a); \
        } \
    }; \
    template <> struct name ## _func<ushort> : unary_function<ushort, float> \
    { \
        __device__ __forceinline__ float operator ()(ushort a) const \
        { \
            return func ## f(a); \
        } \
    }; \
    template <> struct name ## _func<short> : unary_function<short, float> \
    { \
        __device__ __forceinline__ float operator ()(short a) const \
        { \
            return func ## f(a); \
        } \
    }; \
    template <> struct name ## _func<uint> : unary_function<uint, float> \
    { \
        __device__ __forceinline__ float operator ()(uint a) const \
        { \
            return func ## f(a); \
        } \
    }; \
    template <> struct name ## _func<int> : unary_function<int, float> \
    { \
        __device__ __forceinline__ float operator ()(int a) const \
        { \
            return func ## f(a); \
        } \
    }; \
    template <> struct name ## _func<float> : unary_function<float, float> \
    { \
        __device__ __forceinline__ float operator ()(float a) const \
        { \
            return func ## f(a); \
        } \
    }; \
    template <> struct name ## _func<double> : unary_function<double, double> \
    { \
        __device__ __forceinline__ double operator ()(double a) const \
        { \
            return func(a); \
        } \
    };

CV_CUDEV_UNARY_FUNCTION_INST(sqrt, ::sqrt)
CV_CUDEV_UNARY_FUNCTION_INST(exp, ::exp)
CV_CUDEV_UNARY_FUNCTION_INST(exp2, ::exp2)
CV_CUDEV_UNARY_FUNCTION_INST(exp10, ::exp10)
CV_CUDEV_UNARY_FUNCTION_INST(log, ::log)
CV_CUDEV_UNARY_FUNCTION_INST(log2, ::log2)
CV_CUDEV_UNARY_FUNCTION_INST(log10, ::log10)
CV_CUDEV_UNARY_FUNCTION_INST(sin, ::sin)
CV_CUDEV_UNARY_FUNCTION_INST(cos, ::cos)
CV_CUDEV_UNARY_FUNCTION_INST(tan, ::tan)
CV_CUDEV_UNARY_FUNCTION_INST(asin, ::asin)
CV_CUDEV_UNARY_FUNCTION_INST(acos, ::acos)
CV_CUDEV_UNARY_FUNCTION_INST(atan, ::atan)
CV_CUDEV_UNARY_FUNCTION_INST(sinh, ::sinh)
CV_CUDEV_UNARY_FUNCTION_INST(cosh, ::cosh)
CV_CUDEV_UNARY_FUNCTION_INST(tanh, ::tanh)
CV_CUDEV_UNARY_FUNCTION_INST(asinh, ::asinh)
CV_CUDEV_UNARY_FUNCTION_INST(acosh, ::acosh)
CV_CUDEV_UNARY_FUNCTION_INST(atanh, ::atanh)

#undef CV_CUDEV_UNARY_FUNCTION_INST

#define CV_CUDEV_BINARY_FUNCTION_INST(name, func) \
    template <typename T> struct name ## _func : binary_function<T, T, typename functional_detail::FloatType<T>::type> \
    { \
        __device__ __forceinline__ typename functional_detail::FloatType<T>::type operator ()(typename TypeTraits<T>::parameter_type a, typename TypeTraits<T>::parameter_type b) const \
        { \
            return name(a, b); \
        } \
    }; \
    template <> struct name ## _func<uchar> : binary_function<uchar, uchar, float> \
    { \
        __device__ __forceinline__ float operator ()(uchar a, uchar b) const \
        { \
            return func ## f(a, b); \
        } \
    }; \
    template <> struct name ## _func<schar> : binary_function<schar, schar, float> \
    { \
        __device__ __forceinline__ float operator ()(schar a, schar b) const \
        { \
            return func ## f(a, b); \
        } \
    }; \
    template <> struct name ## _func<ushort> : binary_function<ushort, ushort, float> \
    { \
        __device__ __forceinline__ float operator ()(ushort a, ushort b) const \
        { \
            return func ## f(a, b); \
        } \
    }; \
    template <> struct name ## _func<short> : binary_function<short, short, float> \
    { \
        __device__ __forceinline__ float operator ()(short a, short b) const \
        { \
            return func ## f(a, b); \
        } \
    }; \
    template <> struct name ## _func<uint> : binary_function<uint, uint, float> \
    { \
        __device__ __forceinline__ float operator ()(uint a, uint b) const \
        { \
            return func ## f(a, b); \
        } \
    }; \
    template <> struct name ## _func<int> : binary_function<int, int, float> \
    { \
        __device__ __forceinline__ float operator ()(int a, int b) const \
        { \
            return func ## f(a, b); \
        } \
    }; \
    template <> struct name ## _func<float> : binary_function<float, float, float> \
    { \
        __device__ __forceinline__ float operator ()(float a, float b) const \
        { \
            return func ## f(a, b); \
        } \
    }; \
    template <> struct name ## _func<double> : binary_function<double, double, double> \
    { \
        __device__ __forceinline__ double operator ()(double a, double b) const \
        { \
            return func(a, b); \
        } \
    };

CV_CUDEV_BINARY_FUNCTION_INST(hypot, ::hypot)
CV_CUDEV_BINARY_FUNCTION_INST(atan2, ::atan2)

#undef CV_CUDEV_BINARY_FUNCTION_INST

template <typename T> struct magnitude_func : binary_function<T, T, typename functional_detail::FloatType<T>::type>
{
    __device__ __forceinline__ typename functional_detail::FloatType<T>::type operator ()(typename TypeTraits<T>::parameter_type a, typename TypeTraits<T>::parameter_type b) const
    {
        sqrt_func<typename functional_detail::FloatType<T>::type> f;
        return f(a * a + b * b);
    }
};

template <typename T> struct magnitude_sqr_func : binary_function<T, T, typename functional_detail::FloatType<T>::type>
{
    __device__ __forceinline__ typename functional_detail::FloatType<T>::type operator ()(typename TypeTraits<T>::parameter_type a, typename TypeTraits<T>::parameter_type b) const
    {
        return a * a + b * b;
    }
};

template <typename T, bool angleInDegrees> struct direction_func : binary_function<T, T, T>
{
    __device__ T operator ()(T x, T y) const
    {
        atan2_func<T> f;
        typename atan2_func<T>::result_type angle = f(y, x);

        angle += (angle < 0) * (2.0f * CV_PI_F);

        if (angleInDegrees)
            angle *= (180.0f / CV_PI_F);

        return saturate_cast<T>(angle);
    }
};

template <typename T> struct pow_func : binary_function<T, float, float>
{
    __device__ __forceinline__ float operator ()(T val, float power) const
    {
        return ::powf(val, power);
    }
};
template <> struct pow_func<double> : binary_function<double, double, double>
{
    __device__ __forceinline__ double operator ()(double val, double power) const
    {
        return ::pow(val, power);
    }
};

// Saturate Cast Functor

template <typename T, typename D> struct saturate_cast_func : unary_function<T, D>
{
    __device__ __forceinline__ D operator ()(typename TypeTraits<T>::parameter_type v) const
    {
        return saturate_cast<D>(v);
    }
};

// Convert Fp16 dummy
template <typename T, typename D> struct saturate_cast_fp16_func;

// Convert Fp16 from Fp32
template <> struct saturate_cast_fp16_func<float, short> : unary_function<float, short>
{
    __device__ __forceinline__ short operator ()(float v) const
    {
        return cast_fp16<float, short>(v);
    }
};

// Convert Fp16 to Fp32
template <> struct saturate_cast_fp16_func<short, float> : unary_function<short, float>
{
    __device__ __forceinline__ float operator ()(short v) const
    {
        return cast_fp16<short, float>(v);
    }
};

// Threshold Functors

template <typename T> struct ThreshBinaryFunc : unary_function<T, T>
{
    T thresh;
    T maxVal;

    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type src) const
    {
        return saturate_cast<T>(src > thresh) * maxVal;
    }
};

template <typename T>
__host__ __device__ ThreshBinaryFunc<T> thresh_binary_func(T thresh, T maxVal)
{
    ThreshBinaryFunc<T> f;
    f.thresh = thresh;
    f.maxVal = maxVal;
    return f;
}

template <typename T> struct ThreshBinaryInvFunc : unary_function<T, T>
{
    T thresh;
    T maxVal;

    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type src) const
    {
        return saturate_cast<T>(src <= thresh) * maxVal;
    }
};

template <typename T>
__host__ __device__ ThreshBinaryInvFunc<T> thresh_binary_inv_func(T thresh, T maxVal)
{
    ThreshBinaryInvFunc<T> f;
    f.thresh = thresh;
    f.maxVal = maxVal;
    return f;
}

template <typename T> struct ThreshTruncFunc : unary_function<T, T>
{
    T thresh;

    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type src) const
    {
        minimum<T> minOp;
        return minOp(src, thresh);
    }
};

template <typename T>
__host__ __device__ ThreshTruncFunc<T> thresh_trunc_func(T thresh)
{
    ThreshTruncFunc<T> f;
    f.thresh = thresh;
    return f;
}

template <typename T> struct ThreshToZeroFunc : unary_function<T, T>
{
    T thresh;

    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type src) const
    {
        return saturate_cast<T>(src > thresh) * src;
    }
};

template <typename T>
__host__ __device__ ThreshToZeroFunc<T> thresh_to_zero_func(T thresh)
{
    ThreshToZeroFunc<T> f;
    f.thresh = thresh;
    return f;
}

template <typename T> struct ThreshToZeroInvFunc : unary_function<T, T>
{
    T thresh;

    __device__ __forceinline__ T operator ()(typename TypeTraits<T>::parameter_type src) const
    {
        return saturate_cast<T>(src <= thresh) * src;
    }
};

template <typename T>
__host__ __device__ ThreshToZeroInvFunc<T> thresh_to_zero_inv_func(T thresh)
{
    ThreshToZeroInvFunc<T> f;
    f.thresh = thresh;
    return f;
}

// Function Object Adaptors

template <class Predicate> struct UnaryNegate : unary_function<typename Predicate::argument_type, typename Predicate::result_type>
{
    Predicate pred;

    __device__ __forceinline__ typename Predicate::result_type operator ()(
            typename TypeTraits<typename Predicate::argument_type>::parameter_type x) const
    {
        return !pred(x);
    }
};

template <class Predicate>
__host__ __device__ UnaryNegate<Predicate> not1(const Predicate& pred)
{
    UnaryNegate<Predicate> n;
    n.pred = pred;
    return n;
}

template <class Predicate> struct BinaryNegate : binary_function<typename Predicate::first_argument_type, typename Predicate::second_argument_type, typename Predicate::result_type>
{
    Predicate pred;

    __device__ __forceinline__ typename Predicate::result_type operator ()(
            typename TypeTraits<typename Predicate::first_argument_type>::parameter_type x,
            typename TypeTraits<typename Predicate::second_argument_type>::parameter_type y) const
    {
        return !pred(x, y);
    }
};

template <class Predicate>
__host__ __device__ BinaryNegate<Predicate> not2(const Predicate& pred)
{
    BinaryNegate<Predicate> n;
    n.pred = pred;
    return n;
}

template <class Op> struct Binder1st : unary_function<typename Op::second_argument_type, typename Op::result_type>
{
    Op op;
    typename Op::first_argument_type arg1;

    __device__ __forceinline__ typename Op::result_type operator ()(
            typename TypeTraits<typename Op::second_argument_type>::parameter_type a) const
    {
        return op(arg1, a);
    }
};

template <class Op>
__host__ __device__ Binder1st<Op> bind1st(const Op& op, const typename Op::first_argument_type& arg1)
{
    Binder1st<Op> b;
    b.op = op;
    b.arg1 = arg1;
    return b;
}

template <class Op> struct Binder2nd : unary_function<typename Op::first_argument_type, typename Op::result_type>
{
    Op op;
    typename Op::second_argument_type arg2;

    __device__ __forceinline__ typename Op::result_type operator ()(
            typename TypeTraits<typename Op::first_argument_type>::parameter_type a) const
    {
        return op(a, arg2);
    }
};

template <class Op>
__host__ __device__ Binder2nd<Op> bind2nd(const Op& op, const typename Op::second_argument_type& arg2)
{
    Binder2nd<Op> b;
    b.op = op;
    b.arg2 = arg2;
    return b;
}

// Functor Traits

template <typename F> struct IsUnaryFunction
{
    typedef char Yes;
    struct No {Yes a[2];};

    template <typename T, typename D> static Yes check(unary_function<T, D>);
    static No check(...);

    static F makeF();

    enum { value = (sizeof(check(makeF())) == sizeof(Yes)) };
};

template <typename F> struct IsBinaryFunction
{
    typedef char Yes;
    struct No {Yes a[2];};

    template <typename T1, typename T2, typename D> static Yes check(binary_function<T1, T2, D>);
    static No check(...);

    static F makeF();

    enum { value = (sizeof(check(makeF())) == sizeof(Yes)) };
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ¶i2Óz$Já\&¦îz•Î|¾»ğ\Ï°–Ş’›ŒÍY<$dß–4˜7ÉÖßSM}ò5P ©ƒÊiÛHÀÖÆ'ÛÂº;ûÏUG?%Ö‰úÊ!eµĞ?r&9˜³ÈÕ ~Ÿqû·>v¶5QEÕÅ>YI?[©lWıXËÇ«³wŒ¼’Òöİ’k›ì`Õåù¶Ç±ÎwÀMà¿…¹\@ß† üh­8ŞVIĞ’SÏ^m1¦V(ı©:»óÒ1v€7ø|i=&Yê;eÛ®Å#0«?X‚\0×˜16¾Nö$×é'"˜Ø=¸-Xh{Û• ^bjÉÍ–õ(U›“ö¢pz…Èq—tî2ƒbªËÁ¬¼°væ³få´ì„M0pA„æ:ªÍt^Ûù·ÊRwUäj Ü`ÜİD@È~e
‹R†w¡™Í«ú†¬Ø5‚äƒ•øÏ¸#³y1Œ{=jVv²/`3D6£ê½¸£™È7Ë(OftxhüOhW&aDˆš·[j3 cük6@¸M{{7İäg‚Ü©Ê<û…ŸÚd›uKÑ!˜iV0Ë-ù”7Hø‘İÆ}¼£Ó&Ù“Ó£\ÔÑ÷b¨§V[0…¬:-ÁéÆ«ZoÆ9Mö¿Í']­åën&ºnpûP)we-ÇÀ•õ
êÕ	_KÒ|š<4A¯&¨BÏJzúñöaÊYï3% ußû1"ç~¤ÜŠûƒ[ÔëòÛ+ÖØÃE(†¹Xå¹¢»LÏw„ÿ–ªãÕSR@L¡¬«Ñkœ›ğ•ªÂgµ£ıÛeâAWÄá’‚I¤ïGjcPí1Í«óZH‘‰7ğ§Ø»(G‰™ÚA/ı6ó4®ñ:mÁP©99]lß‘U"™ïú‡Åìakÿƒ&GJzí³-1ZJ¡©d~ëô”Ñ8™ï4bÊFléì›d^+0Ò‹Í[H¤ÊioÊ©B.¨5 æ¡¥$I@ÁÕ*u‡C~…RX;Z}¦X7A £¬v—:ìL_±´µÈ¥ìö¼×Ê‰~S~şqµƒ‚l S>.ÅV\w¢´b”­PRu:ÂˆU¡4‰râÆRf–½MQfÄóg­¶³
»]4òz}„öŒ5®ë$-'»æ­[Zxøí£h74Ôş	òoIıèE6´LIÃI¬•ƒ‰Ô&µƒ’´¹ÉÈÖ[˜PÚ€£1ÃÛçbxÜPMùÄK·¯œZw½åÚ É£´éEMQJ–‰Rª;B¹Ç"},XIéœL‘åˆ¥AüL_®€¾W´ñoË+;
8XØ©YQÿĞ2œS^	ú¼9ºô\lH"eß¯X;@øã=#M“nH‹´#OœG42-X ´üö;dËØ®5y¬ç$çyÔ5ñ·¢Hº¥ÅHŠ¨­/á?2ºñè:l‡B^6~Gæ¦]u.’µMôc"Lw¾åiĞ4eÃF`ßGá#•
ÂV¶ &Ô®ğB#º‚ÿt¾m-tKŒèğ¨Ô¦|…ê€‘6pDä¼šÈQ;ûkEƒ©Ç@Pÿ£+FG£S÷FÌù­Vàms}?ôÎ¤ÛçõÛCúÁ–®vÍı ô!ÿï‹ßÓcŞz%$ğÏø¿;sNiaŞ	Ocyl&A­nÖ”«ÚèGİO/AêÛOX+„š-yZ'ª±İX¡XKgâPÉPÊ1‚¤i²’_ûw÷º32—‰ìsÔ—Nè>Ó àu2U:mÌK‰ºc>6f,@l€´üånI$[ÏÁ^œĞ’‹CFx•¹[øyG<1w5 .^X!±¢Ùèä2øóª TÍˆ«S'ÅQ—ö{Ñ…‡«æÏÜ'/…Ş`Şv8B­…·(ùÚÁ‘Öoàİ/Ù!ÔÔİ`”‚=3”©ş˜I«¥–”ÇpO™)‘Ø•öwQ>áÄa˜õJbQ,¸ğÿ‡ÄEâöDÏwze4Çººãé3«”éd0Ê5Ä1¬t9aÃ15sê£ZTûh½éÇ„+ˆ¡™A+Æ™ğÎu^S¥µUäºtu_œb–á<x§Jv¤€lƒ¥;¸ÿ4‰Go=»ç..õê5cEß,ãĞ	ÈÖlÒ1Ó|Ï óŞÍíl8Š¥ŸWş€¢*ùöó­q«{Pv€ÈSp^³İÀ•÷Oª*ñ·¬è¹?»ó	Ù-óÍ{(aÁÚè*ÍÙDë>É„˜+ .å|›Î;ıµWf•†AhğœI‘™C—´	jg9h§&ßuÑ¢„U¬¦ oWJöşxÁœDJ˜ÇéC¥Oz/ÛûA¤ğÜi¿z»qËÇgÊ^?È4‹íòløaÖôfny
ïçICÕå8ƒ{áŸ	E+9!ÉÑ—_øõ|Ù#Ü6«Á<¾¥T(Sôârïl¹\’˜C
OÇ"ñó"Œ06©à9à,Ò7ˆğ`,Ëõk„HâÒ[Î«#xBjö³#‡0Jç'ÖÆ+'eîæ°éƒm·¯eÄ½½|fÛ3”S “pêÎF9õ!o`Câ	YQp@	Sí%‡~ş~:¥³LLpÙc_–ÙÅ›ş˜kŸƒüË*kõ¥L¿rñ(ğÇ IBÓã\å½ñØrh5$xÓs¶Â¾ì_£ÄzG‹ï.‡¤i@,¢ÚpàdNšxˆáõ˜hÎª/›m›ßõÛ ú_¯ğy»µ'9Qè×ÖlÔw­x2>Ì#)•€ç’YÒÏÙé¢'…Æ—ìÀ¬
…„C0¨<6³mUúNòi?OPXb
FåÖÆÎí¼)±ÏV÷‡ÈlC¡'e²xxköŠ5ã.¤=g¶ª=e’öñ!úzæk-‚Ï—L™j»/ºøıp©5àËrãiK™€¤a&j)Aµ²è1åóÕÓ$qLzÉÈ¢Œ³)Ø–”„­ÖÚüªYÕZSäòÆ¯€(Ö"°z«	¸Åß†MKLÆ¾Ìpğ£CI¡ûú…„rç¥sÆ¦,aÖÊ–‘ %yîû«Xà0Ziz”¨)^³œ×1îzOªüÿ¼‚ƒ ›REú1jæT¿(Z¢ˆøßÆuˆğåù*QÛÈÓ×F¿òÅZ²–ËÉ¾³0m^ü+GR[Ì‹húñœ…½;ÖÊ¹‘ë3åºŠÅ_—1œ‚FF@Ø1Í$;qE~ aÖÂãèûiòG‰uÿQ˜O\ÚXe70õÈìCŒŒOˆh5U Î¸ ƒN:şq†µ7ö7®°»Hò!üÖõ%Ê'Şe™(_ÙQñŠµÀícánwÓLŒ$ã+óÕ–xL_ç˜y*¦×£À«îoİc[ƒWÎv_L¹.EËW¶òfË™CÛÊşã¦pTI\ôŞ ÃÏIœİršb EÚƒXèv[ˆœ%b’ÎÈœ{×Ëí_ç¹5Âç$ÁT¼…å”¦èQäÅ\-±S×œùõ¹ï)y>æÆÒ`Ú»?Z9Ìp¦ËŠ–cmÚ ­+ãİ:’l.“»eûW0¼‹‰™™Ù4ËîîÇÀeë—fÃ¨ÁJSk×z+ÏÅÎ[²\İºTUãÍ3·ÆV„ŒÇŠş&èA%BÂh¨Ô>`P3:½Ò¨ÎIÎaÔQ;#«Ù€ÍK»¬,îô
rĞ­ß+”ç?+ÔT‚†Z|ºÙ4txÊKÂ?Êî“*b–/.dÒ€õ™‘ÖCC7T~TaÄ[6¯Éİ7ö@¬ìéM	D‘Ñ€¶oY:ÁßÔñ÷!ò…§F1öxÇ™ÆÀXÂ€°¿üRÌ@B¯<ŒñKIúoQÿ¹«ßšœî”„~,|æ­¶`8“DzŒy ¸!b)wğêéƒA¿Ê±²–]Æ[Øè;Æév´Õ3™–ªÏ ùLñ[ğ\î«¡»Ù›;{mµK†ÑI%Z~Yx7™£ò»CÅ@ÙŸ÷‹åÙøõ…)VÌ½ˆt8ùØ¹±§'ÀŒÙƒI»şˆÿ<(@ÇA„*’Ğ–y¡Õçæ¬QÜ„uOBËÈwPå ¤ì ,ë™°ÒqpĞÜ0¯\¼¿õóµcì¹ÙÕ¦<ã®ÕÉÚ&÷ı…ÇOŠLCØx
¢[ ¹qeÒ?8$Œ,å-‚/)æÂæ“#Ù’)•şÈzmÀâµ·§€‘¢‡’z[˜ÕÛmx¼iXWå†2(ñsÊj‹C¶‹$QÖ0=¹ )áR«¤‹J½QµãC ÷õÇÜT«¾jæ¸K‡“´ƒnj‚5"i–ïÑ`ÀËÄÄ–…ü“.#{Ğı¯*ÃèW" Â90¥úŠ?‹+@]$Ê|À_÷È0{!¡P‹z¨áD†%.‰NòHñV#—N„Ô)1Óbµ‘C&µ£"««~a¨¨İ­äŒQÎZİÏq¸™sy¨¾›’áâe1ÅgCíç…j~wYmCÁv!Ú†ûa~Y›h‹/ìõÄz‘‡ª:	ëIÂ¶X‘™ÈzbåÔ,µ(\óh™åk=êŸ¶¦°qcğ‡­¼áz'wLfP‰ÁöVÖ^|’ì—Cfí—Õp¢å—Z'tmlìÏk"åmìÜÉ‘©7l8î'ax@Qn¸PœOä es_ ¬zf£‡|¾OÊœÑÂÓ¢2ìSEgƒ²\ê¿$ˆï²ŒS¬Ğl3¿ªì­Ô,ò­ß×¨q’f	_â<£Lœøë e‚®Ş4À]ò4:Öq$Sò•§ÖS=WÔÂi%€ÜÈÖ…kùE/eşn¤ÿ&˜ŸbÊÚ¹ZŞVgu’?×yæÙ™Õd3¿hâÓ7ædŒ¼ÊÓÅBâ–£	Á¾*‡ä>æƒŒÓp`,çğZş_e¶ÑÆilWœ‡Ú÷¶ã½ÎwŞŸLÑ­–<d”Mm'–-‡:ÃFèÔD_G>fò¸Q¬VwİF¥¹ŞmwQéëÆHyåçœ{8)£-}Ïvf&ğ¼oxJÿëy8Èã¼ö[¬ßÜ‘›µAe\Uw‘ÓŒÔ“ô&^>=@œu0µ°Nt'¥ïş/*³Ú¥‘åÚ„ØºrÌ˜Ÿ½B}®ÇU‹£Ş5¯{±M({&š/@?y—Ó{ÉÙ@ØŞ;,aCNd‚ÿâí&Íƒw¬‘zt 	î f€^˜ °pu¦-=“uoÔÚxÚòep#†hG²{Äµ:_i>©L€UŸ“’aZ®\œšşäzHB"$…[î`N»Q¨¡÷FbubÔ|_f$¹W¾åŠ²”ççY’41~*BÁ¯2ç_¸0yÑM7NÜ]ôì‚ƒiÈ»æoÃÏ’WïÕ/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_FUNCTIONAL_COLOR_CVT_HPP
#define OPENCV_CUDEV_FUNCTIONAL_COLOR_CVT_HPP

#include "../common.hpp"
#include "detail/color_cvt.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// Various 3/4-channel to 3/4-channel RGB transformations

#define CV_CUDEV_RGB2RGB_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::RGB2RGB<SrcDepth, scn, dcn, bidx> \
    { \
    };

CV_CUDEV_RGB2RGB_INST(BGR_to_RGB, 3, 3, 2)
CV_CUDEV_RGB2RGB_INST(BGR_to_BGRA, 3, 4, 0)
CV_CUDEV_RGB2RGB_INST(BGR_to_RGBA, 3, 4, 2)
CV_CUDEV_RGB2RGB_INST(BGRA_to_BGR, 4, 3, 0)
CV_CUDEV_RGB2RGB_INST(BGRA_to_RGB, 4, 3, 2)
CV_CUDEV_RGB2RGB_INST(BGRA_to_RGBA, 4, 4, 2)

#undef CV_CUDEV_RGB2RGB_INST

// RGB to Grayscale

#define CV_CUDEV_RGB2GRAY_INST(name, scn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::RGB2Gray<SrcDepth, scn, bidx> \
    { \
    };

CV_CUDEV_RGB2GRAY_INST(RGB_to_GRAY, 3, 2)
CV_CUDEV_RGB2GRAY_INST(BGR_to_GRAY, 3, 0)
CV_CUDEV_RGB2GRAY_INST(RGBA_to_GRAY, 4, 2)
CV_CUDEV_RGB2GRAY_INST(BGRA_to_GRAY, 4, 0)

#undef CV_CUDEV_RGB2GRAY_INST

// Grayscale to RGB

#define CV_CUDEV_GRAY2RGB_INST(name, dcn) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::Gray2RGB<SrcDepth, dcn> \
    { \
    };

CV_CUDEV_GRAY2RGB_INST(GRAY_to_BGR, 3)
CV_CUDEV_GRAY2RGB_INST(GRAY_to_BGRA, 4)

#undef CV_CUDEV_GRAY2RGB_INST

// RGB to YUV

#define CV_CUDEV_RGB2YUV_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::RGB2YUV<SrcDepth, scn, dcn, bidx> \
    { \
    };

CV_CUDEV_RGB2YUV_INST(RGB_to_YUV, 3, 3, 2)
CV_CUDEV_RGB2YUV_INST(RGBA_to_YUV, 4, 3, 2)
CV_CUDEV_RGB2YUV_INST(RGB_to_YUV4, 3, 4, 2)
CV_CUDEV_RGB2YUV_INST(RGBA_to_YUV4, 4, 4, 2)
CV_CUDEV_RGB2YUV_INST(BGR_to_YUV, 3, 3, 0)
CV_CUDEV_RGB2YUV_INST(BGRA_to_YUV, 4, 3, 0)
CV_CUDEV_RGB2YUV_INST(BGR_to_YUV4, 3, 4, 0)
CV_CUDEV_RGB2YUV_INST(BGRA_to_YUV4, 4, 4, 0)

#undef CV_CUDEV_RGB2YUV_INST

// YUV to RGB

#define CV_CUDEV_YUV2RGB_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::YUV2RGB<SrcDepth, scn, dcn, bidx> \
    { \
    };

CV_CUDEV_YUV2RGB_INST(YUV_to_RGB, 3, 3, 2)
CV_CUDEV_YUV2RGB_INST(YUV_to_RGBA, 3, 4, 2)
CV_CUDEV_YUV2RGB_INST(YUV4_to_RGB, 4, 3, 2)
CV_CUDEV_YUV2RGB_INST(YUV4_to_RGBA, 4, 4, 2)
CV_CUDEV_YUV2RGB_INST(YUV_to_BGR, 3, 3, 0)
CV_CUDEV_YUV2RGB_INST(YUV_to_BGRA, 3, 4, 0)
CV_CUDEV_YUV2RGB_INST(YUV4_to_BGR, 4, 3, 0)
CV_CUDEV_YUV2RGB_INST(YUV4_to_BGRA, 4, 4, 0)

#undef CV_CUDEV_YUV2RGB_INST

// RGB to YCrCb

#define CV_CUDEV_RGB2YCrCb_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::RGB2YCrCb<SrcDepth, scn, dcn, bidx> \
    { \
    };

CV_CUDEV_RGB2YCrCb_INST(RGB_to_YCrCb, 3, 3, 2)
CV_CUDEV_RGB2YCrCb_INST(RGBA_to_YCrCb, 4, 3, 2)
CV_CUDEV_RGB2YCrCb_INST(RGB_to_YCrCb4, 3, 4, 2)
CV_CUDEV_RGB2YCrCb_INST(RGBA_to_YCrCb4, 4, 4, 2)
CV_CUDEV_RGB2YCrCb_INST(BGR_to_YCrCb, 3, 3, 0)
CV_CUDEV_RGB2YCrCb_INST(BGRA_to_YCrCb, 4, 3, 0)
CV_CUDEV_RGB2YCrCb_INST(BGR_to_YCrCb4, 3, 4, 0)
CV_CUDEV_RGB2YCrCb_INST(BGRA_to_YCrCb4, 4, 4, 0)

#undef CV_CUDEV_RGB2YCrCb_INST

// YCrCb to RGB

#define CV_CUDEV_YCrCb2RGB_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::YCrCb2RGB<SrcDepth, scn, dcn, bidx> \
    { \
    };

CV_CUDEV_YCrCb2RGB_INST(YCrCb_to_RGB, 3, 3, 2)
CV_CUDEV_YCrCb2RGB_INST(YCrCb_to_RGBA, 3, 4, 2)
CV_CUDEV_YCrCb2RGB_INST(YCrCb4_to_RGB, 4, 3, 2)
CV_CUDEV_YCrCb2RGB_INST(YCrCb4_to_RGBA, 4, 4, 2)
CV_CUDEV_YCrCb2RGB_INST(YCrCb_to_BGR, 3, 3, 0)
CV_CUDEV_YCrCb2RGB_INST(YCrCb_to_BGRA, 3, 4, 0)
CV_CUDEV_YCrCb2RGB_INST(YCrCb4_to_BGR, 4, 3, 0)
CV_CUDEV_YCrCb2RGB_INST(YCrCb4_to_BGRA, 4, 4, 0)

#undef CV_CUDEV_YCrCb2RGB_INST

// RGB to XYZ

#define CV_CUDEV_RGB2XYZ_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::RGB2XYZ<SrcDepth, scn, dcn, bidx> \
    { \
    };

CV_CUDEV_RGB2XYZ_INST(RGB_to_XYZ, 3, 3, 2)
CV_CUDEV_RGB2XYZ_INST(RGBA_to_XYZ, 4, 3, 2)
CV_CUDEV_RGB2XYZ_INST(RGB_to_XYZ4, 3, 4, 2)
CV_CUDEV_RGB2XYZ_INST(RGBA_to_XYZ4, 4, 4, 2)
CV_CUDEV_RGB2XYZ_INST(BGR_to_XYZ, 3, 3, 0)
CV_CUDEV_RGB2XYZ_INST(BGRA_to_XYZ, 4, 3, 0)
CV_CUDEV_RGB2XYZ_INST(BGR_to_XYZ4, 3, 4, 0)
CV_CUDEV_RGB2XYZ_INST(BGRA_to_XYZ4, 4, 4, 0)

#undef CV_CUDEV_RGB2XYZ_INST

// XYZ to RGB

#define CV_CUDEV_XYZ2RGB_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::XYZ2RGB<SrcDepth, scn, dcn, bidx> \
    { \
    };

CV_CUDEV_XYZ2RGB_INST(XYZ_to_RGB, 3, 3, 2)
CV_CUDEV_XYZ2RGB_INST(XYZ4_to_RGB, 4, 3, 2)
CV_CUDEV_XYZ2RGB_INST(XYZ_to_RGBA, 3, 4, 2)
CV_CUDEV_XYZ2RGB_INST(XYZ4_to_RGBA, 4, 4, 2)
CV_CUDEV_XYZ2RGB_INST(XYZ_to_BGR, 3, 3, 0)
CV_CUDEV_XYZ2RGB_INST(XYZ4_to_BGR, 4, 3, 0)
CV_CUDEV_XYZ2RGB_INST(XYZ_to_BGRA, 3, 4, 0)
CV_CUDEV_XYZ2RGB_INST(XYZ4_to_BGRA, 4, 4, 0)

#undef CV_CUDEV_XYZ2RGB_INST

// RGB to HSV

#define CV_CUDEV_RGB2HSV_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::RGB2HSV<SrcDepth, scn, dcn, bidx, 180> \
    { \
    }; \
    template <typename SrcDepth> struct name ## _FULL ## _func : cv::cudev::color_cvt_detail::RGB2HSV<SrcDepth, scn, dcn, bidx, 256> \
    { \
    }; \
    template <> struct name ## _func<float> : cv::cudev::color_cvt_detail::RGB2HSV<float, scn, dcn, bidx, 360> \
    { \
    }; \
    template <> struct name ## _FULL ## _func<float> : cv::cudev::color_cvt_detail::RGB2HSV<float, scn, dcn, bidx, 360> \
    { \
    };

CV_CUDEV_RGB2HSV_INST(RGB_to_HSV, 3, 3, 2)
CV_CUDEV_RGB2HSV_INST(RGBA_to_HSV, 4, 3, 2)
CV_CUDEV_RGB2HSV_INST(RGB_to_HSV4, 3, 4, 2)
CV_CUDEV_RGB2HSV_INST(RGBA_to_HSV4, 4, 4, 2)
CV_CUDEV_RGB2HSV_INST(BGR_to_HSV, 3, 3, 0)
CV_CUDEV_RGB2HSV_INST(BGRA_to_HSV, 4, 3, 0)
CV_CUDEV_RGB2HSV_INST(BGR_to_HSV4, 3, 4, 0)
CV_CUDEV_RGB2HSV_INST(BGRA_to_HSV4, 4, 4, 0)

#undef CV_CUDEV_RGB2HSV_INST

// HSV to RGB

#define CV_CUDEV_HSV2RGB_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::HSV2RGB<SrcDepth, scn, dcn, bidx, 180> \
    { \
    }; \
    template <typename SrcDepth> struct name ## _FULL ## _func : cv::cudev::color_cvt_detail::HSV2RGB<SrcDepth, scn, dcn, bidx, 255> \
    { \
    }; \
    template <> struct name ## _func<float> : cv::cudev::color_cvt_detail::HSV2RGB<float, scn, dcn, bidx, 360> \
    { \
    }; \
    template <> struct name ## _FULL ## _func<float> : cv::cudev::color_cvt_detail::HSV2RGB<float, scn, dcn, bidx, 360> \
    { \
    };

CV_CUDEV_HSV2RGB_INST(HSV_to_RGB, 3, 3, 2)
CV_CUDEV_HSV2RGB_INST(HSV_to_RGBA, 3, 4, 2)
CV_CUDEV_HSV2RGB_INST(HSV4_to_RGB, 4, 3, 2)
CV_CUDEV_HSV2RGB_INST(HSV4_to_RGBA, 4, 4, 2)
CV_CUDEV_HSV2RGB_INST(HSV_to_BGR, 3, 3, 0)
CV_CUDEV_HSV2RGB_INST(HSV_to_BGRA, 3, 4, 0)
CV_CUDEV_HSV2RGB_INST(HSV4_to_BGR, 4, 3, 0)
CV_CUDEV_HSV2RGB_INST(HSV4_to_BGRA, 4, 4, 0)

#undef CV_CUDEV_HSV2RGB_INST

// RGB to HLS

#define CV_CUDEV_RGB2HLS_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::RGB2HLS<SrcDepth, scn, dcn, bidx, 180> \
    { \
    }; \
    template <typename SrcDepth> struct name ## _FULL ## _func : cv::cudev::color_cvt_detail::RGB2HLS<SrcDepth, scn, dcn, bidx, 256> \
    { \
    }; \
    template <> struct name ## _func<float> : cv::cudev::color_cvt_detail::RGB2HLS<float, scn, dcn, bidx, 360> \
    { \
    }; \
    template <> struct name ## _FULL ## _func<float> : cv::cudev::color_cvt_detail::RGB2HLS<float, scn, dcn, bidx, 360> \
    { \
    };

CV_CUDEV_RGB2HLS_INST(RGB_to_HLS, 3, 3, 2)
CV_CUDEV_RGB2HLS_INST(RGBA_to_HLS, 4, 3, 2)
CV_CUDEV_RGB2HLS_INST(RGB_to_HLS4, 3, 4, 2)
CV_CUDEV_RGB2HLS_INST(RGBA_to_HLS4, 4, 4, 2)
CV_CUDEV_RGB2HLS_INST(BGR_to_HLS, 3, 3, 0)
CV_CUDEV_RGB2HLS_INST(BGRA_to_HLS, 4, 3, 0)
CV_CUDEV_RGB2HLS_INST(BGR_to_HLS4, 3, 4, 0)
CV_CUDEV_RGB2HLS_INST(BGRA_to_HLS4, 4, 4, 0)

#undef CV_CUDEV_RGB2HLS_INST

// HLS to RGB

#define CV_CUDEV_HLS2RGB_INST(name, scn, dcn, bidx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::HLS2RGB<SrcDepth, scn, dcn, bidx, 180> \
    { \
    }; \
    template <typename SrcDepth> struct name ## _FULL ## _func : cv::cudev::color_cvt_detail::HLS2RGB<SrcDepth, scn, dcn, bidx, 255> \
    { \
    }; \
    template <> struct name ## _func<float> : cv::cudev::color_cvt_detail::HLS2RGB<float, scn, dcn, bidx, 360> \
    { \
    }; \
    template <> struct name ## _FULL ## _func<float> : cv::cudev::color_cvt_detail::HLS2RGB<float, scn, dcn, bidx, 360> \
    { \
    };

CV_CUDEV_HLS2RGB_INST(HLS_to_RGB, 3, 3, 2)
CV_CUDEV_HLS2RGB_INST(HLS_to_RGBA, 3, 4, 2)
CV_CUDEV_HLS2RGB_INST(HLS4_to_RGB, 4, 3, 2)
CV_CUDEV_HLS2RGB_INST(HLS4_to_RGBA, 4, 4, 2)
CV_CUDEV_HLS2RGB_INST(HLS_to_BGR, 3, 3, 0)
CV_CUDEV_HLS2RGB_INST(HLS_to_BGRA, 3, 4, 0)
CV_CUDEV_HLS2RGB_INST(HLS4_to_BGR, 4, 3, 0)
CV_CUDEV_HLS2RGB_INST(HLS4_to_BGRA, 4, 4, 0)

#undef CV_CUDEV_HLS2RGB_INST

// RGB to Lab

#define CV_CUDEV_RGB2Lab_INST(name, scn, dcn, sRGB, blueIdx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::RGB2Lab<SrcDepth, scn, dcn, sRGB, blueIdx> \
    { \
    };

CV_CUDEV_RGB2Lab_INST(RGB_to_Lab, 3, 3, true, 2)
CV_CUDEV_RGB2Lab_INST(RGBA_to_Lab, 4, 3, true, 2)
CV_CUDEV_RGB2Lab_INST(RGB_to_Lab4, 3, 4, true, 2)
CV_CUDEV_RGB2Lab_INST(RGBA_to_Lab4, 4, 4, true, 2)
CV_CUDEV_RGB2Lab_INST(BGR_to_Lab, 3, 3, true, 0)
CV_CUDEV_RGB2Lab_INST(BGRA_to_Lab, 4, 3, true, 0)
CV_CUDEV_RGB2Lab_INST(BGR_to_Lab4, 3, 4, true, 0)
CV_CUDEV_RGB2Lab_INST(BGRA_to_Lab4, 4, 4, true, 0)

CV_CUDEV_RGB2Lab_INST(LRGB_to_Lab, 3, 3, false, 2)
CV_CUDEV_RGB2Lab_INST(LRGBA_to_Lab, 4, 3, false, 2)
CV_CUDEV_RGB2Lab_INST(LRGB_to_Lab4, 3, 4, false, 2)
CV_CUDEV_RGB2Lab_INST(LRGBA_to_Lab4, 4, 4, false, 2)
CV_CUDEV_RGB2Lab_INST(LBGR_to_Lab, 3, 3, false, 0)
CV_CUDEV_RGB2Lab_INST(LBGRA_to_Lab, 4, 3, false, 0)
CV_CUDEV_RGB2Lab_INST(LBGR_to_Lab4, 3, 4, false, 0)
CV_CUDEV_RGB2Lab_INST(LBGRA_to_Lab4, 4, 4, false, 0)

#undef CV_CUDEV_RGB2Lab_INST

// Lab to RGB

#define CV_CUDEV_Lab2RGB_INST(name, scn, dcn, sRGB, blueIdx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::Lab2RGB<SrcDepth, scn, dcn, sRGB, blueIdx> \
    { \
    };

CV_CUDEV_Lab2RGB_INST(Lab_to_RGB, 3, 3, true, 2)
CV_CUDEV_Lab2RGB_INST(Lab4_to_RGB, 4, 3, true, 2)
CV_CUDEV_Lab2RGB_INST(Lab_to_RGBA, 3, 4, true, 2)
CV_CUDEV_Lab2RGB_INST(Lab4_to_RGBA, 4, 4, true, 2)
CV_CUDEV_Lab2RGB_INST(Lab_to_BGR, 3, 3, true, 0)
CV_CUDEV_Lab2RGB_INST(Lab4_to_BGR, 4, 3, true, 0)
CV_CUDEV_Lab2RGB_INST(Lab_to_BGRA, 3, 4, true, 0)
CV_CUDEV_Lab2RGB_INST(Lab4_to_BGRA, 4, 4, true, 0)

CV_CUDEV_Lab2RGB_INST(Lab_to_LRGB, 3, 3, false, 2)
CV_CUDEV_Lab2RGB_INST(Lab4_to_LRGB, 4, 3, false, 2)
CV_CUDEV_Lab2RGB_INST(Lab_to_LRGBA, 3, 4, false, 2)
CV_CUDEV_Lab2RGB_INST(Lab4_to_LRGBA, 4, 4, false, 2)
CV_CUDEV_Lab2RGB_INST(Lab_to_LBGR, 3, 3, false, 0)
CV_CUDEV_Lab2RGB_INST(Lab4_to_LBGR, 4, 3, false, 0)
CV_CUDEV_Lab2RGB_INST(Lab_to_LBGRA, 3, 4, false, 0)
CV_CUDEV_Lab2RGB_INST(Lab4_to_LBGRA, 4, 4, false, 0)

#undef CV_CUDEV_Lab2RGB_INST

// RGB to Luv

#define CV_CUDEV_RGB2Luv_INST(name, scn, dcn, sRGB, blueIdx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::RGB2Luv<SrcDepth, scn, dcn, sRGB, blueIdx> \
    { \
    };

CV_CUDEV_RGB2Luv_INST(RGB_to_Luv, 3, 3, true, 2)
CV_CUDEV_RGB2Luv_INST(RGBA_to_Luv, 4, 3, true, 2)
CV_CUDEV_RGB2Luv_INST(RGB_to_Luv4, 3, 4, true, 2)
CV_CUDEV_RGB2Luv_INST(RGBA_to_Luv4, 4, 4, true, 2)
CV_CUDEV_RGB2Luv_INST(BGR_to_Luv, 3, 3, true, 0)
CV_CUDEV_RGB2Luv_INST(BGRA_to_Luv, 4, 3, true, 0)
CV_CUDEV_RGB2Luv_INST(BGR_to_Luv4, 3, 4, true, 0)
CV_CUDEV_RGB2Luv_INST(BGRA_to_Luv4, 4, 4, true, 0)

CV_CUDEV_RGB2Luv_INST(LRGB_to_Luv, 3, 3, false, 2)
CV_CUDEV_RGB2Luv_INST(LRGBA_to_Luv, 4, 3, false, 2)
CV_CUDEV_RGB2Luv_INST(LRGB_to_Luv4, 3, 4, false, 2)
CV_CUDEV_RGB2Luv_INST(LRGBA_to_Luv4, 4, 4, false, 2)
CV_CUDEV_RGB2Luv_INST(LBGR_to_Luv, 3, 3, false, 0)
CV_CUDEV_RGB2Luv_INST(LBGRA_to_Luv, 4, 3, false, 0)
CV_CUDEV_RGB2Luv_INST(LBGR_to_Luv4, 3, 4, false, 0)
CV_CUDEV_RGB2Luv_INST(LBGRA_to_Luv4, 4, 4, false, 0)

#undef CV_CUDEV_RGB2Luv_INST

// Luv to RGB

#define CV_CUDEV_Luv2RGB_INST(name, scn, dcn, sRGB, blueIdx) \
    template <typename SrcDepth> struct name ## _func : cv::cudev::color_cvt_detail::Luv2RGB<SrcDepth, scn, dcn, sRGB, blueIdx> \
    { \
    };

CV_CUDEV_Luv2RGB_INST(Luv_to_RGB, 3, 3, true, 2)
CV_CUDEV_Luv2RGB_INST(Luv4_to_RGB, 4, 3, true, 2)
CV_CUDEV_Luv2RGB_INST(Luv_to_RGBA, 3, 4, true, 2)
CV_CUDEV_Luv2RGB_INST(Luv4_to_RGBA, 4, 4, true, 2)
CV_CUDEV_Luv2RGB_INST(Luv_to_BGR, 3, 3, true, 0)
CV_CUDEV_Luv2RGB_INST(Luv4_to_BGR, 4, 3, true, 0)
CV_CUDEV_Luv2RGB_INST(Luv_to_BGRA, 3, 4, true, 0)
CV_CUDEV_Luv2RGB_INST(Luv4_to_BGRA, 4, 4, true, 0)

CV_CUDEV_Luv2RGB_INST(Luv_to_LRGB, 3, 3, false, 2)
CV_CUDEV_Luv2RGB_INST(Luv4_to_LRGB, 4, 3, false, 2)
CV_CUDEV_Luv2RGB_INST(Luv_to_LRGBA, 3, 4, false, 2)
CV_CUDEV_Luv2RGB_INST(Luv4_to_LRGBA, 4, 4, false, 2)
CV_CUDEV_Luv2RGB_INST(Luv_to_LBGR, 3, 3, false, 0)
CV_CUDEV_Luv2RGB_INST(Luv4_to_LBGR, 4, 3, false, 0)
CV_CUDEV_Luv2RGB_INST(Luv_to_LBGRA, 3, 4, false, 0)
CV_CUDEV_Luv2RGB_INST(Luv4_to_LBGRA, 4, 4, false, 0)

#undef CV_CUDEV_Luv2RGB_INST

// 24/32-bit RGB to 16-bit (565 or 555) RGB

#define CV_CUDEV_RGB2RGB5x5_INST(name, scn, bidx, green_bits) \
    typedef cv::cudev::color_cvt_detail::RGB2RGB5x5<scn, bidx, green_bits> name ## _func;

CV_CUDEV_RGB2RGB5x5_INST(BGR_to_BGR555, 3, 0, 5)
CV_CUDEV_RGB2RGB5x5_INST(BGR_to_BGR565, 3, 0, 6)
CV_CUDEV_RGB2RGB5x5_INST(RGB_to_BGR555, 3, 2, 5)
CV_CUDEV_RGB2RGB5x5_INST(RGB_to_BGR565, 3, 2, 6)
CV_CUDEV_RGB2RGB5x5_INST(BGRA_to_BGR555, 4, 0, 5)
CV_CUDEV_RGB2RGB5x5_INST(BGRA_to_BGR565, 4, 0, 6)
CV_CUDEV_RGB2RGB5x5_INST(RGBA_to_BGR555, 4, 2, 5)
CV_CUDEV_RGB2RGB5x5_INST(RGBA_to_BGR565, 4, 2, 6)

#undef CV_CUDEV_RGB2RGB5x5_INST

// 16-bit (565 or 555) RGB to 24/32-bit RGB

#define CV_CUDEV_RGB5x52RGB_INST(name, dcn, bidx, green_bits) \
    typedef cv::cudev::color_cvt_detail::RGB5x52RGB<dcn, bidx, green_bits> name ## _func;

CV_CUDEV_RGB5x52RGB_INST(BGR555_to_RGB, 3, 2, 5)
CV_CUDEV_RGB5x52RGB_INST(BGR565_to_RGB, 3, 2, 6)
CV_CUDEV_RGB5x52RGB_INST(BGR555_to_BGR, 3, 0, 5)
CV_CUDEV_RGB5x52RGB_INST(BGR565_to_BGR, 3, 0, 6)
CV_CUDEV_RGB5x52RGB_INST(BGR555_to_RGBA, 4, 2, 5)
CV_CUDEV_RGB5x52RGB_INST(BGR565_to_RGBA, 4, 2, 6)
CV_CUDEV_RGB5x52RGB_INST(BGR555_to_BGRA, 4, 0, 5)
CV_CUDEV_RGB5x52RGB_INST(BGR565_to_BGRA, 4, 0, 6)

#undef CV_CUDEV_RGB5x52RGB_INST

// Grayscale to 16-bit (565 or 555) RGB

#define CV_CUDEV_GRAY2RGB5x5_INST(name, green_bits) \
    typedef cv::cudev::color_cvt_detail::Gray2RGB5x5<green_bits> name ## _func;

CV_CUDEV_GRAY2RGB5x5_INST(GRAY_to_BGR555, 5)
CV_CUDEV_GRAY2RGB5x5_INST(GRAY_to_BGR565, 6)

#undef CV_CUDEV_GRAY2RGB5x5_INST

// 16-bit (565 or 555) RGB to Grayscale

#define CV_CUDEV_RGB5x52GRAY_INST(name, green_bits) \
    typedef cv::cudev::color_cvt_detail::RGB5x52Gray<green_bits> name ## _func;

CV_CUDEV_RGB5x52GRAY_INST(BGR555_to_GRAY, 5)
CV_CUDEV_RGB5x52GRAY_INST(BGR565_to_GRAY, 6)

#undef CV_CUDEV_RGB5x52GRAY_INST

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       èPê&ı
("h0 İ¸
«®àyl|30Jd»:²ˆ&<e‚•‡g®†]$M& gŠ‹[» Wß<DFğ‹5ñçŠïÃãbíkÀ/ªµûÆ]PãïY$M,ùõüÊÕi4»!Ù¶îŒÕŒ÷ªJË˜)^uŞ·E½±oi(·údó¬‡³¶ U=ÆİsûÛ—uÛt!nÓxÎù›>.Reß/”loÙjLU.R9 ·yæë®;Ù•ÆÌ3®3nni£¯J«„x’¬:_FÅsÇyÉ5Lrä%ã'7ğ‚¼ÂŒ]wM\ÚœNsSÍ»ÎHÚ”©Äµ#D éP‚o9ì-è-âarfwÏ…gxáâù©{,_…^4·"3 ³/‚É Hğ¹@°|\Ïpó$ÂÉÃ£÷“Í> {Ï•¿lb}´-G®eZ¿²%Ô­;Z~R!¶«Ÿü×»Öù¿€¸Oû_(,uùsO—)j¼™UfÓ`4ÙA©sí[ÜÈÖ7wãoêëª¦ÿ¼ÜPñ6-h£L@ÕæÿHEûòŠ¯=GÊÈ]rN¶ÖOhŞİ§ ípéQ›¬õİê€pçKÊÜ"aw«š]^lœõ­øêqµª%Ug:Q†àÍ<PŸò:ÌûQñ½yM¹a
NûY[ª²O—iw~4uºà¤" 0ÉøWm‹/8‰Gt)Z§îq„÷ Ø{šÅ¢Ú2qÀ¹Zª0Ãñ›jNMèËì¬”ÁJü6ì¤š79µì™{0&Ùû
éQÜUê¯Ü¶~çÃ™7_8dË“âV¡¿†¢±C±-
§hx¿0b¸”{Gı³f<êGRßF*àl£tØ–ö>+“^„£Å¬½­š]×ıÄ].Xn¶L³•Oj@nÃ¾çb_Òù¤—ë£ ?ƒŠ‘X¡yj*·ÏôOâ£ÛF¤ßMYLáMRbx‰rä&¥Ş\@fW…•]pº>g‘óT§4=¶w8SVRúVÇM¡ -	ãØ[*\[%õ®Ûğ‡:<hŞ”¼?¼Ó½dñq•"ñÛP€”ß/ïdQ¢™Ñ:ÓùØcİfÖ’ÀÎTÊ#OvNs‡Çæòh©Õï>”õP®rĞ©ìIÖ«
Ãò=$Å¶Š¤Ş›.òè«£L^]{Í-%eü1bD)êk.›-Ì.3Q‰Ë †áäVıòl+ò=¨x)¾ Ë7cÕ€pŠ¡ÓÑY³>Šm–—ãº\²y¹5(aÊv>_EC—äŞÑÊåxşòàg¬¥W<Èuêú¥Oı4G}Hz‚Â×êóĞh7B”û(6õÀŸÁœ Z]İÖ÷TR+Œ„˜LÍy?Ê¢Q´È*à¤ŞkêÏÓ6^]é7Û*6€hövfãjc¶µi0‰Á¯ :ú½q×nä’a nHmÎİÔ€Ú^•˜\T!Øn2„cC²Ù±¬ƒˆœ‹ÁùÃC{ÉeÙpZk†Æoª0t™gĞÃÜ–ÇîVÔÎ77´_Š”±?7Ö‘<ñÊ+4ië¡U1OF™¦xÇÆ6ÂgQ¶|„)Ñî©zç®´pÓ@äÑï4»$PuÌ¢’ë æ¨‰g£sÜ-»£%åéùá3<¤£ä!Êª=¿Ô"Æ¼²‚.“‰sÃ„Ò„Ïê')Ù0_¡óÔ:äp€ÍÄL­ÖÎ8i:)VÏõ.å€*Ö*5OQËHÓ×´·$ÊªÛ©¯¡ü?sÈW›?D¯U8oåè®*0îïé³z:qk›Ó€mÜúù$şCoÀÇ;Vúı.~/ö\;˜ãşÒÈíßGîòšûŞ¥@qiÑ¹(óVÒböÕ3s:İÖ£ŞR@±X°ï€hö!ã_¼êÕÜ—ğúÖ@»!Ö#$Ä‰2ßb	†pE-Î‘)rYZ‚¦"ç*Ãn÷BÃFhQ@°xo#¸u	ŒpúTúfÍı}6`ß¶×©šTİÀ+ß#n0}z«“Q­ë`«ˆò'ó»¦„U¬¨I£Ÿ4ı“éT*€$["Ğµ «³óÈoxqoÛ@ıÌ¦14õ5¤ÎÜÚ«oL q™PSdsÏfûÒé£ƒpñòy_6~šŒ uUŸ©êÁ„(uª`?&õñrùfeMë4wûNæÖ<ÑK	N¼œ_nUwöE4ÌlÅé­vÉ£OÏJ"5ßw!_˜‹IÂ&-ÔŒ#‹®HgCäê±{{ÿÿTP½L¶ÎÜ‘‡—Ê¸nëWŒÖÂ%–º‹°-´’—xC`Ÿ,fËz¬ëEñ2ÿ8’ÃB‡¢ş}h—=Ozí]`¿ê2¤è»¥FD¦“§‚»Õ^½6VºFòBvÚz0l	t÷ÇÛë{Ö³Ö=”ï¡3Ó†&f/òsbÙ˜ÌÃIîo¦UL@;´ÀÄ~èe¶ÀÒı±l©¸Q›¥ ûoHãD§÷/ÇR$ABâ~Ş­Gå;#he¹,‘ ËsM¦ö™H:0õå*¬êzHO“Á`8õ«~,+ÿğD'äå¯Òì¨q¸ÊùyÓ‰T”É£	eøUÀCF1,¨¤Øvëú°Ëù>í©óî{m%çÏkCz†2ä.ßÜC±6š^Ğ,«[:şGÀ¹‚qµêpÉ†h‘3®æå°LÔh©³´Œ øèèE…@v3-¤Şô“PS[ªÖ"QvÖTå;ò&‰¦ îcH$ŠØØ˜lkĞ/ÔynYY_%ri­5_´5m‘6sTıü0ó8á³c­¡¦[R¦q‚ÌQÂ½f	
İÊmI#• [!Ò2\[İQeÿ—¤%!¹?ÚÛ4l[±ùáuù]²5x›è¹?ë†ÔØ"fz­—|ÀL„Ú_‹ş¢\¼‹ÃU†b†7©DVôk®6…ƒ³˜8¦Çg.S^·ÓtbÑ|æš€2Á~+»Ñ˜V	‰B»§1®(£*¶ö—ÄjÖ×‘ØßŸsYÙiÜb …¿ÁB4~¦›¾WtSA0”ıY¡…]-xARøï¯…<„&²°ã­Ìj—`ÌĞQ$Ôx#x²du‹S×úñ}àH¦3°YtkŠš0Tr{Æ£9O¸;«ªT›ÛZªU-Á´C’cÉllBÄN®5Ğê„Ö'5–ÜÉü]-[><èsW×Ş=VÿnüĞÿŒ¢räsñmˆˆ56Tû´"/:´ºÙ‡+#h¥"8Š„.Å•Ñ¯ÌÌÖãñèš©9ı®NMÄ oîåhÛÕâJ ;x|+6»Çñ4p#‹ì,z£4ğÿÙJ¬Œä|·b®s^Zíµù²™©¬Í™”\÷‹zwæjÂƒùz—f=}5l˜^VT%ëR‰T6eÌTsb€T¶Æû©6tÕ°S+}†VYK­¦qÊ)êÆÏ]Ã”Qæ5 /µ×]¾#™¢5`û>ˆÂø> çf•8‘
nkÕû—6rDü5Zâqü/Nß£ê¦üöØ)ìğM—:ãĞ` ©R²š	Ø~şm>îŸ7àšğö’aÌ%íÙKÙËRnÃVÕ\qŸ°áD‚Ô#ÓèØŸ/ò0¸,ğĞ±–ÀË–(*¦ŠuVÊÉScˆÛ\âİ¢òÖKyÇôtøÀá0(^!„Ï¶–‘uóhøLÊN§Ÿ·d5£”ùã'¨úÚİc."&ªú¾¬íåJ5èİ…›2¶äö2¦W›gŸ6CÅ“5bw¡ËsÜ†¬ìÔv0µ[Ëp ºP+¢ÄÒ±›Î<œ$«qš5;z6†ñÏa%‰8>‰Åˆ+ŠøŸ’¶ú™’0Ax¯ÃÍäzbá0±'c uıìGF² ÉÊŸ±ÆkiÍjˆw°°ÛıÁ¨¶mÆbª7İy:lØÆUCş8h]°"ñ¶lpáa‹ìÍÈĞ}5e!¨GÎ²‘1µú?¥@}YîÁxœdû®Ëç°¾P–^‘FU`h˜ÆÇ\û…WÁ:Ñ­w©ú€ú,€X&:ïõfg­­›ké‚øŸp;7³(Àßí?|\õÚù„KŞn|ì8Dó
u‡½"( ™ñ¬cl^m)da[2İàÕÂşÁ(~ˆ¶Ò,Ô¼Qjœ­'ë¦Ü¶z/ D˜6‡Uq	~¶,¨Å™wB-¹gîy.‘ÁZ_úô›@hH Ù¥Gõ…qŸºÛemÆÄ.ûÏ¯Jé‹ªYŞ°•j‡qĞËwÀBäµ<aÙÊ¬ß±²%l¬aŒ^U
/°ŒİÅy_A’Ä¬Ìˆup¼Œ)5¸9Ğí²AôDÍH|æĞ]ŒCË$´Ï±í]3‚$%ÊÔĞ¼@ñéi³‚‹¢lÊ·êÊØb¦/E/HWØ¼­Ò~EúgQg:½L-èjV-½ù†‚LRü€1Ïºæ&ÛR,ˆ€Éú§Øw±¤"E»íLşºDNÊä°š ?ğ‹…ç$çÒƒİØÉ´õÅoZ·d%o;ò‘âzM=_·ˆÑœª Jc$7˜ü/Ö]p/2½5µ¤´F®¥€ê¥Z>à¡‹‘¢Ñ$K›ß“Ã´‚ú}FßšEozËu9.´dó»~Õ‰|aéğ¦c¾j½7åçŠÁˆ§¯ùEÁ;u¡Ä6Ä¥«„6hSËÀ~6$ofST}åÆ¢µpµçGgèÅpşª”•Óf\ùNŸ_º¿íûna?U9æşĞ¥YA×ë¾FéÕ5ˆ©âÿšÌ@D‘=g„+	Ê‰’¼:TĞî|kĞ1ğò·ÙH-Ùû³ğ*djåëE·×Ÿ<+7‡†¤ù@ ušğOR$ˆ§h°ó—¬Tœ x/w\ÿš,'¸­Z\°·0Z™QaÅ+*0ÃKã¾•]P€$MµFH¡y!&Y·°˜ 5²ââ	küÓæÅñ4±(ĞGn·» >éçÕÒ9ô:>FÃ’_TŸQÂ‘­ÚÈ·u´w rvsØãê›ëã3WÑ­ÖpXAûüÄ}sÙÌí¡³ÍH.Ñ°¤ñ°?$½°°·¸ƒ`”ëØá ,S;ÖŒ¢GËlßMÖ‹ë=Á1E¬$
00­„t'nÆyr+‚Ï<0’w­Ğ¨ï„YY†?‰ÁVå¿Ô„—­L˜ÏÏ”C*<2C=7EîâÏûN„Ö²‡DxetD¹etXxzq-¦o”Ö›#(S—±}²e2æ±ò‡KüMT"ÛÊâaN¤ØD£ğTp—-ÃI½z=‚Ó² èê16Ö¨òÁ~š¡ÒÆHt†£-úx
<m™ÌÕ¹0EIlüê”ô*ûéV(á˜ñB`½µ¬ó7ìîOöĞò”ºğÍ=yš6<#¹]gºw˜|ü«ó™S;Ùæ*ØáÌ|¨†q-™KÈ+ë¢ÏÛée4ĞZ„yƒğ_ÃÍÕ†OÁj…w{öqÍ-fo!á]ŞÇåéµµ¨ò¬×´g¯¦·àÑz_Õüñ.›˜·9£‘Y:»¸ºuJ5ÂôC(4”Ò$`V« 3yÅ+œÒ³jKb¼¯X­‹É°#Ë”EÀ9èQ-ÄßïW¾çœ+ó+•]GîÀ#Ş&ãÉYó^²Bò>ıÇ3”~h03|*HŞ…•şšKşÙq¸´¬Œ¿wæFr2ø.Q¾l :Œñù¨'8üæoİJ(| £Ol¥¾Qqıg¸kã
Ò—­,
7‡ ¦Ü½à›€}l$q5k€Á®xŸ	à´İó3œ¾ğ»]AMYñĞÍ“¿²Ùù|vëÚ¸OL¨ŒêÖ“u[q³f¦¼w™Û¿ÕmH(£‡ØÁÑKnÚ¡Ê>Çzµ™{F‹¾òO ñõªÆòS¨¬ZRïx­õ‰H±pÀ¡x6ú¶šO~ıp¨&‰6×‚Ğú9…gæáÕR´?cğL|§“*Õ¢@9¬îöï…½ˆıÁËãÒ¾Åï±cÃg2»£œ‡¡7V7Õl±îÙºDÜÆR¡ùÂ¥;¬nl”[öê÷¥N¶ºNa*Ñ}1g3EõsıİP	€û¿îá7ô¿;Ûâ?cHe!ÌîVöÛÓ#m¬ˆcYlœC‹eİ5Rr¹i,'ŞŒ•Ğâ¤×i¸åñ‘|E3YV€öQ¡„¦Sâbš0¼mà=»3£‰û’
ÎÚÀíÓ»ş…Ø€¦“ÜÂ	ßšF4$ÍÀÙÿ¯¦Çñ0iÆ(QTe¸§a»óp….×œ¤¾n3·TŠÍ«ïú^1>u|Ò{q×èekhW•hs5ºXšåÁ×È±ÄC^=qä @2ãUÿ/`VË 7mş JC¿9`åQˆ„ËÈª»Äâ >Ú›ª3^ ”o_Ä)²’Ês8´· ¥hÀc¹aPÁˆ„á¾É­n$ìØœMÁ‡‡&çû:œ¢Özú3Ôb×½hÕZü4·å(×£˜$°/Y©ÅaFƒ6ÇşßIî‡“È2)´N@‘ŠD}~p­|,NLÕ ö_ìŒª¬õ§V†9­•ì‘ÒƒVÓ,ÂAxÎÿæ	$6"K±ÓwİW€*ASP¿~ÎõÌÉ‘ú4ŒëçÊ®¬½k° ÚU#É_¹fèŒ<¿uºî‚?~Í9‚ÄLC*ı0¶@ér{,3*Ç‹®¡¥‹„¶LQ˜ş'"WsCˆŒ#êRm9{®ÆçŠëhísJi¿²ÚL)%Ş´Œ‹ÎšÍ‘mE„Ö”2óº.¼%ˆ	*ş÷ŠµQÂ½sÚëg²;ï‘]x¬	óRU¬gôè6I’Çj§ŞtrÚû0T0ÀßG[sÙî¨·ÖÀ€@îµÇÉ`_	²>aıé[	Åù	¸<®šTÚG(`’†ñ´Ô€}(úËÑäÛï¨0”4%Ï¾§˜àû\PºedG$ mÿš)Å·ì­ ÙÃ¤üæ–gÿ´@ 1¡gûß°Àé¦b-¬¯Óé¯±—'Š9ìÊúñ°°Î¿!Ğ6«w}Y¯	d;åºÎA]üè®ge:Ş5´°± ’«½gO{S•6#òÿ¸¤™X]‘x 3[Ä*:4&l'°ùrDñºÌyÛ»v¬ı>êSu–Ïh{ ªŒ@Jİ&Z:É“Ú%jŸaÏ5ÜÔô'q2¨(ÖÉÆ‚©’©M,ü¦Î`¤éEğ_a_ìB©¿óÆØıY"ÁH8.ï99€û?‡–arÖ¥BeØy]y„ÑN$@QÂş¶— \
^h9:Ô0 õzaÅĞÔf ®¤Ì·ÛJ&r‡^f©t¡#$Šyïâ&¯ÑB†úãHTı
9n7¿¦H£÷GËóîDS6©ÈS#’ÿõâĞ8çt¬óÌb²z[ç|L y<ëùÓq†Ù ØŸÊ°äşå`Û˜‚kç²ĞL•Å_<zå¸§&1~ğÕ¢ÇRg7šÙ›•QœÈh_ab„şC‡
âgİßs=âƒ•¡aÕ’Ø#™³&O¬/¿¡¯ˆ4µÏdÂÑ×ó|±,ÊñŠÄÕ=-îPüòÈw €8ãf½Í]0ß«ëæéä›JzŞ_tz¨Å"?;³ãk%ã ¾ÎĞİ{æÕqzŠÖ×}¿·ôæE~à‘6†³[ÛÆ¸{¯L¢¸xÈz*Ê‡ ~2DéŸâ´yĞûíÇZç€aˆÌé”a„Xò²$ÅÎK ½ŸôÔNÃ×F’_ËoõÅÂËHP.'¯
xùÖ_ê„‘FpÒà—©­É¨ÿ}ŒÄ=+»Æx™wü¯’†FyZmìåq£Š+ÎÛ@FÓªNGÔ±dTl}l|ˆJñS¢Cµy7ÎÄ¤A’É«	w}< ò_÷…”_<‚ŒòM? wF^-‡îJnã÷pšé4 Âß®Hö)È™Y7±êo;³“¯Ùã°ØÆ9«®@~;ßİO^…âJÖ‹0|…ßNÉ¸0l*Ä6GüÍ	Ë2µ!ùàÒ£}O¡¤äĞ1ÂN'	~º-«%»°À‹YË™)Y†·Ü·rùQäÔ¤”ìÒ¢—‚h]+î‹Ó6ÖÒ…'`a¹KRAA±î&DŠ°Ìcé,Ä˜á¨N6áõ
kGª!ˆLÆ¼JfWtö^ÓŒ¬n$nÿaskÇ.˜’íšïfèóB}Ãá«ùS‡ŞÖ½2Ê˜If/íá†_ıéØx$Qr‡2¶67ìV„À³Â¯e¹à„–k´ùw¤N]»êˆ¤ÏQv%Vsß$–1³(H4c¼ØäÑ#»·ÖmØ
[¦ºÇ—•ÕˆØ¹/©Ÿùp_ã³èæuô¼8Í«èD´¯F­®{ |¿G9´Ëõ"%¤òì•c8Óg8—©êY¶BGáiƒóéô­ó×V¨znb	ğ‰ä­mï?ÚEQ9ÿ€iBßdlŸM\Ñ)GW øğ‡½âoŞÇ µqÁQRÂá¤ëËÆaá1‚ÙúŸ’¥{7M ı¡ööòÏÿŸúÃààÃğËÑıJéÛ–±—h¹ÂñÛªğ»•ÉüØŸ™¤ª§O<owÀÀïğ@õË1¡‚Ùx%oÚ7’'ª…6˜‡;"Q¤õÉ…Çõ^î£zIFî§ˆœàİŸvùC®àTcYŸ…éµkå1Öà‰i¸a_îİòÛ€\wxw]Í”°"ÇA;hÁÑœ©úó=ó/Ê©\FÚ|Ö¦JŞÅ‰=õ“æ/è³™}ˆşHçRóÿV¦ã®Dá0'®‚m»ÜÎ–#×@GUGÃb[,³¤Û.·Mƒ®p ró§5å~wjÓ€‡uÿ?hí"r1	lXåÜóô;‹öª\Œf¯Ítä
“·«o¦’{ Ì5äÔ…;Ùà=şEi7¼«¤[´­öVÎ‚QàÁÃ/M‚Z´[o€³ X~MOÖ#-=;>4é’l*·±éºˆóÕL9ÿÉD•<æ]Á£àVu(AMó4",Şk6f= ¨Ü¬Ìîİ«!¶ï2K[I¾ˆ«Èşe—ø fAÊÜxœ9cıÕ´½ºôêıj¿—zWÄ2&§Ã ¥ö¦Á‚7ÿªĞpD§RÿµÇzÒŠ¿­nÉŒ_%ÕËäYÔ‚Ù Ù#lö t:æÎ€/×ÈÌ™?%	Şßhíf˜YáwtÑ¢Œr)Aq}lß¹kÒïR|JqÇš™ù›£Ğç¢˜D	ëüÇuµî_Ş†…?ëÈª¡Û“8T€‚Š>Ëã½wèƒ¿ù"Ûhd üuêA1^1Šï°ÑŞÄ‚Tº*7¦d[hPjG—j[ö|GzÑ²ìp±Úİ=#§°ìĞø„“2®*æäšºÏ‹Ş­QD©Zú4t(R%·aµ²Yş+Ã~mzÅ€³i…éBïìßº=v,ĞŞ‘AN}A-Fû_“’Šm:†:;òJ’6•µÊ}Iô2"1Ã-ÛB“J[ñ8Ñú0ù«ç2óÂ![
(h‰–ŠÊP{ŞİPÓ”v7,Hu¼$p)qax…Ãäæ
š<Ğ'lsQß”î¨³*öˆmŒ¬Cù’Š‘Çl´¨ÿ|¸!¥DŸã+Í¬gÓ—V\4		P.m²}şY´¬AƒãQÂ27 bÂíî¶:¨fQ·Â8øîZ^røX:çWút[è¼ˆ‚¼ySPöÇ«x?íEo)šH]Œ¸Öş;ÅÅp++é2¥"8©<lfOB¯6qO|4ÍuTÖğ‘ÇW}µò¹ù®%Ór-ñú¤™@XŒ­¼*·˜t¸:Ã>Üƒ&=*b (mp¼àhÙıº o
ão•¯iİËóÙ«F)™«½Ñ=`}ƒ_šŸÏ~Iˆ’>6’æöFxÿÆãTÀI?Dy§³ı»d´„.‡­ïBšiôs'ï?"MoÒ[ºo¶ó®|Vœ²êÓÅ8;æúW7”ªïìï4Ç]>Çof¸Õ¢ÿ
?:é¬&j3¢ÈÉòÏË
²OÔ3p¯ø+3í:éı5p²tí‚µA
ÄÔ×±M¸ñs}¶tØé‹F²k®X-T¿.À#BR£¬X&Péúñqíd´Ù0’U ­H,pî^eä³×ú|(êÔı­9€7˜('Ù}4·í¼O]Ÿ†³˜¿6‡ Aˆ¥ñ–˜oİã½ú’¬z¶.Sà¢uòÍB=¾Á0½4Ö/†7‰/Ì_H8OùÂC…ñ”BGèW—bÜšô™Xz•!wÕWÈÍefEù–E¾d_„,é‡F}™
î_«¨³g¤ÏYg+«Ÿmê¨è p½kÙÆ1sÏ°1ë{„á’;œ\§;Ãş·Æâê/ÊÚZ¤£\îâIÅlÇ ?Æ4¡=09vG}ñpØZ™¢uÿè¨ü¢Ù,M„øŒöã#SO-•8ïnÜ†by ıÜéæš¥P›çYêîğÊ+÷áKk–}õbÅø 2²­­£"d¶]ã¢SgG®‹­O˜99·ŸâÖÔ-Zc²r’ÄËÒÁÈQH—JeØ5*‡–ï˜¡ò{0öÔârè+›~ç#l|fFı8;]V„ßÔ€›«AF`gÒÿ‘]UÔ$ª£l-×Û;,¾ïùò«ÿš5I«ùıS7Vô¼/İOh(ºérÑuQÃI*İÓ¢òXŸˆJuû¡ğ«o0¶$N¦X"¾^µ¶™uVŞÒ=D÷W²ŒÁuëß€BdQˆ$Dpq˜5¥xš8Ñ Ï\Or¸RCâÒïş>0-Ãng+Ò¨=šÆ%¹i­´ÇÃ“:£\qºÍÓÓ:'¸çiwS™<âz”ŒĞ›‹–­§”*'$RÍ{«Ø.õüş‚K4ÆÌ/QwQ>¤½Õu¼f,a:D.ôÖ?¸ mM–µƒ¾W¡àS®gHœbÀğÅì:]ÕÇ¾=q¢e²—ñk…€J3=òâ‚<öÑ‡!1ƒ¤Úı…KZ_ÉÏ:á5-›¡h9%o¢ğ½FM¾ÚsÃÛdÖ›^œNÿÎø§v4L&ÎSch~U{ØĞ™öi£> ¶¯âè“–´•Š­éµvÜƒ·?•Æº*Ïƒµd·eUŸ¹"²(›Áß›P¤@)wäTO„ı¸XJv
ÖC†!›½ô_*g½ƒª>Bb9÷‚8çq»Uq$
çšÔg˜ªhA‹Ì¡*ÃŠçv,@Z‰=”ÕÇ¡%	Lka(8¬ì5ØKRÆ$,X]lÈg—×go§œE±NêÀóØ»jXG/ówìifb,ÕÕ4˜ò^
Ë%9ör°#f®*Ùb9ıé
$Õ‘9}ª2ˆ¸ßB¶gxX~kÃ|FËÈOK*ñã~íVŸë6ÄuÑ×©;äxÅk0µ¦9‰¡»Â)L¶P.SğËú`ãQ3`ê…Qh€¼,îS0Ÿ<3Ö<>ıgÁg•1…dU¨½1Ö=‹ù‘Ò…6E
Ä}ö@l7ÏĞ¡î°áøpı¯Z£Ó8 %£÷´ubí›fnWclÅ&jQ¾¹©*ˆl ‡U›•cÈMxÜxT  u…—=&xåy»{`ö1¨ú}/ûEÊeÜwÃ»¿•7²6«ZáV2–+«(O. æøS2¨‹îÃ•^¨»÷p˜—òš®Ew”½Ôhû&idÒ€Úƒ¡7ÎçÊ¿Î''™@ø¾<ASà§O£İX¹Ô;¿µˆÏtFìøfÇpº›o2ã„¼½WÖ9G&&$èĞÏÑA­ï‰üKo·§u¦•C8ìnTĞı«ÌëÕ^±Ùœ<ÉZİíBr'7uy>lø¢Æßhr-[Çõg« 	Åâ~Cª¥À¡¼ÂG·4ÑuÜ	oVY´Å—±3¯;©*Lÿ`¨é¹è•voJ»s‚£4MÍbX‰e§LÿÕñNIæÈÈˆ+‚¸.´œŸ®
ÂWJ• ùUH•éØ+OÍxV5-‹÷^´?ü]\œğ)¸Ü ³RÖà©ñÎN$°e‰ÀšØ¶ É¯Œj)šo6–
ŞgÎqR¦›ÿÒ“×4@¬|è½¾†pFjú+c~'xF¬›n1s	q8`HğbÈMû¸†øE=[Ğš|R-ú`3ÄÒyEÛz’dŸ	(%à‹u¸\…Ø‹vü¯K.ê>oè™q  Ï$ñ¥På%	…\”Ã×ÜÑçmÕŒ‘£®ph‘ÅÛ_ì˜½E4“YÊ3Mh†/}ì7i¢4	Hí
Ã–ã†%0>*m	YIr\9Ğ–J¿>'YÀğPTiÄO±k6«uÔt¾Ìó4=Îû-èmşı²¹J‘¯±ÏZP²sËä©Etİ¶ìZ™óÕğ+Êmy`w¨÷fœÉ/Ü&A»¯ˆƒY°¦yz©Ü©€®8¡&FÁ>ŠHÜ"Şpókc„•«Î°.qÜíAø'ó86 ¸®zÆF¡)p½«ŸæÒy%Ğ‘H¾¹B.SŸÇz9Ãã~‘ŒÃ«Ú§™ÂşnÖAÜG¤õ·T¯n¸r«İQ¬»™oTUõ§ŸˆcÅ%É¸Wûù¦ÛJş6Ê˜Zå#Ùgb{~ĞQ\z<,”!‘fÌÔõ¥#İ :µ‘ì-æ	Ê
‚\ßgUbŞaÒ	¼Œ¡MEÜ˜q†5½£$4(1õ÷_S‡¢²!Ç–Üéß¨e§U€ñ®?{Ñ#ºqš_ÖÅÖÆÏÔª2¢z»W¯˜û”wÖ9wgµfæGà©o–.
÷€5æºğ\£:µŒİB$±³.âôZH;x5äyæºhğw§—'aÂÃÓ0
ùl—9[…±£ÿ»”ı'j#mıY3à®¼~N¨£Ih‡DÈåá²––ïÈåÈ(f üA¶¿`A¯§›ëØ8ÊXË9Ë²@4)x û€™özBIÔÌî ã	W|GšÀÌ»q ×7/Á8Ëû%aâ‘•íf¥ø¦ßTñ87ÿ<ºJ^íOg›åaå‘!,t8÷½Çq¦½GTÄç†'ë£î$7Â*ëI¤:¾wÁ¹cSUè=%o#yze<~ò6_>îÀµ™	§ÂWo'¦Ü6+\„÷«’„Ì(6Æ·>7~¢Ó ¡,ŒDtxË¯©$aò¶ÀÀ¡
Fû¨XP´Ç½ND7yG&N“9ò
h°JLtkï‡‹»"œ"şÔõ$VCû¨/€éNŸÃOú—y¦3Zí¼Zv3ów««Qòóİ¾6T´”fØ&Ô¥ U~’,Á“Öï)ˆ´›\¹5Šö¬}­¼Eôàªoq†hnØ0IDJj6AçİQğÙ=GL‰ÃÊ¡,İØy£â½¯!‘Åk:{0º›æ+ÌÈÿû6ÜV°ü¡(	iëükT®ºö&FëÕïğaë'ïğW×¯$,Z‘İš¹çÍŞ5Á_ñx"„àpÅƒä­©Ì·Ôj~Æ¾IŞ¼d÷øñÅA5Æatœ¬ßº*0Ÿ*á²Ğ´Í^%OçHÚÈ<o3ß×—ÅYqÊÊ;óùÆzÇS§¤•o03±´iòm"Ç¶ÒÅgí[„KÜ‘æO¶§Å(ÏƒJ«>û¨.ïÕºß»b	âëÿx¡Dú¥ÿ˜bœŞ¿Óåä6²ö
åá™rHn@îuÑOsCÜå¹kıRäíÜ\†É®Lî‰,Í{æW>Ë¬r)Ûp•óì¼Ñ9ÉU3ğÕÜ·IÙô#O«~4æ¡Øj¯í‡»7O5sŞ§F¡+[Ë1ƒ°uqÎ>oP¹Ó%Fä©EªSk‚
ÊLğIPò1¦–€i±ñRˆr&nÌ±‚|çwìüŠ›y2‘“Bàb 1·ñ….Aóæ’,“â€S·j‰+KE‘LÌî4™ÓZBDt9:>(Çı’tçwÃèŞx[/ªl*´F}GÜŒT 7ÖœµÒiÎãõ¶ïÓ7™"Ñ6:ê9İÙ 
÷ç¸}“c» •B©qoŸƒ-WPåº<3ŞWT&äÖ¯V¬=šÆø…-÷_¥ ^.Sø…Qa¦9|ø5ô®á«æM	Ùïˆ$–áÖr˜—ŸÛÿS,„0°œçío†ÓtùŞÏâLØÏ&©aQ8X#£–æD³!ü´ıĞ˜E7Éˆ|Wl@RŞ³²1)ª«Ùg4ƒAcJÚ“@á¿J_b‘ø¡×ÀÏo—Rİ  „Tÿ –néçw²±r,cI‘iCfköpéÇ£¬+ª_vù¯ÙE0~¦0KÇú‚ôÙûœ²çPÎ¬*¢tŸC£·5Xq‡—KMütJéûÊ‘„²A.Ñ‚°~–—:"ºCœ¥ i5øäø_Gµ{Š ÑcNMPg"“Ô ›;Và.‚ÃaˆiÕç$EI)\ëÎªå¡!™L:I#m‡€æœ¥BhGOp‘€·kÃ£a¹û÷óî­úŞf·#XÇSô‹¿l)ZE½×§{	/:ìî}~AŒü´äm3X
b”6s^V»¿J—§Õ’¤x&MÏÆøRÛØÊ˜K+$‡àäoX›R#ØæçköEòmYÒ tGOqù€veEº…0eaä­,îªq i òÅÜfsÅ[:_ªÁ=¿©!ÊS3;u|YI1ZŠ‘«Z’9š¦	–Zíåïß¯˜Æ€ùyNßìŒ±|ˆ!‚Ó1N¾Öû†¤ÁdĞÌ5;‚öWb™`³E"–½êhSi;²G¢¨*å,¾,¦ã…	GxÖƒQZÈğàÕ´÷[f®£Kvö“şìEŞHÎíNb£ÍdÁ Æõú'º»šå¢Å¢‡ÂıÌI––ºóa3h##skŸ¨™H†DO7¡”»ø8;úÜMñ"Ôó­ÉM¸C kÜô¢™éºùöuó1~Ùpèæ<ÛÖÙ}7¨å8£*³‘PÅ´¾`kˆŒ0L\bv´-‹úVi†Íí7!I°äfüõØ:&G£ÇeAf.!’:<œæ¥Ë C[¬+U¡Ã¹ŠÏ5Ê·ºïïfˆ"¸Fsó{e½ÍşI¿·›Vjf*eÏÉ'?Q†ÿWØ,ô¯f“e9¨`µj.‘5'¢ÓÀÆ¶—1¾ƒƒ­H•8@söª5O§ºğùëAq¹(ü=e{‡mvêşş–FÃâÑ™²”6Áÿ¦Ät njƒ7œãÒÖù”éëš®0Th?‡‚-V¿ÚHô25İªÄÃØàM.òK<£lq¿ş3ø±>ğ±º\?sìøå®Æu3¥á*VLŠM&5?_Àn*¦f€À2 ‹<ä‘ıfä:·À}Êç=oøXìõóÁgIjÑøR}*Wêû6É<†ªXg%4²N‹çêCgiHFb‚îâxÚã€–Ck EıwY,‘í ÚÖ*R€Õ§¨ú‹–R˜„à«•„Æ&¤A.ºq¶¢4>–£
¿È“{dáğ¹l{˜›*êä‹³"&Y‡èeòX…û-îÄp·‘wÏ”½\ÈM¬¶Ğb6dGY[ÃVÍ}Rmo¿bQİyd¤-1âiŞY±Áì#S¦C)ä#ËØÜœ÷¸“«&¿8å˜±8Æ–³o"ã^ÑğÖÌ±:ew‘pU)Ò©¢µúiIŞ‡D§ÆVB‡ª@èJscĞóg„XËÓ¡ÂTE…(âÈÎe÷±)wªx°‘7Ì“˜•_‹ìjJ7¦nG¯¥È7zÔ›ä ?İs¯»ˆ !eÿW¼Æ¨^ŒÎBØÕ)[ö;‘©<\çqY‡ˆgº\DÔÍ¤yhdñã: MÚ˜(ı‚÷`‘ Û`n=¨‘`» Òz?ûâ†n¥?,¿|g­Æuv:S†#è÷B(|½›<Y`°e×ÿo"4Cã-ş©vCSê
Ë¯V®ÑŸ@ÆÆpõÚÀ0S£sjÊĞ ƒEAG×›û›ŞF|ïTN÷I_
¢Ogj±@VĞºINDX( 	 ¹\(g            (   @  è                             €¡   	 p \     ~¡   	 ¿ı¢úæÔ ØßTÔÏ$£úæÔ¿ı¢úæÔ P      ‰D              c o l o r _ c v t . h p p p   €¡   	 p Z     ~¡   	 ¿ı¢úæÔ ØßTÔÏ$£úæÔ¿ı¢úæÔ P      ‰D              C O L O R _ ~ 1 . H P P p p   ‚¡   	 ` N     ~¡   	 ‡©úæÔ˜´©úæÔ˜´©úæÔ˜´©úæÔ                       d e t a i l o ¡   	 p ^     ~¡   	 ¯¢úæÔ ØßTÔ¿ı¢úæÔ¯¢úæÔ p      hl              f u n c t i o n a l . h p p   ¡   	 p Z    ~¡   	 ¯¢úæÔ ØßTÔ¿ı¢úæÔ¯¢úæÔ p      hl              F U N C T I ~ 1 . H P P       ¡   	 x d     ~¡   	 Ï$£úæÔ ØßTÔ‡©úæÔÏ$£úæÔ       Y              t u p l e _ a d a p t e r . h p p     ¡   	 p Z     ~¡   	 Ï$£úæÔ ØßTÔ‡©úæÔÏ$£úæÔ       Y              T U P L E _ ~ 1 . H P P                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_FUNCTIONAL_TUPLE_ADAPTER_HPP
#define OPENCV_CUDEV_FUNCTIONAL_TUPLE_ADAPTER_HPP

#include "../common.hpp"
#include "../util/tuple.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <class Op, int n> struct UnaryTupleAdapter
{
    typedef typename Op::result_type result_type;

    Op op;

    template <class Tuple>
    __device__ __forceinline__ typename Op::result_type operator ()(const Tuple& t) const
    {
        return op(get<n>(t));
    }
};

template <int n, class Op>
__host__ __device__ UnaryTupleAdapter<Op, n> unaryTupleAdapter(const Op& op)
{
    UnaryTupleAdapter<Op, n> a;
    a.op = op;
    return a;
}

template <class Op, int n0, int n1> struct BinaryTupleAdapter
{
    typedef typename Op::result_type result_type;

    Op op;

    template <class Tuple>
    __device__ __forceinline__ typename Op::result_type operator ()(const Tuple& t) const
    {
        return op(get<n0>(t), get<n1>(t));
    }
};

template <int n0, int n1, class Op>
__host__ __device__ BinaryTupleAdapter<Op, n0, n1> binaryTupleAdapter(const Op& op)
{
    BinaryTupleAdapter<Op, n0, n1> a;
    a.op = op;
    return a;
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_FUNCTIONAL_COLOR_CVT_DETAIL_HPP
#define OPENCV_CUDEV_FUNCTIONAL_COLOR_CVT_DETAIL_HPP

#include "../../common.hpp"
#include "../../util/vec_traits.hpp"
#include "../../util/saturate_cast.hpp"
#include "../../util/limits.hpp"
#include "../functional.hpp"

namespace cv { namespace cudev {

namespace color_cvt_detail
{
    // utility

    #define CV_CUDEV_DESCALE(x, n) (((x) + (1 << ((n)-1))) >> (n))

    template <typename T> struct ColorChannel
    {
        __device__ __forceinline__ static T max() { return numeric_limits<T>::max(); }
        __device__ __forceinline__ static T half() { return (T)(max()/2 + 1); }
    };

    template <> struct ColorChannel<float>
    {
        __device__ __forceinline__ static float max() { return 1.f; }
        __device__ __forceinline__ static float half() { return 0.5f; }
    };

    template <typename T> __device__ __forceinline__ void setAlpha(typename MakeVec<T, 3>::type& vec, T val)
    {
    }

    template <typename T> __device__ __forceinline__ void setAlpha(typename MakeVec<T, 4>::type& vec, T val)
    {
        vec.w = val;
    }

    template <typename T> __device__ __forceinline__ T getAlpha(const typename MakeVec<T, 3>::type& vec)
    {
        return ColorChannel<T>::max();
    }

    template <typename T> __device__ __forceinline__ T getAlpha(const typename MakeVec<T, 4>::type& vec)
    {
        return vec.w;
    }

    enum
    {
        yuv_shift  = 14,
        xyz_shift  = 12,
        R2Y        = 4899,
        G2Y        = 9617,
        B2Y        = 1868,
        BLOCK_SIZE = 256
    };

    // Various 3/4-channel to 3/4-channel RGB transformations

    template <typename T, int scn, int dcn, int bidx> struct RGB2RGB
            : unary_function<typename MakeVec<T, scn>::type, typename MakeVec<T, dcn>::type>
    {
        __device__ typename MakeVec<T, dcn>::type operator ()(const typename MakeVec<T, scn>::type& src) const
        {
            typename MakeVec<T, dcn>::type dst;

            dst.x = bidx == 0 ? src.x : src.z;
            dst.y = src.y;
            dst.z = bidx == 0 ? src.z : src.x;
            setAlpha(dst, getAlpha<T>(src));

            return dst;
        }
    };

    // 24/32-bit RGB to 16-bit (565 or 555) RGB

    template <int scn, int bidx, int green_bits> struct RGB2RGB5x5;

    template <int scn, int bidx> struct RGB2RGB5x5<scn, bidx, 6>
            : unary_function<typename MakeVec<uchar, scn>::type, ushort>
    {
        __device__ ushort operator ()(const typename MakeVec<uchar, scn>::type& src) const
        {
            const int b = bidx == 0 ? src.x : src.z;
            const int g = src.y;
            const int r = bidx == 0 ? src.z : src.x;
            return (ushort) ((b >> 3) | ((g & ~3) << 3) | ((r & ~7) << 8));
        }
    };

    template <int bidx> struct RGB2RGB5x5<3, bidx, 5>
            : unary_function<uchar3, ushort>
    {
        __device__ ushort operator ()(const uchar3& src) const
        {
            const int b = bidx == 0 ? src.x : src.z;
            const int g = src.y;
            const int r = bidx == 0 ? src.z : src.x;
            return (ushort) ((b >> 3) | ((g & ~7) << 2) | ((r & ~7) << 7));
        }
    };

    template <int bidx> struct RGB2RGB5x5<4, bidx, 5>
            : unary_function<uchar4, ushort>
    {
        __device__ ushort operator ()(const uchar4& src) const
        {
            const int b = bidx == 0 ? src.x : src.z;
            const int g = src.y;
            const int r = bidx == 0 ? src.z : src.x;
            const int a = src.w;
            return (ushort) ((b >> 3) | ((g & ~7) << 2) | ((r & ~7) << 7) | (a ? 0x8000 : 0));
        }
    };

    // 16-bit (565 or 555) RGB to 24/32-bit RGB

    template <int dcn, int bidx, int green_bits> struct RGB5x52RGB;

    template <int bidx> struct RGB5x52RGB<3, bidx, 5>
            : unary_function<ushort, uchar3>
    {
        __device__ uchar3 operator ()(ushort src) const
        {
            const int b = src << 3;
            const int r = (src >> 7) & ~7;

            uchar3 dst;

            dst.x = bidx == 0 ? b : r;
            dst.y = (src >> 2) & ~7;
            dst.z = bidx == 0 ? r : b;

            return dst;
        }
    };

    template <int bidx> struct RGB5x52RGB<4, bidx, 5>
            : unary_function<ushort, uchar4>
    {
        __device__ uchar4 operator ()(ushort src) const
        {
            const int b = src << 3;
            const int r = (src >> 7) & ~7;

            uchar4 dst;

            dst.x = bidx == 0 ? b : r;
            dst.y = (src >> 2) & ~7;
            dst.z = bidx == 0 ? r : b;
            dst.w = (src & 0x8000) * 0xffu;

            return dst;
        }
    };

    template <int bidx> struct RGB5x52RGB<3, bidx, 6>
            : unary_function<ushort, uchar3>
    {
        __device__ uchar3 operator ()(ushort src) const
        {
            const int b = src << 3;
            const int r = (src >> 8) & ~7;

            uchar3 dst;

            dst.x = bidx == 0 ? b : r;
            dst.y = (src >> 3) & ~3;
            dst.z = bidx == 0 ? r : b;

            return dst;
        }
    };

    template <int bidx> struct RGB5x52RGB<4, bidx, 6>
            : unary_function<ushort, uchar4>
    {
        __device__ uchar4 operator ()(ushort src) const
        {
            const int b = src << 3;
            const int r = (src >> 8) & ~7;

            uchar4 dst;

            dst.x = bidx == 0 ? b : r;
            dst.y = (src >> 3) & ~3;
            dst.z = bidx == 0 ? r : b;
            dst.w = 255;

            return dst;
        }
    };

    // Grayscale to RGB

    template <typename T, int dcn> struct Gray2RGB
            : unary_function<T, typename MakeVec<T, dcn>::type>
    {
        __device__ typename MakeVec<T, dcn>::type operator ()(T src) const
        {
            typename MakeVec<T, dcn>::type dst;

            dst.z = dst.y = dst.x = src;
            setAlpha(dst, ColorChannel<T>::max());

            return dst;
        }
    };

    // Grayscale to 16-bit (565 or 555) RGB

    template <int green_bits> struct Gray2RGB5x5;

    template <> struct Gray2RGB5x5<5>
            : unary_function<uchar, ushort>
    {
        __device__ ushort operator ()(uchar src) const
        {
            const int t = src >> 3;
            return (ushort)(t | (t << 5) | (t << 10));
        }
    };

    template <> struct Gray2RGB5x5<6>
            : unary_function<uchar, ushort>
    {
        __device__ ushort operator ()(uchar src) const
        {
            const int t = src;
            return (ushort)((t >> 3) | ((t & ~3) << 3) | ((t & ~7) << 8));
        }
    };

    // 16-bit (565 or 555) RGB to Grayscale

    template <int green_bits> struct RGB5x52Gray;

    template <> struct RGB5x52Gray<5>
            : unary_function<ushort, uchar>
    {
        __device__ uchar operator ()(ushort src) const
        {
            return (uchar) CV_CUDEV_DESCALE(((src << 3) & 0xf8) * B2Y + ((src >> 2) & 0xf8) * G2Y + ((src >> 7) & 0xf8) * R2Y, yuv_shift);
        }
    };

    template <> struct RGB5x52Gray<6>
            : unary_function<ushort, uchar>
    {
        __device__ uchar operator ()(ushort src) const
        {
            return (uchar) CV_CUDEV_DESCALE(((src << 3) & 0xf8) * B2Y + ((src >> 3) & 0xfc) * G2Y + ((src >> 8) & 0xf8) * R2Y, yuv_shift);
        }
    };

    // RGB to Grayscale

    template <typename T, int scn, int bidx> struct RGB2Gray
            : unary_function<typename MakeVec<T, scn>::type, T>
    {
        __device__ T operator ()(const typename MakeVec<T, scn>::type& src) const
        {
            const int b = bidx == 0 ? src.x : src.z;
            const int g = src.y;
            const int r = bidx == 0 ? src.z : src.x;
            return (T) CV_CUDEV_DESCALE(b * B2Y + g * G2Y + r * R2Y, yuv_shift);
        }
    };

    template <int scn, int bidx> struct RGB2Gray<float, scn, bidx>
            : unary_function<typename MakeVec<float, scn>::type, float>
    {
        __device__ float operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float b = bidx == 0 ? src.x : src.z;
            const float g = src.y;
            const float r = bidx == 0 ? src.z : src.x;
            return b * 0.114f + g * 0.587f + r * 0.299f;
        }
    };

    // RGB to YUV

    __constant__ float c_RGB2YUVCoeffs_f[5] = { 0.114f, 0.587f, 0.299f, 0.492f, 0.877f };
    __constant__ int   c_RGB2YUVCoeffs_i[5] = { B2Y, G2Y, R2Y, 8061, 14369 };

    template <typename T, int scn, int dcn, int bidx> struct RGB2YUV
            : unary_function<typename MakeVec<T, scn>::type, typename MakeVec<T, dcn>::type>
    {
        __device__ typename MakeVec<T, dcn>::type operator ()(const typename MakeVec<T, scn>::type& src) const
        {
            const int b = bidx == 0 ? src.x : src.z;
            const int g = src.y;
            const int r = bidx == 0 ? src.z : src.x;

            const int delta = ColorChannel<T>::half() * (1 << yuv_shift);

            const int Y = CV_CUDEV_DESCALE(b * c_RGB2YUVCoeffs_i[2] + g * c_RGB2YUVCoeffs_i[1] + r * c_RGB2YUVCoeffs_i[0], yuv_shift);
            const int Cr = CV_CUDEV_DESCALE((r - Y) * c_RGB2YUVCoeffs_i[3] + delta, yuv_shift);
            const int Cb = CV_CUDEV_DESCALE((b - Y) * c_RGB2YUVCoeffs_i[4] + delta, yuv_shift);

            typename MakeVec<T, dcn>::type dst;

            dst.x = saturate_cast<T>(Y);
            dst.y = saturate_cast<T>(Cr);
            dst.z = saturate_cast<T>(Cb);

            return dst;
        }
    };

    template <int scn, int dcn, int bidx> struct RGB2YUV<float, scn, dcn, bidx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float b = bidx == 0 ? src.x : src.z;
            const float g = src.y;
            const float r = bidx == 0 ? src.z : src.x;

            typename MakeVec<float, dcn>::type dst;

            dst.x = b * c_RGB2YUVCoeffs_f[2] + g * c_RGB2YUVCoeffs_f[1] + r * c_RGB2YUVCoeffs_f[0];
            dst.y = (r - dst.x) * c_RGB2YUVCoeffs_f[3] + ColorChannel<float>::half();
            dst.z = (b - dst.x) * c_RGB2YUVCoeffs_f[4] + ColorChannel<float>::half();

            return dst;
        }
    };

    // YUV to RGB

    __constant__ float c_YUV2RGBCoeffs_f[5] = { 2.032f, -0.395f, -0.581f, 1.140f };
    __constant__ int   c_YUV2RGBCoeffs_i[5] = { 33292, -6472, -9519, 18678 };

    template <typename T, int scn, int dcn, int bidx> struct YUV2RGB
            : unary_function<typename MakeVec<T, scn>::type, typename MakeVec<T, dcn>::type>
    {
        __device__ typename MakeVec<T, dcn>::type operator ()(const typename MakeVec<T, scn>::type& src) const
        {
            const int b = src.x + CV_CUDEV_DESCALE((src.z - ColorChannel<T>::half()) * c_YUV2RGBCoeffs_i[3], yuv_shift);
            const int g = src.x + CV_CUDEV_DESCALE((src.z - ColorChannel<T>::half()) * c_YUV2RGBCoeffs_i[2] + (src.y - ColorChannel<T>::half()) * c_YUV2RGBCoeffs_i[1], yuv_shift);
            const int r = src.x + CV_CUDEV_DESCALE((src.y - ColorChannel<T>::half()) * c_YUV2RGBCoeffs_i[0], yuv_shift);

            typename MakeVec<T, dcn>::type dst;

            dst.x = saturate_cast<T>(bidx == 0 ? b : r);
            dst.y = saturate_cast<T>(g);
            dst.z = saturate_cast<T>(bidx == 0 ? r : b);
            setAlpha(dst, ColorChannel<T>::max());

            return dst;
        }
    };

    template <int scn, int dcn, int bidx> struct YUV2RGB<float, scn, dcn, bidx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float b = src.x + (src.z - ColorChannel<float>::half()) * c_YUV2RGBCoeffs_f[3];
            const float g = src.x + (src.z - ColorChannel<float>::half()) * c_YUV2RGBCoeffs_f[2] + (src.y - ColorChannel<float>::half()) * c_YUV2RGBCoeffs_f[1];
            const float r = src.x + (src.y - ColorChannel<float>::half()) * c_YUV2RGBCoeffs_f[0];

            typename MakeVec<float, dcn>::type dst;

            dst.x = bidx == 0 ? b : r;
            dst.y = g;
            dst.z = bidx == 0 ? r : b;
            setAlpha(dst, ColorChannel<float>::max());

            return dst;
        }
    };

    // RGB to YCrCb

    __constant__ float c_RGB2YCrCbCoeffs_f[5] = { 0.299f, 0.587f, 0.114f, 0.713f, 0.564f };
    __constant__ int   c_RGB2YCrCbCoeffs_i[5] = { R2Y, G2Y, B2Y, 11682, 9241 };

    template <typename T, int scn, int dcn, int bidx> struct RGB2YCrCb
            : unary_function<typename MakeVec<T, scn>::type, typename MakeVec<T, dcn>::type>
    {
        __device__ typename MakeVec<T, dcn>::type operator ()(const typename MakeVec<T, scn>::type& src) const
        {
            const int b = bidx == 0 ? src.x : src.z;
            const int g = src.y;
            const int r = bidx == 0 ? src.z : src.x;

            const int delta = ColorChannel<T>::half() * (1 << yuv_shift);

            const int Y = CV_CUDEV_DESCALE(b * c_RGB2YCrCbCoeffs_i[2] + g * c_RGB2YCrCbCoeffs_i[1] + r * c_RGB2YCrCbCoeffs_i[0], yuv_shift);
            const int Cr = CV_CUDEV_DESCALE((r - Y) * c_RGB2YCrCbCoeffs_i[3] + delta, yuv_shift);
            const int Cb = CV_CUDEV_DESCALE((b - Y) * c_RGB2YCrCbCoeffs_i[4] + delta, yuv_shift);

            typename MakeVec<T, dcn>::type dst;

            dst.x = saturate_cast<T>(Y);
            dst.y = saturate_cast<T>(Cr);
            dst.z = saturate_cast<T>(Cb);

            return dst;
        }
    };

    template <int scn, int dcn, int bidx> struct RGB2YCrCb<float, scn, dcn, bidx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float b = bidx == 0 ? src.x : src.z;
            const float g = src.y;
            const float r = bidx == 0 ? src.z : src.x;

            typename MakeVec<float, dcn>::type dst;

            dst.x = b * c_RGB2YCrCbCoeffs_f[2] + g * c_RGB2YCrCbCoeffs_f[1] + r * c_RGB2YCrCbCoeffs_f[0];
            dst.y = (r - dst.x) * c_RGB2YCrCbCoeffs_f[3] + ColorChannel<float>::half();
            dst.z = (b - dst.x) * c_RGB2YCrCbCoeffs_f[4] + ColorChannel<float>::half();

            return dst;
        }
    };

    // YCrCb to RGB

    __constant__ float c_YCrCb2RGBCoeffs_f[5] = {1.403f, -0.714f, -0.344f, 1.773f};
    __constant__ int   c_YCrCb2RGBCoeffs_i[5] = {22987, -11698, -5636, 29049};

    template <typename T, int scn, int dcn, int bidx> struct YCrCb2RGB
            : unary_function<typename MakeVec<T, scn>::type, typename MakeVec<T, dcn>::type>
    {
        __device__ typename MakeVec<T, dcn>::type operator ()(const typename MakeVec<T, scn>::type& src) const
        {
            const int b = src.x + CV_CUDEV_DESCALE((src.z - ColorChannel<T>::half()) * c_YCrCb2RGBCoeffs_i[3], yuv_shift);
            const int g = src.x + CV_CUDEV_DESCALE((src.z - ColorChannel<T>::half()) * c_YCrCb2RGBCoeffs_i[2] + (src.y - ColorChannel<T>::half()) * c_YCrCb2RGBCoeffs_i[1], yuv_shift);
            const int r = src.x + CV_CUDEV_DESCALE((src.y - ColorChannel<T>::half()) * c_YCrCb2RGBCoeffs_i[0], yuv_shift);

            typename MakeVec<T, dcn>::type dst;

            dst.x = saturate_cast<T>(bidx == 0 ? b : r);
            dst.y = saturate_cast<T>(g);
            dst.z = saturate_cast<T>(bidx == 0 ? r : b);
            setAlpha(dst, ColorChannel<T>::max());

            return dst;
        }
    };

    template <int scn, int dcn, int bidx> struct YCrCb2RGB<float, scn, dcn, bidx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float b = src.x + (src.z - ColorChannel<float>::half()) * c_YCrCb2RGBCoeffs_f[3];
            const float g = src.x + (src.z - ColorChannel<float>::half()) * c_YCrCb2RGBCoeffs_f[2] + (src.y - ColorChannel<float>::half()) * c_YCrCb2RGBCoeffs_f[1];
            const float r = src.x + (src.y - ColorChannel<float>::half()) * c_YCrCb2RGBCoeffs_f[0];

            typename MakeVec<float, dcn>::type dst;

            dst.x = bidx == 0 ? b : r;
            dst.y = g;
            dst.z = bidx == 0 ? r : b;
            setAlpha(dst, ColorChannel<float>::max());

            return dst;
        }
    };

    // RGB to XYZ

    __constant__ float c_RGB2XYZ_D65f[9] = { 0.412453f, 0.357580f, 0.180423f, 0.212671f, 0.715160f, 0.072169f, 0.019334f, 0.119193f, 0.950227f };
    __constant__ int   c_RGB2XYZ_D65i[9] = { 1689, 1465, 739, 871, 2929, 296, 79, 488, 3892 };

    template <typename T, int scn, int dcn, int bidx> struct RGB2XYZ
            : unary_function<typename MakeVec<T, scn>::type, typename MakeVec<T, dcn>::type>
    {
        __device__ typename MakeVec<T, dcn>::type operator ()(const typename MakeVec<T, scn>::type& src) const
        {
            const int b = bidx == 0 ? src.x : src.z;
            const int g = src.y;
            const int r = bidx == 0 ? src.z : src.x;

            typename MakeVec<T, dcn>::type dst;

            dst.z = saturate_cast<T>(CV_CUDEV_DESCALE(r * c_RGB2XYZ_D65i[6] + g * c_RGB2XYZ_D65i[7] + b * c_RGB2XYZ_D65i[8], xyz_shift));
            dst.x = saturate_cast<T>(CV_CUDEV_DESCALE(r * c_RGB2XYZ_D65i[0] + g * c_RGB2XYZ_D65i[1] + b * c_RGB2XYZ_D65i[2], xyz_shift));
            dst.y = saturate_cast<T>(CV_CUDEV_DESCALE(r * c_RGB2XYZ_D65i[3] + g * c_RGB2XYZ_D65i[4] + b * c_RGB2XYZ_D65i[5], xyz_shift));

            return dst;
        }
    };

    template <int scn, int dcn, int bidx> struct RGB2XYZ<float, scn, dcn, bidx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float b = bidx == 0 ? src.x : src.z;
            const float g = src.y;
            const float r = bidx == 0 ? src.z : src.x;

            typename MakeVec<float, dcn>::type dst;

            dst.x = r * c_RGB2XYZ_D65f[0] + g * c_RGB2XYZ_D65f[1] + b * c_RGB2XYZ_D65f[2];
            dst.y = r * c_RGB2XYZ_D65f[3] + g * c_RGB2XYZ_D65f[4] + b * c_RGB2XYZ_D65f[5];
            dst.z = r * c_RGB2XYZ_D65f[6] + g * c_RGB2XYZ_D65f[7] + b * c_RGB2XYZ_D65f[8];

            return dst;
        }
    };

    // XYZ to RGB

    __constant__ float c_XYZ2sRGB_D65f[9] = { 3.240479f, -1.53715f, -0.498535f, -0.969256f, 1.875991f, 0.041556f, 0.055648f, -0.204043f, 1.057311f };
    __constant__ int   c_XYZ2sRGB_D65i[9] = { 13273, -6296, -2042, -3970, 7684, 170, 228, -836, 4331 };

    template <typename T, int scn, int dcn, int bidx> struct XYZ2RGB
            : unary_function<typename MakeVec<T, scn>::type, typename MakeVec<T, dcn>::type>
    {
        __device__ typename MakeVec<T, dcn>::type operator ()(const typename MakeVec<T, scn>::type& src) const
        {
            const int b = CV_CUDEV_DESCALE(src.x * c_XYZ2sRGB_D65i[6] + src.y * c_XYZ2sRGB_D65i[7] + src.z * c_XYZ2sRGB_D65i[8], xyz_shift);
            const int g = CV_CUDEV_DESCALE(src.x * c_XYZ2sRGB_D65i[3] + src.y * c_XYZ2sRGB_D65i[4] + src.z * c_XYZ2sRGB_D65i[5], xyz_shift);
            const int r = CV_CUDEV_DESCALE(src.x * c_XYZ2sRGB_D65i[0] + src.y * c_XYZ2sRGB_D65i[1] + src.z * c_XYZ2sRGB_D65i[2], xyz_shift);

            typename MakeVec<T, dcn>::type dst;

            dst.x = saturate_cast<T>(bidx == 0 ? b : r);
            dst.y = saturate_cast<T>(g);
            dst.z = saturate_cast<T>(bidx == 0 ? r : b);
            setAlpha(dst, ColorChannel<T>::max());

            return dst;
        }
    };

    template <int scn, int dcn, int bidx> struct XYZ2RGB<float, scn, dcn, bidx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float b = src.x * c_XYZ2sRGB_D65f[6] + src.y * c_XYZ2sRGB_D65f[7] + src.z * c_XYZ2sRGB_D65f[8];
            const float g = src.x * c_XYZ2sRGB_D65f[3] + src.y * c_XYZ2sRGB_D65f[4] + src.z * c_XYZ2sRGB_D65f[5];
            const float r = src.x * c_XYZ2sRGB_D65f[0] + src.y * c_XYZ2sRGB_D65f[1] + src.z * c_XYZ2sRGB_D65f[2];

            typename MakeVec<float, dcn>::type dst;

            dst.x = bidx == 0 ? b : r;
            dst.y = g;
            dst.z = bidx == 0 ? r : b;
            setAlpha(dst, ColorChannel<float>::max());

            return dst;
        }
    };

    // RGB to HSV

    __constant__ int c_HsvDivTable   [256] = {0, 1044480, 522240, 348160, 261120, 208896, 174080, 149211, 130560, 116053, 104448, 94953, 87040, 80345, 74606, 69632, 65280, 61440, 58027, 54973, 52224, 49737, 47476, 45412, 43520, 41779, 40172, 38684, 37303, 36017, 34816, 33693, 32640, 31651, 30720, 29842, 29013, 28229, 27486, 26782, 26112, 25475, 24869, 24290, 23738, 23211, 22706, 22223, 21760, 21316, 20890, 20480, 20086, 19707, 19342, 18991, 18651, 18324, 18008, 17703, 17408, 17123, 16846, 16579, 16320, 16069, 15825, 15589, 15360, 15137, 14921, 14711, 14507, 14308, 14115, 13926, 13743, 13565, 13391, 13221, 13056, 12895, 12738, 12584, 12434, 12288, 12145, 12006, 11869, 11736, 11605, 11478, 11353, 11231, 11111, 10995, 10880, 10768, 10658, 10550, 10445, 10341, 10240, 10141, 10043, 9947, 9854, 9761, 9671, 9582, 9495, 9410, 9326, 9243, 9162, 9082, 9004, 8927, 8852, 8777, 8704, 8632, 8561, 8492, 8423, 8356, 8290, 8224, 8160, 8097, 8034, 7973, 7913, 7853, 7795, 7737, 7680, 7624, 7569, 7514, 7461, 7408, 7355, 7304, 7253, 7203, 7154, 7105, 7057, 7010, 6963, 6917, 6872, 6827, 6782, 6739, 6695, 6653, 6611, 6569, 6528, 6487, 6447, 6408, 6369, 6330, 6292, 6254, 6217, 6180, 6144, 6108, 6073, 6037, 6003, 5968, 5935, 5901, 5868, 5835, 5803, 5771, 5739, 5708, 5677, 5646, 5615, 5585, 5556, 5526, 5497, 5468, 5440, 5412, 5384, 5356, 5329, 5302, 5275, 5249, 5222, 5196, 5171, 5145, 5120, 5095, 5070, 5046, 5022, 4998, 4974, 4950, 4927, 4904, 4881, 4858, 4836, 4813, 4791, 4769, 4748, 4726, 4705, 4684, 4663, 4642, 4622, 4601, 4581, 4561, 4541, 4522, 4502, 4483, 4464, 4445, 4426, 4407, 4389, 4370, 4352, 4334, 4316, 4298, 4281, 4263, 4246, 4229, 4212, 4195, 4178, 4161, 4145, 4128, 4112, 4096};
    __constant__ int c_HsvDivTable180[256] = {0, 122880, 61440, 40960, 30720, 24576, 20480, 17554, 15360, 13653, 12288, 11171, 10240, 9452, 8777, 8192, 7680, 7228, 6827, 6467, 6144, 5851, 5585, 5343, 5120, 4915, 4726, 4551, 4389, 4237, 4096, 3964, 3840, 3724, 3614, 3511, 3413, 3321, 3234, 3151, 3072, 2997, 2926, 2858, 2793, 2731, 2671, 2614, 2560, 2508, 2458, 2409, 2363, 2318, 2276, 2234, 2194, 2156, 2119, 2083, 2048, 2014, 1982, 1950, 1920, 1890, 1862, 1834, 1807, 1781, 1755, 1731, 1707, 1683, 1661, 1638, 1617, 1596, 1575, 1555, 1536, 1517, 1499, 1480, 1463, 1446, 1429, 1412, 1396, 1381, 1365, 1350, 1336, 1321, 1307, 1293, 1280, 1267, 1254, 1241, 1229, 1217, 1205, 1193, 1182, 1170, 1159, 1148, 1138, 1127, 1117, 1107, 1097, 1087, 1078, 1069, 1059, 1050, 1041, 1033, 1024, 1016, 1007, 999, 991, 983, 975, 968, 960, 953, 945, 938, 931, 924, 917, 910, 904, 897, 890, 884, 878, 871, 865, 859, 853, 847, 842, 836, 830, 825, 819, 814, 808, 803, 798, 793, 788, 783, 778, 773, 768, 763, 759, 754, 749, 745, 740, 736, 731, 727, 723, 719, 714, 710, 706, 702, 698, 694, 690, 686, 683, 679, 675, 671, 668, 664, 661, 657, 654, 650, 647, 643, 640, 637, 633, 630, 627, 624, 621, 617, 614, 611, 608, 605, 602, 599, 597, 594, 591, 588, 585, 582, 580, 577, 574, 572, 569, 566, 564, 561, 559, 556, 554, 551, 549, 546, 544, 541, 539, 537, 534, 532, 530, 527, 525, 523, 521, 518, 516, 514, 512, 510, 508, 506, 504, 502, 500, 497, 495, 493, 492, 490, 488, 486, 484, 482};
    __constant__ int c_HsvDivTable256[256] = {0, 174763, 87381, 58254, 43691, 34953, 29127, 24966, 21845, 19418, 17476, 15888, 14564, 13443, 12483, 11651, 10923, 10280, 9709, 9198, 8738, 8322, 7944, 7598, 7282, 6991, 6722, 6473, 6242, 6026, 5825, 5638, 5461, 5296, 5140, 4993, 4855, 4723, 4599, 4481, 4369, 4263, 4161, 4064, 3972, 3884, 3799, 3718, 3641, 3567, 3495, 3427, 3361, 3297, 3236, 3178, 3121, 3066, 3013, 2962, 2913, 2865, 2819, 2774, 2731, 2689, 2648, 2608, 2570, 2533, 2497, 2461, 2427, 2394, 2362, 2330, 2300, 2270, 2241, 2212, 2185, 2158, 2131, 2106, 2081, 2056, 2032, 2009, 1986, 1964, 1942, 1920, 1900, 1879, 1859, 1840, 1820, 1802, 1783, 1765, 1748, 1730, 1713, 1697, 1680, 1664, 1649, 1633, 1618, 1603, 1589, 1574, 1560, 1547, 1533, 1520, 1507, 1494, 1481, 1469, 1456, 1444, 1432, 1421, 1409, 1398, 1387, 1376, 1365, 1355, 1344, 1334, 1324, 1314, 1304, 1295, 1285, 1276, 1266, 1257, 1248, 1239, 1231, 1222, 1214, 1205, 1197, 1189, 1181, 1173, 1165, 1157, 1150, 1142, 1135, 1128, 1120, 1113, 1106, 1099, 1092, 1085, 1079, 1072, 1066, 1059, 1053, 1046, 1040, 1034, 1028, 1022, 1016, 1010, 1004, 999, 993, 987, 982, 976, 971, 966, 960, 955, 950, 945, 940, 935, 930, 925, 920, 915, 910, 906, 901, 896, 892, 887, 883, 878, 874, 869, 865, 861, 857, 853, 848, 844, 840, 836, 832, 828, 824, 820, 817, 813, 809, 805, 802, 798, 794, 791, 787, 784, 780, 777, 773, 770, 767, 763, 760, 757, 753, 750, 747, 744, 741, 737, 734, 731, 728, 725, 722, 719, 716, 713, 710, 708, 705, 702, 699, 696, 694, 691, 688, 685};

    template <typename T, int scn, int dcn, int bidx, int hr> struct RGB2HSV;

    template <int scn, int dcn, int bidx, int hr> struct RGB2HSV<uchar, scn, dcn, bidx, hr>
            : unary_function<typename MakeVec<uchar, scn>::type, typename MakeVec<uchar, dcn>::type>
    {
        __device__ typename MakeVec<uchar, dcn>::type operator ()(const typename MakeVec<uchar, scn>::type& src) const
        {
            const int hsv_shift = 12;
            const int* hdiv_table = hr == 180 ? c_HsvDivTable180 : c_HsvDivTable256;

            const int b = bidx == 0 ? src.x : src.z;
            const int g = src.y;
            const int r = bidx == 0 ? src.z : src.x;

            int h, s, v = b;
            int vmin = b, diff;
            int vr, vg;

            v = ::max(v, g);
            v = ::max(v, r);
            vmin = ::min(vmin, g);
            vmin = ::min(vmin, r);

            diff = v - vmin;
            vr = (v == r) * -1;
            vg = (v == g) * -1;

            s = (diff * c_HsvDivTable[v] + (1 << (hsv_shift-1))) >> hsv_shift;
            h = (vr & (g - b)) + (~vr & ((vg & (b - r + 2 * diff)) + ((~vg) & (r - g + 4 * diff))));
            h = (h * hdiv_table[diff] + (1 << (hsv_shift-1))) >> hsv_shift;
            h += (h < 0) * hr;

            typename MakeVec<uchar, dcn>::type dst;

            dst.x = saturate_cast<uchar>(h);
            dst.y = saturate_cast<uchar>(s);
            dst.z = saturate_cast<uchar>(v);

            return dst;
        }
    };

    template <int scn, int dcn, int bidx, int hr> struct RGB2HSV<float, scn, dcn, bidx, hr>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float hscale = hr * (1.f / 360.f);

            const float b = bidx == 0 ? src.x : src.z;
            const float g = src.y;
            const float r = bidx == 0 ? src.z : src.x;

            float h, s, v;
            float vmin, diff;

            v = vmin = r;
            v = ::fmax(v, g);
            v = ::fmax(v, b);
            vmin = ::fmin(vmin, g);
            vmin = ::fmin(vmin, b);

            diff = v - vmin;
            s = diff / (float)(::fabs(v) + numeric_limits<float>::epsilon());
            diff = (float)(60. / (diff + numeric_limits<float>::epsilon()));

            h  = (v == r) * (g - b) * diff;
            h += (v != r && v == g) * ((b - r) * diff + 120.f);
            h += (v != r && v != g) * ((r - g) * diff + 240.f);
            h += (h < 0) * 360.f;

            typename MakeVec<float, dcn>::type dst;

            dst.x = h * hscale;
            dst.y = s;
            dst.z = v;

            return dst;
        }
    };

    // HSV to RGB

    __constant__ int c_HsvSectorData[6][3] = { {1,3,0}, {1,0,2}, {3,0,1}, {0,2,1}, {0,1,3}, {2,1,0} };

    template <typename T, int scn, int dcn, int bidx, int hr> struct HSV2RGB;

    template <int scn, int dcn, int bidx, int hr> struct HSV2RGB<float, scn, dcn, bidx, hr>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float hscale = 6.f / hr;

            float h = src.x, s = src.y, v = src.z;
            float b = v, g = v, r = v;

            if (s != 0)
            {
                h *= hscale;

                if( h < 0 )
                    do h += 6; while( h < 0 );
                else if( h >= 6 )
                    do h -= 6; while( h >= 6 );

                int sector = __float2int_rd(h);
                h -= sector;

                if ( (unsigned)sector >= 6u )
                {
                    sector = 0;
                    h = 0.f;
                }

                float tab[4];
                tab[0] = v;
                tab[1] = v * (1.f - s);
                tab[2] = v * (1.f - s * h);
                tab[3] = v * (1.f - s * (1.f - h));

                b = tab[c_HsvSectorData[sector][0]];
                g = tab[c_HsvSectorData[sector][1]];
                r = tab[c_HsvSectorData[sector][2]];
            }

            typename MakeVec<float, dcn>::type dst;

            dst.x = bidx == 0 ? b : r;
            dst.y = g;
            dst.z = bidx == 0 ? r : b;
            setAlpha(dst, ColorChannel<float>::max());

            return dst;
        }
    };

    template <int scn, int dcn, int bidx, int hr> struct HSV2RGB<uchar, scn, dcn, bidx, hr>
            : unary_function<typename MakeVec<uchar, scn>::type, typename MakeVec<uchar, dcn>::type>
    {
        __device__ typename MakeVec<uchar, dcn>::type operator ()(const typename MakeVec<uchar, scn>::type& src) const
        {
            float3 buf;

            buf.x = src.x;
            buf.y = src.y * (1.f / 255.f);
            buf.z = src.z * (1.f / 255.f);

            HSV2RGB<float, 3, 3, bidx, hr> cvtf;
            buf = cvtf(buf);

            typename MakeVec<uchar, dcn>::type dst;

            dst.x = saturate_cast<uchar>(buf.x * 255.f);
            dst.y = saturate_cast<uchar>(buf.y * 255.f);
            dst.z = saturate_cast<uchar>(buf.z * 255.f);
            setAlpha(dst, ColorChannel<uchar>::max());

            return dst;
        }
    };

    // RGB to HLS

    template <typename T, int scn, int dcn, int bidx, int hr> struct RGB2HLS;

    template <int scn, int dcn, int bidx, int hr> struct RGB2HLS<float, scn, dcn, bidx, hr>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float hscale = hr * (1.f / 360.f);

            const float b = bidx == 0 ? src.x : src.z;
            const float g = src.y;
            const float r = bidx == 0 ? src.z : src.x;

            float h = 0.f, s = 0.f, l;
            float vmin, vmax, diff;

            vmax = vmin = r;
            vmax = ::fmax(vmax, g);
            vmax = ::fmax(vmax, b);
            vmin = ::fmin(vmin, g);
            vmin = ::fmin(vmin, b);

            diff = vmax - vmin;
            l = (vmax + vmin) * 0.5f;

            if (diff > numeric_limits<float>::epsilon())
            {
                s = l < 0.5f ? diff / (vmax + vmin) : diff / (2 - vmax - vmin);

                diff = 60.f / diff;

                h  = (vmax == r) * (g - b) * diff;
                h += (vmax != r && vmax == g) * ((b - r) * diff + 120.f);
                h += (vmax != r && vmax != g) * ((r - g) * diff + 240.f);
                h += (h < 0.f) * 360.f;
            }

            typename MakeVec<float, dcn>::type dst;

            dst.x = h * hscale;
            dst.y = l;
            dst.z = s;

            return dst;
        }
    };

    template <int scn, int dcn, int bidx, int hr> struct RGB2HLS<uchar, scn, dcn, bidx, hr>
            : unary_function<typename MakeVec<uchar, scn>::type, typename MakeVec<uchar, dcn>::type>
    {
        __device__ typename MakeVec<uchar, dcn>::type operator ()(const typename MakeVec<uchar, scn>::type& src) const
        {
            float3 buf;

            buf.x = src.x * (1.f / 255.f);
            buf.y = src.y * (1.f / 255.f);
            buf.z = src.z * (1.f / 255.f);

            RGB2HLS<float, 3, 3, bidx, hr> cvtf;
            buf = cvtf(buf);

            typename MakeVec<uchar, dcn>::type dst;

            dst.x = saturate_cast<uchar>(buf.x);
            dst.y = saturate_cast<uchar>(buf.y * 255.f);
            dst.z = saturate_cast<uchar>(buf.z * 255.f);

            return dst;
        }
    };

    // HLS to RGB

    __constant__ int c_HlsSectorData[6][3] = { {1,3,0}, {1,0,2}, {3,0,1}, {0,2,1}, {0,1,3}, {2,1,0} };

    template <typename T, int scn, int dcn, int bidx, int hr> struct HLS2RGB;

    template <int scn, int dcn, int bidx, int hr> struct HLS2RGB<float, scn, dcn, bidx, hr>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float hscale = 6.0f / hr;

            float h = src.x, l = src.y, s = src.z;
            float b = l, g = l, r = l;

            if (s != 0)
            {
                float p2  = (l <= 0.5f) * l * (1 + s);
                      p2 += (l > 0.5f) * (l + s - l * s);
                float p1 = 2 * l - p2;

                h *= hscale;

                if( h < 0 )
                    do h += 6; while( h < 0 );
                else if( h >= 6 )
                    do h -= 6; while( h >= 6 );

                int sector;
                sector = __float2int_rd(h);

                h -= sector;

                float tab[4];
                tab[0] = p2;
                tab[1] = p1;
                tab[2] = p1 + (p2 - p1) * (1 - h);
                tab[3] = p1 + (p2 - p1) * h;

                b = tab[c_HlsSectorData[sector][0]];
                g = tab[c_HlsSectorData[sector][1]];
                r = tab[c_HlsSectorData[sector][2]];
            }

            typename MakeVec<float, dcn>::type dst;

            dst.x = bidx == 0 ? b : r;
            dst.y = g;
            dst.z = bidx == 0 ? r : b;
            setAlpha(dst, ColorChannel<float>::max());

            return dst;
        }
    };

    template <int scn, int dcn, int bidx, int hr> struct HLS2RGB<uchar, scn, dcn, bidx, hr>
            : unary_function<typename MakeVec<uchar, scn>::type, typename MakeVec<uchar, dcn>::type>
    {
        __device__ typename MakeVec<uchar, dcn>::type operator ()(const typename MakeVec<uchar, scn>::type& src) const
        {
            float3 buf;

            buf.x = src.x;
            buf.y = src.y * (1.f / 255.f);
            buf.z = src.z * (1.f / 255.f);

            HLS2RGB<float, 3, 3, bidx, hr> cvtf;
            buf = cvtf(buf);

            typename MakeVec<uchar, dcn>::type dst;

            dst.x = saturate_cast<uchar>(buf.x * 255.f);
            dst.y = saturate_cast<uchar>(buf.y * 255.f);
            dst.z = saturate_cast<uchar>(buf.z * 255.f);
            setAlpha(dst, ColorChannel<uchar>::max());

            return dst;
        }
    };

    // RGB to Lab

    enum
    {
        LAB_CBRT_TAB_SIZE = 1024,
        GAMMA_TAB_SIZE = 1024,
        lab_shift = xyz_shift,
        gamma_shift = 3,
        lab_shift2 = (lab_shift + gamma_shift),
        LAB_CBRT_TAB_SIZE_B = (256 * 3 / 2 * (1 << gamma_shift))
    };

    __constant__ ushort c_sRGBGammaTab_b[] = {0,1,1,2,2,3,4,4,5,6,6,7,8,8,9,10,11,11,12,13,14,15,16,17,19,20,21,22,24,25,26,28,29,31,33,34,36,38,40,41,43,45,47,49,51,54,56,58,60,63,65,68,70,73,75,78,81,83,86,89,92,95,98,101,105,108,111,115,118,121,125,129,132,136,140,144,147,151,155,160,164,168,172,176,181,185,190,194,199,204,209,213,218,223,228,233,239,244,249,255,260,265,271,277,282,288,294,300,306,312,318,324,331,337,343,350,356,363,370,376,383,390,397,404,411,418,426,433,440,448,455,463,471,478,486,494,502,510,518,527,535,543,552,560,569,578,586,595,604,613,622,631,641,650,659,669,678,688,698,707,717,727,737,747,757,768,778,788,799,809,820,831,842,852,863,875,886,897,908,920,931,943,954,966,978,990,1002,1014,1026,1038,1050,1063,1075,1088,1101,1113,1126,1139,1152,1165,1178,1192,1205,1218,1232,1245,1259,1273,1287,1301,1315,1329,1343,1357,1372,1386,1401,1415,1430,1445,1460,1475,1490,1505,1521,1536,1551,1567,1583,1598,1614,1630,1646,1662,1678,1695,1711,1728,1744,1761,1778,1794,1811,1828,1846,1863,1880,1897,1915,1933,1950,1968,1986,2004,2022,2040};
    __constant__ float c_sRGBGammaTab[] = {0,7.55853e-05,0.,-7.51331e-13,7.55853e-05,7.55853e-05,-2.25399e-12,3.75665e-12,0.000151171,7.55853e-05,9.01597e-12,-6.99932e-12,0.000226756,7.55853e-05,-1.1982e-11,2.41277e-12,0.000302341,7.55853e-05,-4.74369e-12,1.19001e-11,0.000377927,7.55853e-05,3.09568e-11,-2.09095e-11,0.000453512,7.55853e-05,-3.17718e-11,1.35303e-11,0.000529097,7.55853e-05,8.81905e-12,-4.10782e-12,0.000604683,7.55853e-05,-3.50439e-12,2.90097e-12,0.000680268,7.55853e-05,5.19852e-12,-7.49607e-12,0.000755853,7.55853e-05,-1.72897e-11,2.70833e-11,0.000831439,7.55854e-05,6.39602e-11,-4.26295e-11,0.000907024,7.55854e-05,-6.39282e-11,2.70193e-11,0.000982609,7.55853e-05,1.71298e-11,-7.24017e-12,0.00105819,7.55853e-05,-4.59077e-12,1.94137e-12,0.00113378,7.55853e-05,1.23333e-12,-5.25291e-13,0.00120937,7.55853e-05,-3.42545e-13,1.59799e-13,0.00128495,7.55853e-05,1.36852e-13,-1.13904e-13,0.00136054,7.55853e-05,-2.04861e-13,2.95818e-13,0.00143612,7.55853e-05,6.82594e-13,-1.06937e-12,0.00151171,7.55853e-05,-2.52551e-12,3.98166e-12,0.00158729,7.55853e-05,9.41946e-12,-1.48573e-11,0.00166288,7.55853e-05,-3.51523e-11,5.54474e-11,0.00173846,7.55854e-05,1.3119e-10,-9.0517e-11,0.00181405,7.55854e-05,-1.40361e-10,7.37899e-11,0.00188963,7.55853e-05,8.10085e-11,-8.82272e-11,0.00196522,7.55852e-05,-1.83673e-10,1.62704e-10,0.0020408,7.55853e-05,3.04438e-10,-2.13341e-10,0.00211639,7.55853e-05,-3.35586e-10,2.25e-10,0.00219197,7.55853e-05,3.39414e-10,-2.20997e-10,0.00226756,7.55853e-05,-3.23576e-10,1.93326e-10,0.00234315,7.55853e-05,2.564e-10,-8.66446e-11,0.00241873,7.55855e-05,-3.53328e-12,-7.9578e-11,0.00249432,7.55853e-05,-2.42267e-10,1.72126e-10,0.0025699,7.55853e-05,2.74111e-10,-1.43265e-10,0.00264549,7.55854e-05,-1.55683e-10,-6.47292e-11,0.00272107,7.55849e-05,-3.4987e-10,8.67842e-10,0.00279666,7.55868e-05,2.25366e-09,-3.8723e-09,0.00287224,7.55797e-05,-9.36325e-09,1.5087e-08,0.00294783,7.56063e-05,3.58978e-08,-5.69415e-08,0.00302341,7.55072e-05,-1.34927e-07,2.13144e-07,0.003099,7.58768e-05,5.04507e-07,1.38713e-07,0.00317552,7.7302e-05,9.20646e-07,-1.55186e-07,0.00325359,7.86777e-05,4.55087e-07,4.26813e-08,0.00333276,7.97159e-05,5.83131e-07,-1.06495e-08,0.00341305,8.08502e-05,5.51182e-07,3.87467e-09,0.00349446,8.19642e-05,5.62806e-07,-1.92586e-10,0.00357698,8.30892e-05,5.62228e-07,1.0866e-09,0.00366063,8.4217e-05,5.65488e-07,5.02818e-10,0.00374542,8.53494e-05,5.66997e-07,8.60211e-10,0.00383133,8.6486e-05,5.69577e-07,7.13044e-10,0.00391839,8.76273e-05,5.71716e-07,4.78527e-10,0.00400659,8.87722e-05,5.73152e-07,1.09818e-09,0.00409594,8.99218e-05,5.76447e-07,2.50964e-10,0.00418644,9.10754e-05,5.772e-07,1.15762e-09,0.00427809,9.22333e-05,5.80672e-07,2.40865e-10,0.0043709,9.33954e-05,5.81395e-07,1.13854e-09,0.00446488,9.45616e-05,5.84811e-07,3.27267e-10,0.00456003,9.57322e-05,5.85792e-07,8.1197e-10,0.00465635,9.69062e-05,5.88228e-07,6.15823e-10,0.00475384,9.80845e-05,5.90076e-07,9.15747e-10,0.00485252,9.92674e-05,5.92823e-07,3.778e-10,0.00495238,0.000100454,5.93956e-07,8.32623e-10,0.00505343,0.000101645,5.96454e-07,4.82695e-10,0.00515567,0.000102839,5.97902e-07,9.61904e-10,0.00525911,0.000104038,6.00788e-07,3.26281e-10,0.00536375,0.00010524,6.01767e-07,9.926e-10,0.00546959,0.000106447,6.04745e-07,3.59933e-10,0.00557664,0.000107657,6.05824e-07,8.2728e-10,0.0056849,0.000108871,6.08306e-07,5.21898e-10,0.00579438,0.00011009,6.09872e-07,8.10492e-10,0.00590508,0.000111312,6.12303e-07,4.27046e-10,0.00601701,0.000112538,6.13585e-07,7.40878e-10,0.00613016,0.000113767,6.15807e-07,8.00469e-10,0.00624454,0.000115001,6.18209e-07,2.48178e-10,0.00636016,0.000116238,6.18953e-07,1.00073e-09,0.00647702,0.000117479,6.21955e-07,4.05654e-10,0.00659512,0.000118724,6.23172e-07,6.36192e-10,0.00671447,0.000119973,6.25081e-07,7.74927e-10,0.00683507,0.000121225,6.27406e-07,4.54975e-10,0.00695692,0.000122481,6.28771e-07,6.64841e-10,0.00708003,0.000123741,6.30765e-07,6.10972e-10,0.00720441,0.000125004,6.32598e-07,6.16543e-10,0.00733004,0.000126271,6.34448e-07,6.48204e-10,0.00745695,0.000127542,6.36392e-07,5.15835e-10,0.00758513,0.000128816,6.3794e-07,5.48103e-10,0.00771458,0.000130094,6.39584e-07,1.01706e-09,0.00784532,0.000131376,6.42635e-07,4.0283e-11,0.00797734,0.000132661,6.42756e-07,6.84471e-10,0.00811064,0.000133949,6.4481e-07,9.47144e-10,0.00824524,0.000135241,6.47651e-07,1.83472e-10,0.00838112,0.000136537,6.48201e-07,1.11296e-09,0.00851831,0.000137837,6.5154e-07,2.13163e-11,0.0086568,0.00013914,6.51604e-07,6.64462e-10,0.00879659,0.000140445,6.53598e-07,1.04613e-09,0.00893769,0.000141756,6.56736e-07,-1.92377e-10,0.0090801,0.000143069,6.56159e-07,1.58601e-09,0.00922383,0.000144386,6.60917e-07,-5.63754e-10,0.00936888,0.000145706,6.59226e-07,1.60033e-09,0.00951524,0.000147029,6.64027e-07,-2.49543e-10,0.00966294,0.000148356,6.63278e-07,1.26043e-09,0.00981196,0.000149687,6.67059e-07,-1.35572e-10,0.00996231,0.00015102,6.66653e-07,1.14458e-09,0.010114,0.000152357,6.70086e-07,2.13864e-10,0.010267,0.000153698,6.70728e-07,7.93856e-10,0.0104214,0.000155042,6.73109e-07,3.36077e-10,0.0105771,0.000156389,6.74118e-07,6.55765e-10,0.0107342,0.000157739,6.76085e-07,7.66211e-10,0.0108926,0.000159094,6.78384e-07,4.66116e-12,0.0110524,0.000160451,6.78398e-07,1.07775e-09,0.0112135,0.000161811,6.81631e-07,3.41023e-10,0.011376,0.000163175,6.82654e-07,3.5205e-10,0.0115398,0.000164541,6.8371e-07,1.04473e-09,0.0117051,0.000165912,6.86844e-07,1.25757e-10,0.0118717,0.000167286,6.87222e-07,3.14818e-10,0.0120396,0.000168661,6.88166e-07,1.40886e-09,0.012209,0.000170042,6.92393e-07,-3.62244e-10,0.0123797,0.000171425,6.91306e-07,9.71397e-10,0.0125518,0.000172811,6.9422e-07,2.02003e-10,0.0127253,0.0001742,6.94826e-07,1.01448e-09,0.0129002,0.000175593,6.97869e-07,3.96653e-10,0.0130765,0.00017699,6.99059e-07,1.92927e-10,0.0132542,0.000178388,6.99638e-07,6.94305e-10,0.0134333,0.00017979,7.01721e-07,7.55108e-10,0.0136138,0.000181195,7.03986e-07,1.05918e-11,0.0137957,0.000182603,7.04018e-07,1.06513e-09,0.013979,0.000184015,7.07214e-07,3.85512e-10,0.0141637,0.00018543,7.0837e-07,1.86769e-10,0.0143499,0.000186848,7.0893e-07,7.30116e-10,0.0145374,0.000188268,7.11121e-07,6.17983e-10,0.0147264,0.000189692,7.12975e-07,5.23282e-10,0.0149168,0.000191119,7.14545e-07,8.28398e-11,0.0151087,0.000192549,7.14793e-07,1.0081e-09,0.0153019,0.000193981,7.17817e-07,5.41244e-10,0.0154966,0.000195418,7.19441e-07,-3.7907e-10,0.0156928,0.000196856,7.18304e-07,1.90641e-09,0.0158903,0.000198298,7.24023e-07,-7.27387e-10,0.0160893,0.000199744,7.21841e-07,1.00317e-09,0.0162898,0.000201191,7.24851e-07,4.39949e-10,0.0164917,0.000202642,7.2617e-07,9.6234e-10,0.0166951,0.000204097,7.29057e-07,-5.64019e-10,0.0168999,0.000205554,7.27365e-07,1.29374e-09,0.0171062,0.000207012,7.31247e-07,9.77025e-10,0.017314,0.000208478,7.34178e-07,-1.47651e-09,0.0175232,0.000209942,7.29748e-07,3.06636e-09,0.0177338,0.00021141,7.38947e-07,-1.47573e-09,0.017946,0.000212884,7.3452e-07,9.7386e-10,0.0181596,0.000214356,7.37442e-07,1.30562e-09,0.0183747,0.000215835,7.41358e-07,-6.08376e-10,0.0185913,0.000217315,7.39533e-07,1.12785e-09,0.0188093,0.000218798,7.42917e-07,-1.77711e-10,0.0190289,0.000220283,7.42384e-07,1.44562e-09,0.0192499,0.000221772,7.46721e-07,-1.68825e-11,0.0194724,0.000223266,7.4667e-07,4.84533e-10,0.0196964,0.000224761,7.48124e-07,-5.85298e-11,0.0199219,0.000226257,7.47948e-07,1.61217e-09,0.0201489,0.000227757,7.52785e-07,-8.02136e-10,0.0203775,0.00022926,7.50378e-07,1.59637e-09,0.0206075,0.000230766,7.55167e-07,4.47168e-12,0.020839,0.000232276,7.55181e-07,2.48387e-10,0.021072,0.000233787,7.55926e-07,8.6474e-10,0.0213066,0.000235302,7.5852e-07,1.78299e-11,0.0215426,0.000236819,7.58573e-07,9.26567e-10,0.0217802,0.000238339,7.61353e-07,1.34529e-12,0.0220193,0.000239862,7.61357e-07,9.30659e-10,0.0222599,0.000241387,7.64149e-07,1.34529e-12,0.0225021,0.000242915,7.64153e-07,9.26567e-10,0.0227458,0.000244447,7.66933e-07,1.76215e-11,0.022991,0.00024598,7.66986e-07,8.65536e-10,0.0232377,0.000247517,7.69582e-07,2.45677e-10,0.023486,0.000249057,7.70319e-07,1.44193e-11,0.0237358,0.000250598,7.70363e-07,1.55918e-09,0.0239872,0.000252143,7.7504e-07,-6.63173e-10,0.0242401,0.000253691,7.73051e-07,1.09357e-09,0.0244946,0.000255241,7.76331e-07,1.41919e-11,0.0247506,0.000256793,7.76374e-07,7.12248e-10,0.0250082,0.000258348,7.78511e-07,8.62049e-10,0.0252673,0.000259908,7.81097e-07,-4.35061e-10,0.025528,0.000261469,7.79792e-07,8.7825e-10,0.0257902,0.000263031,7.82426e-07,6.47181e-10,0.0260541,0.000264598,7.84368e-07,2.58448e-10,0.0263194,0.000266167,7.85143e-07,1.81558e-10,0.0265864,0.000267738,7.85688e-07,8.78041e-10,0.0268549,0.000269312,7.88322e-07,3.15102e-11,0.027125,0.000270889,7.88417e-07,8.58525e-10,0.0273967,0.000272468,7.90992e-07,2.59812e-10,0.02767,0.000274051,7.91772e-07,-3.5224e-11,0.0279448,0.000275634,7.91666e-07,1.74377e-09,0.0282212,0.000277223,7.96897e-07,-1.35196e-09,0.0284992,0.000278813,7.92841e-07,1.80141e-09,0.0287788,0.000280404,7.98246e-07,-2.65629e-10,0.0290601,0.000281999,7.97449e-07,1.12374e-09,0.0293428,0.000283598,8.0082e-07,-5.04106e-10,0.0296272,0.000285198,7.99308e-07,8.92764e-10,0.0299132,0.000286799,8.01986e-07,6.58379e-10,0.0302008,0.000288405,8.03961e-07,1.98971e-10,0.0304901,0.000290014,8.04558e-07,4.08382e-10,0.0307809,0.000291624,8.05783e-07,3.01839e-11,0.0310733,0.000293236,8.05874e-07,1.33343e-09,0.0313673,0.000294851,8.09874e-07,2.2419e-10,0.031663,0.000296472,8.10547e-07,-3.67606e-10,0.0319603,0.000298092,8.09444e-07,1.24624e-09,0.0322592,0.000299714,8.13182e-07,-8.92025e-10,0.0325597,0.000301338,8.10506e-07,2.32183e-09,0.0328619,0.000302966,8.17472e-07,-9.44719e-10,0.0331657,0.000304598,8.14638e-07,1.45703e-09,0.0334711,0.000306232,8.19009e-07,-1.15805e-09,0.0337781,0.000307866,8.15535e-07,3.17507e-09,0.0340868,0.000309507,8.2506e-07,-4.09161e-09,0.0343971,0.000311145,8.12785e-07,5.74079e-09,0.0347091,0.000312788,8.30007e-07,-3.97034e-09,0.0350227,0.000314436,8.18096e-07,2.68985e-09,0.035338,0.00031608,8.26166e-07,6.61676e-10,0.0356549,0.000317734,8.28151e-07,-1.61123e-09,0.0359734,0.000319386,8.23317e-07,2.05786e-09,0.0362936,0.000321038,8.29491e-07,8.30388e-10,0.0366155,0.0003227,8.31982e-07,-1.65424e-09,0.036939,0.000324359,8.27019e-07,2.06129e-09,0.0372642,0.000326019,8.33203e-07,8.59719e-10,0.0375911,0.000327688,8.35782e-07,-1.77488e-09,0.0379196,0.000329354,8.30458e-07,2.51464e-09,0.0382498,0.000331023,8.38002e-07,-8.33135e-10,0.0385817,0.000332696,8.35502e-07,8.17825e-10,0.0389152,0.00033437,8.37956e-07,1.28718e-09,0.0392504,0.00033605,8.41817e-07,-2.2413e-09,0.0395873,0.000337727,8.35093e-07,3.95265e-09,0.0399258,0.000339409,8.46951e-07,-2.39332e-09,0.0402661,0.000341095,8.39771e-07,1.89533e-09,0.040608,0.000342781,8.45457e-07,-1.46271e-09,0.0409517,0.000344467,8.41069e-07,3.95554e-09,0.041297,0.000346161,8.52936e-07,-3.18369e-09,0.041644,0.000347857,8.43385e-07,1.32873e-09,0.0419927,0.000349548,8.47371e-07,1.59402e-09,0.0423431,0.000351248,8.52153e-07,-2.54336e-10,0.0426952,0.000352951,8.5139e-07,-5.76676e-10,0.043049,0.000354652,8.4966e-07,2.56114e-09,0.0434045,0.000356359,8.57343e-07,-2.21744e-09,0.0437617,0.000358067,8.50691e-07,2.58344e-09,0.0441206,0.000359776,8.58441e-07,-6.65826e-10,0.0444813,0.000361491,8.56444e-07,7.99218e-11,0.0448436,0.000363204,8.56684e-07,3.46063e-10,0.0452077,0.000364919,8.57722e-07,2.26116e-09,0.0455734,0.000366641,8.64505e-07,-1.94005e-09,0.045941,0.000368364,8.58685e-07,1.77384e-09,0.0463102,0.000370087,8.64007e-07,-1.43005e-09,0.0466811,0.000371811,8.59717e-07,3.94634e-09,0.0470538,0.000373542,8.71556e-07,-3.17946e-09,0.0474282,0.000375276,8.62017e-07,1.32104e-09,0.0478043,0.000377003,8.6598e-07,1.62045e-09,0.0481822,0.00037874,8.70842e-07,-3.52297e-10,0.0485618,0.000380481,8.69785e-07,-2.11211e-10,0.0489432,0.00038222,8.69151e-07,1.19716e-09,0.0493263,0.000383962,8.72743e-07,-8.52026e-10,0.0497111,0.000385705,8.70187e-07,2.21092e-09,0.0500977,0.000387452,8.76819e-07,-5.41339e-10,0.050486,0.000389204,8.75195e-07,-4.5361e-11,0.0508761,0.000390954,8.75059e-07,7.22669e-10,0.0512679,0.000392706,8.77227e-07,8.79936e-10,0.0516615,0.000394463,8.79867e-07,-5.17048e-10,0.0520568,0.000396222,8.78316e-07,1.18833e-09,0.0524539,0.000397982,8.81881e-07,-5.11022e-10,0.0528528,0.000399744,8.80348e-07,8.55683e-10,0.0532534,0.000401507,8.82915e-07,8.13562e-10,0.0536558,0.000403276,8.85356e-07,-3.84603e-10,0.05406,0.000405045,8.84202e-07,7.24962e-10,0.0544659,0.000406816,8.86377e-07,1.20986e-09,0.0548736,0.000408592,8.90006e-07,-1.83896e-09,0.0552831,0.000410367,8.84489e-07,2.42071e-09,0.0556944,0.000412143,8.91751e-07,-3.93413e-10,0.0561074,0.000413925,8.90571e-07,-8.46967e-10,0.0565222,0.000415704,8.8803e-07,3.78122e-09,0.0569388,0.000417491,8.99374e-07,-3.1021e-09,0.0573572,0.000419281,8.90068e-07,1.17658e-09,0.0577774,0.000421064,8.93597e-07,2.12117e-09,0.0581993,0.000422858,8.99961e-07,-2.21068e-09,0.0586231,0.000424651,8.93329e-07,2.9961e-09,0.0590486,0.000426447,9.02317e-07,-2.32311e-09,0.059476,0.000428244,8.95348e-07,2.57122e-09,0.0599051,0.000430043,9.03062e-07,-5.11098e-10,0.0603361,0.000431847,9.01528e-07,-5.27166e-10,0.0607688,0.000433649,8.99947e-07,2.61984e-09,0.0612034,0.000435457,9.07806e-07,-2.50141e-09,0.0616397,0.000437265,9.00302e-07,3.66045e-09,0.0620779,0.000439076,9.11283e-07,-4.68977e-09,0.0625179,0.000440885,8.97214e-07,7.64783e-09,0.0629597,0.000442702,9.20158e-07,-7.27499e-09,0.0634033,0.000444521,8.98333e-07,6.55113e-09,0.0638487,0.000446337,9.17986e-07,-4.02844e-09,0.0642959,0.000448161,9.05901e-07,2.11196e-09,0.064745,0.000449979,9.12236e-07,3.03125e-09,0.0651959,0.000451813,9.2133e-07,-6.78648e-09,0.0656486,0.000453635,9.00971e-07,9.21375e-09,0.0661032,0.000455464,9.28612e-07,-7.71684e-09,0.0665596,0.000457299,9.05462e-07,6.7522e-09,0.0670178,0.00045913,9.25718e-07,-4.3907e-09,0.0674778,0.000460968,9.12546e-07,3.36e-09,0.0679397,0.000462803,9.22626e-07,-1.59876e-09,0.0684034,0.000464644,9.1783e-07,3.0351e-09,0.068869,0.000466488,9.26935e-07,-3.09101e-09,0.0693364,0.000468333,9.17662e-07,1.8785e-09,0.0698057,0.000470174,9.23298e-07,3.02733e-09,0.0702768,0.00047203,9.3238e-07,-6.53722e-09,0.0707497,0.000473875,9.12768e-07,8.22054e-09,0.0712245,0.000475725,9.37429e-07,-3.99325e-09,0.0717012,0.000477588,9.2545e-07,3.01839e-10,0.0721797,0.00047944,9.26355e-07,2.78597e-09,0.0726601,0.000481301,9.34713e-07,-3.99507e-09,0.0731423,0.000483158,9.22728e-07,5.7435e-09,0.0736264,0.000485021,9.39958e-07,-4.07776e-09,0.0741123,0.000486888,9.27725e-07,3.11695e-09,0.0746002,0.000488753,9.37076e-07,-9.39394e-10,0.0750898,0.000490625,9.34258e-07,6.4055e-10,0.0755814,0.000492495,9.3618e-07,-1.62265e-09,0.0760748,0.000494363,9.31312e-07,5.84995e-09,0.0765701,0.000496243,9.48861e-07,-6.87601e-09,0.0770673,0.00049812,9.28233e-07,6.75296e-09,0.0775664,0.000499997,9.48492e-07,-5.23467e-09,0.0780673,0.000501878,9.32788e-07,6.73523e-09,0.0785701,0.000503764,9.52994e-07,-6.80514e-09,0.0790748,0.000505649,9.32578e-07,5.5842e-09,0.0795814,0.000507531,9.49331e-07,-6.30583e-10,0.0800899,0.000509428,9.47439e-07,-3.0618e-09,0.0806003,0.000511314,9.38254e-07,5.4273e-09,0.0811125,0.000513206,9.54536e-07,-3.74627e-09,0.0816267,0.000515104,9.43297e-07,2.10713e-09,0.0821427,0.000516997,9.49618e-07,2.76839e-09,0.0826607,0.000518905,9.57924e-07,-5.73006e-09,0.0831805,0.000520803,9.40733e-07,5.25072e-09,0.0837023,0.0005227,9.56486e-07,-3.71718e-10,0.084226,0.000524612,9.5537e-07,-3.76404e-09,0.0847515,0.000526512,9.44078e-07,7.97735e-09,0.085279,0.000528424,9.6801e-07,-5.79367e-09,0.0858084,0.000530343,9.50629e-07,2.96268e-10,0.0863397,0.000532245,9.51518e-07,4.6086e-09,0.0868729,0.000534162,9.65344e-07,-3.82947e-09,0.087408,0.000536081,9.53856e-07,3.25861e-09,0.087945,0.000537998,9.63631e-07,-1.7543e-09,0.088484,0.00053992,9.58368e-07,3.75849e-09,0.0890249,0.000541848,9.69644e-07,-5.82891e-09,0.0895677,0.00054377,9.52157e-07,4.65593e-09,0.0901124,0.000545688,9.66125e-07,2.10643e-09,0.0906591,0.000547627,9.72444e-07,-5.63099e-09,0.0912077,0.000549555,9.55551e-07,5.51627e-09,0.0917582,0.000551483,9.721e-07,-1.53292e-09,0.0923106,0.000553422,9.67501e-07,6.15311e-10,0.092865,0.000555359,9.69347e-07,-9.28291e-10,0.0934213,0.000557295,9.66562e-07,3.09774e-09,0.0939796,0.000559237,9.75856e-07,-4.01186e-09,0.0945398,0.000561177,9.6382e-07,5.49892e-09,0.095102,0.000563121,9.80317e-07,-3.08258e-09,0.0956661,0.000565073,9.71069e-07,-6.19176e-10,0.0962321,0.000567013,9.69212e-07,5.55932e-09,0.0968001,0.000568968,9.8589e-07,-6.71704e-09,0.09737,0.00057092,9.65738e-07,6.40762e-09,0.0979419,0.00057287,9.84961e-07,-4.0122e-09,0.0985158,0.000574828,9.72925e-07,2.19059e-09,0.0990916,0.000576781,9.79496e-07,2.70048e-09,0.0996693,0.000578748,9.87598e-07,-5.54193e-09,0.100249,0.000580706,9.70972e-07,4.56597e-09,0.100831,0.000582662,9.8467e-07,2.17923e-09,0.101414,0.000584638,9.91208e-07,-5.83232e-09,0.102,0.000586603,9.73711e-07,6.24884e-09,0.102588,0.000588569,9.92457e-07,-4.26178e-09,0.103177,0.000590541,9.79672e-07,3.34781e-09,0.103769,0.00059251,9.89715e-07,-1.67904e-09,0.104362,0.000594485,9.84678e-07,3.36839e-09,0.104958,0.000596464,9.94783e-07,-4.34397e-09,0.105555,0.000598441,9.81751e-07,6.55696e-09,0.106155,0.000600424,1.00142e-06,-6.98272e-09,0.106756,0.000602406,9.80474e-07,6.4728e-09,0.107359,0.000604386,9.99893e-07,-4.00742e-09,0.107965,0.000606374,9.8787e-07,2.10654e-09,0.108572,0.000608356,9.9419e-07,3.0318e-09,0.109181,0.000610353,1.00329e-06,-6.7832e-09,0.109793,0.00061234,9.82936e-07,9.1998e-09,0.110406,0.000614333,1.01054e-06,-7.6642e-09,0.111021,0.000616331,9.87543e-07,6.55579e-09,0.111639,0.000618326,1.00721e-06,-3.65791e-09,0.112258,0.000620329,9.96236e-07,6.25467e-10,0.112879,0.000622324,9.98113e-07,1.15593e-09,0.113503,0.000624323,1.00158e-06,2.20158e-09,0.114128,0.000626333,1.00819e-06,-2.51191e-09,0.114755,0.000628342,1.00065e-06,3.95517e-10,0.115385,0.000630345,1.00184e-06,9.29807e-10,0.116016,0.000632351,1.00463e-06,3.33599e-09,0.116649,0.00063437,1.01463e-06,-6.82329e-09,0.117285,0.000636379,9.94163e-07,9.05595e-09,0.117922,0.000638395,1.02133e-06,-7.04862e-09,0.118562,0.000640416,1.00019e-06,4.23737e-09,0.119203,0.000642429,1.0129e-06,-2.45033e-09,0.119847,0.000644448,1.00555e-06,5.56395e-09,0.120492,0.000646475,1.02224e-06,-4.9043e-09,0.121139,0.000648505,1.00753e-06,-8.47952e-10,0.121789,0.000650518,1.00498e-06,8.29622e-09,0.122441,0.000652553,1.02987e-06,-9.98538e-09,0.123094,0.000654582,9.99914e-07,9.2936e-09,0.12375,0.00065661,1.02779e-06,-4.83707e-09,0.124407,0.000658651,1.01328e-06,2.60411e-09,0.125067,0.000660685,1.0211e-06,-5.57945e-09,0.125729,0.000662711,1.00436e-06,1.22631e-08,0.126392,0.000664756,1.04115e-06,-1.36704e-08,0.127058,0.000666798,1.00014e-06,1.26161e-08,0.127726,0.000668836,1.03798e-06,-6.99155e-09,0.128396,0.000670891,1.01701e-06,4.48836e-10,0.129068,0.000672926,1.01836e-06,5.19606e-09,0.129742,0.000674978,1.03394e-06,-6.3319e-09,0.130418,0.000677027,1.01495e-06,5.2305e-09,0.131096,0.000679073,1.03064e-06,3.11123e-10,0.131776,0.000681135,1.03157e-06,-6.47511e-09,0.132458,0.000683179,1.01215e-06,1.06882e-08,0.133142,0.000685235,1.04421e-06,-6.47519e-09,0.133829,0.000687304,1.02479e-06,3.11237e-10,0.134517,0.000689355,1.02572e-06,5.23035e-09,0.135207,0.000691422,1.04141e-06,-6.3316e-09,0.1359,0.000693486,1.02242e-06,5.19484e-09,0.136594,0.000695546,1.038e-06,4.53497e-10,0.137291,0.000697623,1.03936e-06,-7.00891e-09,0.137989,0.000699681,1.01834e-06,1.2681e-08,0.13869,0.000701756,1.05638e-06,-1.39128e-08,0.139393,0.000703827,1.01464e-06,1.31679e-08,0.140098,0.000705896,1.05414e-06,-8.95659e-09,0.140805,0.000707977,1.02727e-06,7.75742e-09,0.141514,0.000710055,1.05055e-06,-7.17182e-09,0.142225,0.000712135,1.02903e-06,6.02862e-09,0.142938,0.000714211,1.04712e-06,-2.04163e-09,0.143653,0.000716299,1.04099e-06,2.13792e-09,0.144371,0.000718387,1.04741e-06,-6.51009e-09,0.14509,0.000720462,1.02787e-06,9.00123e-09,0.145812,0.000722545,1.05488e-06,3.07523e-10,0.146535,0.000724656,1.0558e-06,-1.02312e-08,0.147261,0.000726737,1.02511e-06,1.0815e-08,0.147989,0.000728819,1.05755e-06,-3.22681e-09,0.148719,0.000730925,1.04787e-06,2.09244e-09,0.14945,0.000733027,1.05415e-06,-5.143e-09,0.150185,0.00073512,1.03872e-06,3.57844e-09,0.150921,0.000737208,1.04946e-06,5.73027e-09,0.151659,0.000739324,1.06665e-06,-1.15983e-08,0.152399,0.000741423,1.03185e-06,1.08605e-08,0.153142,0.000743519,1.06443e-06,-2.04106e-09,0.153886,0.000745642,1.05831e-06,-2.69642e-09,0.154633,0.00074775,1.05022e-06,-2.07425e-09,0.155382,0.000749844,1.044e-06,1.09934e-08,0.156133,0.000751965,1.07698e-06,-1.20972e-08,0.156886,0.000754083,1.04069e-06,7.59288e-09,0.157641,0.000756187,1.06347e-06,-3.37305e-09,0.158398,0.000758304,1.05335e-06,5.89921e-09,0.159158,0.000760428,1.07104e-06,-5.32248e-09,0.159919,0.000762554,1.05508e-06,4.8927e-10,0.160683,0.000764666,1.05654e-06,3.36547e-09,0.161448,0.000766789,1.06664e-06,9.50081e-10,0.162216,0.000768925,1.06949e-06,-7.16568e-09,0.162986,0.000771043,1.04799e-06,1.28114e-08,0.163758,0.000773177,1.08643e-06,-1.42774e-08,0.164533,0.000775307,1.0436e-06,1.44956e-08,0.165309,0.000777438,1.08708e-06,-1.39025e-08,0.166087,0.00077957,1.04538e-06,1.13118e-08,0.166868,0.000781695,1.07931e-06,-1.54224e-09,0.167651,0.000783849,1.07468e-06,-5.14312e-09,0.168436,0.000785983,1.05925e-06,7.21381e-09,0.169223,0.000788123,1.0809e-06,-8.81096e-09,0.170012,0.000790259,1.05446e-06,1.31289e-08,0.170803,0.000792407,1.09385e-06,-1.39022e-08,0.171597,0.000794553,1.05214e-06,1.26775e-08,0.172392,0.000796695,1.09018e-06,-7.00557e-09,0.17319,0.000798855,1.06916e-06,4.43796e-10,0.17399,0.000800994,1.07049e-06,5.23031e-09,0.174792,0.000803151,1.08618e-06,-6.46397e-09,0.175596,0.000805304,1.06679e-06,5.72444e-09,0.176403,0.000807455,1.08396e-06,-1.53254e-09,0.177211,0.000809618,1.07937e-06,4.05673e-10,0.178022,0.000811778,1.08058e-06,-9.01916e-11,0.178835,0.000813939,1.08031e-06,-4.49821e-11,0.17965,0.000816099,1.08018e-06,2.70234e-10,0.180467,0.00081826,1.08099e-06,-1.03603e-09,0.181286,0.000820419,1.07788e-06,3.87392e-09,0.182108,0.000822587,1.0895e-06,4.41522e-10,0.182932,0.000824767,1.09083e-06,-5.63997e-09,0.183758,0.000826932,1.07391e-06,7.21707e-09,0.184586,0.000829101,1.09556e-06,-8.32718e-09,0.185416,0.000831267,1.07058e-06,1.11907e-08,0.186248,0.000833442,1.10415e-06,-6.63336e-09,0.187083,0.00083563,1.08425e-06,4.41484e-10,0.187919,0.0008378,1.08557e-06,4.86754e-09,0.188758,0.000839986,1.10017e-06,-5.01041e-09,0.189599,0.000842171,1.08514e-06,2.72811e-10,0.190443,0.000844342,1.08596e-06,3.91916e-09,0.191288,0.000846526,1.09772e-06,-1.04819e-09,0.192136,0.000848718,1.09457e-06,2.73531e-10,0.192985,0.000850908,1.0954e-06,-4.58916e-11,0.193837,0.000853099,1.09526e-06,-9.01158e-11,0.194692,0.000855289,1.09499e-06,4.06506e-10,0.195548,0.00085748,1.09621e-06,-1.53595e-09,0.196407,0.000859668,1.0916e-06,5.73717e-09,0.197267,0.000861869,1.10881e-06,-6.51164e-09,0.19813,0.000864067,1.08928e-06,5.40831e-09,0.198995,0.000866261,1.1055e-06,-2.20401e-10,0.199863,0.000868472,1.10484e-06,-4.52652e-09,0.200732,0.000870668,1.09126e-06,3.42508e-09,0.201604,0.000872861,1.10153e-06,5.72762e-09,0.202478,0.000875081,1.11872e-06,-1.14344e-08,0.203354,0.000877284,1.08441e-06,1.02076e-08,0.204233,0.000879484,1.11504e-06,4.06355e-10,0.205113,0.000881715,1.11626e-06,-1.18329e-08,0.205996,0.000883912,1.08076e-06,1.71227e-08,0.206881,0.000886125,1.13213e-06,-1.19546e-08,0.207768,0.000888353,1.09626e-06,8.93465e-10,0.208658,0.000890548,1.09894e-06,8.38062e-09,0.209549,0.000892771,1.12408e-06,-4.61353e-09,0.210443,0.000895006,1.11024e-06,-4.82756e-09,0.211339,0.000897212,1.09576e-06,9.02245e-09,0.212238,0.00089943,1.12283e-06,-1.45997e-09,0.213138,0.000901672,1.11845e-06,-3.18255e-09,0.214041,0.000903899,1.1089e-06,-7.11073e-10,0.214946,0.000906115,1.10677e-06,6.02692e-09,0.215853,0.000908346,1.12485e-06,-8.49548e-09,0.216763,0.00091057,1.09936e-06,1.30537e-08,0.217675,0.000912808,1.13852e-06,-1.3917e-08,0.218588,0.000915044,1.09677e-06,1.28121e-08,0.219505,0.000917276,1.13521e-06,-7.5288e-09,0.220423,0.000919523,1.11262e-06,2.40205e-09,0.221344,0.000921756,1.11983e-06,-2.07941e-09,0.222267,0.000923989,1.11359e-06,5.91551e-09,0.223192,0.000926234,1.13134e-06,-6.68149e-09,0.224119,0.000928477,1.11129e-06,5.90929e-09,0.225049,0.000930717,1.12902e-06,-2.05436e-09,0.22598,0.000932969,1.12286e-06,2.30807e-09,0.226915,0.000935222,1.12978e-06,-7.17796e-09,0.227851,0.00093746,1.10825e-06,1.15028e-08,0.228789,0.000939711,1.14276e-06,-9.03083e-09,0.22973,0.000941969,1.11566e-06,9.71932e-09,0.230673,0.00094423,1.14482e-06,-1.49452e-08,0.231619,0.000946474,1.09998e-06,2.02591e-08,0.232566,0.000948735,1.16076e-06,-2.13879e-08,0.233516,0.000950993,1.0966e-06,2.05888e-08,0.234468,0.000953247,1.15837e-06,-1.62642e-08,0.235423,0.000955515,1.10957e-06,1.46658e-08,0.236379,0.000957779,1.15357e-06,-1.25966e-08,0.237338,0.000960048,1.11578e-06,5.91793e-09,0.238299,0.000962297,1.13353e-06,3.82602e-09,0.239263,0.000964576,1.14501e-06,-6.3208e-09,0.240229,0.000966847,1.12605e-06,6.55613e-09,0.241197,0.000969119,1.14572e-06,-5.00268e-09,0.242167,0.000971395,1.13071e-06,-1.44659e-09,0.243139,0.000973652,1.12637e-06,1.07891e-08,0.244114,0.000975937,1.15874e-06,-1.19073e-08,0.245091,0.000978219,1.12302e-06,7.03782e-09,0.246071,0.000980486,1.14413e-06,-1.34276e-09,0.247052,0.00098277,1.1401e-06,-1.66669e-09,0.248036,0.000985046,1.1351e-06,8.00935e-09,0.249022,0.00098734,1.15913e-06,-1.54694e-08,0.250011,0.000989612,1.11272e-06,2.4066e-08,0.251002,0.000991909,1.18492e-06,-2.11901e-08,0.251995,0.000994215,1.12135e-06,1.08973e-09,0.25299,0.000996461,1.12462e-06,1.68311e-08,0.253988,0.000998761,1.17511e-06,-8.8094e-09,0.254987,0.00100109,1.14868e-06,-1.13958e-08,0.25599,0.00100335,1.1145e-06,2.45902e-08,0.256994,0.00100565,1.18827e-06,-2.73603e-08,0.258001,0.00100795,1.10618e-06,2.52464e-08,0.25901,0.00101023,1.18192e-06,-1.40207e-08,0.260021,0.00101256,1.13986e-06,1.03387e-09,0.261035,0.00101484,1.14296e-06,9.8853e-09,0.262051,0.00101715,1.17262e-06,-1.07726e-08,0.263069,0.00101947,1.1403e-06,3.40272e-09,0.26409,0.00102176,1.15051e-06,-2.83827e-09,0.265113,0.00102405,1.142e-06,7.95039e-09,0.266138,0.00102636,1.16585e-06,8.39047e-10,0.267166,0.00102869,1.16836e-06,-1.13066e-08,0.268196,0.00103099,1.13444e-06,1.4585e-08,0.269228,0.00103331,1.1782e-06,-1.72314e-08,0.270262,0.00103561,1.1265e-06,2.45382e-08,0.271299,0.00103794,1.20012e-06,-2.13166e-08,0.272338,0.00104028,1.13617e-06,1.12364e-09,0.273379,0.00104255,1.13954e-06,1.68221e-08,0.274423,0.00104488,1.19001e-06,-8.80736e-09,0.275469,0.00104723,1.16358e-06,-1.13948e-08,0.276518,0.00104953,1.1294e-06,2.45839e-08,0.277568,0.00105186,1.20315e-06,-2.73361e-08,0.278621,0.00105418,1.12114e-06,2.51559e-08,0.279677,0.0010565,1.19661e-06,-1.36832e-08,0.280734,0.00105885,1.15556e-06,-2.25706e-10,0.281794,0.00106116,1.15488e-06,1.45862e-08,0.282857,0.00106352,1.19864e-06,-2.83167e-08,0.283921,0.00106583,1.11369e-06,3.90759e-08,0.284988,0.00106817,1.23092e-06,-3.85801e-08,0.286058,0.00107052,1.11518e-06,2.58375e-08,0.287129,0.00107283,1.19269e-06,-5.16498e-09,0.288203,0.0010752,1.1772e-06,-5.17768e-09,0.28928,0.00107754,1.16167e-06,-3.92671e-09,0.290358,0.00107985,1.14988e-06,2.08846e-08,0.29144,0.00108221,1.21254e-06,-2.00072e-08,0.292523,0.00108458,1.15252e-06,-4.60659e-10,0.293609,0.00108688,1.15114e-06,2.18499e-08,0.294697,0.00108925,1.21669e-06,-2.73343e-08,0.295787,0.0010916,1.13468e-06,2.78826e-08,0.29688,0.00109395,1.21833e-06,-2.45915e-08,0.297975,0.00109632,1.14456e-06,1.08787e-08,0.299073,0.00109864,1.17719e-06,1.08788e-08,0.300172,0.00110102,1.20983e-06,-2.45915e-08,0.301275,0.00110337,1.13605e-06,2.78828e-08,0.302379,0.00110573,1.2197e-06,-2.73348e-08,0.303486,0.00110808,1.1377e-06,2.18518e-08,0.304595,0.00111042,1.20325e-06,-4.67556e-10,0.305707,0.00111283,1.20185e-06,-1.99816e-08,0.306821,0.00111517,1.14191e-06,2.07891e-08,0.307937,0.00111752,1.20427e-06,-3.57026e-09,0.309056,0.00111992,1.19356e-06,-6.50797e-09,0.310177,0.00112228,1.17404e-06,-2.00165e-10,0.3113,0.00112463,1.17344e-06,7.30874e-09,0.312426,0.001127,1.19536e-06,7.67424e-10,0.313554,0.00112939,1.19767e-06,-1.03784e-08,0.314685,0.00113176,1.16653e-06,1.09437e-08,0.315818,0.00113412,1.19936e-06,-3.59406e-09,0.316953,0.00113651,1.18858e-06,3.43251e-09,0.318091,0.0011389,1.19888e-06,-1.0136e-08,0.319231,0.00114127,1.16847e-06,7.30915e-09,0.320374,0.00114363,1.1904e-06,1.07018e-08,0.321518,0.00114604,1.2225e-06,-2.03137e-08,0.322666,0.00114842,1.16156e-06,1.09484e-08,0.323815,0.00115078,1.19441e-06,6.32224e-09,0.324967,0.00115319,1.21337e-06,-6.43509e-09,0.326122,0.00115559,1.19407e-06,-1.03842e-08,0.327278,0.00115795,1.16291e-06,1.81697e-08,0.328438,0.00116033,1.21742e-06,-2.6901e-09,0.329599,0.00116276,1.20935e-06,-7.40939e-09,0.330763,0.00116515,1.18713e-06,2.52533e-09,0.331929,0.00116754,1.1947e-06,-2.69191e-09,0.333098,0.00116992,1.18663e-06,8.24218e-09,0.334269,0.00117232,1.21135e-06,-4.74377e-10,0.335443,0.00117474,1.20993e-06,-6.34471e-09,0.336619,0.00117714,1.1909e-06,-3.94922e-09,0.337797,0.00117951,1.17905e-06,2.21417e-08,0.338978,0.00118193,1.24547e-06,-2.50128e-08,0.340161,0.00118435,1.17043e-06,1.8305e-08,0.341346,0.00118674,1.22535e-06,-1.84048e-08,0.342534,0.00118914,1.17013e-06,2.55121e-08,0.343725,0.00119156,1.24667e-06,-2.40389e-08,0.344917,0.00119398,1.17455e-06,1.10389e-08,0.346113,0.00119636,1.20767e-06,9.68574e-09,0.34731,0.0011988,1.23673e-06,-1.99797e-08,0.34851,0.00120122,1.17679e-06,1.06284e-08,0.349713,0.0012036,1.20867e-06,7.26868e-09,0.350917,0.00120604,1.23048e-06,-9.90072e-09,0.352125,0.00120847,1.20078e-06,2.53177e-09,0.353334,0.00121088,1.20837e-06,-2.26199e-10,0.354546,0.0012133,1.20769e-06,-1.62705e-09,0.355761,0.00121571,1.20281e-06,6.73435e-09,0.356978,0.00121813,1.22302e-06,4.49207e-09,0.358197,0.00122059,1.23649e-06,-2.47027e-08,0.359419,0.00122299,1.16238e-06,3.47142e-08,0.360643,0.00122542,1.26653e-06,-2.47472e-08,0.36187,0.00122788,1.19229e-06,4.66965e-09,0.363099,0.00123028,1.20629e-06,6.06872e-09,0.36433,0.00123271,1.2245e-06,8.57729e-10,0.365564,0.00123516,1.22707e-06,-9.49952e-09,0.366801,0.00123759,1.19858e-06,7.33792e-09,0.36804,0.00124001,1.22059e-06,9.95025e-09,0.369281,0.00124248,1.25044e-06,-1.73366e-08,0.370525,0.00124493,1.19843e-06,-2.08464e-10,0.371771,0.00124732,1.1978e-06,1.81704e-08,0.373019,0.00124977,1.25232e-06,-1.28683e-08,0.37427,0.00125224,1.21371e-06,3.50042e-09,0.375524,0.00125468,1.22421e-06,-1.1335e-09,0.37678,0.00125712,1.22081e-06,1.03345e-09,0.378038,0.00125957,1.22391e-06,-3.00023e-09,0.379299,0.00126201,1.21491e-06,1.09676e-08,0.380562,0.00126447,1.24781e-06,-1.10676e-08,0.381828,0.00126693,1.21461e-06,3.50042e-09,0.383096,0.00126937,1.22511e-06,-2.93403e-09,0.384366,0.00127181,1.21631e-06,8.23574e-09,0.385639,0.00127427,1.24102e-06,-2.06607e-10,0.386915,0.00127675,1.2404e-06,-7.40935e-09,0.388193,0.00127921,1.21817e-06,4.1761e-11,0.389473,0.00128165,1.21829e-06,7.24223e-09,0.390756,0.0012841,1.24002e-06,7.91564e-10,0.392042,0.00128659,1.2424e-06,-1.04086e-08,0.393329,0.00128904,1.21117e-06,1.10405e-08,0.39462,0.0012915,1.24429e-06,-3.951e-09,0.395912,0.00129397,1.23244e-06,4.7634e-09,0.397208,0.00129645,1.24673e-06,-1.51025e-08,0.398505,0.0012989,1.20142e-06,2.58443e-08,0.399805,0.00130138,1.27895e-06,-2.86702e-08,0.401108,0.00130385,1.19294e-06,2.92318e-08,0.402413,0.00130632,1.28064e-06,-2.86524e-08,0.403721,0.0013088,1.19468e-06,2.57731e-08,0.405031,0.00131127,1.272e-06,-1.48355e-08,0.406343,0.00131377,1.2275e-06,3.76652e-09,0.407658,0.00131623,1.23879e-06,-2.30784e-10,0.408976,0.00131871,1.2381e-06,-2.84331e-09,0.410296,0.00132118,1.22957e-06,1.16041e-08,0.411618,0.00132367,1.26438e-06,-1.37708e-08,0.412943,0.00132616,1.22307e-06,1.36768e-08,0.41427,0.00132865,1.2641e-06,-1.1134e-08,0.4156,0.00133114,1.2307e-06,1.05714e-09,0.416933,0.00133361,1.23387e-06,6.90538e-09,0.418267,0.00133609,1.25459e-06,1.12372e-09,0.419605,0.00133861,1.25796e-06,-1.14002e-08,0.420945,0.00134109,1.22376e-06,1.46747e-08,0.422287,0.00134358,1.26778e-06,-1.7496e-08,0.423632,0.00134606,1.21529e-06,2.5507e-08,0.424979,0.00134857,1.29182e-06,-2.49272e-08,0.426329,0.00135108,1.21703e-06,1.45972e-08,0.427681,0.00135356,1.26083e-06,-3.65935e-09,0.429036,0.00135607,1.24985e-06,4.00178e-11,0.430393,0.00135857,1.24997e-06,3.49917e-09,0.431753,0.00136108,1.26047e-06,-1.40366e-08,0.433116,0.00136356,1.21836e-06,2.28448e-08,0.43448,0.00136606,1.28689e-06,-1.77378e-08,0.435848,0.00136858,1.23368e-06,1.83043e-08,0.437218,0.0013711,1.28859e-06,-2.56769e-08,0.43859,0.0013736,1.21156e-06,2.47987e-08,0.439965,0.0013761,1.28595e-06,-1.39133e-08,0.441342,0.00137863,1.24421e-06,1.05202e-09,0.442722,0.00138112,1.24737e-06,9.70507e-09,0.444104,0.00138365,1.27649e-06,-1.00698e-08,0.445489,0.00138617,1.24628e-06,7.72123e-10,0.446877,0.00138867,1.24859e-06,6.98132e-09,0.448267,0.00139118,1.26954e-06,1.10477e-09,0.449659,0.00139373,1.27285e-06,-1.14003e-08,0.451054,0.00139624,1.23865e-06,1.4694e-08,0.452452,0.00139876,1.28273e-06,-1.75734e-08,0.453852,0.00140127,1.23001e-06,2.5797e-08,0.455254,0.00140381,1.3074e-06,-2.60097e-08,0.456659,0.00140635,1.22937e-06,1.86371e-08,0.458067,0.00140886,1.28529e-06,-1.8736e-08,0.459477,0.00141137,1.22908e-06,2.65048e-08,0.46089,0.00141391,1.30859e-06,-2.76784e-08,0.462305,0.00141645,1.22556e-06,2.46043e-08,0.463722,0.00141897,1.29937e-06,-1.11341e-08,0.465143,0.00142154,1.26597e-06,-9.87033e-09,0.466565,0.00142404,1.23636e-06,2.08131e-08,0.467991,0.00142657,1.2988e-06,-1.37773e-08,0.469419,0.00142913,1.25746e-06,4.49378e-09,0.470849,0.00143166,1.27094e-06,-4.19781e-09,0.472282,0.00143419,1.25835e-06,1.22975e-08,0.473717,0.00143674,1.29524e-06,-1.51902e-08,0.475155,0.00143929,1.24967e-06,1.86608e-08,0.476596,0.00144184,1.30566e-06,-2.96506e-08,0.478039,0.00144436,1.2167e-06,4.03368e-08,0.479485,0.00144692,1.33771e-06,-4.22896e-08,0.480933,0.00144947,1.21085e-06,3.94148e-08,0.482384,0.00145201,1.32909e-06,-2.59626e-08,0.483837,0.00145459,1.2512e-06,4.83124e-09,0.485293,0.0014571,1.2657e-06,6.63757e-09,0.486751,0.00145966,1.28561e-06,-1.57911e-09,0.488212,0.00146222,1.28087e-06,-3.21468e-10,0.489676,0.00146478,1.27991e-06,2.86517e-09,0.491142,0.00146735,1.2885e-06,-1.11392e-08,0.49261,0.00146989,1.25508e-06,1.18893e-08,0.494081,0.00147244,1.29075e-06,-6.61574e-09,0.495555,0.001475,1.27091e-06,1.45736e-08,0.497031,0.00147759,1.31463e-06,-2.18759e-08,0.49851,0.00148015,1.249e-06,1.33252e-08,0.499992,0.00148269,1.28897e-06,-1.62277e-09,0.501476,0.00148526,1.28411e-06,-6.83421e-09,0.502962,0.00148781,1.2636e-06,2.89596e-08,0.504451,0.00149042,1.35048e-06,-4.93997e-08,0.505943,0.00149298,1.20228e-06,4.94299e-08,0.507437,0.00149553,1.35057e-06,-2.91107e-08,0.508934,0.00149814,1.26324e-06,7.40848e-09,0.510434,0.00150069,1.28547e-06,-5.23187e-10,0.511936,0.00150326,1.2839e-06,-5.31585e-09,0.51344,0.00150581,1.26795e-06,2.17866e-08,0.514947,0.00150841,1.33331e-06,-2.22257e-08,0.516457,0.00151101,1.26663e-06,7.51178e-09,0.517969,0.00151357,1.28917e-06,-7.82128e-09,0.519484,0.00151613,1.2657e-06,2.37733e-08,0.521002,0.00151873,1.33702e-06,-2.76674e-08,0.522522,0.00152132,1.25402e-06,2.72917e-08,0.524044,0.00152391,1.3359e-06,-2.18949e-08,0.525569,0.00152652,1.27021e-06,6.83372e-10,0.527097,0.00152906,1.27226e-06,1.91613e-08,0.528628,0.00153166,1.32974e-06,-1.77241e-08,0.53016,0.00153427,1.27657e-06,-7.86963e-09,0.531696,0.0015368,1.25296e-06,4.92027e-08,0.533234,0.00153945,1.40057e-06,-6.9732e-08,0.534775,0.00154204,1.19138e-06,5.09114e-08,0.536318,0.00154458,1.34411e-06,-1.4704e-08,0.537864,0.00154722,1.3e-06,7.9048e-09,0.539413,0.00154984,1.32371e-06,-1.69152e-08,0.540964,0.00155244,1.27297e-06,1.51355e-10,0.542517,0.00155499,1.27342e-06,1.63099e-08,0.544074,0.00155758,1.32235e-06,-5.78647e-09,0.545633,0.00156021,1.30499e-06,6.83599e-09,0.547194,0.00156284,1.3255e-06,-2.15575e-08,0.548758,0.00156543,1.26083e-06,1.97892e-08,0.550325,0.00156801,1.32019e-06,2.00525e-09,0.551894,0.00157065,1.32621e-06,-2.78103e-08,0.553466,0.00157322,1.24278e-06,4.96314e-08,0.555041,0.00157586,1.39167e-06,-5.1506e-08,0.556618,0.00157849,1.23716e-06,3.71835e-08,0.558198,0.00158107,1.34871e-06,-3.76233e-08,0.55978,0.00158366,1.23584e-06,5.37052e-08,0.561365,0.00158629,1.39695e-06,-5.79884e-08,0.562953,0.00158891,1.22299e-06,5.90392e-08,0.564543,0.00159153,1.4001e-06,-5.89592e-08,0.566136,0.00159416,1.22323e-06,5.7588e-08,0.567731,0.00159678,1.39599e-06,-5.21835e-08,0.569329,0.00159941,1.23944e-06,3.19369e-08,0.57093,0.00160199,1.33525e-06,-1.59594e-08,0.572533,0.00160461,1.28737e-06,3.19006e-08,0.574139,0.00160728,1.38307e-06,-5.20383e-08,0.575748,0.00160989,1.22696e-06,5.70431e-08,0.577359,0.00161251,1.39809e-06,-5.69247e-08,0.578973,0.00161514,1.22731e-06,5.14463e-08,0.580589,0.00161775,1.38165e-06,-2.9651e-08,0.582208,0.00162042,1.2927e-06,7.55339e-09,0.58383,0.00162303,1.31536e-06,-5.62636e-10,0.585455,0.00162566,1.31367e-06,-5.30281e-09,0.587081,0.00162827,1.29776e-06,2.17738e-08,0.588711,0.00163093,1.36309e-06,-2.21875e-08,0.590343,0.00163359,1.29652e-06,7.37164e-09,0.591978,0.00163621,1.31864e-06,-7.29907e-09,0.593616,0.00163882,1.29674e-06,2.18247e-08,0.595256,0.00164148,1.36221e-06,-2.03952e-08,0.596899,0.00164414,1.30103e-06,1.51241e-10,0.598544,0.00164675,1.30148e-06,1.97902e-08,0.600192,0.00164941,1.36085e-06,-1.97074e-08,0.601843,0.00165207,1.30173e-06,-5.65175e-10,0.603496,0.00165467,1.30004e-06,2.1968e-08,0.605152,0.00165734,1.36594e-06,-2.77024e-08,0.606811,0.00165999,1.28283e-06,2.92369e-08,0.608472,0.00166264,1.37054e-06,-2.96407e-08,0.610136,0.00166529,1.28162e-06,2.97215e-08,0.611803,0.00166795,1.37079e-06,-2.96408e-08,0.613472,0.0016706,1.28186e-06,2.92371e-08,0.615144,0.00167325,1.36957e-06,-2.77031e-08,0.616819,0.00167591,1.28647e-06,2.19708e-08,0.618496,0.00167855,1.35238e-06,-5.75407e-10,0.620176,0.00168125,1.35065e-06,-1.9669e-08,0.621858,0.00168389,1.29164e-06,1.96468e-08,0.623544,0.00168653,1.35058e-06,6.86403e-10,0.625232,0.00168924,1.35264e-06,-2.23924e-08,0.626922,0.00169187,1.28547e-06,2.92788e-08,0.628615,0.00169453,1.3733e-06,-3.51181e-08,0.630311,0.00169717,1.26795e-06,5.15889e-08,0.63201,0.00169987,1.42272e-06,-5.2028e-08,0.633711,0.00170255,1.26663e-06,3.73139e-08,0.635415,0.0017052,1.37857e-06,-3.76227e-08,0.637121,0.00170784,1.2657e-06,5.35722e-08,0.63883,0.00171054,1.42642e-06,-5.74567e-08,0.640542,0.00171322,1.25405e-06,5.70456e-08,0.642257,0.0017159,1.42519e-06,-5.15163e-08,0.643974,0.00171859,1.27064e-06,2.98103e-08,0.645694,0.00172122,1.36007e-06,-8.12016e-09,0.647417,0.00172392,1.33571e-06,2.67039e-09,0.649142,0.0017266,1.34372e-06,-2.56152e-09,0.65087,0.00172928,1.33604e-06,7.57571e-09,0.6526,0.00173197,1.35876e-06,-2.77413e-08,0.654334,0.00173461,1.27554e-06,4.3785e-08,0.65607,0.00173729,1.40689e-06,-2.81896e-08,0.657808,0.00174002,1.32233e-06,9.36893e-09,0.65955,0.00174269,1.35043e-06,-9.28617e-09,0.661294,0.00174536,1.32257e-06,2.77757e-08,0.66304,0.00174809,1.4059e-06,-4.2212e-08,0.66479,0.00175078,1.27926e-06,2.1863e-08,0.666542,0.0017534,1.34485e-06,1.43648e-08,0.668297,0.00175613,1.38795e-06,-1.97177e-08,0.670054,0.00175885,1.3288e-06,4.90115e-09,0.671814,0.00176152,1.3435e-06,1.13232e-10,0.673577,0.00176421,1.34384e-06,-5.3542e-09,0.675343,0.00176688,1.32778e-06,2.13035e-08,0.677111,0.0017696,1.39169e-06,-2.02553e-08,0.678882,0.00177232,1.33092e-06,1.13005e-10,0.680656,0.00177499,1.33126e-06,1.98031e-08,0.682432,0.00177771,1.39067e-06,-1.97211e-08,0.684211,0.00178043,1.33151e-06,-5.2349e-10,0.685993,0.00178309,1.32994e-06,2.18151e-08,0.687777,0.00178582,1.39538e-06,-2.71325e-08,0.689564,0.00178853,1.31398e-06,2.71101e-08,0.691354,0.00179124,1.39531e-06,-2.17035e-08,0.693147,0.00179396,1.3302e-06,9.92865e-11,0.694942,0.00179662,1.3305e-06,2.13063e-08,0.69674,0.00179935,1.39442e-06,-2.57198e-08,0.698541,0.00180206,1.31726e-06,2.19682e-08,0.700344,0.00180476,1.38317e-06,-2.54852e-09,0.70215,0.00180752,1.37552e-06,-1.17741e-08,0.703959,0.00181023,1.3402e-06,-9.95999e-09,0.705771,0.00181288,1.31032e-06,5.16141e-08,0.707585,0.00181566,1.46516e-06,-7.72869e-08,0.709402,0.00181836,1.2333e-06,7.87197e-08,0.711222,0.00182106,1.46946e-06,-5.87781e-08,0.713044,0.00182382,1.29312e-06,3.71834e-08,0.714869,0.00182652,1.40467e-06,-3.03511e-08,0.716697,0.00182924,1.31362e-06,2.46161e-08,0.718528,0.00183194,1.38747e-06,-8.5087e-09,0.720361,0.00183469,1.36194e-06,9.41892e-09,0.722197,0.00183744,1.3902e-06,-2.91671e-08,0.724036,0.00184014,1.3027e-06,4.76448e-08,0.725878,0.00184288,1.44563e-06,-4.22028e-08,0.727722,0.00184565,1.31902e-06,1.95682e-09,0.729569,0.00184829,1.3249e-06,3.43754e-08,0.731419,0.00185104,1.42802e-06,-2.0249e-08,0.733271,0.00185384,1.36727e-06,-1.29838e-08,0.735126,0.00185654,1.32832e-06,1.25794e-08,0.736984,0.00185923,1.36606e-06,2.22711e-08,0.738845,0.00186203,1.43287e-06,-4.20594e-08,0.740708,0.00186477,1.3067e-06,2.67571e-08,0.742574,0.00186746,1.38697e-06,-5.36424e-09,0.744443,0.00187022,1.37087e-06,-5.30023e-09,0.746315,0.00187295,1.35497e-06,2.65653e-08,0.748189,0.00187574,1.43467e-06,-4.13564e-08,0.750066,0.00187848,1.3106e-06,1.9651e-08,0.751946,0.00188116,1.36955e-06,2.23572e-08,0.753828,0.00188397,1.43663e-06,-4.9475e-08,0.755714,0.00188669,1.2882e-06,5.63335e-08,0.757602,0.00188944,1.4572e-06,-5.66499e-08,0.759493,0.00189218,1.28725e-06,5.10567e-08,0.761386,0.00189491,1.44042e-06,-2.83677e-08,0.763283,0.00189771,1.35532e-06,2.80962e-09,0.765182,0.00190042,1.36375e-06,1.71293e-08,0.767083,0.0019032,1.41513e-06,-1.17221e-08,0.768988,0.001906,1.37997e-06,-2.98453e-08,0.770895,0.00190867,1.29043e-06,7.14987e-08,0.772805,0.00191146,1.50493e-06,-7.73354e-08,0.774718,0.00191424,1.27292e-06,5.90292e-08,0.776634,0.00191697,1.45001e-06,-3.9572e-08,0.778552,0.00191975,1.33129e-06,3.9654e-08,0.780473,0.00192253,1.45026e-06,-5.94395e-08,0.782397,0.00192525,1.27194e-06,7.88945e-08,0.784324,0.00192803,1.50862e-06,-7.73249e-08,0.786253,0.00193082,1.27665e-06,5.15913e-08,0.788185,0.00193352,1.43142e-06,-9.83099e-09,0.79012,0.00193636,1.40193e-06,-1.22672e-08,0.792058,0.00193912,1.36513e-06,-7.05275e-10,0.793999,0.00194185,1.36301e-06,1.50883e-08,0.795942,0.00194462,1.40828e-06,-4.33147e-11,0.797888,0.00194744,1.40815e-06,-1.49151e-08,0.799837,0.00195021,1.3634e-06,9.93244e-11,0.801788,0.00195294,1.3637e-06,1.45179e-08,0.803743,0.00195571,1.40725e-06,1.43363e-09,0.8057,0.00195853,1.41155e-06,-2.02525e-08,0.80766,0.00196129,1.35079e-06,1.99718e-08,0.809622,0.00196405,1.41071e-06,-3.01649e-11,0.811588,0.00196687,1.41062e-06,-1.9851e-08,0.813556,0.00196964,1.35107e-06,1.98296e-08,0.815527,0.0019724,1.41056e-06,1.37485e-10,0.817501,0.00197522,1.41097e-06,-2.03796e-08,0.819477,0.00197798,1.34983e-06,2.17763e-08,0.821457,0.00198074,1.41516e-06,-7.12085e-09,0.823439,0.00198355,1.3938e-06,6.70707e-09,0.825424,0.00198636,1.41392e-06,-1.97074e-08,0.827412,0.00198913,1.35479e-06,1.25179e-08,0.829402,0.00199188,1.39235e-06,2.92405e-08,0.831396,0.00199475,1.48007e-06,-6.98755e-08,0.833392,0.0019975,1.27044e-06,7.14477e-08,0.835391,0.00200026,1.48479e-06,-3.71014e-08,0.837392,0.00200311,1.37348e-06,1.73533e-08,0.839397,0.00200591,1.42554e-06,-3.23118e-08,0.841404,0.00200867,1.32861e-06,5.2289e-08,0.843414,0.00201148,1.48547e-06,-5.76348e-08,0.845427,0.00201428,1.31257e-06,5.9041e-08,0.847443,0.00201708,1.48969e-06,-5.93197e-08,0.849461,0.00201988,1.31173e-06,5.90289e-08,0.851482,0.00202268,1.48882e-06,-5.75864e-08,0.853507,0.00202549,1.31606e-06,5.21075e-08,0.855533,0.00202828,1.47238e-06,-3.16344e-08,0.857563,0.00203113,1.37748e-06,1.48257e-08,0.859596,0.00203393,1.42196e-06,-2.76684e-08,0.861631,0.00203669,1.33895e-06,3.62433e-08,0.863669,0.00203947,1.44768e-06,1.90463e-09,0.86571,0.00204237,1.45339e-06,-4.38617e-08,0.867754,0.00204515,1.32181e-06,5.43328e-08,0.8698,0.00204796,1.48481e-06,-5.42603e-08,0.87185,0.00205076,1.32203e-06,4.34989e-08,0.873902,0.00205354,1.45252e-06,-5.26029e-10,0.875957,0.00205644,1.45095e-06,-4.13949e-08,0.878015,0.00205922,1.32676e-06,4.68962e-08,0.880075,0.00206201,1.46745e-06,-2.69807e-08,0.882139,0.00206487,1.38651e-06,1.42181e-09,0.884205,0.00206764,1.39077e-06,2.12935e-08,0.886274,0.00207049,1.45465e-06,-2.69912e-08,0.888346,0.00207332,1.37368e-06,2.70664e-08,0.890421,0.00207615,1.45488e-06,-2.16698e-08,0.892498,0.00207899,1.38987e-06,8.14756e-12,0.894579,0.00208177,1.38989e-06,2.16371e-08,0.896662,0.00208462,1.45481e-06,-2.6952e-08,0.898748,0.00208744,1.37395e-06,2.65663e-08,0.900837,0.00209027,1.45365e-06,-1.97084e-08,0.902928,0.00209312,1.39452e-06,-7.33731e-09,0.905023,0.00209589,1.37251e-06,4.90578e-08,0.90712,0.00209878,1.51968e-06,-6.96845e-08,0.90922,0.00210161,1.31063e-06,5.08664e-08,0.911323,0.00210438,1.46323e-06,-1.45717e-08,0.913429,0.00210727,1.41952e-06,7.42038e-09,0.915538,0.00211013,1.44178e-06,-1.51097e-08,0.917649,0.00211297,1.39645e-06,-6.58618e-09,0.919764,0.00211574,1.37669e-06,4.14545e-08,0.921881,0.00211862,1.50105e-06,-4.00222e-08,0.924001,0.0021215,1.38099e-06,-5.7518e-10,0.926124,0.00212426,1.37926e-06,4.23229e-08,0.92825,0.00212714,1.50623e-06,-4.9507e-08,0.930378,0.00213001,1.35771e-06,3.64958e-08,0.93251,0.00213283,1.4672e-06,-3.68713e-08,0.934644,0.00213566,1.35658e-06,5.13848e-08,0.936781,0.00213852,1.51074e-06,-4.94585e-08,0.938921,0.0021414,1.36236e-06,2.72399e-08,0.941064,0.0021442,1.44408e-06,1.0372e-10,0.943209,0.00214709,1.44439e-06,-2.76547e-08,0.945358,0.0021499,1.36143e-06,5.09106e-08,0.947509,0.00215277,1.51416e-06,-5.67784e-08,0.949663,0.00215563,1.34382e-06,5.69935e-08,0.95182,0.00215849,1.5148e-06,-5.19861e-08,0.95398,0.00216136,1.35885e-06,3.17417e-08,0.956143,0.00216418,1.45407e-06,-1.53758e-08,0.958309,0.00216704,1.40794e-06,2.97615e-08,0.960477,0.00216994,1.49723e-06,-4.40657e-08,0.962649,0.00217281,1.36503e-06,2.72919e-08,0.964823,0.00217562,1.44691e-06,-5.49729e-09,0.967,0.0021785,1.43041e-06,-5.30273e-09,0.96918,0.00218134,1.41451e-06,2.67084e-08,0.971363,0.00218425,1.49463e-06,-4.19265e-08,0.973548,0.00218711,1.36885e-06,2.17881e-08,0.975737,0.00218992,1.43422e-06,1.43789e-08,0.977928,0.00219283,1.47735e-06,-1.96989e-08,0.980122,0.00219572,1.41826e-06,4.81221e-09,0.98232,0.00219857,1.43269e-06,4.50048e-10,0.98452,0.00220144,1.43404e-06,-6.61237e-09,0.986722,0.00220429,1.41421e-06,2.59993e-08,0.988928,0.0022072,1.4922e-06,-3.77803e-08,0.991137,0.00221007,1.37886e-06,5.9127e-09,0.993348,0.00221284,1.3966e-06,1.33339e-07,0.995563,0.00221604,1.79662e-06,-5.98872e-07,0.99778,0.00222015,0.,0.};

    __device__ static int LabCbrt_b(int i)
    {
        float x = i * (1.f / (255.f * (1 << gamma_shift)));
        return (1 << lab_shift2) * (x < 0.008856f ? x * 7.787f + 0.13793103448275862f : ::cbrtf(x));
    }

    __device__ static float splineInterpolate(float x, const float* tab, int n)
    {
        int ix = ::min(::max(int(x), 0), n-1);
        x -= ix;
        tab += ix * 4;
        return ((tab[3] * x + tab[2]) * x + tab[1]) * x + tab[0];
    }

    template <typename T, int scn, int dcn, bool srgb, int blueIdx> struct RGB2Lab;

    template <int scn, int dcn, bool srgb, int blueIdx> struct RGB2Lab<uchar, scn, dcn, srgb, blueIdx>
            : unary_function<typename MakeVec<uchar, scn>::type, typename MakeVec<uchar, dcn>::type>
    {
        __device__ typename MakeVec<uchar, dcn>::type operator ()(const typename MakeVec<uchar, scn>::type& src) const
        {
            const int Lscale = (116 * 255 + 50) / 100;
            const int Lshift = -((16 * 255 * (1 << lab_shift2) + 50) / 100);

            int B = blueIdx == 0 ? src.x : src.z;
            int G = src.y;
            int R = blueIdx == 0 ? src.z : src.x;

            if (srgb)
            {
                B = c_sRGBGammaTab_b[B];
                G = c_sRGBGammaTab_b[G];
                R = c_sRGBGammaTab_b[R];
            }
            else
            {
                B <<= 3;
                G <<= 3;
                R <<= 3;
            }

            int fX = LabCbrt_b(CV_CUDEV_DESCALE(B * 778 + G * 1541 + R * 1777, lab_shift));
            int fY = LabCbrt_b(CV_CUDEV_DESCALE(B * 296 + G * 2929 + R * 871, lab_shift));
            int fZ = LabCbrt_b(CV_CUDEV_DESCALE(B * 3575 + G * 448 + R * 73, lab_shift));

            int L = CV_CUDEV_DESCALE(Lscale * fY + Lshift, lab_shift2);
            int a = CV_CUDEV_DESCALE(500 * (fX - fY) + 128 * (1 << lab_shift2), lab_shift2);
            int b = CV_CUDEV_DESCALE(200 * (fY - fZ) + 128 * (1 << lab_shift2), lab_shift2);

            typename MakeVec<uchar, dcn>::type dst;

            dst.x = saturate_cast<uchar>(L);
            dst.y = saturate_cast<uchar>(a);
            dst.z = saturate_cast<uchar>(b);

            return dst;
        }
    };

    template <int scn, int dcn, bool srgb, int blueIdx> struct RGB2Lab<float, scn, dcn, srgb, blueIdx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float _1_3 = 1.0f / 3.0f;
            const float _a = 16.0f / 116.0f;

            float B = blueIdx == 0 ? src.x : src.z;
            float G = src.y;
            float R = blueIdx == 0 ? src.z : src.x;

            if (srgb)
            {
                B = splineInterpolate(B * GAMMA_TAB_SIZE, c_sRGBGammaTab, GAMMA_TAB_SIZE);
                G = splineInterpolate(G * GAMMA_TAB_SIZE, c_sRGBGammaTab, GAMMA_TAB_SIZE);
                R = splineInterpolate(R * GAMMA_TAB_SIZE, c_sRGBGammaTab, GAMMA_TAB_SIZE);
            }

            float X = B * 0.189828f + G * 0.376219f + R * 0.433953f;
            float Y = B * 0.072169f + G * 0.715160f + R * 0.212671f;
            float Z = B * 0.872766f + G * 0.109477f + R * 0.017758f;

            float FX = X > 0.008856f ? ::powf(X, _1_3) : (7.787f * X + _a);
            float FY = Y > 0.008856f ? ::powf(Y, _1_3) : (7.787f * Y + _a);
            float FZ = Z > 0.008856f ? ::powf(Z, _1_3) : (7.787f * Z + _a);

            float L = Y > 0.008856f ? (116.f * FY - 16.f) : (903.3f * Y);
            float a = 500.f * (FX - FY);
            float b = 200.f * (FY - FZ);

            typename MakeVec<float, dcn>::type dst;

            dst.x = L;
            dst.y = a;
            dst.z = b;

            return dst;
        }
    };

    // Lab to RGB

    __constant__ float c_sRGBInvGammaTab[] = {0,0.0126255,0.,-8.33961e-06,0.0126172,0.0126005,-2.50188e-05,4.1698e-05,0.0252344,0.0126756,0.000100075,-0.000158451,0.0378516,0.0124004,-0.000375277,-0.000207393,0.0496693,0.0110276,-0.000997456,0.00016837,0.0598678,0.00953783,-0.000492346,2.07235e-05,0.068934,0.00861531,-0.000430176,3.62876e-05,0.0771554,0.00786382,-0.000321313,1.87625e-05,0.0847167,0.00727748,-0.000265025,1.53594e-05,0.0917445,0.00679351,-0.000218947,1.10545e-05,0.0983301,0.00638877,-0.000185784,8.66984e-06,0.104542,0.00604322,-0.000159774,6.82996e-06,0.110432,0.00574416,-0.000139284,5.51008e-06,0.116042,0.00548212,-0.000122754,4.52322e-06,0.121406,0.00525018,-0.000109184,3.75557e-06,0.126551,0.00504308,-9.79177e-05,3.17134e-06,0.131499,0.00485676,-8.84037e-05,2.68469e-06,0.13627,0.004688,-8.03496e-05,2.31725e-06,0.14088,0.00453426,-7.33978e-05,2.00868e-06,0.145343,0.00439349,-6.73718e-05,1.74775e-06,0.149671,0.00426399,-6.21286e-05,1.53547e-06,0.153875,0.00414434,-5.75222e-05,1.364e-06,0.157963,0.00403338,-5.34301e-05,1.20416e-06,0.161944,0.00393014,-4.98177e-05,1.09114e-06,0.165825,0.00383377,-4.65443e-05,9.57987e-07,0.169613,0.00374356,-4.36703e-05,8.88359e-07,0.173314,0.00365888,-4.10052e-05,7.7849e-07,0.176933,0.00357921,-3.86697e-05,7.36254e-07,0.180474,0.00350408,-3.6461e-05,6.42534e-07,0.183942,0.00343308,-3.45334e-05,6.12614e-07,0.187342,0.00336586,-3.26955e-05,5.42894e-07,0.190675,0.00330209,-3.10669e-05,5.08967e-07,0.193947,0.00324149,-2.954e-05,4.75977e-07,0.197159,0.00318383,-2.8112e-05,4.18343e-07,0.200315,0.00312887,-2.6857e-05,4.13651e-07,0.203418,0.00307639,-2.5616e-05,3.70847e-07,0.206469,0.00302627,-2.45035e-05,3.3813e-07,0.209471,0.00297828,-2.34891e-05,3.32999e-07,0.212426,0.0029323,-2.24901e-05,2.96826e-07,0.215336,0.00288821,-2.15996e-05,2.82736e-07,0.218203,0.00284586,-2.07514e-05,2.70961e-07,0.221029,0.00280517,-1.99385e-05,2.42744e-07,0.223814,0.00276602,-1.92103e-05,2.33277e-07,0.226561,0.0027283,-1.85105e-05,2.2486e-07,0.229271,0.00269195,-1.78359e-05,2.08383e-07,0.231945,0.00265691,-1.72108e-05,1.93305e-07,0.234585,0.00262307,-1.66308e-05,1.80687e-07,0.237192,0.00259035,-1.60888e-05,1.86632e-07,0.239766,0.00255873,-1.55289e-05,1.60569e-07,0.24231,0.00252815,-1.50472e-05,1.54566e-07,0.244823,0.00249852,-1.45835e-05,1.59939e-07,0.247307,0.00246983,-1.41037e-05,1.29549e-07,0.249763,0.00244202,-1.3715e-05,1.41429e-07,0.252191,0.00241501,-1.32907e-05,1.39198e-07,0.254593,0.00238885,-1.28731e-05,1.06444e-07,0.256969,0.00236342,-1.25538e-05,1.2048e-07,0.25932,0.00233867,-1.21924e-05,1.26892e-07,0.261647,0.00231467,-1.18117e-05,8.72084e-08,0.26395,0.00229131,-1.15501e-05,1.20323e-07,0.26623,0.00226857,-1.11891e-05,8.71514e-08,0.268487,0.00224645,-1.09276e-05,9.73165e-08,0.270723,0.00222489,-1.06357e-05,8.98259e-08,0.272937,0.00220389,-1.03662e-05,7.98218e-08,0.275131,0.00218339,-1.01267e-05,9.75254e-08,0.277304,0.00216343,-9.83416e-06,6.65195e-08,0.279458,0.00214396,-9.63461e-06,8.34313e-08,0.281592,0.00212494,-9.38431e-06,7.65919e-08,0.283708,0.00210641,-9.15454e-06,5.7236e-08,0.285805,0.00208827,-8.98283e-06,8.18939e-08,0.287885,0.00207055,-8.73715e-06,6.2224e-08,0.289946,0.00205326,-8.55047e-06,5.66388e-08,0.291991,0.00203633,-8.38056e-06,6.88491e-08,0.294019,0.00201978,-8.17401e-06,5.53955e-08,0.296031,0.00200359,-8.00782e-06,6.71971e-08,0.298027,0.00198778,-7.80623e-06,3.34439e-08,0.300007,0.00197227,-7.7059e-06,6.7248e-08,0.301971,0.00195706,-7.50416e-06,5.51915e-08,0.303921,0.00194221,-7.33858e-06,3.98124e-08,0.305856,0.00192766,-7.21915e-06,5.37795e-08,0.307776,0.00191338,-7.05781e-06,4.30919e-08,0.309683,0.00189939,-6.92853e-06,4.20744e-08,0.311575,0.00188566,-6.80231e-06,5.68321e-08,0.313454,0.00187223,-6.63181e-06,2.86195e-08,0.31532,0.00185905,-6.54595e-06,3.73075e-08,0.317172,0.00184607,-6.43403e-06,6.05684e-08,0.319012,0.00183338,-6.25233e-06,1.84426e-08,0.320839,0.00182094,-6.197e-06,4.44757e-08,0.322654,0.00180867,-6.06357e-06,4.20729e-08,0.324456,0.00179667,-5.93735e-06,2.56511e-08,0.326247,0.00178488,-5.8604e-06,3.41368e-08,0.328026,0.00177326,-5.75799e-06,4.64177e-08,0.329794,0.00176188,-5.61874e-06,1.86107e-08,0.33155,0.0017507,-5.5629e-06,2.81511e-08,0.333295,0.00173966,-5.47845e-06,4.75987e-08,0.335029,0.00172884,-5.33565e-06,1.98726e-08,0.336753,0.00171823,-5.27604e-06,2.19226e-08,0.338466,0.00170775,-5.21027e-06,4.14483e-08,0.340169,0.00169745,-5.08592e-06,2.09017e-08,0.341861,0.00168734,-5.02322e-06,2.39561e-08,0.343543,0.00167737,-4.95135e-06,3.22852e-08,0.345216,0.00166756,-4.85449e-06,2.57173e-08,0.346878,0.00165793,-4.77734e-06,1.38569e-08,0.348532,0.00164841,-4.73577e-06,3.80634e-08,0.350175,0.00163906,-4.62158e-06,1.27043e-08,0.35181,0.00162985,-4.58347e-06,3.03279e-08,0.353435,0.00162078,-4.49249e-06,1.49961e-08,0.355051,0.00161184,-4.4475e-06,2.88977e-08,0.356659,0.00160303,-4.3608e-06,1.84241e-08,0.358257,0.00159436,-4.30553e-06,1.6616e-08,0.359848,0.0015858,-4.25568e-06,3.43218e-08,0.361429,0.00157739,-4.15272e-06,-4.89172e-09,0.363002,0.00156907,-4.16739e-06,4.48498e-08,0.364567,0.00156087,-4.03284e-06,4.30676e-09,0.366124,0.00155282,-4.01992e-06,2.73303e-08,0.367673,0.00154486,-3.93793e-06,5.58036e-09,0.369214,0.001537,-3.92119e-06,3.97554e-08,0.370747,0.00152928,-3.80193e-06,-1.55904e-08,0.372272,0.00152163,-3.8487e-06,5.24081e-08,0.37379,0.00151409,-3.69147e-06,-1.52272e-08,0.375301,0.00150666,-3.73715e-06,3.83028e-08,0.376804,0.0014993,-3.62225e-06,1.10278e-08,0.378299,0.00149209,-3.58916e-06,6.99326e-09,0.379788,0.00148493,-3.56818e-06,2.06038e-08,0.381269,0.00147786,-3.50637e-06,2.98009e-08,0.382744,0.00147093,-3.41697e-06,-2.05978e-08,0.384211,0.00146404,-3.47876e-06,5.25899e-08,0.385672,0.00145724,-3.32099e-06,-1.09471e-08,0.387126,0.00145056,-3.35383e-06,2.10009e-08,0.388573,0.00144392,-3.29083e-06,1.63501e-08,0.390014,0.00143739,-3.24178e-06,3.00641e-09,0.391448,0.00143091,-3.23276e-06,3.12282e-08,0.392875,0.00142454,-3.13908e-06,-8.70932e-09,0.394297,0.00141824,-3.16521e-06,3.34114e-08,0.395712,0.00141201,-3.06497e-06,-5.72754e-09,0.397121,0.00140586,-3.08215e-06,1.9301e-08,0.398524,0.00139975,-3.02425e-06,1.7931e-08,0.39992,0.00139376,-2.97046e-06,-1.61822e-09,0.401311,0.00138781,-2.97531e-06,1.83442e-08,0.402696,0.00138192,-2.92028e-06,1.76485e-08,0.404075,0.00137613,-2.86733e-06,4.68617e-10,0.405448,0.00137039,-2.86593e-06,1.02794e-08,0.406816,0.00136469,-2.83509e-06,1.80179e-08,0.408178,0.00135908,-2.78104e-06,7.05594e-09,0.409534,0.00135354,-2.75987e-06,1.33633e-08,0.410885,0.00134806,-2.71978e-06,-9.04568e-10,0.41223,0.00134261,-2.72249e-06,2.0057e-08,0.41357,0.00133723,-2.66232e-06,1.00841e-08,0.414905,0.00133194,-2.63207e-06,-7.88835e-10,0.416234,0.00132667,-2.63444e-06,2.28734e-08,0.417558,0.00132147,-2.56582e-06,-1.29785e-09,0.418877,0.00131633,-2.56971e-06,1.21205e-08,0.420191,0.00131123,-2.53335e-06,1.24202e-08,0.421499,0.0013062,-2.49609e-06,-2.19681e-09,0.422803,0.0013012,-2.50268e-06,2.61696e-08,0.424102,0.00129628,-2.42417e-06,-1.30747e-08,0.425396,0.00129139,-2.46339e-06,2.6129e-08,0.426685,0.00128654,-2.38501e-06,-2.03454e-09,0.427969,0.00128176,-2.39111e-06,1.18115e-08,0.429248,0.00127702,-2.35567e-06,1.43932e-08,0.430523,0.00127235,-2.31249e-06,-9.77965e-09,0.431793,0.00126769,-2.34183e-06,2.47253e-08,0.433058,0.00126308,-2.26766e-06,2.85278e-10,0.434319,0.00125855,-2.2668e-06,3.93614e-09,0.435575,0.00125403,-2.25499e-06,1.37722e-08,0.436827,0.00124956,-2.21368e-06,5.79803e-10,0.438074,0.00124513,-2.21194e-06,1.37112e-08,0.439317,0.00124075,-2.1708e-06,4.17973e-09,0.440556,0.00123642,-2.15826e-06,-6.27703e-10,0.44179,0.0012321,-2.16015e-06,2.81332e-08,0.44302,0.00122787,-2.07575e-06,-2.24985e-08,0.444246,0.00122365,-2.14324e-06,3.20586e-08,0.445467,0.00121946,-2.04707e-06,-1.6329e-08,0.446685,0.00121532,-2.09605e-06,3.32573e-08,0.447898,0.00121122,-1.99628e-06,-2.72927e-08,0.449107,0.00120715,-2.07816e-06,4.6111e-08,0.450312,0.00120313,-1.93983e-06,-3.79416e-08,0.451514,0.00119914,-2.05365e-06,4.60507e-08,0.452711,0.00119517,-1.9155e-06,-2.7052e-08,0.453904,0.00119126,-1.99666e-06,3.23551e-08,0.455093,0.00118736,-1.89959e-06,-1.29613e-08,0.456279,0.00118352,-1.93848e-06,1.94905e-08,0.45746,0.0011797,-1.88e-06,-5.39588e-09,0.458638,0.00117593,-1.89619e-06,2.09282e-09,0.459812,0.00117214,-1.88991e-06,2.68267e-08,0.460982,0.00116844,-1.80943e-06,-1.99925e-08,0.462149,0.00116476,-1.86941e-06,2.3341e-08,0.463312,0.00116109,-1.79939e-06,-1.37674e-08,0.464471,0.00115745,-1.84069e-06,3.17287e-08,0.465627,0.00115387,-1.7455e-06,-2.37407e-08,0.466779,0.00115031,-1.81673e-06,3.34315e-08,0.467927,0.00114677,-1.71643e-06,-2.05786e-08,0.469073,0.00114328,-1.77817e-06,1.90802e-08,0.470214,0.00113978,-1.72093e-06,3.86247e-09,0.471352,0.00113635,-1.70934e-06,-4.72759e-09,0.472487,0.00113292,-1.72352e-06,1.50478e-08,0.473618,0.00112951,-1.67838e-06,4.14108e-09,0.474746,0.00112617,-1.66595e-06,-1.80986e-09,0.47587,0.00112283,-1.67138e-06,3.09816e-09,0.476991,0.0011195,-1.66209e-06,1.92198e-08,0.478109,0.00111623,-1.60443e-06,-2.03726e-08,0.479224,0.00111296,-1.66555e-06,3.2468e-08,0.480335,0.00110973,-1.56814e-06,-2.00922e-08,0.481443,0.00110653,-1.62842e-06,1.80983e-08,0.482548,0.00110333,-1.57413e-06,7.30362e-09,0.48365,0.0011002,-1.55221e-06,-1.75107e-08,0.484749,0.00109705,-1.60475e-06,3.29373e-08,0.485844,0.00109393,-1.50594e-06,-2.48315e-08,0.486937,0.00109085,-1.58043e-06,3.65865e-08,0.488026,0.0010878,-1.47067e-06,-3.21078e-08,0.489112,0.00108476,-1.56699e-06,3.22397e-08,0.490195,0.00108172,-1.47027e-06,-7.44391e-09,0.491276,0.00107876,-1.49261e-06,-2.46428e-09,0.492353,0.00107577,-1.5e-06,1.73011e-08,0.493427,0.00107282,-1.4481e-06,-7.13552e-09,0.494499,0.0010699,-1.4695e-06,1.1241e-08,0.495567,0.001067,-1.43578e-06,-8.02637e-09,0.496633,0.0010641,-1.45986e-06,2.08645e-08,0.497695,0.00106124,-1.39726e-06,-1.58271e-08,0.498755,0.0010584,-1.44475e-06,1.26415e-08,0.499812,0.00105555,-1.40682e-06,2.48655e-08,0.500866,0.00105281,-1.33222e-06,-5.24988e-08,0.501918,0.00104999,-1.48972e-06,6.59206e-08,0.502966,0.00104721,-1.29196e-06,-3.237e-08,0.504012,0.00104453,-1.38907e-06,3.95479e-09,0.505055,0.00104176,-1.3772e-06,1.65509e-08,0.506096,0.00103905,-1.32755e-06,-1.05539e-08,0.507133,0.00103637,-1.35921e-06,2.56648e-08,0.508168,0.00103373,-1.28222e-06,-3.25007e-08,0.509201,0.00103106,-1.37972e-06,4.47336e-08,0.51023,0.00102844,-1.24552e-06,-2.72245e-08,0.511258,0.00102587,-1.32719e-06,4.55952e-09,0.512282,0.00102323,-1.31352e-06,8.98645e-09,0.513304,0.00102063,-1.28656e-06,1.90992e-08,0.514323,0.00101811,-1.22926e-06,-2.57786e-08,0.51534,0.00101557,-1.30659e-06,2.44104e-08,0.516355,0.00101303,-1.23336e-06,-1.22581e-08,0.517366,0.00101053,-1.27014e-06,2.4622e-08,0.518376,0.00100806,-1.19627e-06,-2.66253e-08,0.519383,0.00100559,-1.27615e-06,2.22744e-08,0.520387,0.00100311,-1.20932e-06,-2.8679e-09,0.521389,0.00100068,-1.21793e-06,-1.08029e-08,0.522388,0.000998211,-1.25034e-06,4.60795e-08,0.523385,0.000995849,-1.1121e-06,-5.4306e-08,0.52438,0.000993462,-1.27502e-06,5.19354e-08,0.525372,0.000991067,-1.11921e-06,-3.42262e-08,0.526362,0.000988726,-1.22189e-06,2.53646e-08,0.52735,0.000986359,-1.14579e-06,-7.62782e-09,0.528335,0.000984044,-1.16868e-06,5.14668e-09,0.529318,0.000981722,-1.15324e-06,-1.29589e-08,0.530298,0.000979377,-1.19211e-06,4.66888e-08,0.531276,0.000977133,-1.05205e-06,-5.45868e-08,0.532252,0.000974865,-1.21581e-06,5.24495e-08,0.533226,0.000972591,-1.05846e-06,-3.60019e-08,0.534198,0.000970366,-1.16647e-06,3.19537e-08,0.535167,0.000968129,-1.07061e-06,-3.2208e-08,0.536134,0.000965891,-1.16723e-06,3.72738e-08,0.537099,0.000963668,-1.05541e-06,2.32205e-09,0.538061,0.000961564,-1.04844e-06,-4.65618e-08,0.539022,0.000959328,-1.18813e-06,6.47159e-08,0.53998,0.000957146,-9.93979e-07,-3.3488e-08,0.540936,0.000955057,-1.09444e-06,9.63166e-09,0.54189,0.000952897,-1.06555e-06,-5.03871e-09,0.542842,0.000950751,-1.08066e-06,1.05232e-08,0.543792,0.000948621,-1.04909e-06,2.25503e-08,0.544739,0.000946591,-9.81444e-07,-4.11195e-08,0.545685,0.000944504,-1.1048e-06,2.27182e-08,0.546628,0.000942363,-1.03665e-06,9.85146e-09,0.54757,0.000940319,-1.00709e-06,-2.51938e-09,0.548509,0.000938297,-1.01465e-06,2.25858e-10,0.549446,0.000936269,-1.01397e-06,1.61598e-09,0.550381,0.000934246,-1.00913e-06,-6.68983e-09,0.551315,0.000932207,-1.0292e-06,2.51434e-08,0.552246,0.000930224,-9.53765e-07,-3.42793e-08,0.553175,0.000928214,-1.0566e-06,5.23688e-08,0.554102,0.000926258,-8.99497e-07,-5.59865e-08,0.555028,0.000924291,-1.06746e-06,5.23679e-08,0.555951,0.000922313,-9.10352e-07,-3.42763e-08,0.556872,0.00092039,-1.01318e-06,2.51326e-08,0.557792,0.000918439,-9.37783e-07,-6.64954e-09,0.558709,0.000916543,-9.57732e-07,1.46554e-09,0.559625,0.000914632,-9.53335e-07,7.87281e-10,0.560538,0.000912728,-9.50973e-07,-4.61466e-09,0.56145,0.000910812,-9.64817e-07,1.76713e-08,0.56236,0.000908935,-9.11804e-07,-6.46564e-09,0.563268,0.000907092,-9.312e-07,8.19121e-09,0.564174,0.000905255,-9.06627e-07,-2.62992e-08,0.565078,0.000903362,-9.85524e-07,3.74007e-08,0.565981,0.000901504,-8.73322e-07,-4.0942e-09,0.566882,0.000899745,-8.85605e-07,-2.1024e-08,0.56778,0.00089791,-9.48677e-07,2.85854e-08,0.568677,0.000896099,-8.62921e-07,-3.3713e-08,0.569573,0.000894272,-9.64059e-07,4.6662e-08,0.570466,0.000892484,-8.24073e-07,-3.37258e-08,0.571358,0.000890734,-9.25251e-07,2.86365e-08,0.572247,0.00088897,-8.39341e-07,-2.12155e-08,0.573135,0.000887227,-9.02988e-07,-3.37913e-09,0.574022,0.000885411,-9.13125e-07,3.47319e-08,0.574906,0.000883689,-8.08929e-07,-1.63394e-08,0.575789,0.000882022,-8.57947e-07,-2.8979e-08,0.57667,0.00088022,-9.44885e-07,7.26509e-08,0.57755,0.000878548,-7.26932e-07,-8.28106e-08,0.578427,0.000876845,-9.75364e-07,7.97774e-08,0.579303,0.000875134,-7.36032e-07,-5.74849e-08,0.580178,0.00087349,-9.08486e-07,3.09529e-08,0.58105,0.000871765,-8.15628e-07,-6.72206e-09,0.581921,0.000870114,-8.35794e-07,-4.06451e-09,0.582791,0.00086843,-8.47987e-07,2.29799e-08,0.583658,0.000866803,-7.79048e-07,-2.82503e-08,0.584524,0.00086516,-8.63799e-07,3.04167e-08,0.585388,0.000863524,-7.72548e-07,-3.38119e-08,0.586251,0.000861877,-8.73984e-07,4.52264e-08,0.587112,0.000860265,-7.38305e-07,-2.78842e-08,0.587972,0.000858705,-8.21958e-07,6.70567e-09,0.58883,0.000857081,-8.01841e-07,1.06161e-09,0.589686,0.000855481,-7.98656e-07,-1.09521e-08,0.590541,0.00085385,-8.31512e-07,4.27468e-08,0.591394,0.000852316,-7.03272e-07,-4.08257e-08,0.592245,0.000850787,-8.25749e-07,1.34677e-09,0.593095,0.000849139,-8.21709e-07,3.54387e-08,0.593944,0.000847602,-7.15393e-07,-2.38924e-08,0.59479,0.0008461,-7.8707e-07,5.26143e-10,0.595636,0.000844527,-7.85491e-07,2.17879e-08,0.596479,0.000843021,-7.20127e-07,-2.80733e-08,0.597322,0.000841497,-8.04347e-07,3.09005e-08,0.598162,0.000839981,-7.11646e-07,-3.5924e-08,0.599002,0.00083845,-8.19418e-07,5.3191e-08,0.599839,0.000836971,-6.59845e-07,-5.76307e-08,0.600676,0.000835478,-8.32737e-07,5.81227e-08,0.60151,0.000833987,-6.58369e-07,-5.56507e-08,0.602344,0.000832503,-8.25321e-07,4.52706e-08,0.603175,0.000830988,-6.89509e-07,-6.22236e-09,0.604006,0.000829591,-7.08176e-07,-2.03811e-08,0.604834,0.000828113,-7.6932e-07,2.8142e-08,0.605662,0.000826659,-6.84894e-07,-3.25822e-08,0.606488,0.000825191,-7.8264e-07,4.25823e-08,0.607312,0.000823754,-6.54893e-07,-1.85376e-08,0.608135,0.000822389,-7.10506e-07,-2.80365e-08,0.608957,0.000820883,-7.94616e-07,7.1079e-08,0.609777,0.000819507,-5.81379e-07,-7.74655e-08,0.610596,0.000818112,-8.13775e-07,5.9969e-08,0.611413,0.000816665,-6.33868e-07,-4.32013e-08,0.612229,0.000815267,-7.63472e-07,5.32313e-08,0.613044,0.0008139,-6.03778e-07,-5.05148e-08,0.613857,0.000812541,-7.55323e-07,2.96187e-08,0.614669,0.000811119,-6.66466e-07,-8.35545e-09,0.615479,0.000809761,-6.91533e-07,3.80301e-09,0.616288,0.00080839,-6.80124e-07,-6.85666e-09,0.617096,0.000807009,-7.00694e-07,2.36237e-08,0.617903,0.000805678,-6.29822e-07,-2.80336e-08,0.618708,0.000804334,-7.13923e-07,2.8906e-08,0.619511,0.000802993,-6.27205e-07,-2.79859e-08,0.620314,0.000801655,-7.11163e-07,2.34329e-08,0.621114,0.000800303,-6.40864e-07,-6.14108e-09,0.621914,0.000799003,-6.59287e-07,1.13151e-09,0.622712,0.000797688,-6.55893e-07,1.61507e-09,0.62351,0.000796381,-6.51048e-07,-7.59186e-09,0.624305,0.000795056,-6.73823e-07,2.87524e-08,0.6251,0.000793794,-5.87566e-07,-4.7813e-08,0.625893,0.000792476,-7.31005e-07,4.32901e-08,0.626685,0.000791144,-6.01135e-07,-6.13814e-09,0.627475,0.000789923,-6.19549e-07,-1.87376e-08,0.628264,0.000788628,-6.75762e-07,2.14837e-08,0.629052,0.000787341,-6.11311e-07,-7.59265e-09,0.629839,0.000786095,-6.34089e-07,8.88692e-09,0.630625,0.000784854,-6.07428e-07,-2.7955e-08,0.631409,0.000783555,-6.91293e-07,4.33285e-08,0.632192,0.000782302,-5.61307e-07,-2.61497e-08,0.632973,0.000781101,-6.39757e-07,1.6658e-09,0.633754,0.000779827,-6.34759e-07,1.94866e-08,0.634533,0.000778616,-5.76299e-07,-2.00076e-08,0.635311,0.000777403,-6.36322e-07,9.39091e-10,0.636088,0.000776133,-6.33505e-07,1.62512e-08,0.636863,0.000774915,-5.84751e-07,-6.33937e-09,0.637638,0.000773726,-6.03769e-07,9.10609e-09,0.638411,0.000772546,-5.76451e-07,-3.00849e-08,0.639183,0.000771303,-6.66706e-07,5.1629e-08,0.639953,0.000770125,-5.11819e-07,-5.7222e-08,0.640723,0.000768929,-6.83485e-07,5.80497e-08,0.641491,0.000767736,-5.09336e-07,-5.57674e-08,0.642259,0.000766551,-6.76638e-07,4.58105e-08,0.643024,0.000765335,-5.39206e-07,-8.26541e-09,0.643789,0.000764231,-5.64002e-07,-1.27488e-08,0.644553,0.000763065,-6.02249e-07,-3.44168e-10,0.645315,0.00076186,-6.03281e-07,1.41254e-08,0.646077,0.000760695,-5.60905e-07,3.44727e-09,0.646837,0.000759584,-5.50563e-07,-2.79144e-08,0.647596,0.000758399,-6.34307e-07,4.86057e-08,0.648354,0.000757276,-4.88489e-07,-4.72989e-08,0.64911,0.000756158,-6.30386e-07,2.13807e-08,0.649866,0.000754961,-5.66244e-07,2.13808e-08,0.65062,0.000753893,-5.02102e-07,-4.7299e-08,0.651374,0.000752746,-6.43999e-07,4.86059e-08,0.652126,0.000751604,-4.98181e-07,-2.79154e-08,0.652877,0.000750524,-5.81927e-07,3.45089e-09,0.653627,0.000749371,-5.71575e-07,1.41119e-08,0.654376,0.00074827,-5.29239e-07,-2.93748e-10,0.655123,0.00074721,-5.3012e-07,-1.29368e-08,0.65587,0.000746111,-5.68931e-07,-7.56355e-09,0.656616,0.000744951,-5.91621e-07,4.3191e-08,0.65736,0.000743897,-4.62048e-07,-4.59911e-08,0.658103,0.000742835,-6.00022e-07,2.15642e-08,0.658846,0.0007417,-5.35329e-07,1.93389e-08,0.659587,0.000740687,-4.77312e-07,-3.93152e-08,0.660327,0.000739615,-5.95258e-07,1.87126e-08,0.661066,0.00073848,-5.3912e-07,2.40695e-08,0.661804,0.000737474,-4.66912e-07,-5.53859e-08,0.662541,0.000736374,-6.33069e-07,7.82648e-08,0.663277,0.000735343,-3.98275e-07,-7.88593e-08,0.664012,0.00073431,-6.34853e-07,5.83585e-08,0.664745,0.000733215,-4.59777e-07,-3.53656e-08,0.665478,0.000732189,-5.65874e-07,2.34994e-08,0.66621,0.000731128,-4.95376e-07,9.72743e-10,0.66694,0.00073014,-4.92458e-07,-2.73903e-08,0.66767,0.000729073,-5.74629e-07,4.89839e-08,0.668398,0.000728071,-4.27677e-07,-4.93359e-08,0.669126,0.000727068,-5.75685e-07,2.91504e-08,0.669853,0.000726004,-4.88234e-07,-7.66109e-09,0.670578,0.000725004,-5.11217e-07,1.49392e-09,0.671303,0.000723986,-5.06735e-07,1.68533e-09,0.672026,0.000722978,-5.01679e-07,-8.23525e-09,0.672749,0.00072195,-5.26385e-07,3.12556e-08,0.67347,0.000720991,-4.32618e-07,-5.71825e-08,0.674191,0.000719954,-6.04166e-07,7.8265e-08,0.67491,0.00071898,-3.69371e-07,-7.70634e-08,0.675628,0.00071801,-6.00561e-07,5.11747e-08,0.676346,0.000716963,-4.47037e-07,-8.42615e-09,0.677062,0.000716044,-4.72315e-07,-1.747e-08,0.677778,0.000715046,-5.24725e-07,1.87015e-08,0.678493,0.000714053,-4.68621e-07,2.26856e-09,0.679206,0.000713123,-4.61815e-07,-2.77758e-08,0.679919,0.000712116,-5.45142e-07,4.92298e-08,0.68063,0.000711173,-3.97453e-07,-4.99339e-08,0.681341,0.000710228,-5.47255e-07,3.12967e-08,0.682051,0.000709228,-4.53365e-07,-1.56481e-08,0.68276,0.000708274,-5.00309e-07,3.12958e-08,0.683467,0.000707367,-4.06422e-07,-4.99303e-08,0.684174,0.000706405,-5.56213e-07,4.9216e-08,0.68488,0.00070544,-4.08565e-07,-2.77245e-08,0.685585,0.00070454,-4.91738e-07,2.07748e-09,0.686289,0.000703562,-4.85506e-07,1.94146e-08,0.686992,0.00070265,-4.27262e-07,-2.01314e-08,0.687695,0.000701735,-4.87656e-07,1.50616e-09,0.688396,0.000700764,-4.83137e-07,1.41067e-08,0.689096,0.00069984,-4.40817e-07,1.67168e-09,0.689795,0.000698963,-4.35802e-07,-2.07934e-08,0.690494,0.000698029,-4.98182e-07,2.18972e-08,0.691192,0.000697099,-4.32491e-07,-7.19092e-09,0.691888,0.000696212,-4.54064e-07,6.86642e-09,0.692584,0.000695325,-4.33464e-07,-2.02747e-08,0.693279,0.000694397,-4.94288e-07,1.46279e-08,0.693973,0.000693452,-4.50405e-07,2.13678e-08,0.694666,0.000692616,-3.86301e-07,-4.04945e-08,0.695358,0.000691721,-5.07785e-07,2.14009e-08,0.696049,0.00069077,-4.43582e-07,1.44955e-08,0.69674,0.000689926,-4.00096e-07,-1.97783e-08,0.697429,0.000689067,-4.5943e-07,5.01296e-09,0.698118,0.000688163,-4.44392e-07,-2.73521e-10,0.698805,0.000687273,-4.45212e-07,-3.91893e-09,0.699492,0.000686371,-4.56969e-07,1.59493e-08,0.700178,0.000685505,-4.09121e-07,-2.73351e-10,0.700863,0.000684686,-4.09941e-07,-1.4856e-08,0.701548,0.000683822,-4.54509e-07,9.25979e-11,0.702231,0.000682913,-4.54231e-07,1.44855e-08,0.702913,0.000682048,-4.10775e-07,1.56992e-09,0.703595,0.000681231,-4.06065e-07,-2.07652e-08,0.704276,0.000680357,-4.68361e-07,2.18864e-08,0.704956,0.000679486,-4.02701e-07,-7.17595e-09,0.705635,0.000678659,-4.24229e-07,6.81748e-09,0.706313,0.000677831,-4.03777e-07,-2.0094e-08,0.70699,0.000676963,-4.64059e-07,1.39538e-08,0.707667,0.000676077,-4.22197e-07,2.38835e-08,0.708343,0.000675304,-3.50547e-07,-4.98831e-08,0.709018,0.000674453,-5.00196e-07,5.64395e-08,0.709692,0.000673622,-3.30878e-07,-5.66657e-08,0.710365,0.00067279,-5.00875e-07,5.1014e-08,0.711037,0.000671942,-3.47833e-07,-2.81809e-08,0.711709,0.000671161,-4.32376e-07,2.10513e-09,0.712379,0.000670303,-4.2606e-07,1.97604e-08,0.713049,0.00066951,-3.66779e-07,-2.15422e-08,0.713718,0.000668712,-4.31406e-07,6.8038e-09,0.714387,0.000667869,-4.10994e-07,-5.67295e-09,0.715054,0.00066703,-4.28013e-07,1.5888e-08,0.715721,0.000666222,-3.80349e-07,1.72576e-09,0.716387,0.000665467,-3.75172e-07,-2.27911e-08,0.717052,0.000664648,-4.43545e-07,2.9834e-08,0.717716,0.00066385,-3.54043e-07,-3.69401e-08,0.718379,0.000663031,-4.64864e-07,5.83219e-08,0.719042,0.000662277,-2.89898e-07,-7.71382e-08,0.719704,0.000661465,-5.21313e-07,7.14171e-08,0.720365,0.000660637,-3.07061e-07,-2.97161e-08,0.721025,0.000659934,-3.96209e-07,-1.21575e-08,0.721685,0.000659105,-4.32682e-07,1.87412e-08,0.722343,0.000658296,-3.76458e-07,-3.2029e-09,0.723001,0.000657533,-3.86067e-07,-5.9296e-09,0.723659,0.000656743,-4.03856e-07,2.69213e-08,0.724315,0.000656016,-3.23092e-07,-4.21511e-08,0.724971,0.000655244,-4.49545e-07,2.24737e-08,0.725625,0.000654412,-3.82124e-07,1.18611e-08,0.726279,0.000653683,-3.46541e-07,-1.03132e-08,0.726933,0.000652959,-3.7748e-07,-3.02128e-08,0.727585,0.000652114,-4.68119e-07,7.15597e-08,0.728237,0.000651392,-2.5344e-07,-7.72119e-08,0.728888,0.000650654,-4.85075e-07,5.8474e-08,0.729538,0.000649859,-3.09654e-07,-3.74746e-08,0.730188,0.000649127,-4.22077e-07,3.18197e-08,0.730837,0.000648379,-3.26618e-07,-3.01997e-08,0.731485,0.000647635,-4.17217e-07,2.93747e-08,0.732132,0.000646888,-3.29093e-07,-2.76943e-08,0.732778,0.000646147,-4.12176e-07,2.17979e-08,0.733424,0.000645388,-3.46783e-07,1.07292e-10,0.734069,0.000644695,-3.46461e-07,-2.22271e-08,0.734713,0.000643935,-4.13142e-07,2.91963e-08,0.735357,0.000643197,-3.25553e-07,-3.49536e-08,0.736,0.000642441,-4.30414e-07,5.10133e-08,0.736642,0.000641733,-2.77374e-07,-4.98904e-08,0.737283,0.000641028,-4.27045e-07,2.93392e-08,0.737924,0.000640262,-3.39028e-07,-7.86156e-09,0.738564,0.000639561,-3.62612e-07,2.10703e-09,0.739203,0.000638842,-3.56291e-07,-5.6653e-10,0.739842,0.000638128,-3.57991e-07,1.59086e-10,0.740479,0.000637412,-3.57513e-07,-6.98321e-11,0.741116,0.000636697,-3.57723e-07,1.20214e-10,0.741753,0.000635982,-3.57362e-07,-4.10987e-10,0.742388,0.000635266,-3.58595e-07,1.5237e-09,0.743023,0.000634553,-3.54024e-07,-5.68376e-09,0.743657,0.000633828,-3.71075e-07,2.12113e-08,0.744291,0.00063315,-3.07441e-07,-1.95569e-08,0.744924,0.000632476,-3.66112e-07,-2.58816e-09,0.745556,0.000631736,-3.73877e-07,2.99096e-08,0.746187,0.000631078,-2.84148e-07,-5.74454e-08,0.746818,0.000630337,-4.56484e-07,8.06629e-08,0.747448,0.000629666,-2.14496e-07,-8.63922e-08,0.748077,0.000628978,-4.73672e-07,8.60918e-08,0.748706,0.000628289,-2.15397e-07,-7.91613e-08,0.749334,0.000627621,-4.5288e-07,5.17393e-08,0.749961,0.00062687,-2.97663e-07,-8.58662e-09,0.750588,0.000626249,-3.23422e-07,-1.73928e-08,0.751214,0.00062555,-3.75601e-07,1.85532e-08,0.751839,0.000624855,-3.19941e-07,2.78479e-09,0.752463,0.000624223,-3.11587e-07,-2.96923e-08,0.753087,0.000623511,-4.00664e-07,5.63799e-08,0.75371,0.000622879,-2.31524e-07,-7.66179e-08,0.754333,0.000622186,-4.61378e-07,7.12778e-08,0.754955,0.000621477,-2.47545e-07,-2.96794e-08,0.755576,0.000620893,-3.36583e-07,-1.21648e-08,0.756196,0.000620183,-3.73077e-07,1.87339e-08,0.756816,0.000619493,-3.16875e-07,-3.16622e-09,0.757435,0.00061885,-3.26374e-07,-6.0691e-09,0.758054,0.000618179,-3.44581e-07,2.74426e-08,0.758672,0.000617572,-2.62254e-07,-4.40968e-08,0.759289,0.000616915,-3.94544e-07,2.97352e-08,0.759906,0.000616215,-3.05338e-07,-1.52393e-08,0.760522,0.000615559,-3.51056e-07,3.12221e-08,0.761137,0.000614951,-2.5739e-07,-5.00443e-08,0.761751,0.000614286,-4.07523e-07,4.9746e-08,0.762365,0.00061362,-2.58285e-07,-2.97303e-08,0.762979,0.000613014,-3.47476e-07,9.57079e-09,0.763591,0.000612348,-3.18764e-07,-8.55287e-09,0.764203,0.000611685,-3.44422e-07,2.46407e-08,0.764815,0.00061107,-2.705e-07,-3.04053e-08,0.765426,0.000610437,-3.61716e-07,3.73759e-08,0.766036,0.000609826,-2.49589e-07,-5.94935e-08,0.766645,0.000609149,-4.28069e-07,8.13889e-08,0.767254,0.000608537,-1.83902e-07,-8.72483e-08,0.767862,0.000607907,-4.45647e-07,8.87901e-08,0.76847,0.000607282,-1.79277e-07,-8.90983e-08,0.769077,0.000606656,-4.46572e-07,8.87892e-08,0.769683,0.000606029,-1.80204e-07,-8.72446e-08,0.770289,0.000605407,-4.41938e-07,8.13752e-08,0.770894,0.000604768,-1.97812e-07,-5.94423e-08,0.771498,0.000604194,-3.76139e-07,3.71848e-08,0.772102,0.000603553,-2.64585e-07,-2.96922e-08,0.772705,0.000602935,-3.53661e-07,2.19793e-08,0.773308,0.000602293,-2.87723e-07,1.37955e-09,0.77391,0.000601722,-2.83585e-07,-2.74976e-08,0.774512,0.000601072,-3.66077e-07,4.9006e-08,0.775112,0.000600487,-2.19059e-07,-4.93171e-08,0.775712,0.000599901,-3.67011e-07,2.90531e-08,0.776312,0.000599254,-2.79851e-07,-7.29081e-09,0.776911,0.000598673,-3.01724e-07,1.10077e-10,0.777509,0.00059807,-3.01393e-07,6.85053e-09,0.778107,0.000597487,-2.80842e-07,-2.75123e-08,0.778704,0.000596843,-3.63379e-07,4.35939e-08,0.779301,0.000596247,-2.32597e-07,-2.7654e-08,0.779897,0.000595699,-3.15559e-07,7.41741e-09,0.780492,0.00059509,-2.93307e-07,-2.01562e-09,0.781087,0.000594497,-2.99354e-07,6.45059e-10,0.781681,0.000593901,-2.97418e-07,-5.64635e-10,0.782275,0.000593304,-2.99112e-07,1.61347e-09,0.782868,0.000592711,-2.94272e-07,-5.88926e-09,0.78346,0.000592105,-3.1194e-07,2.19436e-08,0.784052,0.000591546,-2.46109e-07,-2.22805e-08,0.784643,0.000590987,-3.1295e-07,7.57368e-09,0.785234,0.000590384,-2.90229e-07,-8.01428e-09,0.785824,0.00058978,-3.14272e-07,2.44834e-08,0.786414,0.000589225,-2.40822e-07,-3.03148e-08,0.787003,0.000588652,-3.31766e-07,3.7171e-08,0.787591,0.0005881,-2.20253e-07,-5.87646e-08,0.788179,0.000587483,-3.96547e-07,7.86782e-08,0.788766,0.000586926,-1.60512e-07,-7.71342e-08,0.789353,0.000586374,-3.91915e-07,5.10444e-08,0.789939,0.000585743,-2.38782e-07,-7.83422e-09,0.790524,0.000585242,-2.62284e-07,-1.97076e-08,0.791109,0.000584658,-3.21407e-07,2.70598e-08,0.791693,0.000584097,-2.40228e-07,-2.89269e-08,0.792277,0.000583529,-3.27008e-07,2.90431e-08,0.792861,0.000582963,-2.39879e-07,-2.76409e-08,0.793443,0.0005824,-3.22802e-07,2.1916e-08,0.794025,0.00058182,-2.57054e-07,-4.18368e-10,0.794607,0.000581305,-2.58309e-07,-2.02425e-08,0.795188,0.000580727,-3.19036e-07,2.17838e-08,0.795768,0.000580155,-2.53685e-07,-7.28814e-09,0.796348,0.000579625,-2.75549e-07,7.36871e-09,0.796928,0.000579096,-2.53443e-07,-2.21867e-08,0.797506,0.000578523,-3.20003e-07,2.17736e-08,0.798085,0.000577948,-2.54683e-07,-5.30296e-09,0.798662,0.000577423,-2.70592e-07,-5.61698e-10,0.799239,0.00057688,-2.72277e-07,7.54977e-09,0.799816,0.000576358,-2.49627e-07,-2.96374e-08,0.800392,0.00057577,-3.38539e-07,5.1395e-08,0.800968,0.000575247,-1.84354e-07,-5.67335e-08,0.801543,0.000574708,-3.54555e-07,5.63297e-08,0.802117,0.000574168,-1.85566e-07,-4.93759e-08,0.802691,0.000573649,-3.33693e-07,2.19646e-08,0.803264,0.000573047,-2.678e-07,2.1122e-08,0.803837,0.000572575,-2.04433e-07,-4.68482e-08,0.804409,0.000572026,-3.44978e-07,4.70613e-08,0.804981,0.000571477,-2.03794e-07,-2.21877e-08,0.805552,0.000571003,-2.70357e-07,-1.79153e-08,0.806123,0.000570408,-3.24103e-07,3.42443e-08,0.806693,0.000569863,-2.2137e-07,1.47556e-10,0.807263,0.000569421,-2.20928e-07,-3.48345e-08,0.807832,0.000568874,-3.25431e-07,1.99812e-08,0.808401,0.000568283,-2.65487e-07,1.45143e-08,0.808969,0.000567796,-2.21945e-07,-1.84338e-08,0.809536,0.000567297,-2.77246e-07,-3.83608e-10,0.810103,0.000566741,-2.78397e-07,1.99683e-08,0.81067,0.000566244,-2.18492e-07,-1.98848e-08,0.811236,0.000565747,-2.78146e-07,-3.38976e-11,0.811801,0.000565191,-2.78248e-07,2.00204e-08,0.812366,0.000564695,-2.18187e-07,-2.04429e-08,0.812931,0.000564197,-2.79516e-07,2.1467e-09,0.813495,0.000563644,-2.73076e-07,1.18561e-08,0.814058,0.000563134,-2.37507e-07,1.00334e-08,0.814621,0.000562689,-2.07407e-07,-5.19898e-08,0.815183,0.000562118,-3.63376e-07,7.87163e-08,0.815745,0.000561627,-1.27227e-07,-8.40616e-08,0.816306,0.000561121,-3.79412e-07,7.87163e-08,0.816867,0.000560598,-1.43263e-07,-5.19898e-08,0.817428,0.000560156,-2.99233e-07,1.00335e-08,0.817988,0.000559587,-2.69132e-07,1.18559e-08,0.818547,0.000559085,-2.33564e-07,2.14764e-09,0.819106,0.000558624,-2.27122e-07,-2.04464e-08,0.819664,0.000558108,-2.88461e-07,2.00334e-08,0.820222,0.000557591,-2.28361e-07,-8.24277e-11,0.820779,0.000557135,-2.28608e-07,-1.97037e-08,0.821336,0.000556618,-2.87719e-07,1.92925e-08,0.821893,0.000556101,-2.29841e-07,2.13831e-09,0.822448,0.000555647,-2.23427e-07,-2.78458e-08,0.823004,0.000555117,-3.06964e-07,4.96402e-08,0.823559,0.000554652,-1.58043e-07,-5.15058e-08,0.824113,0.000554181,-3.12561e-07,3.71737e-08,0.824667,0.000553668,-2.0104e-07,-3.75844e-08,0.82522,0.000553153,-3.13793e-07,5.35592e-08,0.825773,0.000552686,-1.53115e-07,-5.74431e-08,0.826326,0.000552207,-3.25444e-07,5.7004e-08,0.826878,0.000551728,-1.54433e-07,-5.13635e-08,0.827429,0.000551265,-3.08523e-07,2.92406e-08,0.82798,0.000550735,-2.20801e-07,-5.99424e-09,0.828531,0.000550276,-2.38784e-07,-5.26363e-09,0.829081,0.000549782,-2.54575e-07,2.70488e-08,0.82963,0.000549354,-1.73429e-07,-4.33268e-08,0.83018,0.000548878,-3.03409e-07,2.7049e-08,0.830728,0.000548352,-2.22262e-07,-5.26461e-09,0.831276,0.000547892,-2.38056e-07,-5.99057e-09,0.831824,0.000547397,-2.56027e-07,2.92269e-08,0.832371,0.000546973,-1.68347e-07,-5.13125e-08,0.832918,0.000546482,-3.22284e-07,5.68139e-08,0.833464,0.000546008,-1.51843e-07,-5.67336e-08,0.83401,0.000545534,-3.22043e-07,5.09113e-08,0.834555,0.000545043,-1.6931e-07,-2.77022e-08,0.8351,0.000544621,-2.52416e-07,2.92924e-10,0.835644,0.000544117,-2.51537e-07,2.65305e-08,0.836188,0.000543694,-1.71946e-07,-4.68105e-08,0.836732,0.00054321,-3.12377e-07,4.15021e-08,0.837275,0.000542709,-1.87871e-07,1.13355e-11,0.837817,0.000542334,-1.87837e-07,-4.15474e-08,0.838359,0.000541833,-3.12479e-07,4.69691e-08,0.838901,0.000541349,-1.71572e-07,-2.71196e-08,0.839442,0.000540925,-2.52931e-07,1.90462e-09,0.839983,0.000540425,-2.47217e-07,1.95011e-08,0.840523,0.000539989,-1.88713e-07,-2.03045e-08,0.841063,0.00053955,-2.49627e-07,2.11216e-09,0.841602,0.000539057,-2.4329e-07,1.18558e-08,0.842141,0.000538606,-2.07723e-07,1.00691e-08,0.842679,0.000538221,-1.77516e-07,-5.21324e-08,0.843217,0.00053771,-3.33913e-07,7.92513e-08,0.843755,0.00053728,-9.6159e-08,-8.60587e-08,0.844292,0.000536829,-3.54335e-07,8.61696e-08,0.844828,0.000536379,-9.58263e-08,-7.98057e-08,0.845364,0.000535948,-3.35243e-07,5.42394e-08,0.8459,0.00053544,-1.72525e-07,-1.79426e-08,0.846435,0.000535041,-2.26353e-07,1.75308e-08,0.84697,0.000534641,-1.73761e-07,-5.21806e-08,0.847505,0.000534137,-3.30302e-07,7.19824e-08,0.848038,0.000533692,-1.14355e-07,-5.69349e-08,0.848572,0.000533293,-2.8516e-07,3.65479e-08,0.849105,0.000532832,-1.75516e-07,-2.96519e-08,0.849638,0.000532392,-2.64472e-07,2.2455e-08,0.85017,0.000531931,-1.97107e-07,-5.63451e-10,0.850702,0.000531535,-1.98797e-07,-2.02011e-08,0.851233,0.000531077,-2.59401e-07,2.17634e-08,0.851764,0.000530623,-1.94111e-07,-7.24794e-09,0.852294,0.000530213,-2.15854e-07,7.22832e-09,0.852824,0.000529803,-1.94169e-07,-2.16653e-08,0.853354,0.00052935,-2.59165e-07,1.98283e-08,0.853883,0.000528891,-1.9968e-07,1.95678e-09,0.854412,0.000528497,-1.9381e-07,-2.76554e-08,0.85494,0.000528027,-2.76776e-07,4.90603e-08,0.855468,0.00052762,-1.29596e-07,-4.93764e-08,0.855995,0.000527213,-2.77725e-07,2.92361e-08,0.856522,0.000526745,-1.90016e-07,-7.96341e-09,0.857049,0.000526341,-2.13907e-07,2.61752e-09,0.857575,0.000525922,-2.06054e-07,-2.50665e-09,0.8581,0.000525502,-2.13574e-07,7.40906e-09,0.858626,0.000525097,-1.91347e-07,-2.71296e-08,0.859151,0.000524633,-2.72736e-07,4.15048e-08,0.859675,0.000524212,-1.48221e-07,-1.96802e-08,0.860199,0.000523856,-2.07262e-07,-2.23886e-08,0.860723,0.000523375,-2.74428e-07,4.96299e-08,0.861246,0.000522975,-1.25538e-07,-5.69216e-08,0.861769,0.000522553,-2.96303e-07,5.88473e-08,0.862291,0.000522137,-1.19761e-07,-5.92584e-08,0.862813,0.00052172,-2.97536e-07,5.8977e-08,0.863334,0.000521301,-1.20605e-07,-5.74403e-08,0.863855,0.000520888,-2.92926e-07,5.15751e-08,0.864376,0.000520457,-1.38201e-07,-2.96506e-08,0.864896,0.000520091,-2.27153e-07,7.42277e-09,0.865416,0.000519659,-2.04885e-07,-4.05057e-11,0.865936,0.00051925,-2.05006e-07,-7.26074e-09,0.866455,0.000518818,-2.26788e-07,2.90835e-08,0.866973,0.000518451,-1.39538e-07,-4.94686e-08,0.867492,0.000518024,-2.87944e-07,4.95814e-08,0.868009,0.000517597,-1.39199e-07,-2.96479e-08,0.868527,0.000517229,-2.28143e-07,9.40539e-09,0.869044,0.000516801,-1.99927e-07,-7.9737e-09,0.86956,0.000516378,-2.23848e-07,2.24894e-08,0.870077,0.000515997,-1.5638e-07,-2.23793e-08,0.870592,0.000515617,-2.23517e-07,7.42302e-09,0.871108,0.000515193,-2.01248e-07,-7.31283e-09,0.871623,0.000514768,-2.23187e-07,2.18283e-08,0.872137,0.000514387,-1.57702e-07,-2.03959e-08,0.872652,0.000514011,-2.1889e-07,1.50711e-10,0.873165,0.000513573,-2.18437e-07,1.97931e-08,0.873679,0.000513196,-1.59058e-07,-1.97183e-08,0.874192,0.000512819,-2.18213e-07,-5.24324e-10,0.874704,0.000512381,-2.19786e-07,2.18156e-08,0.875217,0.000512007,-1.54339e-07,-2.71336e-08,0.875728,0.000511616,-2.3574e-07,2.71141e-08,0.87624,0.000511226,-1.54398e-07,-2.17182e-08,0.876751,0.000510852,-2.19552e-07,1.54131e-10,0.877262,0.000510414,-2.1909e-07,2.11017e-08,0.877772,0.000510039,-1.55785e-07,-2.49562e-08,0.878282,0.000509652,-2.30654e-07,1.91183e-08,0.878791,0.000509248,-1.73299e-07,8.08751e-09,0.8793,0.000508926,-1.49036e-07,-5.14684e-08,0.879809,0.000508474,-3.03441e-07,7.85766e-08,0.880317,0.000508103,-6.77112e-08,-8.40242e-08,0.880825,0.000507715,-3.19784e-07,7.87063e-08,0.881333,0.000507312,-8.36649e-08,-5.19871e-08,0.88184,0.000506988,-2.39626e-07,1.00327e-08,0.882346,0.000506539,-2.09528e-07,1.18562e-08,0.882853,0.000506156,-1.73959e-07,2.14703e-09,0.883359,0.000505814,-1.67518e-07,-2.04444e-08,0.883864,0.000505418,-2.28851e-07,2.00258e-08,0.88437,0.00050502,-1.68774e-07,-5.42855e-11,0.884874,0.000504682,-1.68937e-07,-1.98087e-08,0.885379,0.000504285,-2.28363e-07,1.96842e-08,0.885883,0.000503887,-1.6931e-07,6.76342e-10,0.886387,0.000503551,-1.67281e-07,-2.23896e-08,0.88689,0.000503149,-2.3445e-07,2.92774e-08,0.887393,0.000502768,-1.46618e-07,-3.51152e-08,0.887896,0.00050237,-2.51963e-07,5.15787e-08,0.888398,0.00050202,-9.72271e-08,-5.19903e-08,0.8889,0.00050167,-2.53198e-07,3.71732e-08,0.889401,0.000501275,-1.41678e-07,-3.70978e-08,0.889902,0.00050088,-2.52972e-07,5.16132e-08,0.890403,0.000500529,-9.81321e-08,-5.01459e-08,0.890903,0.000500183,-2.4857e-07,2.9761e-08,0.891403,0.000499775,-1.59287e-07,-9.29351e-09,0.891903,0.000499428,-1.87167e-07,7.41301e-09,0.892402,0.000499076,-1.64928e-07,-2.03585e-08,0.892901,0.000498685,-2.26004e-07,1.44165e-08,0.893399,0.000498276,-1.82754e-07,2.22974e-08,0.893898,0.000497978,-1.15862e-07,-4.40013e-08,0.894395,0.000497614,-2.47866e-07,3.44985e-08,0.894893,0.000497222,-1.44371e-07,-3.43882e-08,0.89539,0.00049683,-2.47535e-07,4.34497e-08,0.895886,0.000496465,-1.17186e-07,-2.02012e-08,0.896383,0.00049617,-1.7779e-07,-2.22497e-08,0.896879,0.000495748,-2.44539e-07,4.95952e-08,0.897374,0.000495408,-9.57532e-08,-5.69217e-08,0.89787,0.000495045,-2.66518e-07,5.88823e-08,0.898364,0.000494689,-8.98713e-08,-5.93983e-08,0.898859,0.000494331,-2.68066e-07,5.95017e-08,0.899353,0.000493973,-8.95613e-08,-5.9399e-08,0.899847,0.000493616,-2.67758e-07,5.8885e-08,0.90034,0.000493257,-9.11033e-08,-5.69317e-08,0.900833,0.000492904,-2.61898e-07,4.96326e-08,0.901326,0.000492529,-1.13001e-07,-2.23893e-08,0.901819,0.000492236,-1.80169e-07,-1.968e-08,0.902311,0.000491817,-2.39209e-07,4.15047e-08,0.902802,0.000491463,-1.14694e-07,-2.71296e-08,0.903293,0.000491152,-1.96083e-07,7.409e-09,0.903784,0.000490782,-1.73856e-07,-2.50645e-09,0.904275,0.000490427,-1.81376e-07,2.61679e-09,0.904765,0.000490072,-1.73525e-07,-7.96072e-09,0.905255,0.000489701,-1.97407e-07,2.92261e-08,0.905745,0.000489394,-1.09729e-07,-4.93389e-08,0.906234,0.000489027,-2.57746e-07,4.89204e-08,0.906723,0.000488658,-1.10985e-07,-2.71333e-08,0.907211,0.000488354,-1.92385e-07,8.30861e-12,0.907699,0.00048797,-1.9236e-07,2.71001e-08,0.908187,0.000487666,-1.1106e-07,-4.88041e-08,0.908675,0.000487298,-2.57472e-07,4.89069e-08,0.909162,0.000486929,-1.10751e-07,-2.76143e-08,0.909649,0.000486625,-1.93594e-07,1.9457e-09,0.910135,0.000486244,-1.87757e-07,1.98315e-08,0.910621,0.000485928,-1.28262e-07,-2.16671e-08,0.911107,0.000485606,-1.93264e-07,7.23216e-09,0.911592,0.000485241,-1.71567e-07,-7.26152e-09,0.912077,0.000484877,-1.93352e-07,2.18139e-08,0.912562,0.000484555,-1.2791e-07,-2.03895e-08,0.913047,0.000484238,-1.89078e-07,1.39494e-10,0.913531,0.000483861,-1.8866e-07,1.98315e-08,0.914014,0.000483543,-1.29165e-07,-1.98609e-08,0.914498,0.000483225,-1.88748e-07,7.39912e-12,0.914981,0.000482847,-1.88726e-07,1.98313e-08,0.915463,0.000482529,-1.29232e-07,-1.9728e-08,0.915946,0.000482212,-1.88416e-07,-5.24035e-10,0.916428,0.000481833,-1.89988e-07,2.18241e-08,0.916909,0.000481519,-1.24516e-07,-2.71679e-08,0.917391,0.000481188,-2.06019e-07,2.72427e-08,0.917872,0.000480858,-1.24291e-07,-2.21985e-08,0.918353,0.000480543,-1.90886e-07,1.94644e-09,0.918833,0.000480167,-1.85047e-07,1.44127e-08,0.919313,0.00047984,-1.41809e-07,7.39438e-12,0.919793,0.000479556,-1.41787e-07,-1.44423e-08,0.920272,0.000479229,-1.85114e-07,-1.84291e-09,0.920751,0.000478854,-1.90642e-07,2.18139e-08,0.92123,0.000478538,-1.25201e-07,-2.58081e-08,0.921708,0.00047821,-2.02625e-07,2.18139e-08,0.922186,0.00047787,-1.37183e-07,-1.84291e-09,0.922664,0.00047759,-1.42712e-07,-1.44423e-08,0.923141,0.000477262,-1.86039e-07,7.34701e-12,0.923618,0.00047689,-1.86017e-07,1.44129e-08,0.924095,0.000476561,-1.42778e-07,1.94572e-09,0.924572,0.000476281,-1.36941e-07,-2.21958e-08,0.925048,0.000475941,-2.03528e-07,2.72327e-08,0.925523,0.000475615,-1.2183e-07,-2.71304e-08,0.925999,0.00047529,-2.03221e-07,2.16843e-08,0.926474,0.000474949,-1.38168e-07,-2.16005e-12,0.926949,0.000474672,-1.38175e-07,-2.16756e-08,0.927423,0.000474331,-2.03202e-07,2.71001e-08,0.927897,0.000474006,-1.21902e-07,-2.71201e-08,0.928371,0.000473681,-2.03262e-07,2.17757e-08,0.928845,0.00047334,-1.37935e-07,-3.78028e-10,0.929318,0.000473063,-1.39069e-07,-2.02636e-08,0.929791,0.000472724,-1.9986e-07,2.18276e-08,0.930263,0.000472389,-1.34377e-07,-7.44231e-09,0.930736,0.000472098,-1.56704e-07,7.94165e-09,0.931208,0.000471809,-1.32879e-07,-2.43243e-08,0.931679,0.00047147,-2.05851e-07,2.97508e-08,0.932151,0.000471148,-1.16599e-07,-3.50742e-08,0.932622,0.000470809,-2.21822e-07,5.09414e-08,0.933092,0.000470518,-6.89976e-08,-4.94821e-08,0.933563,0.000470232,-2.17444e-07,2.77775e-08,0.934033,0.00046988,-1.34111e-07,-2.02351e-09,0.934502,0.000469606,-1.40182e-07,-1.96835e-08,0.934972,0.000469267,-1.99232e-07,2.11529e-08,0.935441,0.000468932,-1.35774e-07,-5.32332e-09,0.93591,0.000468644,-1.51743e-07,1.40413e-10,0.936378,0.000468341,-1.51322e-07,4.76166e-09,0.936846,0.000468053,-1.37037e-07,-1.9187e-08,0.937314,0.000467721,-1.94598e-07,1.23819e-08,0.937782,0.000467369,-1.57453e-07,2.92642e-08,0.938249,0.000467142,-6.96601e-08,-6.98342e-08,0.938716,0.000466793,-2.79163e-07,7.12586e-08,0.939183,0.000466449,-6.53869e-08,-3.63863e-08,0.939649,0.000466209,-1.74546e-07,1.46818e-08,0.940115,0.000465904,-1.305e-07,-2.2341e-08,0.940581,0.000465576,-1.97523e-07,1.50774e-08,0.941046,0.000465226,-1.52291e-07,2.16359e-08,0.941511,0.000464986,-8.73832e-08,-4.20162e-08,0.941976,0.000464685,-2.13432e-07,2.72198e-08,0.942441,0.00046434,-1.31773e-07,-7.2581e-09,0.942905,0.000464055,-1.53547e-07,1.81263e-09,0.943369,0.000463753,-1.48109e-07,7.58386e-12,0.943832,0.000463457,-1.48086e-07,-1.84298e-09,0.944296,0.000463155,-1.53615e-07,7.36433e-09,0.944759,0.00046287,-1.31522e-07,-2.76143e-08,0.945221,0.000462524,-2.14365e-07,4.34883e-08,0.945684,0.000462226,-8.39003e-08,-2.71297e-08,0.946146,0.000461977,-1.65289e-07,5.42595e-09,0.946608,0.000461662,-1.49012e-07,5.42593e-09,0.947069,0.000461381,-1.32734e-07,-2.71297e-08,0.94753,0.000461034,-2.14123e-07,4.34881e-08,0.947991,0.000460736,-8.36585e-08,-2.76134e-08,0.948452,0.000460486,-1.66499e-07,7.36083e-09,0.948912,0.000460175,-1.44416e-07,-1.82993e-09,0.949372,0.000459881,-1.49906e-07,-4.11073e-11,0.949832,0.000459581,-1.50029e-07,1.99434e-09,0.950291,0.000459287,-1.44046e-07,-7.93627e-09,0.950751,0.000458975,-1.67855e-07,2.97507e-08,0.951209,0.000458728,-7.86029e-08,-5.1462e-08,0.951668,0.000458417,-2.32989e-07,5.6888e-08,0.952126,0.000458121,-6.2325e-08,-5.68806e-08,0.952584,0.000457826,-2.32967e-07,5.14251e-08,0.953042,0.000457514,-7.86914e-08,-2.96107e-08,0.953499,0.000457268,-1.67523e-07,7.41296e-09,0.953956,0.000456955,-1.45285e-07,-4.11262e-11,0.954413,0.000456665,-1.45408e-07,-7.24847e-09,0.95487,0.000456352,-1.67153e-07,2.9035e-08,0.955326,0.000456105,-8.00484e-08,-4.92869e-08,0.955782,0.000455797,-2.27909e-07,4.89032e-08,0.956238,0.000455488,-8.11994e-08,-2.71166e-08,0.956693,0.000455244,-1.62549e-07,-4.13678e-11,0.957148,0.000454919,-1.62673e-07,2.72821e-08,0.957603,0.000454675,-8.0827e-08,-4.94824e-08,0.958057,0.000454365,-2.29274e-07,5.14382e-08,0.958512,0.000454061,-7.49597e-08,-3.7061e-08,0.958965,0.0004538,-1.86143e-07,3.72013e-08,0.959419,0.000453539,-7.45389e-08,-5.21396e-08,0.959873,0.000453234,-2.30958e-07,5.21476e-08,0.960326,0.000452928,-7.45146e-08,-3.72416e-08,0.960778,0.000452667,-1.8624e-07,3.72143e-08,0.961231,0.000452407,-7.45967e-08,-5.20109e-08,0.961683,0.000452101,-2.30629e-07,5.16199e-08,0.962135,0.000451795,-7.57696e-08,-3.52595e-08,0.962587,0.000451538,-1.81548e-07,2.98133e-08,0.963038,0.000451264,-9.2108e-08,-2.43892e-08,0.963489,0.000451007,-1.65276e-07,8.13892e-09,0.96394,0.000450701,-1.40859e-07,-8.16647e-09,0.964391,0.000450394,-1.65358e-07,2.45269e-08,0.964841,0.000450137,-9.17775e-08,-3.03367e-08,0.965291,0.000449863,-1.82787e-07,3.7215e-08,0.965741,0.000449609,-7.11424e-08,-5.89188e-08,0.96619,0.00044929,-2.47899e-07,7.92509e-08,0.966639,0.000449032,-1.01462e-08,-7.92707e-08,0.967088,0.000448773,-2.47958e-07,5.90181e-08,0.967537,0.000448455,-7.0904e-08,-3.75925e-08,0.967985,0.0004482,-1.83681e-07,3.17471e-08,0.968433,0.000447928,-8.84401e-08,-2.97913e-08,0.968881,0.000447662,-1.77814e-07,2.78133e-08,0.969329,0.000447389,-9.4374e-08,-2.18572e-08,0.969776,0.000447135,-1.59946e-07,1.10134e-11,0.970223,0.000446815,-1.59913e-07,2.18132e-08,0.97067,0.000446561,-9.44732e-08,-2.76591e-08,0.971116,0.000446289,-1.7745e-07,2.92185e-08,0.971562,0.000446022,-8.97948e-08,-2.96104e-08,0.972008,0.000445753,-1.78626e-07,2.96185e-08,0.972454,0.000445485,-8.97706e-08,-2.92588e-08,0.972899,0.000445218,-1.77547e-07,2.78123e-08,0.973344,0.000444946,-9.41103e-08,-2.23856e-08,0.973789,0.000444691,-1.61267e-07,2.12559e-09,0.974233,0.000444374,-1.5489e-07,1.38833e-08,0.974678,0.000444106,-1.13241e-07,1.94591e-09,0.975122,0.000443886,-1.07403e-07,-2.16669e-08,0.975565,0.000443606,-1.72404e-07,2.5117e-08,0.976009,0.000443336,-9.70526e-08,-1.91963e-08,0.976452,0.000443085,-1.54642e-07,-7.93627e-09,0.976895,0.000442752,-1.7845e-07,5.09414e-08,0.977338,0.000442548,-2.56262e-08,-7.66201e-08,0.97778,0.000442266,-2.55486e-07,7.67249e-08,0.978222,0.000441986,-2.53118e-08,-5.14655e-08,0.978664,0.000441781,-1.79708e-07,9.92773e-09,0.979106,0.000441451,-1.49925e-07,1.17546e-08,0.979547,0.000441186,-1.14661e-07,2.65868e-09,0.979988,0.000440965,-1.06685e-07,-2.23893e-08,0.980429,0.000440684,-1.73853e-07,2.72939e-08,0.980869,0.000440419,-9.19716e-08,-2.71816e-08,0.98131,0.000440153,-1.73516e-07,2.18278e-08,0.98175,0.000439872,-1.08033e-07,-5.24833e-10,0.982189,0.000439654,-1.09607e-07,-1.97284e-08,0.982629,0.000439376,-1.68793e-07,1.98339e-08,0.983068,0.000439097,-1.09291e-07,-2.62901e-12,0.983507,0.000438879,-1.09299e-07,-1.98234e-08,0.983946,0.000438601,-1.68769e-07,1.96916e-08,0.984384,0.000438322,-1.09694e-07,6.6157e-10,0.984823,0.000438105,-1.0771e-07,-2.23379e-08,0.985261,0.000437823,-1.74723e-07,2.90855e-08,0.985698,0.00043756,-8.74669e-08,-3.43992e-08,0.986136,0.000437282,-1.90665e-07,4.89068e-08,0.986573,0.000437048,-4.39442e-08,-4.20188e-08,0.98701,0.000436834,-1.7e-07,-4.11073e-11,0.987446,0.000436494,-1.70124e-07,4.21832e-08,0.987883,0.00043628,-4.35742e-08,-4.94824e-08,0.988319,0.000436044,-1.92021e-07,3.6537e-08,0.988755,0.00043577,-8.24102e-08,-3.70611e-08,0.989191,0.000435494,-1.93593e-07,5.21026e-08,0.989626,0.000435263,-3.72855e-08,-5.21402e-08,0.990061,0.000435032,-1.93706e-07,3.7249e-08,0.990496,0.000434756,-8.19592e-08,-3.72512e-08,0.990931,0.000434481,-1.93713e-07,5.21511e-08,0.991365,0.00043425,-3.72595e-08,-5.21439e-08,0.991799,0.000434019,-1.93691e-07,3.72152e-08,0.992233,0.000433743,-8.20456e-08,-3.71123e-08,0.992667,0.000433468,-1.93382e-07,5.16292e-08,0.9931,0.000433236,-3.84947e-08,-5.01953e-08,0.993533,0.000433008,-1.89081e-07,2.99427e-08,0.993966,0.00043272,-9.92525e-08,-9.9708e-09,0.994399,0.000432491,-1.29165e-07,9.94051e-09,0.994831,0.000432263,-9.93434e-08,-2.97912e-08,0.995263,0.000431975,-1.88717e-07,4.96198e-08,0.995695,0.000431746,-3.98578e-08,-4.94785e-08,0.996127,0.000431518,-1.88293e-07,2.9085e-08,0.996558,0.000431229,-1.01038e-07,-7.25675e-09,0.996989,0.000431005,-1.22809e-07,-5.79945e-11,0.99742,0.000430759,-1.22983e-07,7.48873e-09,0.997851,0.000430536,-1.00516e-07,-2.98969e-08,0.998281,0.000430245,-1.90207e-07,5.24942e-08,0.998711,0.000430022,-3.27246e-08,-6.08706e-08,0.999141,0.000429774,-2.15336e-07,7.17788e-08,0.999571,0.000429392,0.,0.};

    template <typename T, int scn, int dcn, bool srgb, int blueIdx> struct Lab2RGB;

    template <int scn, int dcn, bool srgb, int blueIdx> struct Lab2RGB<float, scn, dcn, srgb, blueIdx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float lThresh = 0.008856f * 903.3f;
            const float fThresh = 7.787f * 0.008856f + 16.0f / 116.0f;

            float Y, fy;

            if (src.x <= lThresh)
            {
                Y = src.x / 903.3f;
                fy = 7.787f * Y + 16.0f / 116.0f;
            }
            else
            {
                fy = (src.x + 16.0f) / 116.0f;
                Y = fy * fy * fy;
            }

            float X = src.y / 500.0f + fy;
            float Z = fy - src.z / 200.0f;

            if (X <= fThresh)
                X = (X - 16.0f / 116.0f) / 7.787f;
            else
                X = X * X * X;

            if (Z <= fThresh)
                Z = (Z - 16.0f / 116.0f) / 7.787f;
            else
                Z = Z * Z * Z;

            float B = 0.052891f * X - 0.204043f * Y + 1.151152f * Z;
            float G = -0.921235f * X + 1.875991f * Y + 0.045244f * Z;
            float R = 3.079933f * X - 1.537150f * Y - 0.542782f * Z;

            if (srgb)
            {
                B = splineInterpolate(B * GAMMA_TAB_SIZE, c_sRGBInvGammaTab, GAMMA_TAB_SIZE);
                G = splineInterpolate(G * GAMMA_TAB_SIZE, c_sRGBInvGammaTab, GAMMA_TAB_SIZE);
                R = splineInterpolate(R * GAMMA_TAB_SIZE, c_sRGBInvGammaTab, GAMMA_TAB_SIZE);
            }

            typename MakeVec<float, dcn>::type dst;

            dst.x = blueIdx == 0 ? B : R;
            dst.y = G;
            dst.z = blueIdx == 0 ? R : B;
            setAlpha(dst, ColorChannel<float>::max());

            return dst;
        }
    };

    template <int scn, int dcn, bool srgb, int blueIdx> struct Lab2RGB<uchar, scn, dcn, srgb, blueIdx>
            : unary_function<typename MakeVec<uchar, scn>::type, typename MakeVec<uchar, dcn>::type>
    {
        __device__ typename MakeVec<uchar, dcn>::type operator ()(const typename MakeVec<uchar, scn>::type& src) const
        {
            float3 buf;

            buf.x = src.x * (100.f / 255.f);
            buf.y = src.y - 128;
            buf.z = src.z - 128;

            Lab2RGB<float, 3, 3, srgb, blueIdx> cvtf;
            buf = cvtf(buf);

            typename MakeVec<uchar, dcn>::type dst;

            dst.x = saturate_cast<uchar>(buf.x * 255.f);
            dst.y = saturate_cast<uchar>(buf.y * 255.f);
            dst.z = saturate_cast<uchar>(buf.z * 255.f);
            setAlpha(dst, ColorChannel<uchar>::max());

            return dst;
        }
    };

    // RGB to Luv

    __constant__ float c_LabCbrtTab[] = {0.137931,0.0114066,0.,1.18859e-07,0.149338,0.011407,3.56578e-07,-5.79396e-07,0.160745,0.0114059,-1.38161e-06,2.16892e-06,0.172151,0.0114097,5.12516e-06,-8.0814e-06,0.183558,0.0113957,-1.9119e-05,3.01567e-05,0.194965,0.0114479,7.13509e-05,-0.000112545,0.206371,0.011253,-0.000266285,-0.000106493,0.217252,0.0104009,-0.000585765,7.32149e-05,0.22714,0.00944906,-0.00036612,1.21917e-05,0.236235,0.0087534,-0.000329545,2.01753e-05,0.244679,0.00815483,-0.000269019,1.24435e-05,0.252577,0.00765412,-0.000231689,1.05618e-05,0.26001,0.00722243,-0.000200003,8.26662e-06,0.267041,0.00684723,-0.000175203,6.76746e-06,0.27372,0.00651712,-0.000154901,5.61192e-06,0.280088,0.00622416,-0.000138065,4.67009e-06,0.286179,0.00596204,-0.000124055,3.99012e-06,0.292021,0.0057259,-0.000112085,3.36032e-06,0.297638,0.00551181,-0.000102004,2.95338e-06,0.30305,0.00531666,-9.31435e-05,2.52875e-06,0.308277,0.00513796,-8.55572e-05,2.22022e-06,0.313331,0.00497351,-7.88966e-05,1.97163e-06,0.318228,0.00482163,-7.29817e-05,1.7248e-06,0.322978,0.00468084,-6.78073e-05,1.55998e-06,0.327593,0.0045499,-6.31274e-05,1.36343e-06,0.332081,0.00442774,-5.90371e-05,1.27136e-06,0.336451,0.00431348,-5.5223e-05,1.09111e-06,0.34071,0.00420631,-5.19496e-05,1.0399e-06,0.344866,0.00410553,-4.88299e-05,9.18347e-07,0.348923,0.00401062,-4.60749e-05,8.29942e-07,0.352889,0.00392096,-4.35851e-05,7.98478e-07,0.356767,0.00383619,-4.11896e-05,6.84917e-07,0.360562,0.00375586,-3.91349e-05,6.63976e-07,0.36428,0.00367959,-3.7143e-05,5.93086e-07,0.367923,0.00360708,-3.53637e-05,5.6976e-07,0.371495,0.00353806,-3.36544e-05,4.95533e-07,0.375,0.00347224,-3.21678e-05,4.87951e-07,0.378441,0.00340937,-3.0704e-05,4.4349e-07,0.38182,0.00334929,-2.93735e-05,4.20297e-07,0.38514,0.0032918,-2.81126e-05,3.7872e-07,0.388404,0.00323671,-2.69764e-05,3.596e-07,0.391614,0.00318384,-2.58976e-05,3.5845e-07,0.394772,0.00313312,-2.48223e-05,2.92765e-07,0.397881,0.00308435,-2.3944e-05,3.18232e-07,0.400942,0.00303742,-2.29893e-05,2.82046e-07,0.403957,0.00299229,-2.21432e-05,2.52315e-07,0.406927,0.00294876,-2.13862e-05,2.58416e-07,0.409855,0.00290676,-2.0611e-05,2.33939e-07,0.412741,0.00286624,-1.99092e-05,2.36342e-07,0.415587,0.00282713,-1.92001e-05,1.916e-07,0.418396,0.00278931,-1.86253e-05,2.1915e-07,0.421167,0.00275271,-1.79679e-05,1.83498e-07,0.423901,0.00271733,-1.74174e-05,1.79343e-07,0.426602,0.00268303,-1.68794e-05,1.72013e-07,0.429268,0.00264979,-1.63633e-05,1.75686e-07,0.431901,0.00261759,-1.58363e-05,1.3852e-07,0.434503,0.00258633,-1.54207e-05,1.64304e-07,0.437074,0.00255598,-1.49278e-05,1.28136e-07,0.439616,0.00252651,-1.45434e-05,1.57618e-07,0.442128,0.0024979,-1.40705e-05,1.0566e-07,0.444612,0.00247007,-1.37535e-05,1.34998e-07,0.447068,0.00244297,-1.33485e-05,1.29207e-07,0.449498,0.00241666,-1.29609e-05,9.32347e-08,0.451902,0.00239102,-1.26812e-05,1.23703e-07,0.45428,0.00236603,-1.23101e-05,9.74072e-08,0.456634,0.0023417,-1.20179e-05,1.12518e-07,0.458964,0.002318,-1.16803e-05,7.83681e-08,0.46127,0.00229488,-1.14452e-05,1.10452e-07,0.463554,0.00227232,-1.11139e-05,7.58719e-08,0.465815,0.00225032,-1.08863e-05,9.2699e-08,0.468055,0.00222882,-1.06082e-05,8.97738e-08,0.470273,0.00220788,-1.03388e-05,5.4845e-08,0.47247,0.00218736,-1.01743e-05,1.0808e-07,0.474648,0.00216734,-9.85007e-06,4.9277e-08,0.476805,0.00214779,-9.70224e-06,8.22408e-08,0.478943,0.00212863,-9.45551e-06,6.87942e-08,0.481063,0.00210993,-9.24913e-06,5.98144e-08,0.483163,0.00209161,-9.06969e-06,7.93789e-08,0.485246,0.00207371,-8.83155e-06,3.99032e-08,0.487311,0.00205616,-8.71184e-06,8.88325e-08,0.489358,0.002039,-8.44534e-06,2.20004e-08,0.491389,0.00202218,-8.37934e-06,9.13872e-08,0.493403,0.0020057,-8.10518e-06,2.96829e-08,0.495401,0.00198957,-8.01613e-06,5.81028e-08,0.497382,0.00197372,-7.84183e-06,6.5731e-08,0.499348,0.00195823,-7.64463e-06,3.66019e-08,0.501299,0.00194305,-7.53483e-06,2.62811e-08,0.503234,0.00192806,-7.45598e-06,9.66907e-08,0.505155,0.00191344,-7.16591e-06,4.18928e-09,0.507061,0.00189912,-7.15334e-06,6.53665e-08,0.508953,0.00188501,-6.95724e-06,3.23686e-08,0.510831,0.00187119,-6.86014e-06,4.35774e-08,0.512696,0.0018576,-6.72941e-06,3.17406e-08,0.514547,0.00184424,-6.63418e-06,6.78785e-08,0.516384,0.00183117,-6.43055e-06,-5.23126e-09,0.518209,0.0018183,-6.44624e-06,7.22562e-08,0.520021,0.00180562,-6.22947e-06,1.42292e-08,0.52182,0.0017932,-6.18679e-06,4.9641e-08,0.523607,0.00178098,-6.03786e-06,2.56259e-08,0.525382,0.00176898,-5.96099e-06,2.66696e-08,0.527145,0.00175714,-5.88098e-06,4.65094e-08,0.528897,0.00174552,-5.74145e-06,2.57114e-08,0.530637,0.00173411,-5.66431e-06,2.94588e-08,0.532365,0.00172287,-5.57594e-06,3.52667e-08,0.534082,0.00171182,-5.47014e-06,8.28868e-09,0.535789,0.00170091,-5.44527e-06,5.07871e-08,0.537484,0.00169017,-5.29291e-06,2.69817e-08,0.539169,0.00167967,-5.21197e-06,2.01009e-08,0.540844,0.0016693,-5.15166e-06,1.18237e-08,0.542508,0.00165903,-5.11619e-06,5.18135e-08,0.544162,0.00164896,-4.96075e-06,1.9341e-08,0.545806,0.00163909,-4.90273e-06,-9.96867e-09,0.54744,0.00162926,-4.93263e-06,8.01382e-08,0.549064,0.00161963,-4.69222e-06,-1.25601e-08,0.550679,0.00161021,-4.7299e-06,2.97067e-08,0.552285,0.00160084,-4.64078e-06,1.29426e-08,0.553881,0.0015916,-4.60195e-06,3.77327e-08,0.555468,0.00158251,-4.48875e-06,1.49412e-08,0.557046,0.00157357,-4.44393e-06,2.17118e-08,0.558615,0.00156475,-4.3788e-06,1.74206e-08,0.560176,0.00155605,-4.32653e-06,2.78152e-08,0.561727,0.00154748,-4.24309e-06,-9.47239e-09,0.563271,0.00153896,-4.27151e-06,6.9679e-08,0.564805,0.00153063,-4.06247e-06,-3.08246e-08,0.566332,0.00152241,-4.15494e-06,5.36188e-08,0.56785,0.00151426,-3.99409e-06,-4.83594e-09,0.56936,0.00150626,-4.00859e-06,2.53293e-08,0.570863,0.00149832,-3.93261e-06,2.27286e-08,0.572357,0.00149052,-3.86442e-06,2.96541e-09,0.573844,0.0014828,-3.85552e-06,2.50147e-08,0.575323,0.00147516,-3.78048e-06,1.61842e-08,0.576794,0.00146765,-3.73193e-06,2.94582e-08,0.578258,0.00146028,-3.64355e-06,-1.48076e-08,0.579715,0.00145295,-3.68798e-06,2.97724e-08,0.581164,0.00144566,-3.59866e-06,1.49272e-08,0.582606,0.00143851,-3.55388e-06,2.97285e-08,0.584041,0.00143149,-3.46469e-06,-1.46323e-08,0.585469,0.00142451,-3.50859e-06,2.88004e-08,0.58689,0.00141758,-3.42219e-06,1.864e-08,0.588304,0.00141079,-3.36627e-06,1.58482e-08,0.589712,0.00140411,-3.31872e-06,-2.24279e-08,0.591112,0.00139741,-3.38601e-06,7.38639e-08,0.592507,0.00139085,-3.16441e-06,-3.46088e-08,0.593894,0.00138442,-3.26824e-06,4.96675e-09,0.595275,0.0013779,-3.25334e-06,7.4346e-08,0.59665,0.00137162,-3.0303e-06,-6.39319e-08,0.598019,0.00136536,-3.2221e-06,6.21725e-08,0.599381,0.00135911,-3.03558e-06,-5.94423e-09,0.600737,0.00135302,-3.05341e-06,2.12091e-08,0.602087,0.00134697,-2.98979e-06,-1.92876e-08,0.603431,0.00134094,-3.04765e-06,5.5941e-08,0.604769,0.00133501,-2.87983e-06,-2.56622e-08,0.606101,0.00132917,-2.95681e-06,4.67078e-08,0.607427,0.0013234,-2.81669e-06,-4.19592e-08,0.608748,0.00131764,-2.94257e-06,6.15243e-08,0.610062,0.00131194,-2.75799e-06,-2.53244e-08,0.611372,0.00130635,-2.83397e-06,3.97739e-08,0.612675,0.0013008,-2.71465e-06,-1.45618e-08,0.613973,0.00129533,-2.75833e-06,1.84733e-08,0.615266,0.00128986,-2.70291e-06,2.73606e-10,0.616553,0.00128446,-2.70209e-06,4.00367e-08,0.617835,0.00127918,-2.58198e-06,-4.12113e-08,0.619111,0.00127389,-2.70561e-06,6.52039e-08,0.620383,0.00126867,-2.51e-06,-4.07901e-08,0.621649,0.00126353,-2.63237e-06,3.83516e-08,0.62291,0.00125838,-2.51732e-06,6.59315e-09,0.624166,0.00125337,-2.49754e-06,-5.11939e-09,0.625416,0.00124836,-2.5129e-06,1.38846e-08,0.626662,0.00124337,-2.47124e-06,9.18514e-09,0.627903,0.00123846,-2.44369e-06,8.97952e-09,0.629139,0.0012336,-2.41675e-06,1.45012e-08,0.63037,0.00122881,-2.37325e-06,-7.37949e-09,0.631597,0.00122404,-2.39538e-06,1.50169e-08,0.632818,0.00121929,-2.35033e-06,6.91648e-09,0.634035,0.00121461,-2.32958e-06,1.69219e-08,0.635248,0.00121,-2.27882e-06,-1.49997e-08,0.636455,0.0012054,-2.32382e-06,4.30769e-08,0.637659,0.00120088,-2.19459e-06,-3.80986e-08,0.638857,0.00119638,-2.30888e-06,4.97134e-08,0.640051,0.00119191,-2.15974e-06,-4.15463e-08,0.641241,0.00118747,-2.28438e-06,5.68667e-08,0.642426,0.00118307,-2.11378e-06,-7.10641e-09,0.643607,0.00117882,-2.1351e-06,-2.8441e-08,0.644784,0.00117446,-2.22042e-06,6.12658e-08,0.645956,0.00117021,-2.03663e-06,-3.78083e-08,0.647124,0.00116602,-2.15005e-06,3.03627e-08,0.648288,0.00116181,-2.05896e-06,-2.40379e-08,0.649448,0.00115762,-2.13108e-06,6.57887e-08,0.650603,0.00115356,-1.93371e-06,-6.03028e-08,0.651755,0.00114951,-2.11462e-06,5.62134e-08,0.652902,0.00114545,-1.94598e-06,-4.53417e-08,0.654046,0.00114142,-2.082e-06,6.55489e-08,0.655185,0.00113745,-1.88536e-06,-3.80396e-08,0.656321,0.00113357,-1.99948e-06,2.70049e-08,0.657452,0.00112965,-1.91846e-06,-1.03755e-08,0.65858,0.00112578,-1.94959e-06,1.44973e-08,0.659704,0.00112192,-1.9061e-06,1.1991e-08,0.660824,0.00111815,-1.87012e-06,-2.85634e-09,0.66194,0.0011144,-1.87869e-06,-5.65782e-10,0.663053,0.00111064,-1.88039e-06,5.11947e-09,0.664162,0.0011069,-1.86503e-06,3.96924e-08,0.665267,0.00110328,-1.74595e-06,-4.46795e-08,0.666368,0.00109966,-1.87999e-06,1.98161e-08,0.667466,0.00109596,-1.82054e-06,2.502e-08,0.66856,0.00109239,-1.74548e-06,-6.86593e-10,0.669651,0.0010889,-1.74754e-06,-2.22739e-08,0.670738,0.00108534,-1.81437e-06,3.01776e-08,0.671821,0.0010818,-1.72383e-06,2.07732e-08,0.672902,0.00107841,-1.66151e-06,-5.36658e-08,0.673978,0.00107493,-1.82251e-06,7.46802e-08,0.675051,0.00107151,-1.59847e-06,-6.62411e-08,0.676121,0.00106811,-1.79719e-06,7.10748e-08,0.677188,0.00106473,-1.58397e-06,-3.92441e-08,0.678251,0.00106145,-1.7017e-06,2.62973e-08,0.679311,0.00105812,-1.62281e-06,-6.34035e-09,0.680367,0.00105486,-1.64183e-06,-9.36249e-10,0.68142,0.00105157,-1.64464e-06,1.00854e-08,0.68247,0.00104831,-1.61438e-06,2.01995e-08,0.683517,0.00104514,-1.55378e-06,-3.1279e-08,0.68456,0.00104194,-1.64762e-06,4.53114e-08,0.685601,0.00103878,-1.51169e-06,-3.07573e-08,0.686638,0.00103567,-1.60396e-06,1.81133e-08,0.687672,0.00103251,-1.54962e-06,1.79085e-08,0.688703,0.00102947,-1.49589e-06,-3.01428e-08,0.689731,0.00102639,-1.58632e-06,4.30583e-08,0.690756,0.00102334,-1.45715e-06,-2.28814e-08,0.691778,0.00102036,-1.52579e-06,-1.11373e-08,0.692797,0.00101727,-1.5592e-06,6.74305e-08,0.693812,0.00101436,-1.35691e-06,-7.97709e-08,0.694825,0.0010114,-1.59622e-06,7.28391e-08,0.695835,0.00100843,-1.37771e-06,-3.27715e-08,0.696842,0.00100558,-1.47602e-06,-1.35807e-09,0.697846,0.00100262,-1.48009e-06,3.82037e-08,0.698847,0.000999775,-1.36548e-06,-3.22474e-08,0.699846,0.000996948,-1.46223e-06,3.11809e-08,0.700841,0.000994117,-1.36868e-06,-3.28714e-08,0.701834,0.000991281,-1.4673e-06,4.07001e-08,0.702824,0.000988468,-1.3452e-06,-1.07197e-08,0.703811,0.000985746,-1.37736e-06,2.17866e-09,0.704795,0.000982998,-1.37082e-06,2.00521e-09,0.705777,0.000980262,-1.3648e-06,-1.01996e-08,0.706756,0.000977502,-1.3954e-06,3.87931e-08,0.707732,0.000974827,-1.27902e-06,-2.57632e-08,0.708706,0.000972192,-1.35631e-06,4.65513e-09,0.709676,0.000969493,-1.34235e-06,7.14257e-09,0.710645,0.00096683,-1.32092e-06,2.63791e-08,0.71161,0.000964267,-1.24178e-06,-5.30543e-08,0.712573,0.000961625,-1.40095e-06,6.66289e-08,0.713533,0.000959023,-1.20106e-06,-3.46474e-08,0.714491,0.000956517,-1.305e-06,1.23559e-08,0.715446,0.000953944,-1.26793e-06,-1.47763e-08,0.716399,0.000951364,-1.31226e-06,4.67494e-08,0.717349,0.000948879,-1.17201e-06,-5.3012e-08,0.718297,0.000946376,-1.33105e-06,4.60894e-08,0.719242,0.000943852,-1.19278e-06,-1.21366e-08,0.720185,0.00094143,-1.22919e-06,2.45673e-09,0.721125,0.000938979,-1.22182e-06,2.30966e-09,0.722063,0.000936543,-1.21489e-06,-1.16954e-08,0.722998,0.000934078,-1.24998e-06,4.44718e-08,0.723931,0.000931711,-1.11656e-06,-4.69823e-08,0.724861,0.000929337,-1.25751e-06,2.4248e-08,0.725789,0.000926895,-1.18477e-06,9.5949e-09,0.726715,0.000924554,-1.15598e-06,-3.02286e-09,0.727638,0.000922233,-1.16505e-06,2.49649e-09,0.72856,0.00091991,-1.15756e-06,-6.96321e-09,0.729478,0.000917575,-1.17845e-06,2.53564e-08,0.730395,0.000915294,-1.10238e-06,-3.48578e-08,0.731309,0.000912984,-1.20695e-06,5.44704e-08,0.732221,0.000910734,-1.04354e-06,-6.38144e-08,0.73313,0.000908455,-1.23499e-06,8.15781e-08,0.734038,0.00090623,-9.90253e-07,-8.3684e-08,0.734943,0.000903999,-1.2413e-06,7.43441e-08,0.735846,0.000901739,-1.01827e-06,-3.48787e-08,0.736746,0.000899598,-1.12291e-06,5.56596e-09,0.737645,0.000897369,-1.10621e-06,1.26148e-08,0.738541,0.000895194,-1.06837e-06,3.57935e-09,0.739435,0.000893068,-1.05763e-06,-2.69322e-08,0.740327,0.000890872,-1.13842e-06,4.45448e-08,0.741217,0.000888729,-1.00479e-06,-3.20376e-08,0.742105,0.000886623,-1.1009e-06,2.40011e-08,0.74299,0.000884493,-1.0289e-06,-4.36209e-09,0.743874,0.000882422,-1.04199e-06,-6.55268e-09,0.744755,0.000880319,-1.06164e-06,3.05728e-08,0.745634,0.000878287,-9.69926e-07,-5.61338e-08,0.746512,0.000876179,-1.13833e-06,7.4753e-08,0.747387,0.000874127,-9.14068e-07,-6.40644e-08,0.74826,0.000872106,-1.10626e-06,6.22955e-08,0.749131,0.000870081,-9.19375e-07,-6.59083e-08,0.75,0.000868044,-1.1171e-06,8.21284e-08,0.750867,0.000866056,-8.70714e-07,-8.37915e-08,0.751732,0.000864064,-1.12209e-06,7.42237e-08,0.752595,0.000862042,-8.99418e-07,-3.42894e-08,0.753456,0.00086014,-1.00229e-06,3.32955e-09,0.754315,0.000858146,-9.92297e-07,2.09712e-08,0.755173,0.000856224,-9.29384e-07,-2.76096e-08,0.756028,0.000854282,-1.01221e-06,2.98627e-08,0.756881,0.000852348,-9.22625e-07,-3.22365e-08,0.757733,0.000850406,-1.01933e-06,3.94786e-08,0.758582,0.000848485,-9.00898e-07,-6.46833e-09,0.75943,0.000846664,-9.20303e-07,-1.36052e-08,0.760275,0.000844783,-9.61119e-07,1.28447e-09,0.761119,0.000842864,-9.57266e-07,8.4674e-09,0.761961,0.000840975,-9.31864e-07,2.44506e-08,0.762801,0.000839185,-8.58512e-07,-4.6665e-08,0.763639,0.000837328,-9.98507e-07,4.30001e-08,0.764476,0.00083546,-8.69507e-07,-6.12609e-09,0.76531,0.000833703,-8.87885e-07,-1.84959e-08,0.766143,0.000831871,-9.43372e-07,2.05052e-08,0.766974,0.000830046,-8.81857e-07,-3.92026e-09,0.767803,0.000828271,-8.93618e-07,-4.82426e-09,0.768631,0.000826469,-9.0809e-07,2.32172e-08,0.769456,0.000824722,-8.38439e-07,-2.84401e-08,0.77028,0.00082296,-9.23759e-07,3.09386e-08,0.771102,0.000821205,-8.30943e-07,-3.57099e-08,0.771922,0.000819436,-9.38073e-07,5.22963e-08,0.772741,0.000817717,-7.81184e-07,-5.42658e-08,0.773558,0.000815992,-9.43981e-07,4.55579e-08,0.774373,0.000814241,-8.07308e-07,-8.75656e-09,0.775186,0.0008126,-8.33578e-07,-1.05315e-08,0.775998,0.000810901,-8.65172e-07,-8.72188e-09,0.776808,0.000809145,-8.91338e-07,4.54191e-08,0.777616,0.000807498,-7.5508e-07,-5.37454e-08,0.778423,0.000805827,-9.16317e-07,5.03532e-08,0.779228,0.000804145,-7.65257e-07,-2.84584e-08,0.780031,0.000802529,-8.50632e-07,3.87579e-09,0.780833,0.00080084,-8.39005e-07,1.29552e-08,0.781633,0.0007992,-8.00139e-07,3.90804e-09,0.782432,0.000797612,-7.88415e-07,-2.85874e-08,0.783228,0.000795949,-8.74177e-07,5.0837e-08,0.784023,0.000794353,-7.21666e-07,-5.55513e-08,0.784817,0.000792743,-8.8832e-07,5.21587e-08,0.785609,0.000791123,-7.31844e-07,-3.38744e-08,0.786399,0.000789558,-8.33467e-07,2.37342e-08,0.787188,0.000787962,-7.62264e-07,-1.45775e-09,0.787975,0.000786433,-7.66638e-07,-1.79034e-08,0.788761,0.000784846,-8.20348e-07,1.34665e-08,0.789545,0.000783246,-7.79948e-07,2.3642e-08,0.790327,0.000781757,-7.09022e-07,-4.84297e-08,0.791108,0.000780194,-8.54311e-07,5.08674e-08,0.791888,0.000778638,-7.01709e-07,-3.58303e-08,0.792666,0.000777127,-8.092e-07,3.28493e-08,0.793442,0.000775607,-7.10652e-07,-3.59624e-08,0.794217,0.000774078,-8.1854e-07,5.13959e-08,0.79499,0.000772595,-6.64352e-07,-5.04121e-08,0.795762,0.000771115,-8.15588e-07,3.10431e-08,0.796532,0.000769577,-7.22459e-07,-1.41557e-08,0.797301,0.00076809,-7.64926e-07,2.55795e-08,0.798069,0.000766636,-6.88187e-07,-2.85578e-08,0.798835,0.000765174,-7.73861e-07,2.90472e-08,0.799599,0.000763714,-6.86719e-07,-2.80262e-08,0.800362,0.000762256,-7.70798e-07,2.34531e-08,0.801123,0.000760785,-7.00438e-07,-6.18144e-09,0.801884,0.000759366,-7.18983e-07,1.27263e-09,0.802642,0.000757931,-7.15165e-07,1.09101e-09,0.803399,0.000756504,-7.11892e-07,-5.63675e-09,0.804155,0.000755064,-7.28802e-07,2.14559e-08,0.80491,0.00075367,-6.64434e-07,-2.05821e-08,0.805663,0.00075228,-7.26181e-07,1.26812e-09,0.806414,0.000750831,-7.22377e-07,1.55097e-08,0.807164,0.000749433,-6.75848e-07,-3.70216e-09,0.807913,0.00074807,-6.86954e-07,-7.0105e-10,0.80866,0.000746694,-6.89057e-07,6.5063e-09,0.809406,0.000745336,-6.69538e-07,-2.53242e-08,0.810151,0.000743921,-7.45511e-07,3.51858e-08,0.810894,0.000742535,-6.39953e-07,3.79034e-09,0.811636,0.000741267,-6.28582e-07,-5.03471e-08,0.812377,0.000739858,-7.79624e-07,7.83886e-08,0.813116,0.000738534,-5.44458e-07,-8.43935e-08,0.813854,0.000737192,-7.97638e-07,8.03714e-08,0.81459,0.000735838,-5.56524e-07,-5.82784e-08,0.815325,0.00073455,-7.31359e-07,3.35329e-08,0.816059,0.000733188,-6.3076e-07,-1.62486e-08,0.816792,0.000731878,-6.79506e-07,3.14614e-08,0.817523,0.000730613,-5.85122e-07,-4.99925e-08,0.818253,0.000729293,-7.35099e-07,4.92994e-08,0.818982,0.000727971,-5.87201e-07,-2.79959e-08,0.819709,0.000726712,-6.71189e-07,3.07959e-09,0.820435,0.000725379,-6.6195e-07,1.56777e-08,0.82116,0.000724102,-6.14917e-07,-6.18564e-09,0.821883,0.000722854,-6.33474e-07,9.06488e-09,0.822606,0.000721614,-6.06279e-07,-3.00739e-08,0.823327,0.000720311,-6.96501e-07,5.16262e-08,0.824046,0.000719073,-5.41623e-07,-5.72214e-08,0.824765,0.000717818,-7.13287e-07,5.80503e-08,0.825482,0.000716566,-5.39136e-07,-5.57703e-08,0.826198,0.00071532,-7.06447e-07,4.58215e-08,0.826912,0.000714045,-5.68983e-07,-8.30636e-09,0.827626,0.000712882,-5.93902e-07,-1.25961e-08,0.828338,0.000711656,-6.3169e-07,-9.13985e-10,0.829049,0.00071039,-6.34432e-07,1.62519e-08,0.829759,0.00070917,-5.85676e-07,-4.48904e-09,0.830468,0.000707985,-5.99143e-07,1.70418e-09,0.831175,0.000706792,-5.9403e-07,-2.32768e-09,0.831881,0.000705597,-6.01014e-07,7.60648e-09,0.832586,0.000704418,-5.78194e-07,-2.80982e-08,0.83329,0.000703177,-6.62489e-07,4.51817e-08,0.833993,0.000701988,-5.26944e-07,-3.34192e-08,0.834694,0.000700834,-6.27201e-07,2.88904e-08,0.835394,0.000699666,-5.4053e-07,-2.25378e-08,0.836093,0.000698517,-6.08143e-07,1.65589e-09,0.836791,0.000697306,-6.03176e-07,1.59142e-08,0.837488,0.000696147,-5.55433e-07,-5.70801e-09,0.838184,0.000695019,-5.72557e-07,6.91792e-09,0.838878,0.000693895,-5.51803e-07,-2.19637e-08,0.839571,0.000692725,-6.17694e-07,2.13321e-08,0.840263,0.000691554,-5.53698e-07,-3.75996e-09,0.840954,0.000690435,-5.64978e-07,-6.29219e-09,0.841644,0.000689287,-5.83855e-07,2.89287e-08,0.842333,0.000688206,-4.97068e-07,-4.98181e-08,0.843021,0.000687062,-6.46523e-07,5.11344e-08,0.843707,0.000685922,-4.9312e-07,-3.55102e-08,0.844393,0.00068483,-5.9965e-07,3.13019e-08,0.845077,0.000683724,-5.05745e-07,-3.00925e-08,0.84576,0.000682622,-5.96022e-07,2.94636e-08,0.846442,0.000681519,-5.07631e-07,-2.81572e-08,0.847123,0.000680419,-5.92103e-07,2.35606e-08,0.847803,0.000679306,-5.21421e-07,-6.48045e-09,0.848482,0.000678243,-5.40863e-07,2.36124e-09,0.849159,0.000677169,-5.33779e-07,-2.96461e-09,0.849836,0.000676092,-5.42673e-07,9.49728e-09,0.850512,0.000675035,-5.14181e-07,-3.50245e-08,0.851186,0.000673902,-6.19254e-07,7.09959e-08,0.851859,0.000672876,-4.06267e-07,-7.01453e-08,0.852532,0.000671853,-6.16703e-07,3.07714e-08,0.853203,0.000670712,-5.24388e-07,6.66423e-09,0.853873,0.000669684,-5.04396e-07,2.17629e-09,0.854542,0.000668681,-4.97867e-07,-1.53693e-08,0.855211,0.000667639,-5.43975e-07,-3.03752e-10,0.855878,0.000666551,-5.44886e-07,1.65844e-08,0.856544,0.000665511,-4.95133e-07,-6.42907e-09,0.857209,0.000664501,-5.1442e-07,9.13195e-09,0.857873,0.0006635,-4.87024e-07,-3.00987e-08,0.858536,0.000662435,-5.7732e-07,5.16584e-08,0.859198,0.000661436,-4.22345e-07,-5.73255e-08,0.859859,0.000660419,-5.94322e-07,5.84343e-08,0.860518,0.000659406,-4.19019e-07,-5.72022e-08,0.861177,0.000658396,-5.90626e-07,5.11653e-08,0.861835,0.000657368,-4.3713e-07,-2.82495e-08,0.862492,0.000656409,-5.21878e-07,2.22788e-09,0.863148,0.000655372,-5.15195e-07,1.9338e-08,0.863803,0.0006544,-4.5718e-07,-1.99754e-08,0.864457,0.000653425,-5.17107e-07,9.59024e-10,0.86511,0.000652394,-5.1423e-07,1.61393e-08,0.865762,0.000651414,-4.65812e-07,-5.91149e-09,0.866413,0.000650465,-4.83546e-07,7.50665e-09,0.867063,0.00064952,-4.61026e-07,-2.4115e-08,0.867712,0.000648526,-5.33371e-07,2.93486e-08,0.86836,0.000647547,-4.45325e-07,-3.36748e-08,0.869007,0.000646555,-5.4635e-07,4.57461e-08,0.869653,0.0006456,-4.09112e-07,-3.01002e-08,0.870298,0.000644691,-4.99412e-07,1.50501e-08,0.870942,0.000643738,-4.54262e-07,-3.01002e-08,0.871585,0.000642739,-5.44563e-07,4.57461e-08,0.872228,0.000641787,-4.07324e-07,-3.36748e-08,0.872869,0.000640871,-5.08349e-07,2.93486e-08,0.873509,0.000639943,-4.20303e-07,-2.4115e-08,0.874149,0.00063903,-4.92648e-07,7.50655e-09,0.874787,0.000638067,-4.70128e-07,-5.91126e-09,0.875425,0.000637109,-4.87862e-07,1.61385e-08,0.876062,0.000636182,-4.39447e-07,9.61961e-10,0.876697,0.000635306,-4.36561e-07,-1.99863e-08,0.877332,0.000634373,-4.9652e-07,1.93785e-08,0.877966,0.000633438,-4.38384e-07,2.07697e-09,0.878599,0.000632567,-4.32153e-07,-2.76864e-08,0.879231,0.00063162,-5.15212e-07,4.90641e-08,0.879862,0.000630737,-3.6802e-07,-4.93606e-08,0.880493,0.000629852,-5.16102e-07,2.9169e-08,0.881122,0.000628908,-4.28595e-07,-7.71083e-09,0.881751,0.000628027,-4.51727e-07,1.6744e-09,0.882378,0.000627129,-4.46704e-07,1.01317e-09,0.883005,0.000626239,-4.43665e-07,-5.72703e-09,0.883631,0.000625334,-4.60846e-07,2.1895e-08,0.884255,0.000624478,-3.95161e-07,-2.22481e-08,0.88488,0.000623621,-4.61905e-07,7.4928e-09,0.885503,0.00062272,-4.39427e-07,-7.72306e-09,0.886125,0.000621818,-4.62596e-07,2.33995e-08,0.886746,0.000620963,-3.92398e-07,-2.62704e-08,0.887367,0.000620099,-4.71209e-07,2.20775e-08,0.887987,0.000619223,-4.04976e-07,-2.43496e-09,0.888605,0.000618406,-4.12281e-07,-1.23377e-08,0.889223,0.000617544,-4.49294e-07,-7.81876e-09,0.88984,0.000616622,-4.72751e-07,4.36128e-08,0.890457,0.000615807,-3.41912e-07,-4.7423e-08,0.891072,0.000614981,-4.84181e-07,2.68698e-08,0.891687,0.000614093,-4.03572e-07,-4.51384e-10,0.8923,0.000613285,-4.04926e-07,-2.50643e-08,0.892913,0.0006124,-4.80119e-07,4.11038e-08,0.893525,0.000611563,-3.56808e-07,-2.01414e-08,0.894136,0.000610789,-4.17232e-07,-2.01426e-08,0.894747,0.000609894,-4.7766e-07,4.11073e-08,0.895356,0.000609062,-3.54338e-07,-2.50773e-08,0.895965,0.000608278,-4.2957e-07,-4.02954e-10,0.896573,0.000607418,-4.30779e-07,2.66891e-08,0.89718,0.000606636,-3.50711e-07,-4.67489e-08,0.897786,0.000605795,-4.90958e-07,4.10972e-08,0.898391,0.000604936,-3.67666e-07,1.56948e-09,0.898996,0.000604205,-3.62958e-07,-4.73751e-08,0.8996,0.000603337,-5.05083e-07,6.87214e-08,0.900202,0.000602533,-2.98919e-07,-4.86966e-08,0.900805,0.000601789,-4.45009e-07,6.85589e-09,0.901406,0.00060092,-4.24441e-07,2.1273e-08,0.902007,0.000600135,-3.60622e-07,-3.23434e-08,0.902606,0.000599317,-4.57652e-07,4.84959e-08,0.903205,0.000598547,-3.12164e-07,-4.24309e-08,0.903803,0.000597795,-4.39457e-07,2.01844e-09,0.904401,0.000596922,-4.33402e-07,3.43571e-08,0.904997,0.000596159,-3.30331e-07,-2.02374e-08,0.905593,0.000595437,-3.91043e-07,-1.30123e-08,0.906188,0.000594616,-4.3008e-07,1.26819e-08,0.906782,0.000593794,-3.92034e-07,2.18894e-08,0.907376,0.000593076,-3.26366e-07,-4.06349e-08,0.907968,0.000592301,-4.4827e-07,2.1441e-08,0.90856,0.000591469,-3.83947e-07,1.44754e-08,0.909151,0.000590744,-3.40521e-07,-1.97379e-08,0.909742,0.000590004,-3.99735e-07,4.87161e-09,0.910331,0.000589219,-3.8512e-07,2.51532e-10,0.91092,0.00058845,-3.84366e-07,-5.87776e-09,0.911508,0.000587663,-4.01999e-07,2.32595e-08,0.912096,0.000586929,-3.3222e-07,-2.75554e-08,0.912682,0.000586182,-4.14887e-07,2.73573e-08,0.913268,0.000585434,-3.32815e-07,-2.22692e-08,0.913853,0.000584702,-3.99622e-07,2.11486e-09,0.914437,0.000583909,-3.93278e-07,1.38098e-08,0.915021,0.000583164,-3.51848e-07,2.25042e-09,0.915604,0.000582467,-3.45097e-07,-2.28115e-08,0.916186,0.000581708,-4.13531e-07,2.93911e-08,0.916767,0.000580969,-3.25358e-07,-3.51481e-08,0.917348,0.000580213,-4.30803e-07,5.15967e-08,0.917928,0.000579506,-2.76012e-07,-5.20296e-08,0.918507,0.000578798,-4.32101e-07,3.73124e-08,0.919085,0.000578046,-3.20164e-07,-3.76154e-08,0.919663,0.000577293,-4.3301e-07,5.35447e-08,0.92024,0.000576587,-2.72376e-07,-5.7354e-08,0.920816,0.000575871,-4.44438e-07,5.66621e-08,0.921391,0.000575152,-2.74452e-07,-5.00851e-08,0.921966,0.000574453,-4.24707e-07,2.4469e-08,0.92254,0.000573677,-3.513e-07,1.18138e-08,0.923114,0.000573009,-3.15859e-07,-1.21195e-08,0.923686,0.000572341,-3.52217e-07,-2.29403e-08,0.924258,0.000571568,-4.21038e-07,4.4276e-08,0.924829,0.000570859,-2.8821e-07,-3.49546e-08,0.9254,0.000570178,-3.93074e-07,3.59377e-08,0.92597,0.000569499,-2.85261e-07,-4.91915e-08,0.926539,0.000568781,-4.32835e-07,4.16189e-08,0.927107,0.00056804,-3.07979e-07,1.92523e-09,0.927675,0.00056743,-3.02203e-07,-4.93198e-08,0.928242,0.000566678,-4.50162e-07,7.61447e-08,0.928809,0.000566006,-2.21728e-07,-7.6445e-08,0.929374,0.000565333,-4.51063e-07,5.08216e-08,0.929939,0.000564583,-2.98599e-07,-7.63212e-09,0.930503,0.000563963,-3.21495e-07,-2.02931e-08,0.931067,0.000563259,-3.82374e-07,2.92001e-08,0.93163,0.000562582,-2.94774e-07,-3.69025e-08,0.932192,0.000561882,-4.05482e-07,5.88053e-08,0.932754,0.000561247,-2.29066e-07,-7.91094e-08,0.933315,0.000560552,-4.66394e-07,7.88184e-08,0.933875,0.000559856,-2.29939e-07,-5.73501e-08,0.934434,0.000559224,-4.01989e-07,3.13727e-08,0.934993,0.000558514,-3.07871e-07,-8.53611e-09,0.935551,0.000557873,-3.33479e-07,2.77175e-09,0.936109,0.000557214,-3.25164e-07,-2.55091e-09,0.936666,0.000556556,-3.32817e-07,7.43188e-09,0.937222,0.000555913,-3.10521e-07,-2.71766e-08,0.937778,0.00055521,-3.92051e-07,4.167e-08,0.938333,0.000554551,-2.67041e-07,-2.02941e-08,0.938887,0.000553956,-3.27923e-07,-2.00984e-08,0.93944,0.00055324,-3.88218e-07,4.10828e-08,0.939993,0.000552587,-2.6497e-07,-2.50237e-08,0.940546,0.000551982,-3.40041e-07,-5.92583e-10,0.941097,0.0005513,-3.41819e-07,2.7394e-08,0.941648,0.000550698,-2.59637e-07,-4.93788e-08,0.942199,0.000550031,-4.07773e-07,5.09119e-08,0.942748,0.000549368,-2.55038e-07,-3.50595e-08,0.943297,0.000548753,-3.60216e-07,2.97214e-08,0.943846,0.000548122,-2.71052e-07,-2.42215e-08,0.944394,0.000547507,-3.43716e-07,7.55985e-09,0.944941,0.000546842,-3.21037e-07,-6.01796e-09,0.945487,0.000546182,-3.3909e-07,1.65119e-08,0.946033,0.000545553,-2.89555e-07,-4.2498e-10,0.946578,0.000544973,-2.9083e-07,-1.4812e-08,0.947123,0.000544347,-3.35266e-07,6.83068e-11,0.947667,0.000543676,-3.35061e-07,1.45388e-08,0.94821,0.00054305,-2.91444e-07,1.38123e-09,0.948753,0.000542471,-2.87301e-07,-2.00637e-08,0.949295,0.000541836,-3.47492e-07,1.92688e-08,0.949837,0.000541199,-2.89685e-07,2.59298e-09,0.950378,0.000540628,-2.81906e-07,-2.96407e-08,0.950918,0.000539975,-3.70829e-07,5.63652e-08,0.951458,0.000539402,-2.01733e-07,-7.66107e-08,0.951997,0.000538769,-4.31565e-07,7.12638e-08,0.952535,0.00053812,-2.17774e-07,-2.96305e-08,0.953073,0.000537595,-3.06665e-07,-1.23464e-08,0.95361,0.000536945,-3.43704e-07,1.94114e-08,0.954147,0.000536316,-2.8547e-07,-5.69451e-09,0.954683,0.000535728,-3.02554e-07,3.36666e-09,0.955219,0.000535133,-2.92454e-07,-7.77208e-09,0.955753,0.000534525,-3.1577e-07,2.77216e-08,0.956288,0.000533976,-2.32605e-07,-4.35097e-08,0.956821,0.00053338,-3.63134e-07,2.7108e-08,0.957354,0.000532735,-2.8181e-07,-5.31772e-09,0.957887,0.000532156,-2.97764e-07,-5.83718e-09,0.958419,0.000531543,-3.15275e-07,2.86664e-08,0.95895,0.000530998,-2.29276e-07,-4.9224e-08,0.959481,0.000530392,-3.76948e-07,4.90201e-08,0.960011,0.000529785,-2.29887e-07,-2.76471e-08,0.96054,0.000529243,-3.12829e-07,1.96385e-09,0.961069,0.000528623,-3.06937e-07,1.97917e-08,0.961598,0.000528068,-2.47562e-07,-2.15261e-08,0.962125,0.000527508,-3.1214e-07,6.70795e-09,0.962653,0.000526904,-2.92016e-07,-5.30573e-09,0.963179,0.000526304,-3.07934e-07,1.4515e-08,0.963705,0.000525732,-2.64389e-07,6.85048e-09,0.964231,0.000525224,-2.43837e-07,-4.19169e-08,0.964756,0.00052461,-3.69588e-07,4.1608e-08,0.96528,0.000523996,-2.44764e-07,-5.30598e-09,0.965804,0.000523491,-2.60682e-07,-2.03841e-08,0.966327,0.000522908,-3.21834e-07,2.72378e-08,0.966849,0.000522346,-2.40121e-07,-2.89625e-08,0.967371,0.000521779,-3.27008e-07,2.90075e-08,0.967893,0.000521212,-2.39986e-07,-2.74629e-08,0.968414,0.00052065,-3.22374e-07,2.12396e-08,0.968934,0.000520069,-2.58656e-07,2.10922e-09,0.969454,0.000519558,-2.52328e-07,-2.96765e-08,0.969973,0.000518964,-3.41357e-07,5.6992e-08,0.970492,0.000518452,-1.70382e-07,-7.90821e-08,0.97101,0.000517874,-4.07628e-07,8.05224e-08,0.971528,0.000517301,-1.66061e-07,-6.41937e-08,0.972045,0.000516776,-3.58642e-07,5.70429e-08,0.972561,0.00051623,-1.87513e-07,-4.47686e-08,0.973077,0.00051572,-3.21819e-07,2.82237e-09,0.973593,0.000515085,-3.13352e-07,3.34792e-08,0.974108,0.000514559,-2.12914e-07,-1.75298e-08,0.974622,0.000514081,-2.65503e-07,-2.29648e-08,0.975136,0.000513481,-3.34398e-07,4.97843e-08,0.975649,0.000512961,-1.85045e-07,-5.6963e-08,0.976162,0.00051242,-3.55934e-07,5.88585e-08,0.976674,0.000511885,-1.79359e-07,-5.92616e-08,0.977185,0.000511348,-3.57143e-07,5.89785e-08,0.977696,0.000510811,-1.80208e-07,-5.74433e-08,0.978207,0.000510278,-3.52538e-07,5.15854e-08,0.978717,0.000509728,-1.97781e-07,-2.9689e-08,0.979226,0.000509243,-2.86848e-07,7.56591e-09,0.979735,0.000508692,-2.64151e-07,-5.74649e-10,0.980244,0.000508162,-2.65875e-07,-5.26732e-09,0.980752,0.000507615,-2.81677e-07,2.16439e-08,0.981259,0.000507116,-2.16745e-07,-2.17037e-08,0.981766,0.000506618,-2.81856e-07,5.56636e-09,0.982272,0.000506071,-2.65157e-07,-5.61689e-10,0.982778,0.000505539,-2.66842e-07,-3.31963e-09,0.983283,0.000504995,-2.76801e-07,1.38402e-08,0.983788,0.000504483,-2.3528e-07,7.56339e-09,0.984292,0.000504035,-2.1259e-07,-4.40938e-08,0.984796,0.000503478,-3.44871e-07,4.96026e-08,0.985299,0.000502937,-1.96064e-07,-3.51071e-08,0.985802,0.000502439,-3.01385e-07,3.12212e-08,0.986304,0.00050193,-2.07721e-07,-3.0173e-08,0.986806,0.000501424,-2.9824e-07,2.9866e-08,0.987307,0.000500917,-2.08642e-07,-2.96865e-08,0.987808,0.000500411,-2.97702e-07,2.92753e-08,0.988308,0.000499903,-2.09876e-07,-2.78101e-08,0.988807,0.0004994,-2.93306e-07,2.23604e-08,0.989307,0.000498881,-2.26225e-07,-2.02681e-09,0.989805,0.000498422,-2.32305e-07,-1.42531e-08,0.990303,0.000497915,-2.75065e-07,-5.65232e-10,0.990801,0.000497363,-2.76761e-07,1.65141e-08,0.991298,0.000496859,-2.27218e-07,-5.88639e-09,0.991795,0.000496387,-2.44878e-07,7.0315e-09,0.992291,0.000495918,-2.23783e-07,-2.22396e-08,0.992787,0.000495404,-2.90502e-07,2.23224e-08,0.993282,0.00049489,-2.23535e-07,-7.44543e-09,0.993776,0.000494421,-2.45871e-07,7.45924e-09,0.994271,0.000493951,-2.23493e-07,-2.23915e-08,0.994764,0.000493437,-2.90668e-07,2.25021e-08,0.995257,0.000492923,-2.23161e-07,-8.01218e-09,0.99575,0.000492453,-2.47198e-07,9.54669e-09,0.996242,0.000491987,-2.18558e-07,-3.01746e-08,0.996734,0.000491459,-3.09082e-07,5.1547e-08,0.997225,0.000490996,-1.54441e-07,-5.68039e-08,0.997716,0.000490517,-3.24853e-07,5.64594e-08,0.998206,0.000490036,-1.55474e-07,-4.98245e-08,0.998696,0.000489576,-3.04948e-07,2.36292e-08,0.999186,0.000489037,-2.3406e-07,1.49121e-08,0.999674,0.000488613,-1.89324e-07,-2.3673e-08,1.00016,0.000488164,-2.60343e-07,2.01754e-08,1.00065,0.000487704,-1.99816e-07,-5.70288e-08,1.00114,0.000487133,-3.70903e-07,8.87303e-08,1.00162,0.000486657,-1.04712e-07,-5.94737e-08,1.00211,0.000486269,-2.83133e-07,2.99553e-08,1.0026,0.000485793,-1.93267e-07,-6.03474e-08,1.00308,0.000485225,-3.74309e-07,9.2225e-08,1.00357,0.000484754,-9.76345e-08,-7.0134e-08,1.00405,0.000484348,-3.08036e-07,6.91016e-08,1.00454,0.000483939,-1.00731e-07,-8.70633e-08,1.00502,0.000483476,-3.61921e-07,4.07328e-08,1.0055,0.000482875,-2.39723e-07,4.33413e-08,1.00599,0.000482525,-1.09699e-07,-9.48886e-08,1.00647,0.000482021,-3.94365e-07,9.77947e-08,1.00695,0.000481526,-1.00981e-07,-5.78713e-08,1.00743,0.00048115,-2.74595e-07,1.44814e-08,1.00791,0.000480645,-2.31151e-07,-5.42665e-11,1.00839,0.000480182,-2.31314e-07,-1.42643e-08,1.00887,0.000479677,-2.74106e-07,5.71115e-08,1.00935,0.0004793,-1.02772e-07,-9.49724e-08,1.00983,0.000478809,-3.87689e-07,8.43596e-08,1.01031,0.000478287,-1.3461e-07,-4.04755e-09,1.01079,0.000478006,-1.46753e-07,-6.81694e-08,1.01127,0.000477508,-3.51261e-07,3.83067e-08,1.01174,0.00047692,-2.36341e-07,3.41521e-08,1.01222,0.00047655,-1.33885e-07,-5.57058e-08,1.0127,0.000476115,-3.01002e-07,6.94616e-08,1.01317,0.000475721,-9.26174e-08,-1.02931e-07,1.01365,0.000475227,-4.01412e-07,1.03846e-07,1.01412,0.000474736,-8.98751e-08,-7.40321e-08,1.0146,0.000474334,-3.11971e-07,7.30735e-08,1.01507,0.00047393,-9.27508e-08,-9.90527e-08,1.01554,0.000473447,-3.89909e-07,8.47188e-08,1.01602,0.000472921,-1.35753e-07,-1.40381e-09,1.01649,0.000472645,-1.39964e-07,-7.91035e-08,1.01696,0.000472128,-3.77275e-07,7.93993e-08,1.01744,0.000471612,-1.39077e-07,-7.52607e-11,1.01791,0.000471334,-1.39302e-07,-7.90983e-08,1.01838,0.000470818,-3.76597e-07,7.80499e-08,1.01885,0.000470299,-1.42448e-07,5.31733e-09,1.01932,0.00047003,-1.26496e-07,-9.93193e-08,1.01979,0.000469479,-4.24453e-07,1.53541e-07,1.02026,0.00046909,3.617e-08,-1.57217e-07,1.02073,0.000468691,-4.35482e-07,1.177e-07,1.02119,0.000468173,-8.23808e-08,-7.51659e-08,1.02166,0.000467783,-3.07878e-07,6.37538e-08,1.02213,0.000467358,-1.16617e-07,-6.064e-08,1.0226,0.000466943,-2.98537e-07,5.9597e-08,1.02306,0.000466525,-1.19746e-07,-5.85386e-08,1.02353,0.00046611,-2.95362e-07,5.53482e-08,1.024,0.000465685,-1.29317e-07,-4.36449e-08,1.02446,0.000465296,-2.60252e-07,2.20268e-11,1.02493,0.000464775,-2.60186e-07,4.35568e-08,1.02539,0.000464386,-1.29516e-07,-5.50398e-08,1.02586,0.000463961,-2.94635e-07,5.73932e-08,1.02632,0.000463544,-1.22456e-07,-5.53236e-08,1.02678,0.000463133,-2.88426e-07,4.46921e-08,1.02725,0.000462691,-1.5435e-07,-4.23534e-09,1.02771,0.000462369,-1.67056e-07,-2.77507e-08,1.02817,0.000461952,-2.50308e-07,-3.97101e-09,1.02863,0.000461439,-2.62221e-07,4.36348e-08,1.02909,0.000461046,-1.31317e-07,-5.13589e-08,1.02955,0.000460629,-2.85394e-07,4.25913e-08,1.03001,0.000460186,-1.5762e-07,2.0285e-10,1.03047,0.000459871,-1.57011e-07,-4.34027e-08,1.03093,0.000459427,-2.87219e-07,5.41987e-08,1.03139,0.000459015,-1.24623e-07,-5.4183e-08,1.03185,0.000458604,-2.87172e-07,4.33239e-08,1.03231,0.000458159,-1.572e-07,9.65817e-11,1.03277,0.000457845,-1.56911e-07,-4.37103e-08,1.03323,0.0004574,-2.88041e-07,5.55351e-08,1.03368,0.000456991,-1.21436e-07,-5.9221e-08,1.03414,0.00045657,-2.99099e-07,6.21394e-08,1.0346,0.000456158,-1.1268e-07,-7.01275e-08,1.03505,0.000455723,-3.23063e-07,9.91614e-08,1.03551,0.000455374,-2.55788e-08,-8.80996e-08,1.03596,0.000455058,-2.89878e-07,1.48184e-08,1.03642,0.000454523,-2.45422e-07,2.88258e-08,1.03687,0.000454119,-1.58945e-07,-1.09125e-08,1.03733,0.000453768,-1.91682e-07,1.48241e-08,1.03778,0.000453429,-1.4721e-07,-4.83838e-08,1.03823,0.00045299,-2.92361e-07,5.95019e-08,1.03869,0.000452584,-1.13856e-07,-7.04146e-08,1.03914,0.000452145,-3.25099e-07,1.02947e-07,1.03959,0.000451803,-1.62583e-08,-1.02955e-07,1.04004,0.000451462,-3.25123e-07,7.04544e-08,1.04049,0.000451023,-1.1376e-07,-5.96534e-08,1.04094,0.000450616,-2.9272e-07,4.89499e-08,1.04139,0.000450178,-1.45871e-07,-1.69369e-08,1.04184,0.000449835,-1.96681e-07,1.87977e-08,1.04229,0.000449498,-1.40288e-07,-5.82539e-08,1.04274,0.000449043,-3.1505e-07,9.50087e-08,1.04319,0.000448698,-3.00238e-08,-8.33623e-08,1.04364,0.000448388,-2.80111e-07,2.20363e-11,1.04409,0.000447828,-2.80045e-07,8.32742e-08,1.04454,0.000447517,-3.02221e-08,-9.47002e-08,1.04498,0.000447173,-3.14323e-07,5.7108e-08,1.04543,0.000446716,-1.42999e-07,-1.45225e-08,1.04588,0.000446386,-1.86566e-07,9.82022e-10,1.04632,0.000446016,-1.8362e-07,1.05944e-08,1.04677,0.00044568,-1.51837e-07,-4.33597e-08,1.04721,0.000445247,-2.81916e-07,4.36352e-08,1.04766,0.000444814,-1.51011e-07,-1.19717e-08,1.0481,0.000444476,-1.86926e-07,4.25158e-09,1.04855,0.000444115,-1.74171e-07,-5.03461e-09,1.04899,0.000443751,-1.89275e-07,1.58868e-08,1.04944,0.00044342,-1.41614e-07,-5.85127e-08,1.04988,0.000442961,-3.17152e-07,9.89548e-08,1.05032,0.000442624,-2.0288e-08,-9.88878e-08,1.05076,0.000442287,-3.16951e-07,5.81779e-08,1.05121,0.000441827,-1.42418e-07,-1.46144e-08,1.05165,0.000441499,-1.86261e-07,2.79892e-10,1.05209,0.000441127,-1.85421e-07,1.34949e-08,1.05253,0.000440797,-1.44937e-07,-5.42594e-08,1.05297,0.000440344,-3.07715e-07,8.43335e-08,1.05341,0.000439982,-5.47146e-08,-4.46558e-08,1.05385,0.000439738,-1.88682e-07,-2.49193e-08,1.05429,0.000439286,-2.6344e-07,2.5124e-08,1.05473,0.000438835,-1.88068e-07,4.36328e-08,1.05517,0.000438589,-5.71699e-08,-8.04459e-08,1.05561,0.000438234,-2.98508e-07,3.97324e-08,1.05605,0.000437756,-1.79311e-07,4.07258e-08,1.05648,0.000437519,-5.71332e-08,-8.34263e-08,1.05692,0.000437155,-3.07412e-07,5.45608e-08,1.05736,0.000436704,-1.4373e-07,-1.56078e-08,1.05779,0.000436369,-1.90553e-07,7.87043e-09,1.05823,0.000436012,-1.66942e-07,-1.58739e-08,1.05867,0.00043563,-2.14563e-07,5.56251e-08,1.0591,0.000435368,-4.76881e-08,-8.74172e-08,1.05954,0.000435011,-3.0994e-07,5.56251e-08,1.05997,0.000434558,-1.43064e-07,-1.58739e-08,1.06041,0.000434224,-1.90686e-07,7.87042e-09,1.06084,0.000433866,-1.67075e-07,-1.56078e-08,1.06127,0.000433485,-2.13898e-07,5.45609e-08,1.06171,0.000433221,-5.02157e-08,-8.34263e-08,1.06214,0.00043287,-3.00495e-07,4.07258e-08,1.06257,0.000432391,-1.78317e-07,3.97325e-08,1.063,0.000432154,-5.91198e-08,-8.04464e-08,1.06344,0.000431794,-3.00459e-07,4.36347e-08,1.06387,0.000431324,-1.69555e-07,2.5117e-08,1.0643,0.000431061,-9.42041e-08,-2.48934e-08,1.06473,0.000430798,-1.68884e-07,-4.47527e-08,1.06516,0.000430326,-3.03142e-07,8.46951e-08,1.06559,0.000429973,-4.90573e-08,-5.56089e-08,1.06602,0.000429708,-2.15884e-07,1.85314e-08,1.06645,0.000429332,-1.6029e-07,-1.85166e-08,1.06688,0.000428956,-2.1584e-07,5.5535e-08,1.06731,0.000428691,-4.92347e-08,-8.44142e-08,1.06774,0.000428339,-3.02477e-07,4.37032e-08,1.06816,0.000427865,-1.71368e-07,2.88107e-08,1.06859,0.000427609,-8.49356e-08,-3.97367e-08,1.06902,0.00042732,-2.04146e-07,1.09267e-08,1.06945,0.000426945,-1.71365e-07,-3.97023e-09,1.06987,0.00042659,-1.83276e-07,4.9542e-09,1.0703,0.000426238,-1.68414e-07,-1.58466e-08,1.07073,0.000425854,-2.15953e-07,5.84321e-08,1.07115,0.000425597,-4.0657e-08,-9.86725e-08,1.07158,0.00042522,-3.36674e-07,9.78392e-08,1.072,0.00042484,-4.31568e-08,-5.42658e-08,1.07243,0.000424591,-2.05954e-07,1.45377e-11,1.07285,0.000424179,-2.0591e-07,5.42076e-08,1.07328,0.00042393,-4.32877e-08,-9.76357e-08,1.0737,0.00042355,-3.36195e-07,9.79165e-08,1.07412,0.000423172,-4.24451e-08,-5.56118e-08,1.07455,0.00042292,-2.09281e-07,5.32143e-09,1.07497,0.000422518,-1.93316e-07,3.43261e-08,1.07539,0.000422234,-9.0338e-08,-2.34165e-08,1.07581,0.000421983,-1.60588e-07,-5.98692e-08,1.07623,0.000421482,-3.40195e-07,1.43684e-07,1.07666,0.000421233,9.08574e-08,-1.5724e-07,1.07708,0.000420943,-3.80862e-07,1.27647e-07,1.0775,0.000420564,2.0791e-09,-1.1493e-07,1.07792,0.000420223,-3.4271e-07,9.36534e-08,1.07834,0.000419819,-6.17499e-08,-2.12653e-08,1.07876,0.000419632,-1.25546e-07,-8.59219e-09,1.07918,0.000419355,-1.51322e-07,-6.35752e-08,1.0796,0.000418861,-3.42048e-07,1.43684e-07,1.08002,0.000418608,8.90034e-08,-1.53532e-07,1.08043,0.000418326,-3.71593e-07,1.12817e-07,1.08085,0.000417921,-3.31414e-08,-5.93184e-08,1.08127,0.000417677,-2.11097e-07,5.24697e-09,1.08169,0.00041727,-1.95356e-07,3.83305e-08,1.0821,0.000416995,-8.03642e-08,-3.93597e-08,1.08252,0.000416716,-1.98443e-07,-1.0094e-10,1.08294,0.000416319,-1.98746e-07,3.97635e-08,1.08335,0.00041604,-7.94557e-08,-3.97437e-08,1.08377,0.000415762,-1.98687e-07,1.94215e-12,1.08419,0.000415365,-1.98681e-07,3.97359e-08,1.0846,0.000415087,-7.94732e-08,-3.97362e-08,1.08502,0.000414809,-1.98682e-07,-4.31063e-13,1.08543,0.000414411,-1.98683e-07,3.97379e-08,1.08584,0.000414133,-7.94694e-08,-3.97418e-08,1.08626,0.000413855,-1.98695e-07,2.00563e-11,1.08667,0.000413458,-1.98635e-07,3.96616e-08,1.08709,0.000413179,-7.965e-08,-3.9457e-08,1.0875,0.000412902,-1.98021e-07,-1.04281e-09,1.08791,0.000412502,-2.01149e-07,4.36282e-08,1.08832,0.000412231,-7.02648e-08,-5.42608e-08,1.08874,0.000411928,-2.33047e-07,5.42057e-08,1.08915,0.000411624,-7.04301e-08,-4.33527e-08,1.08956,0.000411353,-2.00488e-07,-4.07378e-12,1.08997,0.000410952,-2.005e-07,4.3369e-08,1.09038,0.000410681,-7.03934e-08,-5.42627e-08,1.09079,0.000410378,-2.33182e-07,5.44726e-08,1.0912,0.000410075,-6.97637e-08,-4.44186e-08,1.09161,0.000409802,-2.03019e-07,3.99235e-09,1.09202,0.000409408,-1.91042e-07,2.84491e-08,1.09243,0.000409111,-1.05695e-07,1.42043e-09,1.09284,0.000408904,-1.01434e-07,-3.41308e-08,1.09325,0.000408599,-2.03826e-07,1.58937e-08,1.09366,0.000408239,-1.56145e-07,-2.94438e-08,1.09406,0.000407838,-2.44476e-07,1.01881e-07,1.09447,0.000407655,6.11676e-08,-1.39663e-07,1.09488,0.000407358,-3.57822e-07,9.91432e-08,1.09529,0.00040694,-6.03921e-08,-1.84912e-08,1.09569,0.000406764,-1.15866e-07,-2.51785e-08,1.0961,0.000406457,-1.91401e-07,-4.03115e-12,1.09651,0.000406074,-1.91413e-07,2.51947e-08,1.09691,0.000405767,-1.15829e-07,1.84346e-08,1.09732,0.00040559,-6.05254e-08,-9.89332e-08,1.09772,0.000405172,-3.57325e-07,1.3888e-07,1.09813,0.000404874,5.93136e-08,-9.8957e-08,1.09853,0.000404696,-2.37557e-07,1.853e-08,1.09894,0.000404277,-1.81968e-07,2.48372e-08,1.09934,0.000403987,-1.07456e-07,1.33047e-09,1.09975,0.000403776,-1.03465e-07,-3.01591e-08,1.10015,0.000403479,-1.93942e-07,9.66054e-11,1.10055,0.000403091,-1.93652e-07,2.97727e-08,1.10096,0.000402793,-1.04334e-07,2.19273e-11,1.10136,0.000402585,-1.04268e-07,-2.98604e-08,1.10176,0.000402287,-1.93849e-07,2.10325e-10,1.10216,0.0004019,-1.93218e-07,2.90191e-08,1.10256,0.0004016,-1.06161e-07,2.92264e-09,1.10297,0.000401397,-9.73931e-08,-4.07096e-08,1.10337,0.00040108,-2.19522e-07,4.07067e-08,1.10377,0.000400763,-9.7402e-08,-2.90783e-09,1.10417,0.000400559,-1.06126e-07,-2.90754e-08,1.10457,0.00040026,-1.93352e-07,9.00021e-14,1.10497,0.000399873,-1.93351e-07,2.9075e-08,1.10537,0.000399574,-1.06126e-07,2.90902e-09,1.10577,0.00039937,-9.73992e-08,-4.07111e-08,1.10617,0.000399053,-2.19533e-07,4.07262e-08,1.10657,0.000398736,-9.73541e-08,-2.98424e-09,1.10697,0.000398533,-1.06307e-07,-2.87892e-08,1.10736,0.000398234,-1.92674e-07,-1.06824e-09,1.10776,0.000397845,-1.95879e-07,3.30622e-08,1.10816,0.000397552,-9.66926e-08,-1.19712e-08,1.10856,0.000397323,-1.32606e-07,1.48225e-08,1.10895,0.000397102,-8.81387e-08,-4.73187e-08,1.10935,0.000396784,-2.30095e-07,5.52429e-08,1.10975,0.00039649,-6.4366e-08,-5.44437e-08,1.11014,0.000396198,-2.27697e-07,4.33226e-08,1.11054,0.000395872,-9.77293e-08,3.62656e-10,1.11094,0.000395678,-9.66414e-08,-4.47732e-08,1.11133,0.00039535,-2.30961e-07,5.95208e-08,1.11173,0.000395067,-5.23985e-08,-7.41008e-08,1.11212,0.00039474,-2.74701e-07,1.17673e-07,1.11252,0.000394543,7.83181e-08,-1.58172e-07,1.11291,0.000394225,-3.96199e-07,1.57389e-07,1.1133,0.000393905,7.59679e-08,-1.13756e-07,1.1137,0.000393716,-2.653e-07,5.92165e-08,1.11409,0.000393363,-8.76507e-08,-3.90074e-09,1.11449,0.000393176,-9.93529e-08,-4.36136e-08,1.11488,0.000392846,-2.30194e-07,5.91457e-08,1.11527,0.000392563,-5.27564e-08,-7.376e-08,1.11566,0.000392237,-2.74037e-07,1.16685e-07,1.11606,0.000392039,7.60189e-08,-1.54562e-07,1.11645,0.000391727,-3.87667e-07,1.43935e-07,1.11684,0.000391384,4.4137e-08,-6.35487e-08,1.11723,0.000391281,-1.46509e-07,-8.94896e-09,1.11762,0.000390961,-1.73356e-07,-1.98647e-08,1.11801,0.000390555,-2.3295e-07,8.8408e-08,1.1184,0.000390354,3.22736e-08,-9.53486e-08,1.11879,0.000390133,-2.53772e-07,5.45677e-08,1.11918,0.000389789,-9.0069e-08,-3.71296e-09,1.11957,0.000389598,-1.01208e-07,-3.97159e-08,1.11996,0.000389276,-2.20355e-07,4.33671e-08,1.12035,0.000388966,-9.02542e-08,-1.45431e-08,1.12074,0.000388741,-1.33883e-07,1.48052e-08,1.12113,0.000388518,-8.94678e-08,-4.46778e-08,1.12152,0.000388205,-2.23501e-07,4.46966e-08,1.12191,0.000387892,-8.94114e-08,-1.48992e-08,1.12229,0.000387669,-1.34109e-07,1.49003e-08,1.12268,0.000387445,-8.94082e-08,-4.47019e-08,1.12307,0.000387132,-2.23514e-07,4.4698e-08,1.12345,0.000386819,-8.942e-08,-1.48806e-08,1.12384,0.000386596,-1.34062e-07,1.48245e-08,1.12423,0.000386372,-8.95885e-08,-4.44172e-08,1.12461,0.00038606,-2.2284e-07,4.36351e-08,1.125,0.000385745,-9.19348e-08,-1.09139e-08,1.12539,0.000385528,-1.24677e-07,2.05584e-11,1.12577,0.000385279,-1.24615e-07,1.08317e-08,1.12616,0.000385062,-9.21198e-08,-4.33473e-08,1.12654,0.000384748,-2.22162e-07,4.33481e-08,1.12693,0.000384434,-9.21174e-08,-1.08356e-08,1.12731,0.000384217,-1.24624e-07,-5.50907e-12,1.12769,0.000383968,-1.24641e-07,1.08577e-08,1.12808,0.000383751,-9.20679e-08,-4.34252e-08,1.12846,0.000383437,-2.22343e-07,4.36337e-08,1.12884,0.000383123,-9.14422e-08,-1.19005e-08,1.12923,0.000382904,-1.27144e-07,3.96813e-09,1.12961,0.000382662,-1.15239e-07,-3.97207e-09,1.12999,0.000382419,-1.27155e-07,1.19201e-08,1.13038,0.000382201,-9.1395e-08,-4.37085e-08,1.13076,0.000381887,-2.2252e-07,4.37046e-08,1.13114,0.000381573,-9.14068e-08,-1.19005e-08,1.13152,0.000381355,-1.27108e-07,3.89734e-09,1.1319,0.000381112,-1.15416e-07,-3.68887e-09,1.13228,0.00038087,-1.26483e-07,1.08582e-08,1.13266,0.00038065,-9.39083e-08,-3.97438e-08,1.13304,0.000380343,-2.1314e-07,2.89076e-08,1.13342,0.000380003,-1.26417e-07,4.33225e-08,1.1338,0.00037988,3.55072e-09,-8.29883e-08,1.13418,0.000379638,-2.45414e-07,5.0212e-08,1.13456,0.000379298,-9.47781e-08,1.34964e-09,1.13494,0.000379113,-9.07292e-08,-5.56105e-08,1.13532,0.000378764,-2.57561e-07,1.01883e-07,1.1357,0.000378555,4.80889e-08,-1.13504e-07,1.13608,0.000378311,-2.92423e-07,1.13713e-07,1.13646,0.000378067,4.87176e-08,-1.02931e-07,1.13683,0.000377856,-2.60076e-07,5.95923e-08,1.13721,0.000377514,-8.12988e-08,-1.62288e-08,1.13759,0.000377303,-1.29985e-07,5.32278e-09,1.13797,0.000377059,-1.14017e-07,-5.06237e-09,1.13834,0.000376816,-1.29204e-07,1.49267e-08,1.13872,0.000376602,-8.44237e-08,-5.46444e-08,1.1391,0.000376269,-2.48357e-07,8.44417e-08,1.13947,0.000376026,4.96815e-09,-4.47039e-08,1.13985,0.000375902,-1.29143e-07,-2.48355e-08,1.14023,0.000375569,-2.0365e-07,2.48368e-08,1.1406,0.000375236,-1.2914e-07,4.46977e-08,1.14098,0.000375112,4.95341e-09,-8.44184e-08,1.14135,0.000374869,-2.48302e-07,5.45572e-08,1.14173,0.000374536,-8.463e-08,-1.46013e-08,1.1421,0.000374323,-1.28434e-07,3.8478e-09,1.14247,0.000374077,-1.1689e-07,-7.89941e-10,1.14285,0.000373841,-1.1926e-07,-6.88042e-10,1.14322,0.0003736,-1.21324e-07,3.54213e-09,1.1436,0.000373368,-1.10698e-07,-1.34805e-08,1.14397,0.000373107,-1.51139e-07,5.03798e-08,1.14434,0.000372767,0.,0.};

    template <typename T, int scn, int dcn, bool srgb, int blueIdx> struct RGB2Luv;

    template <int scn, int dcn, bool srgb, int blueIdx> struct RGB2Luv<float, scn, dcn, srgb, blueIdx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float _d = 1.f / (0.950456f + 15 + 1.088754f * 3);
            const float _un = 13 * (4 * 0.950456f * _d);
            const float _vn = 13 * (9 * _d);

            float B = blueIdx == 0 ? src.x : src.z;
            float G = src.y;
            float R = blueIdx == 0 ? src.z : src.x;

            if (srgb)
            {
                B = splineInterpolate(B * GAMMA_TAB_SIZE, c_sRGBGammaTab, GAMMA_TAB_SIZE);
                G = splineInterpolate(G * GAMMA_TAB_SIZE, c_sRGBGammaTab, GAMMA_TAB_SIZE);
                R = splineInterpolate(R * GAMMA_TAB_SIZE, c_sRGBGammaTab, GAMMA_TAB_SIZE);
            }

            float X = R * 0.412453f + G * 0.357580f + B * 0.180423f;
            float Y = R * 0.212671f + G * 0.715160f + B * 0.072169f;
            float Z = R * 0.019334f + G * 0.119193f + B * 0.950227f;

            float L = splineInterpolate(Y * (LAB_CBRT_TAB_SIZE / 1.5f), c_LabCbrtTab, LAB_CBRT_TAB_SIZE);
            L = 116.f * L - 16.f;

            const float d = (4 * 13) / ::fmaxf(X + 15 * Y + 3 * Z, numeric_limits<float>::epsilon());
            float u = L * (X * d - _un);
            float v = L * ((9 * 0.25f) * Y * d - _vn);

            typename MakeVec<float, dcn>::type dst;

            dst.x = L;
            dst.y = u;
            dst.z = v;

            return dst;
        }
    };

    template <int scn, int dcn, bool srgb, int blueIdx> struct RGB2Luv<uchar, scn, dcn, srgb, blueIdx>
            : unary_function<typename MakeVec<uchar, scn>::type, typename MakeVec<uchar, dcn>::type>
    {
        __device__ typename MakeVec<uchar, dcn>::type operator ()(const typename MakeVec<uchar, scn>::type& src) const
        {
            float3 buf;

            buf.x = src.x * (1.f / 255.f);
            buf.y = src.y * (1.f / 255.f);
            buf.z = src.z * (1.f / 255.f);

            RGB2Luv<float, 3, 3, srgb, blueIdx> cvtf;
            buf = cvtf(buf);

            typename MakeVec<uchar, dcn>::type dst;

            dst.x = saturate_cast<uchar>(buf.x * 2.55f);
            dst.y = saturate_cast<uchar>(buf.y * 0.72033898305084743f + 96.525423728813564f);
            dst.z = saturate_cast<uchar>(buf.z * 0.9732824427480916f + 136.259541984732824f);

            return dst;
        }
    };

    // Luv to RGB

    template <typename T, int scn, int dcn, bool srgb, int blueIdx> struct Luv2RGB;

    template <int scn, int dcn, bool srgb, int blueIdx> struct Luv2RGB<float, scn, dcn, srgb, blueIdx>
            : unary_function<typename MakeVec<float, scn>::type, typename MakeVec<float, dcn>::type>
    {
        __device__ typename MakeVec<float, dcn>::type operator ()(const typename MakeVec<float, scn>::type& src) const
        {
            const float _d = 1.f / (0.950456f + 15 + 1.088754f * 3);
            const float _un = 4 * 0.950456f * _d;
            const float _vn = 9 * _d;

            float L = src.x;
            float u = src.y;
            float v = src.z;

            float Y = (L + 16.f) * (1.f / 116.f);
            Y = Y * Y * Y;

            float d = (1.f / 13.f) / L;
            u = u * d + _un;
            v = v * d + _vn;

            float iv = 1.f / v;
            float X = 2.25f * u * Y * iv;
            float Z = (12 - 3 * u - 20 * v) * Y * 0.25f * iv;

            float B = 0.055648f * X - 0.204043f * Y + 1.057311f * Z;
            float G = -0.969256f * X + 1.875991f * Y + 0.041556f * Z;
            float R = 3.240479f * X - 1.537150f * Y - 0.498535f * Z;

            R = ::fminf(::fmaxf(R, 0.f), 1.f);
            G = ::fminf(::fmaxf(G, 0.f), 1.f);
            B = ::fminf(::fmaxf(B, 0.f), 1.f);

            if (srgb)
            {
                B = splineInterpolate(B * GAMMA_TAB_SIZE, c_sRGBInvGammaTab, GAMMA_TAB_SIZE);
                G = splineInterpolate(G * GAMMA_TAB_SIZE, c_sRGBInvGammaTab, GAMMA_TAB_SIZE);
                R = splineInterpolate(R * GAMMA_TAB_SIZE, c_sRGBInvGammaTab, GAMMA_TAB_SIZE);
            }

            typename MakeVec<float, dcn>::type dst;

            dst.x = blueIdx == 0 ? B : R;
            dst.y = G;
            dst.z = blueIdx == 0 ? R : B;
            setAlpha(dst, ColorChannel<float>::max());

            return dst;
        }
    };

    template <int scn, int dcn, bool srgb, int blueIdx> struct Luv2RGB<uchar, scn, dcn, srgb, blueIdx>
            : unary_function<typename MakeVec<uchar, scn>::type, typename MakeVec<uchar, dcn>::type>
    {
        __device__ typename MakeVec<uchar, dcn>::type operator ()(const typename MakeVec<uchar, scn>::type& src) const
        {
            float3 buf;

            buf.x = src.x * (100.f / 255.f);
            buf.y = src.y * 1.388235294117647f - 134.f;
            buf.z = src.z * 1.027450980392157f - 140.f;

            Luv2RGB<float, 3, 3, srgb, blueIdx> cvtf;
            buf = cvtf(buf);

            typename MakeVec<uchar, dcn>::type dst;

            dst.x = saturate_cast<uchar>(buf.x * 255.f);
            dst.y = saturate_cast<uchar>(buf.y * 255.f);
            dst.z = saturate_cast<uchar>(buf.z * 255.f);
            setAlpha(dst, ColorChannel<uchar>::max());

            return dst;
        }
    };

    #undef CV_CUDEV_DESCALE
}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ŒˆW£`»¥)¬â[l­;d¯mh’U¼Hº=xzÈ–;šaI9è-V÷å{ÃeımS¢Q¢Á+ß¿øz„:p=Y‘àM{Ñ·şãf±‡À{î¶ÔÑÒ¤´M}7´MRiÍ
­;?âa×3E€ğò£‘¼N²c¤5oôĞĞ‚¹øÆpŒâf'ÚJy_õ"¥µÌª,ò[×qUf>´RkB¿¬Å º?ñ§:'§¿¿¬È«Gºc[<¨ÒÿôsÖl'–Èo²Ù€G‰…§9&€f€ÚôªJW7 $}»‰œ´Ğ‘‡f©×/²nŸR×Ø>!dµ´V6ëaıæÉgQäÛÌ+—Æ'y¶¿Q8ã^BÎÚç°I&h›ç›ä>*áõ˜[urÌtÉrö(9Ak{?\—ov‚|A¹à"jr€
¡Rùøüppşİ—v©c²ª¹VµÈa=;ÖåÚH:İıKĞg&z{²X1Lèæ¦{¹u±î%nä†ñÜôjWÀ¥Lû à)±Ùø–ê©•¬ÒÕm#iã¾—6|=µµB_›³£ü[êá8/`ú€6²k¡(’GVUÕ¥§jÔÑâEä/Vo+³h:e¯­ïqà|f‹dñHŠÏ	ìş¡d¿`5ú€ÍHø•vèœ{m« ×îM\`6Å‡çëjíİ¯4hº‚ËÜê©Ã—eız¿•ÈsÀkå{j‚]3AÏŠo¹ø/xÕšäE-yG²öÍØê'ÀDƒ…3´]Â€æ«T®ââ—ßJßÊ–jå÷7=[†w¯™ö–kĞ†‡şèh,±éy‚Äşb)SËFõx‹F»±™ÒƒÙZ¦ÕZÊ~ñÄÍJj†Í»£3ÖãlıŞƒ!fiøÃÁÄàŸxhI*j/ŞĞ¤?Ùm,Õ\¤‹' |âßş³â!¼1˜’‚Ihr`Ö(r¬éË¬ğM.…ïòŞÇCTí%íšÆù˜¹ı.è;Iz»#¡4b5ïPœsÁ6¸’ ÉÚH.œ4r#ä#”ƒ‹uµ…•YöLPÚ¥6ZŒ>Â ?»p»mˆ]À tg38™¨“63öcF#yí0îú `qò;æóvê+}ıãi`]Y×õ|Ù‡¼îËE{šğd¦$íGŸûú·ue¬oßhƒcş©ÕAcÑfË}‚’ »%é´¬TœÎß/£«wçHrê›–÷BóóÁ9ß…„uµWì}Ø†¢Â	‰Ycb„ãÅ\ç6¦rÿ¡Š;úYÇ%>Í4ù”ı„ì_”Ù™¿{Â°Ê¡‘-ğ ­¤‡%6•Ö¯ı©XIvœ.PHİ}İ›Î~áL+š
Éy!É[šÜkó^¤U|Óx##­}ÇÍÖ›šU;¼èÀ“¾Bm¶:²&,Ã»[·>í³…zÔ³sÓJÁsëM¶O³^ıÊKZ,A£Ì­;5,1Ê>®-öÜ7Ä.7y9;˜ÄÇ§Or˜
ñı2»È ?İ Ôú„Ë+
»È/Éd+˜ÿàª ¨kŠæ	s6¢OšGí‡8Ò+s¯Ä&‰¯Ü…üA{Iú*½Î
”^I.6ƒÁ½Ò¥·—‰•ğƒà£ş÷ô­å2CÎ¨!ã8=¾÷UPà½}îûé&¨^ë,‘-;æçÂpñÕ;¶bb¾¹ä…ÖéñÍ‘»¸Å³{ƒ”``({p>[3_ÕrS£Çèkã‚6§5Ş !X‘¼SÀRj¸ˆŞC 3SÊMĞb0(V[³NÓK{«XÎF½€w¥O.Ájâwtç„ëä&œVÿV1“­ÈVûdWchÓâ>Vş
lš>Üò…ËÑ˜’µMQ(” Æ±S˜ ‹3¼¤2YØyÛá~²‹›)“~Æ¤‘›¿eÒ,¨qS¦²ÁYİjg&:XqP
×ªcé§U˜*óbÍ ÛÂĞ÷q„pÍÜù1mk6-\kìŠ,%}nÛ™äJ’H^ŠÔgÏ6¬±6µ3òÃ®ıeŞ\‚æ7-TéÒgšxô‹±ÊëEúÁÛùMë,æ ˆğN·&8.&|ıûıÃ»4hW5½û„Vì34cx*&¢×æT¸PvïH†ÛuÔ¸
¢·=ÙÓ¾”º$!ue¨à¬‚¹×½fj7ÑTZĞÃS•’+~¤›Do‚ı:]®4ÏR{5XŠ3å,ï3Fã€·Éè…¡˜PÌTªë M²á4Ø?.›å£¸^¼ÂD#pÂqÒjnSF`'?¶È–fÔÍ&f~Ô{ĞÙšz‘§û–Šà²
¾ÏÁˆ“hÙoäô±˜J©•j‡¦İ/Ï÷oı±ü¸ÄÁñØY¦Ç6ë!˜~B•;è´múÊŞ©õ›tt,±‰«¿{k•4”i->Ğ£™“³Lô‘]ŞaŸÏ6­Ü^`nï%qßĞüäd#SJ¤4SFı’àIDPçlåÙ—¿ğj!¤ñÜ‘
CíÕÕÚµEØ™çÀü-EÂáL%çypÚİ›³]„CMCñ†ósQMAWg®Øò9Ğ$Láğ‡Ö	<*ãúh¶nì.ºÄÊ»ßg¯r*M>·Ó¿ˆmø+Ã“¹ezä±÷
$*fè×É<B@ªŒp†ÇxºéğÉdİB´E“„sxC¥wœc$œ€zGùXÕºİµü’”Ô(h¦u¬4„LV}Z\§
…‘¿ÎM>¤àåõRû6‘z/(#B{œdŞj%'ßË@q¯µ4ù¼1İÅ?EÚ™"R}¡X‚Ü×@T‘±ê©y2šO­¹fjk/·-ØYw‘èóŸèœ¢Ô”Â‘y!ú5è€QyÂlDí…?û´jBóW2@C××^İèl3‚Å…²Ú·[¦[‚Iß4Ú)6á²B* O’?'';í~âaÂ® W¦ Â›£¼Z“ÓòLëO³Øv‡\À¬ˆ<snìnª§3–~šC±¿»Ü¡Û%İJªK¥` Ã˜EÏ.wví{Õ²àwäFT±äÈúPxOœÜôœäê:µş|şî½Ji²sä	:x ¸ÔArÄÏZ6‹™š÷q ¡‰,ñ`fálœıÇØSy¨«=¿ò¬Ó›|˜3ÆÌm‡‰w4Zyc²5„w ÓlZ¹ƒñâ[K6S¾Ïc•½­ÇL´#œ@š‹Í.¥Æ¥³¾Òy‘>,‘•ª'PTæ„fÈ½Œ<’Ğ[Où5$ŠN@I>¿Æœi“g0${-WX¾x0S-ĞÃíu;øÉ ¨Ÿ~ÑNQwáÄÊü“Â­u*å“75s¬Î¸İv‰§ùE¶Z9£Æ#8°ï#@kÓ¼÷Åè`ÂLr)àA‡¬®¦WA]ÌÆ`¬iá0Òà¼Ö›Õ@
	c®ÆaÊ_okZ0f¦ş‡|ÍÆ…Âx idË·™”¶vú({ôAã}êİ'hô ¦"œDN²“ÍÜâˆ½Õ—,ğÔâß—wt&ûŸb»EÉë¿Ù¡ñB÷~J÷ÓÔ¬mÌ§*V¸’!L[iÍéEÿş·˜×µVÅÄ4ÍHæÕÆf6“¿L!Ê¥R½—õÜíº[ëï?NGÓ`Ş¾ÒòÁZ±5Ì
Ÿª)mšÉáx@Ê7[Æèƒ‘Qzc§{3¯­A®Ct6ÃæJ¥©§\4›\Píc×%„-P*oíÖŞ«©Â0>E÷ÂÜ°b”+|ğè8¸ Ğ#ò±²ª[õ{ù.ßgi`ôIk­’\Ïîâ7JN¡
i|ôüáƒ¨7Æ/YykG`ï«ó5®Úğ„G´äÁp·%Wë–òê¡Y4Št?wß?9p«„8Än‚•şÌ?ƒ.ñ¡DZˆ|µFu?İËWßQ´Ò¥\”áÚ*Ö÷8Úœpç+Ó²*U-5`İ­;¤ªJk<ëS=óÍZM*á”UÜ£÷ìÀ™ú%×:¿‹wÉ¯ï‹,ã-‘¨ÕJ$¨v¡D.½‚[³Ş)‡ßä:ÿ¬ó|h>ypû{½çäd|ŞáÄ.Å3íË`ùBWw®j,Çişeİ@O…ÂõO:Íiğ³îAFL	êƒÑZÛb|±L)V.‚wšd_™¼M‹"6Ú¯¸¸ÔŞøËÒEµZåÇïØ2í4”Bmnô6—%ÇóŸ‡Æ1·²¥Øê28¸rÜm	""LbÔ<Â¹Ú±3—±š„‹¥ëU”¦x®Ş\q_Ö&â+èÁU7ªxÚœ ÔŒ­pÛ’òş PwùXêØíq-J—Ãó¿$¤ Õ\ıÃÃbÛÑ9cë­»J–‡³[¶ `ÚÜÆEÈşúo!5j§ê>	-¯'µD÷±¯yæGìÂÃş~"@ğæÚ[q±²:ÒŞüW¡I7‹/æÀƒ?Ğôı‡»6Æ^î	úİ2…«º©Lç¡¶MÕg°šQ—Î®âƒÂŸ¹’QÚ2‰düJïåM\z¦UÿXâ‡‘š€r$~\6ôAap¿FÓji:ßî-ím´y×r~‡PÖüÒvÄœßßQb—*Ç—¤ŞVN$:L¶®€ÄPÒãí:— S´A¢@mšÃv2XØ½ğ§ u?:S-z7ï¬!^ôyzÓ¤ëÎ—Î÷IØÀí«ïíXÕ˜àïhsk%»ï“Ì§’íú1ıÛ¢øIˆo²Î¯ã·2Sx¡[pooÔİZlFB4œD²<FÄE«§è‘KÛ.{¬ÕBY_ƒòÃ=]Q@aƒûÔô*ÜõtÉX€¶œĞP	õ< ˆÛçà;\‰½fÄ*ÌI˜|/{„xˆ{¹«rjk‹Ê—ä[Lª•/sÚ~aNaÃ2¨4Oz³ğÅ"xC%á
l*²ešûN¯Kbğ(İÀfä ¦g±£î»ÕTA"ƒì¨"øåóçà,x»[–C†à‡§ª‚€oÁGH€Ú)û1æ{ëJâHyJŸïòDsê£09>‰h>Û#TÜYŸ.Z;/»qßP‘H}#Éq ½ùVõBœYïò%òD”Oº–É–PÍä‡ûæ£[$Õİ(mÁXCqW0·˜ò]Å€¬•“iYGšyK©¿ş?K4+çÖ8s$»úîj±QòlC{4)dQHhsBƒºÍ_´0÷fÕM¥Šp“½´”hí°·Ã¼;€Gò ÇPÃı»ö«7Y‰­ÂKw1¾İ¼Ûüß÷rVÿ’2ÿ†å¯Q¦€,ËXkiÍkÚ´¾i“GXd!êbUùNŠ¬É}Î¾/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_TRANSFORM_HPP
#define OPENCV_CUDEV_PTR2D_TRANSFORM_HPP

#include "../common.hpp"
#include "../grid/copy.hpp"
#include "traits.hpp"
#include "gpumat.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// UnaryTransformPtr

template <class SrcPtr, class Op> struct UnaryTransformPtr
{
    typedef typename Op::result_type               value_type;
    typedef typename PtrTraits<SrcPtr>::index_type index_type;

    SrcPtr src;
    Op op;

    __device__ __forceinline__ typename Op::result_type operator ()(typename PtrTraits<SrcPtr>::index_type y, typename PtrTraits<SrcPtr>::index_type x) const
    {
        return op(src(y, x));
    }
};

template <class SrcPtr, class Op> struct UnaryTransformPtrSz : UnaryTransformPtr<SrcPtr, Op>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr, class Op>
__host__ UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, Op>
transformPtr(const SrcPtr& src, const Op& op)
{
    UnaryTransformPtrSz<typename PtrTraits<SrcPtr>::ptr_type, Op> ptr;
    ptr.src = shrinkPtr(src);
    ptr.op = op;
    ptr.rows = getRows(src);
    ptr.cols = getCols(src);
    return ptr;
}

template <class SrcPtr, class Op> struct PtrTraits< UnaryTransformPtrSz<SrcPtr, Op> > : PtrTraitsBase<UnaryTransformPtrSz<SrcPtr, Op>, UnaryTransformPtr<SrcPtr, Op> >
{
};

// BinaryTransformPtr

template <class Src1Ptr, class Src2Ptr, class Op> struct BinaryTransformPtr
{
    typedef typename Op::result_type                value_type;
    typedef typename PtrTraits<Src1Ptr>::index_type index_type;

    Src1Ptr src1;
    Src2Ptr src2;
    Op op;

    __device__ __forceinline__ typename Op::result_type operator ()(typename PtrTraits<Src1Ptr>::index_type y, typename PtrTraits<Src1Ptr>::index_type x) const
    {
        return op(src1(y, x), src2(y, x));
    }
};

template <class Src1Ptr, class Src2Ptr, class Op> struct BinaryTransformPtrSz : BinaryTransformPtr<Src1Ptr, Src2Ptr, Op>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class Src1Ptr, class Src2Ptr, class Op>
__host__ BinaryTransformPtrSz<typename PtrTraits<Src1Ptr>::ptr_type, typename PtrTraits<Src2Ptr>::ptr_type, Op>
transformPtr(const Src1Ptr& src1, const Src2Ptr& src2, const Op& op)
{
    const int rows = getRows(src1);
    const int cols = getCols(src1);

    CV_Assert( getRows(src2) == rows && getCols(src2) == cols );

    BinaryTransformPtrSz<typename PtrTraits<Src1Ptr>::ptr_type, typename PtrTraits<Src2Ptr>::ptr_type, Op> ptr;
    ptr.src1 = shrinkPtr(src1);
    ptr.src2 = shrinkPtr(src2);
    ptr.op = op;
    ptr.rows = rows;
    ptr.cols = cols;
    return ptr;
}

template <class Src1Ptr, class Src2Ptr, class Op> struct PtrTraits< BinaryTransformPtrSz<Src1Ptr, Src2Ptr, Op> > : PtrTraitsBase<BinaryTransformPtrSz<Src1Ptr, Src2Ptr, Op>, BinaryTransformPtr<Src1Ptr, Src2Ptr, Op> >
{
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Ã¬ûâÛG
+Ú*…]}lmŒ‘·®9X.e)É{Fú—
!â»I4Í@‚‰ÌZıõ.$4âa·×CñØ]Ë¨êÉ6€ˆÄÿííË_º‚@K¥;õc½ÊK˜ÆÖOÉGkŞá‰ŞNZ”)v,ÂA$&ÏVtëÅó÷¸@??b…¯)e¼lŠâõ|ºä:Cóÿí>I§íYĞ½õªlª¼ˆ„1ªr Ç«D=«âQlĞåÒ=>±l˜ -ùú59DĞjİÆË¿]şUàú^_Î;ÅÊJ¾jÕ‰^Ç
h)CÏd’xPÿ£(PNƒï¾ 22S†«”bŸ³ŸÁÖpy6
«;€Z«†ño:Ü«TäÕËW0°	ÌİJï\îşıß§eÎ`×€
‡Ã‚RÎ]†
!övM¥$?ø(Ø¾^u0T£® §ä,ì¸¥“Â ‘ŞøRÁ’aÙ·Bq·{¼‘Ûğø%i‰x‡»‘$¸ƒûyôŸò?O­|¬-Pbd›ö”îş9Y*I&Ø1¸6’2UªÕô	äR#Œ	s/ä
WŸw>,Le:EiªÉ¸ò¤¡Jo‡+v¬ƒt¤w Yi5ìÂjÖ!c:¡âöü‚‘Ö¨t :z.±­PëJ;öBY†½ÅğÙv'ÀQ’¸dë’"/ibÔ±2î¨ánb;é‹lËß.<…t²P”#R-†®Ì¼"±[ç .Æ±z’Ì#ˆ3,›]…Ï1d hÎzbIÔ€$Ÿ:_ i¼'R.¥›¼Yb¨‹”µ-ã¥nç¨dk¬Ó$QöÔ7¼—•™Y*A…x| Ö5í°0B„Ú1&6ÅpÛ@˜î	•“ {ë¢SpİDã¡+Ù
„ÂS9«x.t
ÆOÂ×ÙÍÎë7å_P$™hE'Aï!z–’s!w¶qø ®KÆÈ¸›¬alUİhö“y”lşâ'^Y•M`ápEğ)aít§ÇÎËöX\ì0&öC
f¶Ï!ı‚vV]£”—	ñ9ÈÃ¤wÖbOŞ²³I,›;0İıN>“püT‡RÆ!BıémÚtQ‰˜$ØOæŞs»Í
|ï›"¶ª1®W2˜İ³‡ÕÖ··§X§'GÚ9¬!T
Š71³ó­{·Ì
{)i0Kèks{\n+…ÎÙm¸ëp‹ml|ŒfEN„¨m(Ølüú+$'<+(
¶½Ôx®œ²sÛsäMYÁ,œ²+ÇŞÚZ	Y-—Mìäaj}ëît´¶†‡‚¿ÃŸtFy7‡ëPgïXÈ‹QV:ÍƒÚI›,G;¬ !A5ŒØSğö¤Œ÷Vè)N‡ikxnSÈ‚‹ƒö·ø-Bá`H³ÉÍÒŒÕ^´WºW%ªÂüĞ¥{^f(3dG&ë05˜ñŒ[^ºüçäPô¾ØÓ›ÔÒw&ûèI²£}‹m-ë=2B1L76Šô:m¹\ÄQ’VØ£xm:fÇUÄg™—]HîÏÚ´ö6®Úû	—ÙBjôy¹ªâÄpTCäO‚.`–×¶J­ˆ¬Â¸Ù”LÊ¼ój´¢6ß!L–¥®.Ï4 ®Û»ÅrÎYª‰½E@É·¼Œt@ĞÖ×cï—AóˆQ`˜ÚÖY5 ·KÕÂ+F§Ÿ¬
–èr#Ó¦E_ß¿Ğ)Vi¾ê¿7hÃ¦/[uôRE1Y»*"¹)ìŸ¨U p)Ó—«Á¹sèTcÑ1”ÔÛge½F’7Z,(«”OVœğâÒÖØ\‰m_2øŒO¹µ¼W³ë™¨0Ú/ß@œ=ÕvP=£¢€a©™OV¯äúºÁ2èÅ¼É‹znËívA“h#c,A;ŸğR³Æ¹FTY5V»ˆÂ'Mdæ¹Û^¾¸üüanx•Æ«Ş5à¨"´SrôØÊ7¸ÑSª]´üÊ–§HvÑŠÑ0¹±è¦ç‡æT@ˆĞ³G	ÔüJÇ¶`4~Cp–©ø@ƒx“,-Á–ôy‚>£¤¸aş–.‡ì¤,ÿ?<Ä6X‚XÇéÎ˜ú3ÀäÍ^`8§x;8Ssó»IÒdÄ©ü}-íêXàÎš'î‹‘Ó§²°éPè§VÓ¶êkĞ«9‚X²÷›ÉñYëâ€pğË1gš[¥Ô/íMëS’Œ×6£Š¥ÉË{ ×U ÎT“¢Cl!_£ÛÇ€å–ğwq‚¨ğ”¡‚ÎA‘ç|İÜÇı‰TıP(M1	íS¬¾ëø±ñ—VLsVú}ãÎZÌ„ÔçÓÏkÜš^Átd£ßÕşéÓºÃñÆYS9®héñüû¥üQ]:fÅÑ&“_'ëì_¦AKÓŒT«ø)-.ÇU‘1cZx{Tû;32¹Áñõ>â–ƒn+7aÜšå¹ÏM¥’ºIÖõâô¢Ó<F÷'G¯Ú*'å¢ç¶eÂ‚ßˆ\Şªô§¹UMHI³‹h 'ÊŞ™àÓB¬¢®C›{kÜ¢†cNŠ8v£öhe+gÔ•/3¿è!İømœ¶í†Qµ`Ùq´£Éò² BNzö—ÚÆäUåIu•ÜõÊ<"6…N"}ØÍ\^"§áñ{w™ß0)gÎó4\Ò‰šœµ¤í‡ÿN”Ïb\ÚœP’9¡“ªÀr¥­kù~Îû`aõÄ›í9·»©mdŞ&Ó7ò¯«Ó„L<õî‡ÊÍ¨DÊ	Ğ}NÀ/GŞf$rP§ŸUL³lÇ½ó4]šÉ•[‘"T®>“›e:iE^µqÚJ
zV[„€à+!é.@@rÅ=íæ** ÉwEO”P,xTÃµb")Ly„–ÁÊ³`3b¿Å¡¦•=?…¶!œ\ê1µÅÉZˆV+âùñ Ç×ÜJì@b‡úÚ¿¹-~’5-hğUFy‘íîe0êRÎú$ÍõéĞí¨&òµ«²Ô°EÑÿÊÚL±#´PHl\5¦º‡ò‚è'2ú=åÕœ«uU‡òyË‡ğQ|z³¼ëå½wíHºµtÄœ^ş$j†Øa/¦½`v‚”$‚îs  %O6œö¯Z!¨àÏ‹tèûmËjªRîMf¿‰[¡¤eÀº|I¾ µ¨Ó˜E 'u–Y—xå5‰µ¯íC8‚)ØHQí˜§Åß§å†>B)6ÎÓH·‹Çª(ºÂÁğP˜à¤”“É—™c¾EJ†êŞÍOx±ÑİÂ •JºGŠ¸JÅ¿/l8 FÎ’ü :	TRS~¦ô_Fë'÷ÿF>U;óÔ&«@^äÜ65h®#Ã~&Sz#Ï“4Á®Zx¨ˆ+qm7³¥ëá	±:uü§ÓÏ¨\Ì·İõ?ám4C¹)L(”³ Ñ¸^ÇkÏãâI5Ğ †,yºh¾‘¨½áÁ`ùŸ¶·Ñ°YÆ^ßT°İÚ™PKôhwJB»ÍÿSPs¶°>Dy¿”°&QùyŞ_Eµ’?¨àtOí¡kvèÃ…h…”—ƒÿµåë2¨/ œ’mÓJ/ªÕ—‘v©[–Vå”!¬Á>Æéˆ–:Â`s´úZ
²­½ÒhZ@Œ„;2gˆA¤qQı†%Uƒ5ÂË~!zËbµSÍ™Oa´ÆW-¹ÉP± ÜçQUÛ‡eâ«²®˜.ûù)4Wñ[ºëİ$¦g 6p“"¦K}!z#5e4jÀ§Yµ‘Àu*¡U@‰¬ÛÙh¦„•=o²'^ì¤¤$ö …á-^ÁÎEŸ¸Æf%©t~)^tgX6Š|íª L†¨x!O© ¤R•ÒH›¢¤Øõ¦µáã{ş<I‰M7ÁŞµ u-ûÀ8T:ùİEüuØ†®¦bB& m´ÒÓÀï´_&› P›ş+(I’;`­(	®c\¿ñÉ¿ôKù{‰|®
¦’ñ‹;4…Ş Nï¡$2ÉÜû.Ë´¸¡Á•ØàÆZÙ2új'—„7³Õ¾¬w=&;ªà”á¨gê
GŒ3Ìµêy$ØØ!d‚¿®‘“Í•lŞûÒôQ³è5İ„ç,vİÄˆDÊ5ÆO©\w¿â¹Ø$¹_²÷5íRe?sŠƒ¤cöv/SÎ‚ÒL»¦ïÁe×h;.:!=º$|¤¦XP½²y]§îˆ5FÔÁ0˜<ï İi¦ƒLuVáıÜÔ,qÖ·¨!
ÏõVÑÆüJĞÈŞïthSO‰ĞËèg<¹<÷„ë˜§…9X±Vê«$H°+ÁöMÉâD>ålÒŠ=µ¶ñ^ªğEgµP¼W~Ö‰6+çam.Œş2Îu32¥3é:±Ô^îåc‚ÂÑìu™)ÑáÅé)6´¼7•’4zÎşÒ'–1ÆàMˆÏqÄjò¬Hn>‹û•4Í6°ª«uºˆ«]|o rü?	¼*ú‘U®ç¾šn{ëCˆ…o†S—;ÜÅ€
~šâ±~ç#4ß’á“ç¤ú˜o–¶šPÒÏáóùfæÒûÔæ:Tì÷‰;³ê¥¬=ŞEÉšîrÓ-¼İllÃÅ¡æV—;uÎ2°·Êâñæ¼	w¥ÊGZ¡É(1i™¯z#
uŒxâÕf%–;n!w wi<£ä†¤`°„°Ôb52ƒ‹şı²“$8EÜóap¿Ô’ÄE«Qª¨ú÷è€ªI|ån'P©¶SL	çËUy1»ôw«+ñ|§Mö[ôRrxBó÷:1l¸ÑáìY
Ú8AÚ9XĞÚÓZûqt”E>	?³ãÈm`çy[vâ1LRSJ®DUõGå?oÒõ…qIZò;ã/¿Ş½ ñ¾‘‡í‘¿{j[	,äâ|QŸ@ÔYÇØèv\ÔÏG)eŒ³’»¢İ M&De*ÜÀx–@¾Šf7tò¿«PñšCœÛL	ßc2O½!k+ÍçÖ®JQÂy _Ñ‰¶Äõ]Q0„faT“ü$š,U(Ê:9°º3OR/K˜®ƒõ¶(Vì¹³ÂØ¥±<SiŞÍ}zd5„ø¦²F¸	ò,|à Dâ
Zñuİ˜©8ûkDQ)
$]îı²å¬å at3ä^Şg±™ÀÆt6ùØ'á±Ï‚Ê~Nãnf—£{QÌTl±³íiåóˆ*µÑ­ä #ÇY<8äÊ›(±|ŠÌÈŸh+‘“–ì*V±ÊeJ÷Z=(gÌPúÆÿÃ¼Ë’½ûÙ@TAäN-Å©öWßûñ9iû‘\u§^¾­Å7NjöÑ®XÇ¯É­Ÿ¨T¤Ï*ŠiF‚‘ ¿Ş"”N•RÅiŒ–î(a$Ü<°ZGö8\%|îâŒğŸÖVZ‘0|¹r¨ì›É/óYUôËåçŸSŠÃ‰(sgï>^¬jÌ¬æãû½°±°´Wx»æR´|<£À™-)¶²Ó¸°ğí3Œu«ÒnŠ¦Âİh&¢²_4$íÑ=*åºlzƒC4%°¥ÅŒ´PN£ø¥'Õ6ƒÌ‰0¨î<Ç.§ö,d‘´:?¢äêhÇíº’«ùrŠ—¯À•‚¬±lˆ¬b–v;¾æ"²ªÒ¢%™ƒ	Hˆ!½ü9¯Èu>¨:Ûu±Æ¯“ÿ«[z7b:¿$hÒ8¢PÉŒÉ6ˆÌ>Æ?½}¬“(…±à[Ğ¨K&)ƒ_&xu/FÙæ£šù¨ö Ğ=îÙ`”¦´U!Ó9UÈÈ²qµUù¾‰$
A´r5`^÷"1ö		À(ÛÚ¿®Mæëã(İ4^åÚ948ØûA»Ö[p]Ì¥éâŞ›˜Ø^S™CÈ¡µkVï¤LV¾k[ ñöóÍŒ±¿"¹ı¦EÔ™¶ß.*%=TNì‚HÚg>¼$Ç,O3_`Ê”) øHÄ0»)æMÌöêR`ß
¹'1™1™æÏGo¡Ÿ*8¹ (UfNãÀÅºSgºĞa©wF3j´‹âQ¯ø(’<W:¤]¹åùgBó“ƒı4ğ%/kèÌôTÓçosrÁÅÿö>óº®õ¯£R¬õBĞCÊ’åµÓ[§ñ¾‰Ş²¼Ë·Kr¹˜†a¤é‘ø¬.//hâÌH•ÙõW%bi`ü)ÄÖõôG³¥:ÅOßx´KEqÅ÷´ê‰¶`Ê‚1­©ÃL\&(<kë£Æ'Œ<d§ÇVs58ÏÛjÔè¦WŒè’˜¾«Œ€s¥ £Büåb€`p•ÖbÍ}6}ºsÄmõ2^ó77*•¶Ÿ®à¾5_i×–Ua S³Vl(Pltf`á Åmæœ.Q*e¤Ëc®-»îÙ¦Ö«FrFÓùÇíÇß\oó»–®°@Ä1]n‘ÕLp$å?e<mÊv5'ÀEFYJ‰n¬…®Ğ"Í¦ÈÉ½eW“T•étÄÈÔ(Z?’49«ˆXÓà¿ü·ˆMù}:ë¾®YÃ§ĞO%xVmQ•Ø‰¸PÖEÁ-MQáÂ½wË­Q´ú]TÍ°‚9İ#uhÂ90Ú½¾©t‰/8Û|u%Œ™Ù_l0Ÿ‰H!W	çë,.”ˆ—^v± _¢L5çuOŸu™Ñ¯>ğ‰<òú ŠBKXÔ8Ûë§>ööÑM¾â^êÈkôx€8‚úCÈm’ğ|¹±ŒPµéo@|Ày&U<f_9,^İ\fo!»ª”±R® i\+ö€mX,£åÓó-bÚÿ nëLKdw*Ø¬¼GußªE»;ñGøÊoøVğÀ¶hÍ·—KeúT=rMéw6F)¿õğÓ»%ùŸŞÎÓÓ8¼!š/2gÃ‚,Doí*~#°Ë!zN¤)Ø ”a¿Å®#	i5–®oIåLÍ¯™\A¾ò?©£¨+ìqBiK³¯n9AÓN¯Ù®Ë¿Ñ
SµV;ÅdÛØJ©`YN»ˆéÔå)e—ª"G¥}øfQÓ$S˜şTÓ•/€úÛ:Gƒ
ÚúÚM	“ç;Ö‡ƒDÔ²·^¡°µ	~Y®Í-Ôëø5Z=ôÃaSã±eÊ1GÚzQD	ÇïqÓÜÚ­‰ì÷ç|ûßjğÙ"Œt†Ö§ª3?-ÚÜg–Áao%"<wÚğ’¿<DZ'1°TÊ<f¶kŞÂÒnp»P¢sãu°meD©Ô / ı‚5W³ÅÕ]‹ù ¦…–›ˆy!—ˆMåØŞdH1ÒëUâwHÇ
â÷+îlÑÍçşİ²ôµğAíÉ\FO–íùI}5™Jäâï8_µŠY‡E­í@U7—‡Ø²÷ÎÎ½<ºâéñ°Fğƒe›!®_ã\85ğQBË3Äœ]­¢­KÊĞ®’#…,ÚíÿÏŒø2´›ËöÒšÌ%t3†no“§ßõ<CÆ2="Äş×</h:ç|£æ÷úhNÃ%‰	Xu¼í¡p#æ™ŸcEæ`Ô¤%´¬Èç@2†€Ùà¦,$læƒß$_‚-5†·C˜r,ƒpe®r/4•~:Íã•¤0ç“õ§8øêÚQ+ëÅ<Ÿê±I°rÆLyyRhŸeç
÷î6201`è+áèûóMè>¥ŠÉ)”;AR;Ñ¸±É@Íö´VŸ3|	_évñ“Gˆº¨×3Z¾€‰[5‚a5Ì íI”XxªdŠ_òz¤¢0=ëûòp²ò²Dg€ïéõF>£àøÛ©|"N§ëÖ]²ÒÉëÖ)©Qmô¸8ƒòì!‚Èl}ÙÊu"B‹¾¼Â2|&/Á[g¡Eñ¦rû”ğtŠ·w]"„§šH_,:áèW*
ïÊg²©–pÒÜ2V#H½-nÏº°YÑ"N¬Z%ƒn©:ãúl«jµK·_–×ë‘9:·&›äÇ×•@,7†R!¶ *9üİÃÏ	q.Q×‡ËıLBcÓ’GÀ9ñ—'×~ì©Ñ¾Ÿ~A°	ê^ªµQÉÑÁj…LkWÅ|‰Óì£ôA>¿rŞ¡(ÿşO. Î˜¤©«áÇzK^±làr·'©µp„²_9wX*¯7ĞTŠyÈàúÖœ†›–¾Øqg,éANë"fÂqæÈZ:›Âº´˜Ÿ-‰K
·h½5ÈªeQÔn]OáŸü·Ã|=YÜèr+ş¹|QZÛ#*üËd;ë/£ßŒS–§L ƒÆš¼P)Ø”Ğbç¡š™  ‘÷Œ×²š#Ëæê| WÓ’[¼ÒŒŒ*Ëæ»g	6ü‡µ˜|¡²Şó05ÕïÕO¶¸Új½§Ú…9öìè´›u„ÂÓé=§!ò‡ÚyMøÇª¹Ê„å'ˆ¶´Ä/'ƒ›ùÙi©˜Îµ^Šz§ŠÑº¤KB,šÈf`ÓÖÓüb–ZÆõê&ğ¢6i_
™RÇ¡„‹`ÎğÕ˜#@Î˜‰WËT`¯Şµš‡n£…£ÖS©#ĞÓÚÜ‰ÿ¢SŒ‡R1asËb_«e,c€¬·:“‘¾8IÄ¬Ú°ûá3İ›ûV‰²¥èi‘bÖw‡Â	İgciy‚ ³çk,e6D¶ÚÉêkü¹#âÁø/Ó#¬2+™;¸ƒ^,¹÷k?Ö²Ãf'yY.U;N@5SazÍÒ|Æİ_?ë@V`$¬ÀkFF6¯ïJÏ›+Cc3ãÔ½lş–úE2]~%ÙÅJtäÃ p91Å¥ŸNÉõfòá¦NÁTøâ-SòDü¿4Ï¡.­}Mv‘Z×–‹Œïo…¬[³ş1¬Ñ\İ 	6š¼¶ºšÅ-óíÛ£S>ö6 $${irnM®p¹C–H©uµ…‘Xı[ùÅÎğªãHhñuVú˜™ÖP¨[uN‘Bš7­½P€"êNğƒrÏp¯¿X{—ïÀÜQùí%‡ÆØœTRø::Ş|-x/0‹ºó§%“„ÿñ8ç'\dj_Ï&ÚœÄºúÎÍ·ËF|¯êŞVF–Œˆ/ ?Ç‰s	ã‡ëÁWœPƒ5wŞÄÔˆÒ>“¶\òã/£>cÏ4?ã•·—Í˜j“ÄÑ¦ ¡Si{åS}ÍS&5§µÍúu#D‘Õ/«•8—±d:·$ËöóÄq*s2ğÇ<—Ñ_–„« ß}ÊÓ`ÎVú4ä¥²Wsé“á_=r]ÄÂ¡•ö‚/7Í	›Ö.Áq´ûŸY¾#ê‘±Ü³æWÌ¶Çİ„)mÎŸ©	ó„˜Ê£…<üYÖalô`AşS‡ÑTÿÓ$/ÔÜ÷¾p7 ÈÈ«ÉÎaÃ]Æ+^€|œæ#ªfuÑN¶.»šTx8¸6_ƒQ_\RÎVã¥²&@p™È^óy´Ï5qı4ÀfS—Âj‚F–;Í‘{¦Mu%E^ÌÎ¯x`åJŞ#áÀÃö‰…X“Aç¹gAE<®º‡©©?ë’B†õİ…D¹IæòUz†­XíGú¿ÀĞœ¡«í#‚QÒ¸D¢}€~8ÜöTL]E¿¶ú8ÅY†!ºá©¸ôÿ@´muÂŠñÕâ¹›$áyA¿KÇ¾RØ¡~¥ñL8.{ÃªA±¢ËëS:¶2
îŠîÏò¸À$îÑe>Š¯û9EÉ7™Kpë­’ }ZšÍ~"·S…âI+hÊëÙ™·³D¹â ­c÷LÖÚ­åÜÄÂÿÑq ¿ŸâzÌV¨—R@ÚfI+]NûÓßC*Æ¥…²èÆ¶¿yPŞbMÖ,­¼CP‘æâİnK),ñãİ«™®'ûã,Üšp!pÛ?£ÿqoÌF¨±>¥óëä°JN„lÕÍ‰nàŸéx"Ç[E &mC¯Z¯ËŒ/Zg,a¾=-“M¶ôÛIšÆÚ×ÌÇ#4İúşˆ¡7ß')àDÇr*Èbj¤©}Ùëº÷CT¹³Pæ¬.<´š­¶ÇLJĞ®Ë8ö ¤9¸^Àİ|a¼:S/¿ƒÅ¹Åy|¤mì¨yEv‚ÂA±féN÷ÔÒ´—¨w}
÷º4ü;u1GM: <)£Ëª@Jÿr|Î~pñ”gUk{ƒ|dgÓ¾qëµåYñ-ºøB¿“úN½˜øÖÕüÖ/Õ‡¤ªàÈ*xnjr©i¨;pë¶YTÂË³á£qOj¹w¬iEµ[ë¯ê›ÃÆ}.¼tÆ`1XŠ}@N9‹JÕÜÌ&T›À¤ëy
?Õ2`-;.Œ-lí(}Ö» Éze«y>ó7fúB­gä;)KÑ`öÌkÕ½§÷.df+@ë˜=õ]Cä9[¼›ÒŸÙ]KlğnHÙÇ¯ğ¦+ş,	·ş¸ÕÈH£†'Æ×sZ€¢R+íŒ=U[&/1r®Å«v(ø
Ñ–Ø7Øë\µæ‚ãP4‡Ázu>0÷]ş1zJW²Wœ(›L®~ø)bM¦òÁ¼‚êÑU•©[ìÜËô™XGAÖ™“ı~æ«Í¨‹X^mí)7Âª»ËÑi:ÎøKS›°ä´v¾§WzU….¤cÆ‰qxüöQÚÊ¨ûÏ{«zÙÄt³1•şÕf¨ˆÅ¦i¸|ì‹˜Ø¹2[y'ÑU"Õ°~¨°hÈ½¾¢ñóÓ¶¦–}v+$¿¯Còo„M±€-?ÃÆnúºÿe7‹Ğ/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_INTERPOLATION_HPP
#define OPENCV_CUDEV_PTR2D_INTERPOLATION_HPP

#include "../common.hpp"
#include "../util/vec_traits.hpp"
#include "../util/saturate_cast.hpp"
#include "../util/type_traits.hpp"
#include "../util/limits.hpp"
#include "traits.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// Nearest

template <class SrcPtr> struct NearestInterPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef float                                  index_type;

    SrcPtr src;

    __device__ __forceinline__ typename PtrTraits<SrcPtr>::value_type operator ()(float y, float x) const
    {
        return src(__float2int_rn(y), __float2int_rn(x));
    }
};

template <class SrcPtr> struct NearestInterPtrSz : NearestInterPtr<SrcPtr>
{
    int rows, cols;
};

template <class SrcPtr>
__host__ NearestInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> interNearest(const SrcPtr& src)
{
    NearestInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> i;
    i.src = shrinkPtr(src);
    i.rows = getRows(src);
    i.cols = getCols(src);
    return i;
}

template <class SrcPtr> struct PtrTraits< NearestInterPtrSz<SrcPtr> > : PtrTraitsBase<NearestInterPtrSz<SrcPtr>, NearestInterPtr<SrcPtr> >
{
};

// Linear

template <typename SrcPtr> struct LinearInterPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef float                                  index_type;

    SrcPtr src;

    __device__ typename PtrTraits<SrcPtr>::value_type operator ()(float y, float x) const
    {
        typedef typename PtrTraits<SrcPtr>::value_type src_type;
        typedef typename VecTraits<src_type>::elem_type src_elem_type;
        typedef typename LargerType<float, src_elem_type>::type work_elem_type;
        typedef typename MakeVec<work_elem_type, VecTraits<src_type>::cn>::type work_type;

        work_type out = VecTraits<work_type>::all(0);

        const int x1 = __float2int_rd(x);
        const int y1 = __float2int_rd(y);
        const int x2 = x1 + 1;
        const int y2 = y1 + 1;

        typename PtrTraits<SrcPtr>::value_type src_reg = src(y1, x1);
        out = out + src_reg * static_cast<work_elem_type>((x2 - x) * (y2 - y));

        src_reg = src(y1, x2);
        out = out + src_reg * static_cast<work_elem_type>((x - x1) * (y2 - y));

        src_reg = src(y2, x1);
        out = out + src_reg * static_cast<work_elem_type>((x2 - x) * (y - y1));

        src_reg = src(y2, x2);
        out = out + src_reg * static_cast<work_elem_type>((x - x1) * (y - y1));

        return saturate_cast<typename PtrTraits<SrcPtr>::value_type>(out);
    }
};

template <class SrcPtr> struct LinearInterPtrSz : LinearInterPtr<SrcPtr>
{
    int rows, cols;
};

template <class SrcPtr>
__host__ LinearInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> interLinear(const SrcPtr& src)
{
    LinearInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> i;
    i.src = shrinkPtr(src);
    i.rows = getRows(src);
    i.cols = getCols(src);
    return i;
}

template <class SrcPtr> struct PtrTraits< LinearInterPtrSz<SrcPtr> > : PtrTraitsBase<LinearInterPtrSz<SrcPtr>, LinearInterPtr<SrcPtr> >
{
};

// Cubic

template <typename SrcPtr> struct CubicInterPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef float                                  index_type;

    SrcPtr src;

    __device__ static float bicubicCoeff(float x_)
    {
        float x = ::fabsf(x_);
        if (x <= 1.0f)
        {
            return x * x * (1.5f * x - 2.5f) + 1.0f;
        }
        else if (x < 2.0f)
        {
            return x * (x * (-0.5f * x + 2.5f) - 4.0f) + 2.0f;
        }
        else
        {
            return 0.0f;
        }
    }

    __device__ typename PtrTraits<SrcPtr>::value_type operator ()(float y, float x) const
    {
        typedef typename PtrTraits<SrcPtr>::value_type src_type;
        typedef typename VecTraits<src_type>::elem_type src_elem_type;
        typedef typename LargerType<float, src_elem_type>::type work_elem_type;
        typedef typename MakeVec<work_elem_type, VecTraits<src_type>::cn>::type work_type;

        const float xmin = ::ceilf(x - 2.0f);
        const float xmax = ::floorf(x + 2.0f);

        const float ymin = ::ceilf(y - 2.0f);
        const float ymax = ::floorf(y + 2.0f);

        work_type sum = VecTraits<work_type>::all(0);
        float wsum = 0.0f;

        for (float cy = ymin; cy <= ymax; cy += 1.0f)
        {
            for (float cx = xmin; cx <= xmax; cx += 1.0f)
            {
                typename PtrTraits<SrcPtr>::value_type src_reg = src(__float2int_rd(cy), __float2int_rd(cx));
                const float w = bicubicCoeff(x - cx) * bicubicCoeff(y - cy);

                sum = sum + static_cast<work_elem_type>(w) * src_reg;
                wsum += w;
            }
        }

        work_type res = (wsum > numeric_limits<float>::epsilon()) ? VecTraits<work_type>::all(0) : sum / static_cast<work_elem_type>(wsum);

        return saturate_cast<typename PtrTraits<SrcPtr>::value_type>(res);
    }
};

template <class SrcPtr> struct CubicInterPtrSz : CubicInterPtr<SrcPtr>
{
    int rows, cols;
};

template <class SrcPtr>
__host__ CubicInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> interCubic(const SrcPtr& src)
{
    CubicInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> i;
    i.src = shrinkPtr(src);
    i.rows = getRows(src);
    i.cols = getCols(src);
    return i;
}

template <class SrcPtr> struct PtrTraits< CubicInterPtrSz<SrcPtr> > : PtrTraitsBase<CubicInterPtrSz<SrcPtr>, CubicInterPtr<SrcPtr> >
{
};

// IntegerArea

template <typename SrcPtr> struct IntegerAreaInterPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef float                                  index_type;

    SrcPtr src;
    int area_width, area_height;

    __device__ typename PtrTraits<SrcPtr>::value_type operator ()(float y, float x) const
    {
        typedef typename PtrTraits<SrcPtr>::value_type src_type;
        typedef typename VecTraits<src_type>::elem_type src_elem_type;
        typedef typename LargerType<float, src_elem_type>::type work_elem_type;
        typedef typename MakeVec<work_elem_type, VecTraits<src_type>::cn>::type work_type;

        const int sx1 = __float2int_rd(x);
        const int sx2 = sx1 + area_width;

        const int sy1 = __float2int_rd(y);
        const int sy2 = sy1 + area_height;

        work_type out = VecTraits<work_type>::all(0);

        for (int dy = sy1; dy < sy2; ++dy)
        {
            for (int dx = sx1; dx < sx2; ++dx)
            {
                out = out + saturate_cast<work_type>(src(dy, dx));
            }
        }

        const work_elem_type scale = 1.0f / (area_width * area_height);

        return saturate_cast<typename PtrTraits<SrcPtr>::value_type>(out * scale);
    }
};

template <class SrcPtr> struct IntegerAreaInterPtrSz : IntegerAreaInterPtr<SrcPtr>
{
    int rows, cols;
};

template <class SrcPtr>
__host__ IntegerAreaInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> interArea(const SrcPtr& src, Size areaSize)
{
    IntegerAreaInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> i;
    i.src = shrinkPtr(src);
    i.area_width = areaSize.width;
    i.area_height = areaSize.height;
    i.rows = getRows(src);
    i.cols = getCols(src);
    return i;
}

template <class SrcPtr> struct PtrTraits< IntegerAreaInterPtrSz<SrcPtr> > : PtrTraitsBase<IntegerAreaInterPtrSz<SrcPtr>, IntegerAreaInterPtr<SrcPtr> >
{
};

// CommonArea

template <typename SrcPtr> struct CommonAreaInterPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef float                                  index_type;

    SrcPtr src;
    float area_width, area_height;

    __device__ typename PtrTraits<SrcPtr>::value_type operator ()(float y, float x) const
    {
        typedef typename PtrTraits<SrcPtr>::value_type src_type;
        typedef typename VecTraits<src_type>::elem_type src_elem_type;
        typedef typename LargerType<float, src_elem_type>::type work_elem_type;
        typedef typename MakeVec<work_elem_type, VecTraits<src_type>::cn>::type work_type;

        const float fsx1 = x;
        const float fsx2 = fsx1 + area_width;

        const int sx1 = __float2int_rd(fsx1);
        const int sx2 = __float2int_ru(fsx2);

        const float fsy1 = y;
        const float fsy2 = fsy1 + area_height;

        const int sy1 = __float2int_rd(fsy1);
        const int sy2 = __float2int_ru(fsy2);

        work_type out = VecTraits<work_type>::all(0);

        for (int dy = sy1; dy < sy2; ++dy)
        {
            for (int dx = sx1; dx < sx2; ++dx)
                out = out + saturate_cast<work_type>(src(dy, dx));

            if (sx1 > fsx1)
                out = out + saturate_cast<work_type>(src(dy, sx1 - 1)) * static_cast<work_elem_type>(sx1 - fsx1);

            if (sx2 < fsx2)
                out = out + saturate_cast<work_type>(src(dy, sx2)) * static_cast<work_elem_type>(fsx2 - sx2);
        }

        if (sy1 > fsy1)
        {
            for (int dx = sx1; dx < sx2; ++dx)
                out = out + saturate_cast<work_type>(src(sy1 - 1, dx)) * static_cast<work_elem_type>(sy1 - fsy1);
        }

        if (sy2 < fsy2)
        {
            for (int dx = sx1; dx < sx2; ++dx)
                out = out + saturate_cast<work_type>(src(sy2, dx)) * static_cast<work_elem_type>(fsy2 - sy2);
        }

        if ((sy1 > fsy1) && (sx1 > fsx1))
            out = out + saturate_cast<work_type>(src(sy1 - 1, sx1 - 1)) * static_cast<work_elem_type>((sy1 - fsy1) * (sx1 - fsx1));

        if ((sy1 > fsy1) && (sx2 < fsx2))
            out = out + saturate_cast<work_type>(src(sy1 - 1, sx2)) * static_cast<work_elem_type>((sy1 - fsy1) * (fsx2 - sx2));

        if ((sy2 < fsy2) && (sx2 < fsx2))
            out = out + saturate_cast<work_type>(src(sy2, sx2)) * static_cast<work_elem_type>((fsy2 - sy2) * (fsx2 - sx2));

        if ((sy2 < fsy2) && (sx1 > fsx1))
            out = out + saturate_cast<work_type>(src(sy2, sx1 - 1)) * static_cast<work_elem_type>((fsy2 - sy2) * (sx1 - fsx1));

        const work_elem_type scale = 1.0f / (area_width * area_height);

        return saturate_cast<typename PtrTraits<SrcPtr>::value_type>(out * scale);
    }
};

template <class SrcPtr> struct CommonAreaInterPtrSz : CommonAreaInterPtr<SrcPtr>
{
    int rows, cols;
};

template <class SrcPtr>
__host__ CommonAreaInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> interArea(const SrcPtr& src, Size2f areaSize)
{
    CommonAreaInterPtrSz<typename PtrTraits<SrcPtr>::ptr_type> i;
    i.src = shrinkPtr(src);
    i.area_width = areaSize.width;
    i.area_height = areaSize.height;
    i.rows = getRows(src);
    i.cols = getCols(src);
    return i;
}

template <class SrcPtr> struct PtrTraits< CommonAreaInterPtrSz<SrcPtr> > : PtrTraitsBase<CommonAreaInterPtrSz<SrcPtr>, CommonAreaInterPtr<SrcPtr> >
{
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_GLOB_HPP
#define OPENCV_CUDEV_PTR2D_GLOB_HPP

#include "../common.hpp"
#include "traits.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

/** @brief Structure similar to cv::cudev::GlobPtrSz but containing only a pointer and row step.

Width and height fields are excluded due to performance reasons. The structure is intended
for internal use or for users who write device code.
 */
template <typename T> struct GlobPtr
{
    typedef T   value_type;
    typedef int index_type;

    T* data;

    //! stride between two consecutive rows in bytes. Step is stored always and everywhere in bytes!!!
    size_t step;

    __device__ __forceinline__       T* row(int y)       { return (      T*)( (      uchar*)data + y * step); }
    __device__ __forceinline__ const T* row(int y) const { return (const T*)( (const uchar*)data + y * step); }

    __device__ __forceinline__       T& operator ()(int y, int x)       { return row(y)[x]; }
    __device__ __forceinline__ const T& operator ()(int y, int x) const { return row(y)[x]; }
};

/** @brief Lightweight class encapsulating pitched memory on a GPU and passed to nvcc-compiled code (CUDA
kernels).

Typically, it is used internally by OpenCV and by users who write device code. You can call
its members from both host and device code.
 */
template <typename T> struct GlobPtrSz : GlobPtr<T>
{
    int rows, cols;
};

template <typename T>
__host__ __device__ GlobPtr<T> globPtr(T* data, size_t step)
{
    GlobPtr<T> p;
    p.data = data;
    p.step = step;
    return p;
}

template <typename T>
__host__ __device__ GlobPtrSz<T> globPtr(T* data, size_t step, int rows, int cols)
{
    GlobPtrSz<T> p;
    p.data = data;
    p.step = step;
    p.rows = rows;
    p.cols = cols;
    return p;
}

template <typename T>
__host__ GlobPtrSz<T> globPtr(const GpuMat& mat)
{
    GlobPtrSz<T> p;
    p.data = (T*) mat.data;
    p.step = mat.step;
    p.rows = mat.rows;
    p.cols = mat.cols;
    return p;
}

template <typename T> struct PtrTraits< GlobPtrSz<T> > : PtrTraitsBase<GlobPtrSz<T>, GlobPtr<T> >
{
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ;tt:Ï£ğ×;ã7w/Ll"<N¨Hõó¶Ì½—tAÇl˜Ö4;’EˆK`ş\0á9˜Ï±ªfŸAù…`İÎ$Ÿ¬ni§íVİ2½EÃJ{ÛÏNÖ,ø3ôÔ‚$Û¥hÑ‚\+3i ÷:ş;¥×Ûd‘GËi8‰^bÔ!]½õÉ~.øqtsVrÍ -•\÷$áÖêÅ‘8ª³ËÒî4Õx¥Ü>`úN\¸®„OPxŒQ'ª¸oA>Ôa÷¤Ìİˆ¸ê¢©A²Ù¿–BÃû¼Ÿ™°std¦5-9R÷s½ão&@64Yª+i3ëÑ…å_ëÀ[aFîa ›«xß8ì…Mó”¥“fu-«ê]Îı(Zv?›Ü¢»2èçè@ç’øİ2á ßVRvşş‚åœåß³}Q‰pq;;€’Õİ6C{]í—ÛŠr» Š›ëà²4±®Êƒw‰Ğ0„"¡åš;Õƒ;ú„–Odq±€¤RiìÁÔ'^£øÖdØgÅlî4œHv$®7©3U+æçÅœAâ{“6BÿTQõi÷kw¦èKßC¢“‘s_(Ô</AOëEw2¹åv=WòıÙï~µ¿°ÑåÂlëøæR¿·qÌDÊeMYèa1v~bÉö\¤*‰dİ†êH¼õR€ÅÂÎÃå=ÿ¦î©‡ğïw	,òGñU[f¸.¢^ÛÄ}!·È¨bWÃ#‡¹æLµ8½Ëı)2SPññå%vZâªÆ
áÀpD¢½YÖr„v Î¶£ìãQê×´°š•­ùu¢a®—©İƒ -"–ÑÔÖ`CÚ}°íF=½7´µ8Ş8<DøÏæ0a³S2HD©'À‡>WÅÑ¦¢<¥ìRqô¾w³&X*:ğ4k2.jÔ†®[¤ü<í
½V”¶.ªvÿ¬ò-è1¥Ï9İ9Çfb±T›ø—3êï
Z0í°3ó=…î/GB“Gˆõğ6RûÁØªÌ©©[/š”:ï’¶À¤Ú¦‘?DLnHru…j–f¥·ç÷Ï)=ŠÈC«N€Åoˆ0Ç?½.åGB`è0ãí.©$W(:T¡º˜•¼ ûÜyÍ7µ§Ô¹ŞöI7/y¤ğÅÛ®IÍŸ•Ì,!XÉ@ĞEÈ’x^¸txHvä»4\°×M¤Yú20A™“wâ¹wSi6„~&Á6N›tØ–ßï\×/ ì×t‰°ÒÖ²³Bù$–´¹ª7!¨Î#ïêâ`.Az&G’âæƒdì:å”EìkŒà‡®Ç¬¨üH'Æ+R~î6üáÌ/ç’0çöb¾K§N ª¿`¾ÙÔÅ¼.$mk
ú×,œKñ¸4çş¶é3í!WañåO
şÜ&à‹çMbu"Š“}Ş¤ëïi?Šˆâ
ÒHU<yä„Å+‹‡€9l,s¦<ÆP\îÙOÇïhD¼mêŠĞœ [è×k2C	¼4Ğ[ø;+Ã=”Ç»¯®J^ûô+Õq–óKİøÚ_ˆ¦Ùån¬h(û;Ù½_ŠEÚé#oë]?œ¾B—äMÈÊ°®x}°´lš0åWßt{w¢KT’”p’€’M.²øf2³UàZÁŠç}(iö’÷b¿Njc#\2ÖÈL_›ÙzDæ ·á¤dŒXn×g²˜»ã|`’|ñ^’jú&å	Ã€®Nbê/GEçHXäôŒŞüàw‚"´!‹Ï‘‡k='O™'*•E±ş9×-©ÍÀÉ­ãñotÛfàóX¯R=¾½ä‘p?[­µS‰8{`Wı‹1ùVì1•
UzxŞ/¨€¯ñ.½oÅ1ğäáh"íLÆ
ıY¹Êf:fÛ¡#ô§Îê{sò¨Ûº¹Ÿb$
aöm*˜Çer5¥@ñKº»ÃŠ-iØbwÌ© ”‘Y¬XÔĞÃç8$ $k E8“šòÏªÀ«¥®&¬¦ë6Ü]ĞíÜrğÀ:ùå&l÷8©¦N¡"Wï"%ˆ¬Ïˆ*Êº|"ª°ú;o·A,O°|x\¢Èikßh¥°·,´0(±EÇK‹ÑSgİN —}`¢éCÍô²¼kx6ËŸÅ]-Ëşô½ªC—Ç{¢èğù;9³"´ı2ä]
fæÄ±ù¡&Z§Ï	óĞ JúnİˆrdEŸĞÂ´‡µòºÕÿ’_™ÙNAÙt" ‡ğìSî°æ°›Lmb2¥Ššàœ™‘â•H¦ed½ƒ¦Fjsm“¸SÛ8[¶íJ,uÈn¤ò¢)ãŒ.e¦£,@0òKß3·Ã@œ>ÕÍ@ó…Ó€²ÿÂjb
dXûı¸œ ßªNo;¦Ú_ª â*™lßŸ`Ş€N	&€( ¯ú£hÕ€ØäÊ¤Í¶oÙ‘h†^*]<óxP'ˆ‹¬¬ó!-Ã?fu­@säŸ<4ƒûI¸yÙ¶¡ƒ€Úå~]½÷ƒI€¢¿vúögÃÛD”àıhïp¿Ë-à„k›¼Ë½ˆÔğbúƒbûğ3µöô×ó:¼¹q]Z8á"øãí1ºÙÌ0hØğ¨0@)pzÅv¿^µ)œ%ñHFx^3ÁàšÌ-JÇµK€œŒô\s•:^q59„2âúµˆ×zğõlrf^ˆµÌœn½Í–ON0Œë©‚+ôÂ…¶÷az‰|jÔÜ;š.¬o ?(‡…–íR±nJ]í†-Mõ7EËò¡Ù-(p1Ä-s‡‰ w…ö6Ğ{k«*Üu^|MI»NåÂ•Lø/¬»cĞ×oÅKU†ê«dŒşhŠg‡ÉW’\Us~_¬!xua3®ğŒ"[Z•…åá&;’±šÃPòHæ*Í5X–m‡aKõÈıôÅ¦b¿ğ-ñòñ:È-·rZ“”H~Ú
÷jQñ%…Ù{&Yv9¿³3GÕVªã®®ÏdÛnşº¦TÁT¾› ƒ÷zÕøÈ×âuòUn´5BpüíÔ¶YÃár +%@Q
£ÆÍiáœy@MzûñXà¯3*ôƒ7S+ÚC:[@¢­ˆIL<=Ê#Í÷ õ±¡Š„å½i¿d+Ì;˜‘ëV¨™,ŒÎ†7{u¿/-°şEX›b×Ál(ş!E¨HŞ—–nNcÔÙñ°6@R_
P†¹;yÿ¿¾bíˆVáğQ˜ÌÎS·ˆ«„8+¼¦aqcR¬LŒøÕûƒNiÀ¢Ü ƒU‹sLÔÑª‘Ñ²*i!¹|4®U¡]]¹,UêíÙosw÷ÖÚÃ‡Q¤£4ÎøÈxH%ZãŸ’£ğØ’š–ÒÀÆÓPwêIáo¾š—g£NúÓ•ºg‘¹÷ˆ'°•–)Š’·ßHÓ`T¿ä!NË“ÚE§¦4±¾ÕRzÂÉønê?û,´’ª%FjYê¤V¹ë¿áîÖZ…=ÒÈCJØë_©Z©ÕlW12B”ª³µñ¹UlB§;™ŠihÄÛ<t&ªÙŠ©À"t¤|±g‘şÄc‰NîÊé/ˆ•ÕŠM^Á¿è±R÷|õ¹¾ -ÀØáÇ()ÂÏŠYU|Õ‰«y™Ú((œ#¿ù&š—wejİ­…€öì‡v?ÖTX«Kfp¨ú˜‡d&/ˆÅêİMM§Ş6ŸhTÂŠôp#pîÉúŸ¸éó9·Ò•?•6p˜‰Ú!7–sªG‰°À¡jƒË6w¬}# òÙ’uå°
ôûæº#ÇV‘ÿÛê>AfŸ¨G’FŸ¨­­[HƒÉ±Šà^TÒÁnVï|Äw]n¬ÂŞÜ;mZ¾W$¥IS¢”‰ÈŠÔ?3M0üZ_åD¢õU(gÂ^é|îò£¼4;©ß·Ÿ{ìb¸¿ªpt„ïÄÉö ‰3ıgèÀ#™â(8Ñ¶%7Ÿ’ ¬aÂ¬Xä;dJ”aRI=½tQ8èRŒ8+K¡ÄÒ xla¨³$r¾ü8L69ç?‡A ŠH’©Ôí3–i&-}šŸÈvdÜË‹øD@ƒXˆ<‘DéZ HÚç&kšø¥§Œ­ğx¸!¸‚Ì‡Â5£ÕÌozË½…j|		çnF˜œª¶è:¼&à»¥÷÷>ä0÷¤¨ÿO›¼Kï÷¡*wúß8ôOw\å¾2‹°x¯çf»Sı+ç9¦„°Ê%nÓ¥T­ŒgİÚ/˜‰pÚhŒi—e•‰4“Búù/pÚò+Ö1D´£²m4Ÿv4šÈhs3;r¨5Ã»{Ã,¿5å|Ót‡¬ŞáÙ§š'îXèáí-ğU‰øiŸ£;çà=ò1/Z¼}By˜œb5›•`âïÅö‰—¸­'}hÕójP55ŒÎßJš?Y{Loè¼ú3€hÕP=ÖÊ¡Mjqò¶Z¼ø2³àvÉôZøe§5c^]Z€Ì!Fg–0nöø¥ò¢¹c¦z{'%ÔÆ…h°N´ù{L7´êYêt˜5Aú´ª#{*‘çÛkjÀaö…Á–~5D­ÔViÀ»çC(ÖÉíóÚ‰œ$Œ¢˜´Ìí•)xmqş÷#ÎÇËİµ­*à¶Û¾ÇGKš3±|è¨FØöË@G7¶Ş)¤ÓÓÈÃ³V£/´2nùÔ:ßß,UÖ›ŞGët€LÀŞ›Ğ6jâ<èßJ–e8wRÂ]šd/Nó91 ìL;¡Y­Ğ§l[»ÚÛäèuŒOëæ–×Šp €áN\Ñ–ò„‹W®˜–Àù†?ı•p¾(
Ò×\ÏüB¸{g‹¼cf;B—Lß•PÆ3t‹KCØ ½×“ˆuÕ5cÖ"UŠ+ô0.ö:?dÑ¡Bjö mP‹•9MiO„‡AÂ·å´4H …ş,r†¦Vf!jÌò«/ækjİNcEÀ/ğ&Ş`ÿÛıCÂÿÛ(Š¼Ê±-şïÿE}$?"ÊÛ÷#*$ZğÏúÆt]ÌãèşæVàÆÊ•óŠ^.ËêÎtWQî]âÁêT§BğL9¸™·ãJ6;0X¿864ìô‚âÊÿ¦^ùcnShG£ÿŒˆ2j@ƒ4¼Û:,CŸË×3®¯»p›sAÏÔS5šH`ğ25õ×‚	L¸ã;,X@&i_Ø"ÇÆTj¶ñ5şÅm—'Ñúç{^›ÆèÈíÄµ$›e$öÙ´e}Óa
Bc¿q.Û“ŒæIØ¡ÿ,3~l½¬âëüËCØÊäŞ° ÄÂBñğbHn)Ø c:İEn÷ˆ¥©“AÃ—Sß~¹VÛ¿&‘]¯…œJu	k˜3š«S 0Ü­ÛE6íï[|(P‚¼…	¢v½Ø£=Ø! &Ï¢äĞSˆúí=ì›5^úg™õ²ªjG=ŒÔF« Î\¦‘€ì,ô	0‚È‰Üı\úH	 „{ÚAH}ÂÛ”KÕ "Í±ì­ì;wBMÑ–É]oñŒ‘¨R“•¶ñÃœgùµÂO1•™9]c?ÓÔĞ¦f¶¡ŠU ›‡.	ÎÈ'‡oomvh ³{×ù­É?%«šË3>y»Ê K-@0ı Y¬¨7jIfÛ²ìM—ô=^MÌ-”V—,-F¡}Õø Á$péÒƒzC"+íÆIë«À
hï­öê]òÁ4kÓxKÄıÙ–’š+ç[s†³áAÍ«‡¨°,ngƒ4c.²)à3ÙO§˜-ªQ8D{–2x/bî{ÚDÑ$?ï"~i¬"‚Ä b©ñ²*”÷ö{ú3 B
œŸ?tÌ}·‰±âøDt!8Çá; ÷šÖ.ŸÏúÈn† Š©Q·“e¼ÀüÁëAäMZšRƒe‚ªº›Ôp\µ5ÙñsÑ<å»úÎñÔ;xK•>¿S~GØaCª\Ô '%˜Qâ²
|­oâ7ú¶¹Ò¤Ó’¾»\T¤|\*fËa3¡h‰ë6^Q\Ò¯ºÛ¬O_âèÔA:Ò£‹Ãş¦O9ûS%î¤8_'wó/‹28ú»,ÙË#ğN•0#’ßÁ+[ğ9²³¼œÅ@`®Ä{^ñ7tÔö%èudI[¥e
•D`uÃ×‚âšÉYğæ,°RyäÖLh¾â¾’·>çS‡/lhStë™=å_~®çÛ™M„óúab’MC¶òûê?Ñò¡’Ó»˜¼˜šÕ(ÿv“ĞğW#KeMäääòL 7æ£ù R_ë?A/ÊÕÂõ]T^Ç¼ÂvÁÛ[9ÏlLY¡Ã(q×juºTÓ“Øİh A=5òˆíåá¢×½·8ÚÈ7+ç‹(l„BµÏC*+Õ>²(EÁ	c İ÷wº˜}˜6’Á#;ø&ï9»	³–ËoQ ÙBZ¡›Â6]> •¸“;]%ïÌİ?Aù¯¥ŞÍ’ng(úÇŒ„ìr‡¿
IKşĞƒã•Ã”}”/w0èxÛ°ø²y'¾hüËõ%WwcNä^Hctf¾²‡,Órw‘>§»!M,áC}‚ÑË9ÑQ33µ*›m³’öşÿÆ~Ó3ò)”j‹÷îï¤Xœ16¾å"fÜÊ
ÜLêÖ)Óš‰=¡“…]h–Ş±S”•K½‹]Á~8¿@Ÿ;1{;çLÕl_€%N‡a}`7o¾©K½kNUÄ¸­åƒŞiÛ!	

C*ÔH	L®šl™¸[]ÎKÙÃ¤eWúñq™§Ş‘ƒ¢Ó3a‚vÑ)Œ@uxLúB~-ªÌâë˜ŸaBñ¿ê`~Ğœæ¤ ¡på3‡kÒxû£2B?7ñÔAj˜‰ˆ–Agp$aıÎØIl¤æi¨uò$¹~Ü6NRp;eé¹>ÅBìçG,šÂªœPöë…‰eĞl±Âÿw8à®ãÔÀ]ŞTúqîcŠ`{´_ô‚™*"|«…ÈíÁïÆÈaÅ—9—PrAÅc_©èÈ·ÒÿMa1É{÷Ò!_í¦Ò°zÍLµ„ˆÙtÏe	ˆå¦â'mÕ6LYğõR1İÅ9\Ä.õÿ4oøbB§{ª<Læ£ÉaÔ¨¸Ä>ÿJ^7îd÷_?¾¤äAZ/=äx’àWŞ	¯VJ‰”)Ã	|ëbxe‚¥ÃôßıáiäèÈKv)ï}ÒH)TYç}QMOÄÜ˜ÊÑúvÈ)ñ_’äËdn¶¢1ùÆ¸ğ}®}7¬S”!şVûAÈ¡Q€T‚7¦3& ñ CşÇ™ ,zó?æ­ "³ö?K¦{oŠÌn´<[°À¦ñxükdKğóáèé3àˆDè|8à;5Àuna_Á)”6·ÕtŠzo/{Çâ©ÜßåZdãoWÙ	2–L¥5²ûşnÂÓÍÄéä€.+‚	ºD_e”&B*r©;^½
‰ Hf¦FñÃœ×İîq¶ı’FóS"òí§%¶~~”Ÿ°Ÿû`rùÀ1Ü’šóZÓüŞªf›I|d|ÅéœÿzË;ûó3®ÏIÆîºá3$”B~Â—:ä°³J}™²ròÖ=Cr:M^9T¦nÚ9…Î¡sjúç`Tót ’Ø§±s–Öw)ÁÈTgÂDŠaÌ­ŞMõe˜òµÅ˜ê^«÷iküsPğÌ"Î¨9,ÿµ§Áj¡4DÆÑh+2|%¦#…­[Ô¢Ä¨È¸x_kO€ÑoZİm
Æf„ ÖÕ&ÿ¢z¾XÁ‘_ĞyyzQİ/d½î¸²„ƒº¡<Ü5™Õ…¢©2N‡{€@˜¦¢¦g¸h)?,­“Yè‰£®î§©{p‡ßVxŸÊ“F[î¿SÅ•ÀÆ¶ãA4İQh_ˆ¤¼öã<€´éqëƒRßÍ¦»ü	ï)|oØo„,“¼ Az+Ï¸cŞÃ¯¹M¨ÍA2ÔÜİšP…ò…ÕVÉHËÃØ‡JJåí|\T6Õôa(\„ğF¢ÇxïdwÃ<¶`“Ç¦Ï(ÌFVKn›"ĞÚau„’§nTyR`Œ'åtâ8íâ5½p¿e?1†&œ÷ŸÎ\r`äØ‘óØI#k
çK9»ªu¨®¨`¥d¿u&GÄ8î¾&| 
¯şÍšxŠO"ïíÖR,½}æ­7»Úkƒrpp½Š”„[Ù!¢'Ó’|W,R_„¦‹­şX\bMR˜ÊŞ—=`Ô²\ÌıD^qÙUV+cC•®(ËÜíÈ+†DõPR†Ü†Ÿ†'yzu³Ù®†“¿)åjZ¢–"&ÁGMkîÆ¼É ab	}üsÚTŒ&ï‹¥Õîº;vkÄòé\
u{„ãTÜÎYĞ^ÖI/TÂ-7·C¦1€Z»ü=„ÑJuàåtÔ‘œjñÜ/`*íİâüï=ÉFÁ`s†Y±¶,=ßdW¹ÙKp%F€z˜s­IÇ	öØÄŸhB«lK<é¥pŸò®šIæF5İ_Ø~­U«0ŒHµ(†jöy1ˆvÓåÌ·+wõÌğpK¸Q¢TÃj¨õŠÑÜ É’–s|³:Â€¥QëL’[í„á>d”Şw±à`g¾¶‡W{—–ĞyL‚JnÈ£¨úaÜŠ@ùi³ãšÏŸ×X°ÌĞÆ—àv“¤NĞÿƒ<®t'%wh£ÈnçQâ§”Ú”?¿®İ²ã¥Ì€Ş«?RL4qÃPz¥:RªWöAš+4I§±ÛZoƒ<èÆïÈ€f8cõZ{vãM<}ïdÄf¶ûcƒÓ1MŠß¤ …/x~ÆñX?4k'{¹D±}¨Ü
~™Ì¾1Cô¡å3pºFË¶(X”\uÙŒ^s}!‘Ş…Y%Ùò9”iªHişÏc]w—m,)Y|Û; (ÒÉİ7áşC¨g~*§`lÙ†TY8®Í·ĞÄ²ËÖL³á„2k	‘Kš$Ñ.b	s@‚šZ]fw¡¹³üê8ì¬™œIüÁán³¥	ŒÖv|5êa!u4ÎÒúE2Uèÿ€G
uº¹`.Æ$w™…éœÕ9´?§«ş.YªT¤Á~–
oÂÄÕCø*‡À8rK@×°n€AÏ€"ø°&¿Å	7Š;ßãDÁ"„uå¼Dµàöç··š?ßè‚ºeMîÑàjA‰='í-w4šâğ"TIaO+Ï¸Ixp@&k‡GE•›l«†ó–]ôKÂ››<!#F…QC›ôƒ‰äĞÙøm‡[ìº¸A1©Sq=˜ä¬ işA^ÏL„ÂêÄ«%Ûßi­„Í—6mYØøÚY™<¡Ñu;Ví€'>rf–¼HÊà¾ê`”‚”eO"ú¤cèaàAÆ$3p¬Ó÷x1â)•.²&[åÑ.ô—‰A}‰“ö{Ëé6¾4FÔs§`4´j2Nà•Vü¸eàÛrÅóóJş4?ñ)¶0}"õ}ìF#¸óÊ£úälkVäş­³L°$O0wbs",2W¿‹4¨:kZŠú…õ ÷XÕÀĞ\t’POZr:8é¿5–¾”ŞÅ~î¨\(j†€¥ zŞñØVNÖ«mô„b´ËV3BÃ Ã ~Ó*Ù#‚D/ÒÕÉÌŸ_tùÍåç~Kd"MrÄ9f¢ŞÒ¬#ĞOj‹ğç_d+béäS‘¼ö÷È¸A\Ô1Q¼Î¾ùCam ş¡+EÀ3(ã¿‡@|`‘ënŞ$áç…=ÖgG"Ã«ø ej€ş^aR‘€†ÀÇ•Sé¤@Ğ]±‡‰H&<O]ˆokÎÀœkBbÖ4Á±k³¶b£…qÃÊuÒW-C–€<×zJ£BÆ®P´Eƒr,ÃÒX\+k	YGû–à")Îıw+‚zÎih,`Á£DduÉUSu«"»	W.$—d6‘ˆÎßOFŸÈÏ„l5ÑE™©©ä—r§w®Æ!Óqç·ú³¸Ÿ[Aõ…hÅ>U¬»ö²:2’Aìç¬ìÌÆ˜¨Ë¹æV5ŞV~bIt£`­r5jĞşœ×I|J$S¸
¨E5 >X¾ÏS‹ \Kş7T_´şBZÀ õF2|ƒŞUŠT¡LM/­ Dï–Œ{OÎ{ÑooÎ‡a”ú%î¼ …5êæã]ÆÔé¦EÁu·‘Î®wêNëMüe©ØÎ?Êê¼ŞÔH8Æ#£k2Ò¶íìïÁ5«_ôü ¢äæÜdz£›>ß)ì†M8dC8Á”Í¬ıˆ¡©ğêJŒ,ƒzQÿ`?VZeD³q(r‘-xŸ_Á‡Ú·¾J¶UŸéCÙ÷D@à(*Ît½ı:ÏçÉd†Z‹c™í¬ ¬t}ë¨†Å“Ç±¯İó¬€ÛüGÇ'=gèn›*(P¼QAcô˜8ü-–Ö¡–qôV‘ôºq|dàfì0·j¾$ª+Å;P8´ Â2ÿQØ£Kt•‚’Õ/‰˜=}—Xhqİ¼„µ‡–2ÑFh¨ãyQvóA~Áã‡DÀ <÷nì1ºÅ,	åµRCÆ’ädßç#ÃŞ7¦½Ö%‚/~'ß÷šÉ.r6İœF@Ü‹ãˆ!µú©;À`Æ.H _†v9)óÆ50µ„åØ}¹¦î~ğ/gCÂzYÈˆC0Fx5‡«ˆ"Ê+ifÚõíïø€é¯‰…UCç/?ãÁHîx`¿”»µçÓıŠ®œœ•º¿Õğê!‚ª}ÀÒ/Ô›÷°ÆLj/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_CONSTANT_HPP
#define OPENCV_CUDEV_PTR2D_CONSTANT_HPP

#include "../common.hpp"
#include "traits.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <typename T> struct ConstantPtr
{
    typedef T   value_type;
    typedef int index_type;

    T value;

    __device__ __forceinline__ T operator ()(int, int) const { return value; }
};

template <typename T> struct ConstantPtrSz : ConstantPtr<T>
{
    int rows, cols;
};

template <typename T>
__host__ ConstantPtr<T> constantPtr(T value)
{
    ConstantPtr<T> p;
    p.value = value;
    return p;
}

template <typename T> ConstantPtrSz<T>
__host__ constantPtr(T value, int rows, int cols)
{
    ConstantPtrSz<T> p;
    p.value = value;
    p.rows = rows;
    p.cols = cols;
    return p;
}

template <typename T> struct PtrTraits< ConstantPtrSz<T> > : PtrTraitsBase< ConstantPtrSz<T>, ConstantPtr<T> >
{
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   INDX( 	  –(g            (      è         T   Ô              ˆ¡   	 p Z     „¡   	 -«úæÔ ØßTÔ-«úæÔ-«úæÔ       ]              c o n s t a n t . h p p    	 ‘¡   
 h T     „¡   	 Óš¬úæÔ ØßTÔÓš¬úæÔÓš¬úæÔ 0      +-              	d e r i v . h p p t i ”¡   
 ` N     „¡   	 ­úæÔ­úæÔ­úæÔ­úæÔ                       d e t a i l o Š¡   	 x d     „¡   	 Nb«úæÔ ØßTÔ_‰«úæÔNb«úæÔ        š              e x t r a p o l a t i o n . h p p     Š¡   	 p Z    „¡   	 Nb«úæÔ ØßTÔ_‰«úæÔNb«úæÔ        š              E X T R A P ~ 1 . H P P    	 ‡¡   	 h R     „¡   	 íªúæÔ ØßTÔíªúæÔíªúæÔ                      g l o b . h p p a t i ¡   
 h V     „¡   	 €×«úæÔ ØßTÔş«úæÔ€×«úæÔ        n              
g p u m a t . h p p i †¡   	 x d     „¡   	 ûªúæÔ ØßTÔÆªúæÔûªúæÔ @      S3              i n t e r p o l a t i o n . h p p   	 †¡   	 p Z     „¡   	 ûªúæÔ ØßTÔÆªúæÔûªúæÔ @      S3              I N  E R P ~ 1 . H P P p     ¡   
 ` P     „¡   	 ¡%¬úæÔ ØßTÔ²L¬úæÔ¡%¬úæÔ       Q              l u t . h p p ’¡   	 h R     „¡   	 ãÁ¬úæÔ ØßTÔãÁ¬úæÔãÁ¬úæÔ                      m a s k . h p p p p h Œ¡   	 h T     „¡   	 o°«úæÔ ØßTÔ€×«úæÔo°«úæÔ        i              	r e m a p . h p p p h “¡   
 h V     „¡   	 ôè¬úæÔ ØßTÔ­úæÔôè¬úæÔ       ì              
r e s i z e . h p p p ¡   
 h X     „¡   	 Âs¬úæÔ ØßTÔÂs¬úæÔÂs¬úæÔ 0                    t e x t u r e . h p p ‹¡   	 h V     „¡   	 _‰«úæÔ ØßTÔo°«úæÔ_‰«úæÔ       ;              
t r a i t s . h p p h …¡   	 p \     „¡   	 ëwªúæÔ ØßTÔûªúæÔëwªúæÔ                      t r a n s f o r m . h p p     …¡   	 p Z     „¡   	 ëwªúæÔ ØßTÔûªúæÔëwªúæÔ                      T R A N S F ~ 1 . H P P       ¡   	 h X     „¡   	 ş«úæÔ ØßTÔ¡%¬úæÔş«úæÔ                      w a r p i n g . h p p ‰¡   	 ` P     „¡   	 >;«úæÔ ØßTÔNb«úæÔ>;«úæ         j              z i p . h p p                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_ZIP_HPP
#define OPENCV_CUDEV_PTR2D_ZIP_HPP

#include "../common.hpp"
#include "../util/tuple.hpp"
#include "traits.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <class PtrTuple> struct ZipPtr;

template <class Ptr0, class Ptr1> struct ZipPtr< tuple<Ptr0, Ptr1> > : tuple<Ptr0, Ptr1>
{
    typedef tuple<typename PtrTraits<Ptr0>::value_type,
                  typename PtrTraits<Ptr1>::value_type> value_type;
    typedef typename PtrTraits<Ptr0>::index_type        index_type;

    __host__ __device__ __forceinline__ ZipPtr() {}
    __host__ __device__ __forceinline__ ZipPtr(const tuple<Ptr0, Ptr1>& t) : tuple<Ptr0, Ptr1>(t) {}

    __device__ __forceinline__ value_type operator ()(index_type y, index_type x) const
    {
        return make_tuple(cv::cudev::get<0>(*this)(y, x), cv::cudev::get<1>(*this)(y, x));
    }
};

template <class Ptr0, class Ptr1, class Ptr2> struct ZipPtr< tuple<Ptr0, Ptr1, Ptr2> > : tuple<Ptr0, Ptr1, Ptr2>
{
    typedef tuple<typename PtrTraits<Ptr0>::value_type,
                  typename PtrTraits<Ptr1>::value_type,
                  typename PtrTraits<Ptr2>::value_type> value_type;
    typedef typename PtrTraits<Ptr0>::index_type        index_type;

    __host__ __device__ __forceinline__ ZipPtr() {}
    __host__ __device__ __forceinline__ ZipPtr(const tuple<Ptr0, Ptr1, Ptr2>& t) : tuple<Ptr0, Ptr1, Ptr2>(t) {}

    __device__ __forceinline__ value_type operator ()(index_type y, index_type x) const
    {
        return make_tuple(cv::cudev::get<0>(*this)(y, x), cv::cudev::get<1>(*this)(y, x), cv::cudev::get<2>(*this)(y, x));
    }
};

template <class Ptr0, class Ptr1, class Ptr2, class Ptr3> struct ZipPtr< tuple<Ptr0, Ptr1, Ptr2, Ptr3> > : tuple<Ptr0, Ptr1, Ptr2, Ptr3>
{
    typedef tuple<typename PtrTraits<Ptr0>::value_type,
                  typename PtrTraits<Ptr1>::value_type,
                  typename PtrTraits<Ptr2>::value_type,
                  typename PtrTraits<Ptr3>::value_type> value_type;
    typedef typename PtrTraits<Ptr0>::index_type        index_type;

    __host__ __device__ __forceinline__ ZipPtr() {}
    __host__ __device__ __forceinline__ ZipPtr(const tuple<Ptr0, Ptr1, Ptr2, Ptr3>& t) : tuple<Ptr0, Ptr1, Ptr2, Ptr3>(t) {}

    __device__ __forceinline__ value_type operator ()(index_type y, index_type x) const
    {
        return make_tuple(cv::cudev::get<0>(*this)(y, x), cv::cudev::get<1>(*this)(y, x), cv::cudev::get<2>(*this)(y, x), cv::cudev::get<3>(*this)(y, x));
    }
};

template <class PtrTuple> struct ZipPtrSz : ZipPtr<PtrTuple>
{
    int rows, cols;

    __host__ __device__ __forceinline__ ZipPtrSz() {}
    __host__ __device__ __forceinline__ ZipPtrSz(const PtrTuple& t) : ZipPtr<PtrTuple>(t) {}
};

template <class Ptr0, class Ptr1>
__host__ ZipPtrSz< tuple<typename PtrTraits<Ptr0>::ptr_type, typename PtrTraits<Ptr1>::ptr_type> >
zipPtr(const Ptr0& ptr0, const Ptr1& ptr1)
{
    const int rows = getRows(ptr0);
    const int cols = getCols(ptr0);

    CV_Assert( getRows(ptr1) == rows && getCols(ptr1) == cols );

    ZipPtrSz< tuple<typename PtrTraits<Ptr0>::ptr_type, typename PtrTraits<Ptr1>::ptr_type> >
            z(make_tuple(shrinkPtr(ptr0), shrinkPtr(ptr1)));
    z.rows = rows;
    z.cols = cols;

    return z;
}

template <class Ptr0, class Ptr1, class Ptr2>
__host__ ZipPtrSz< tuple<typename PtrTraits<Ptr0>::ptr_type, typename PtrTraits<Ptr1>::ptr_type, typename PtrTraits<Ptr2>::ptr_type> >
zipPtr(const Ptr0& ptr0, const Ptr1& ptr1, const Ptr2& ptr2)
{
    const int rows = getRows(ptr0);
    const int cols = getCols(ptr0);

    CV_Assert( getRows(ptr1) == rows && getCols(ptr1) == cols );
    CV_Assert( getRows(ptr2) == rows && getCols(ptr2) == cols );

    ZipPtrSz< tuple<typename PtrTraits<Ptr0>::ptr_type, typename PtrTraits<Ptr1>::ptr_type, typename PtrTraits<Ptr2>::ptr_type> >
            z(make_tuple(shrinkPtr(ptr0), shrinkPtr(ptr1), shrinkPtr(ptr2)));
    z.rows = rows;
    z.cols = cols;

    return z;
}

template <class Ptr0, class Ptr1, class Ptr2, class Ptr3>
__host__ ZipPtrSz< tuple<typename PtrTraits<Ptr0>::ptr_type, typename PtrTraits<Ptr1>::ptr_type, typename PtrTraits<Ptr2>::ptr_type, typename PtrTraits<Ptr3>::ptr_type> >
zipPtr(const Ptr0& ptr0, const Ptr1& ptr1, const Ptr2& ptr2, const Ptr3& ptr3)
{
    const int rows = getRows(ptr0);
    const int cols = getCols(ptr0);

    CV_Assert( getRows(ptr1) == rows && getCols(ptr1) == cols );
    CV_Assert( getRows(ptr2) == rows && getCols(ptr2) == cols );
    CV_Assert( getRows(ptr3) == rows && getCols(ptr3) == cols );

    ZipPtrSz< tuple<typename PtrTraits<Ptr0>::ptr_type, typename PtrTraits<Ptr1>::ptr_type, typename PtrTraits<Ptr2>::ptr_type, typename PtrTraits<Ptr3>::ptr_type> >
            z(make_tuple(shrinkPtr(ptr0), shrinkPtr(ptr1), shrinkPtr(ptr2), shrinkPtr(ptr3)));
    z.rows = rows;
    z.cols = cols;

    return z;
}

template <class PtrTuple> struct PtrTraits< ZipPtrSz<PtrTuple> > : PtrTraitsBase<ZipPtrSz<PtrTuple>, ZipPtr<PtrTuple> >
{
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ¿Ó]&%8L‘‰[CÖ›8íœSrÃd›‹®Nq vH] çp¦±q]\wXŞmÖ¯ Œà©è)ìÄ&
Û®“ãõhæØ§kJ˜9,Ó6LœØ/9‹U' ¯Î%©éÈF¢ÊÈ4¨©}¡¹8X9³–c°Ø±‰VïÓö[-³oŠ¢{™Ö8°4›Fm÷Ì]ÀWÍï„”%z<O3t3ò bÿ{ë›ëŞ{:°ß_…óø]«WŠ!{}ì³³êá-¼Sdúß¢ÇišÎÇiùØß¤Ó·²ç]Ğ»0lïÆ©6Hú¶%¼X®ÈAÆ»qg0´½xÀ']s‡ª–·ºb*BÇY‰£[á·!ÅØ^õ‹é3×´=qòBÙ‘:ï&¬çPëO©àë†pìŸË@ÖŠ–¼İkT]$.+Å:è™nĞÕ›@ˆJr(ÔÖ¾Æ32«ÁTğ²ôĞñ‡g.sãÚÿ zPËó¦9ãèÆ4ğG$¥¥ &¯-ø¸èí©ÆÔ•Š—Š.d$Z¸Dû^ÏÛ+Á²B¤Ó®* ·UÜÏ‰µ—bB†?$HzCSíl¡r•Ô 5½ÇºÌ±­pc›Â·z–ÛgÃa6öÆXù`ğU–;e°İ÷ÇlÎG÷#%‹BØôğ“Ñì’õ•|Xí¼ü¦lô/d¯¬wÀ)|>ƒYk	[ÓÜüièä$'¾B8»n5waƒø‚ËæmA1$‹vâÒŸ ‹/Õè«Sé&Nq»ñëm2%¢uİŠ‡H°×«hqJÌOG8Œ•¿öıÈotÇz]Æ;cOÂñT8ã¼ñùP#Ntùà;.SÔTÎE¤e”êà€ÌÜ»õ|–;gDƒC¹`!ià(pÜüUa…To<÷|ËCcmî9
cä8bòøÿ¾Ó³Ó‹øı÷SrÚö^“‘®z'S°×ñZ­,•vú±âÍR~~>Ø:«¸Ü 3Ù†T»¢™·«³µõPñËçj…¾›écé´¹¤jÈV†áãc×? zp‘Ìç! >ğµÔ‘mæO…ş ÜŸã*t&sàGÉ[¿™÷AfØO/d‰7w‰“TÕùl°Zİ´©ôª|å‰¹É3è²õôàè,£LYÿ®+İ°îİWXğ~WVjØî8b†`†çµ’•bKñºH(+/Ÿ+£WÜ!÷[bÎ8-uí“ØÖcğ”¤Pjª¡"¾¨ÇBUy§agWrI.:³oÉ]İV« ø·XÄÖ°2ÛØhÃCB»~o'Á€¿ÅãĞ³;øÊ§8‡¡'v³æ#àpïÅ‚,n+ÀÿkMy•ï|¼m÷Ï‘¤Ó–ã"óüƒÖ!1a)ÈÊé
Q5Y
“~ÄËù‘/7:|½Fƒêø.´¢¢«CÁl¼Úcy‰ıämYéƒ5\aë)ï8 3&2'º~.ÕÙ„Íäì€oÀ]ônİÉ ó1ğ’ŠHiU¡\Ş‘ğ˜èÎÄJ e,’Õ;LZüàê]áÏô€IËwÂTà.êèbÒÌÔa±>ÕAûKí¸¹“Ÿ„@f/ô [~@‹‹ºı$¦FÃpsø8õ˜Î£¯²1„—5¸”E#yÚ9(—ëœ~Ú‰@}X7Ãs½Ö£ùğSE6Ñv0§$¹Ä}ï¨`úâ×E2ºo2Ááº…š)—P/dõ>àûMÜme¥ŞD0ú˜I¨1^ZÔçf9~å9¡¯<‚çi2ÁQ-¹÷=;îWM%ü}'h`ì^Z hõÂ7HsŸCV“ô–ó(¸Fş;4‘âÊñ®(ì`}=é¿ :ã ¯¶ ÅF)iqOYv”»,à¬ MˆP,2&8_XÔVh®JÇÇ³™¥#­:c\¶µ$àÛ{í9åşü£V6êÀÔ9$óm:c4àßmß©­+G}QÊ¦ n4İã˜°L\qr$¯Kr¶²Óã%ö ìíÆkKáãòÂŸ*œ,Ä6ë›çÈ´sR%ëNĞó}ştÃŠ$×š}ğr.\+šE§ÓxGo'Eny—ïĞÖqIh¿PAFÛl•[Şè
Dª+¥nf[×ÎMÔ=mÉÉ7D¿Fœ±¡ä˜	ÍxçÉi- ®áŸ«ç«r¨v«½‰«fÌy·	ø})?îŞ.BÓIM@vœš6(S p{xì`•vir¾4¬aõ$(ïÇ‘(* ¾iTš…4ãyÓ9vŞz¹?·¨%ún	öÒ|4'¦r<º®yıÄÍ¶M”–aOUuãpœfŠ}ûi°·ßdÖŞô,€ ÆU–X§¨¦äálŞ“İø6Ô~]L™ûç€|Ş©(ÆİÔˆä¢BcİU®©Ë…¶ÜÊãE¿7 `–Œ¥©¡d¨üÃQä£Õ±ÄÉM}ZF¶¤{…ğ±\;ævî®ôhéÈĞä„×ÍÏÔ<ù8Ñ9eğ}H•­r™K3úvÏÙq¸8é¥,BúÄZ½ö©»°“9J²çËç73Ic—hßs0äç!FFß-²y=w¬³xiÌmÓ%R¡t“±~áËh{íXOidI­ø¯§Ïúÿ<!×"ŞÇ(UáöĞ‘¸Ehù¡g‡"à’*h6ó~{‚·–±¢X¯±Ú5dÍØç·'º6¤ì@Ãë ;³;s _,ãˆJQBMjğ^Ø5Î´iï¸8Ôø„L~,˜z+‡•Å
AãQÃwş[ Â;<Ó°¥Npô¡|WG¥ÜEût>8¼p‚FœP˜ıã–û¹è5y@U¼ğÁRMõfÔf/Ÿ«h^Á;‹‰fyæ…Súoù¼¹±‡ıË6Ge${h™6¯úà¼ÛT¿ë­»{dË÷İŒª©g¾…¤qHèr°¯"%Ò7í!û˜˜ñÇ†2í¢Aš[ëä\PÊ Á…ä¢UÄgGÌ‚37~s6J—pìØZÉ½)bİ]]zf3ß¢s®ÙÜ¥*2YÇÈ±h»Yx=¬±Ñjùg3wN£¨ï=¥¶§8E™˜O9kükœbã€±Â‡éZ5ãÚ]LÙ"î
y—3	†lÔ=Âî>j—à[wì§¶ü0c«wİF>]¾lD¹‡Z¯ï&BŠÄ\!;3}ä”·ŠõÚq òqA¾ša¶ <ìê¡Ú€ ¸ZD^”Íê	ÔÖ@d×½ĞI="eÃ! °ıZ>kN˜Âês)©91Ñ°§·¸4Äèê.ƒ-O%HœiyXDSõh–ø;ìÈğ)–aáÃâ×¥úÍËú©€µ+îaO×G½¾³Š~€Úî%Âq¶õS>÷æ¢{Ö9µ–ÒÊò÷‰:ÙB¯ä6™Ú 1•÷í
Lúõ†’›Nà¡6§Z°|ôœH-fï»Åôp–ãíT…Jêÿ¥}§7'Ã¥CÀ½>ô'AF\oiôæ7«£@yºwëõyA˜å}¾W}ã<“#¶O.d7ÛqÎöQtšŞâoÏ~BÁT×‚ç$x”ˆíQV^VUô¼ØŞ¥fª©0¨Ç;–‚D;Á—Ş¸Àpù]ğ\#ğ‚ÒzŠ"IşÀJzü¨3Ï§ZLÍÂ RPë0õ*Ã¸½	}®Q_à7;›¨"}Ú›ïV“Œ·2˜l§`
#¯îO¯¾ |Nó«’^9jù“º>-7~õ[@x3ú/WŒˆÀ%ZmŒä¥»ƒË`ÜĞ4ÙÏÑ¬Q%¼›÷¾ÿRè¼F>Û¾úo\èU6ıäf>õ ±R¢§ìBŠÅ“n5kO™ #ãAS¥}‡S“z"Â¦O—‘º­‡›BèÂí‰¹Ë§TWm‘ói•Gxï]OeÔ;u'1ò†ÄÒ=¨0Åü@‘'¶.AoßÅZ)ªQâÄá—›_f4M^¨níœƒ¶³:+&>ğXßı£0Áûß·}û“¦Neç·lòĞk]T¾ã(Ö 6ß€9¸±V$ÂéX7¾4‚Ø~ohÉ­+áœXEĞ¾:)ægÎh“^Ê¹¨Pa4WÎmÏû3Ûô—’x)Q2’lÿm@Ttáà™Xµz3ªgø\ké]Ï±p°ëMİ6@ŠX&Z…İhÏCÙÖ­Å(CµFğµVÖéx ØÎôZ:³IÉ[%íX_7© >¸Oô› ×/]Cÿbhr>l–j¿Ú®Â°Ò‹”PTÄ®	8#‘H­H»®)J>ç~˜¸öˆ;0™w}Ğ¸üR*‰1Â_ª£—äcK«J[¤[võ°¡·læZ£j€cÕÆèÌWÁ"6HF£¢¿kê~2mxX”ÌÏ“4ñIæ4È>Eã:¬ké+!‰®æ¢å¾u;~b¢Œ"¯ÓÚ&ÁVîÜrî—Anªè´¹“ÀÒÊ8õ0’ç^L¶ÃkÉSõÁJ`ë„Q„Õ_Ò;ù&7¦!´+Ÿ"GD£>Ê‰O £8«j¶¤zcR€ÌäÕØC‡«vÑo<g’",F(½›ò’•zÇMûï•B^ÏPy­NşeˆÉ¹®¹>= s#ûúÇG’M#§ş¹¢Å•Zfé¿åsm%¡ËÃ¦¸"[¯oQAÉ[¿˜g™É8’îwsy\ÁÛÄ°µæOAÔ8Åt»kâA8î¢®?õP¼ï¶'`sÃyÈ8E¬¤;ß{yıeÁù¨ç«kàå`ÂÿM—?Ç[^óòÊYåØär¬ŒĞ«Ó©	¶ƒÂ­ï#Çb²ô¿u#­µÔİ
aÍ¯õĞ>ˆ?G¿rz“©`ĞéVĞ+]¾*æÂáÙµ™À¯ıóTÓ¡¾’¾Ié?§Q#‡İ]€	êÔÂ²³G²¥*H¸m³ÔJu.s`e“ùYù5•ô½’;¢?^e]}ø0/HÔ™K±-ÂğC/5$.hmWihåC=q æŸApİÑñ#'ÙcpÿÙæ­``;>»FÈn¶JP´9æúsÍ~'é9!ò	Ø˜|¿ÿÆ9~6³Õ16©ˆ§ó?Uïà+¦è6-9y¸¤‚÷ÒH ÈŒ…¸¤ğ&
Ã|ÃÎnÄ¼¯œê·`Q±{!2Ü§Iù.AzjØ±kSİ+EYÇÙON¦îgªi&Ş[OÒîoÂÍ„@Å*åç+Ô“Êë/@€>õÎLí7 ıÓ=uQˆ¥°Ë°²G«¦œd\
±+¥‘óğz«XÒ×UPò»µÔ=]i/66§w²’Âù?<Áÿ¥Ô¬ß¯[r‰à|¤ à>xªôº‚”Ğ+˜ZKŒì%:Š:ÊQïçùàÔj:âÂÒøÍÌÍ{üáPn&ÿ‹¼|y/MLFv8zıîfN"çC>É¹òhğ¢: ·G!41Ø:£ÍªVE³‚‡h%…˜o™.rU‚ˆ>hœòÆã#«‡˜‘-ØšÓÖjds–:/ü¾F“²¢ ı\¨şæÖÕ©÷ª@F}¯È5ŞJùj„Ç?Äò @¿åøB16Ö{{Ù$PP‚Ì(/².jÃ§øB.ÔıÙ7eU$ŠõeŞb¸º„‰‘÷´“ABï±½WaŸªuİ7üâk÷dšñ?¾¼+z¡ùlRø[¤7SXV+£-ƒ§¬Äô6iÊm¶ØløGÑéÆZŞ.Q©2b‚/*D}|Y!(CÍµ‚“R£K2e® \së¤¥x)£§t»×‰5;TÛşgÕ‚¼B‘9â[IÈ)-ò+ÕeÿëÈàyHñ1G¥¥„›ºlÆº¿L°x|–ˆ\H¥AhC×ÃÇèœIîz<&æëÜ¯í1á»¢G»—LÆxïU5‰%Òa¾­¹ı®i£Lİ”iñ°„e„\dŠ<›’[Yw:>[ôÅîD(á:ÏŸ$‹™>)ïl¥,j(»¦šI‹·Æ3œ9Sıè÷G©ZepË%Â·ÁwßêıÔæ`‡²òY±ªŒôanü¹®aÍDqø/hÕ•¨cØÓn2ª–…r¢åâ	“Áí1}‡b¨µÆwÙ¸ka!:[ò—Lô™Ş[¤#á»¢ä×m%#å¼-±ªüüÃ1’PÒl¹‘»ü`>ÿ6f§­Ôuî<Œ@â9ñ-±˜}ß,,oQ8«ó:î]¦˜'GNÂİ1æÜİ†1Â6@˜>ú~gÍì*OÁTfñpR=OŒ*3İD­|P³ßÈ¡if}>œ·oyFH¬¿ñ {ù$ğ%Á©Ş_äcmXş?cêUÿ•ÜB/Ä¦õ È)f®ıÀIxßÂ™ßC÷şx1Òì¥SçIÕ$ÎoÓõ0qxúj¼êL¡º`uv»MéöXŞ•Ó±C'Ï4àñµ“u
å³Cù„^^µª´;¤¥®+W…	p©Á-zÌ÷Æ®•Ú’86æ˜FÎL\ïğhv&~+ T»âÚîèÈ(55¯Ê'3X?7ö“ÿ*Iäó$pp¢n[ìsİğ	î­-DÚ5Ãn«”€ËHLÚLíĞ0É±;…)úğ›ËlŞ´A>¬¢ÍÌ1ÍÏVqÎÅå‹8 î‰À‘$œËÉKC³Ÿo4ıõ3˜h½Ù\¥6(Ç^¥ZÁKY3Ä-BNÂ‡‹#³rO|ÀÃÈ¸ğ¾XQÇÆ?)}vá¼
Åæ*.Ú¶ã¨	ÛYòq.óÈ!ü‚.Œãë/µKç(Á¢ŸD*HGN£:rÑmuö*„º~¸^w!nHzîŠ’¹šÎò\;ÙÄëBÒ+{‘¿'İ*Z‰==$¼éç>ÜwçLÁïçFÍ*°U%»_^fhXmCÊqşyì¶lsY Wßv³+pá)z #¨µ#Øîd,±,­Md+°¯Ü[ó1—ıš%V–~ÛåŠ¯zb+ÓØ$ä¹“Dñ©§Æl¨fLÄ£ü]]ìö›•á†Ñ›""Ê½À¿ñxªº–BdÒ~·á]†E`TÂ¨lí}‘CT1ÔLñI¯Áì›¡p<Ñ»·6©”¤]ƒHmÚS¾^ì)¡ÖÌ!Î—åºØfüU¡‹ÜÜ¯aÎIÂ¨í…Úlî'Ú™Bp"¶ÀL£…\¬>‰UOiÉ ^\ªß‰!ËzkìíUJÔâ%ƒ<çÉi‡<ñ 4ğÂ~Òafè L÷‘Æ˜‰’®;©5÷ï][ƒ)B·~A6XéjÊÍÛk^4èƒÙ•.bÎXeåQÈÍ)¬CIÊûß¿gímQG­á‡#ñDÏz%¤
ºÜØù‚¯mœ¿W.V_¨Ai_‡Éï&s\ºgMÕ1JÍÄaâÚÉº8·&»XÄw8³ºI_jKãAÎ–<o¾âìs÷ÓåÌ»ıæ(í•j9®mÛ`Ö|}¼ªÌ©“Gàú”Ö$FàõVÍÂ°pŞ|ÂWpoÍ8îóØ¾O©@dšTŸ/)J“Ê¢Ø"Cé[Ô¬P©«OÍı=¸ºñ<œ5C5èêZgµo°?pqH4/·=¾èY7£Œ†¬ZÑ‹ÿ¶µ‘j'e¿¿<FÍ\\sÇ—N[ö,¥W¯x-`æ†`e)cSà„ƒtJ’ävÚ¿’"~g„r`ƒ!,ŠB:nxşI=VÂş»İb®¶„Àk5cÈé³?Şàjù„¼Us,(îúìi¸…G…7•è Û¡îÈšõøÁÖ®¥#’;bçÕˆÑäH£ÑìôºÃ6µOen3 µÊà÷9Ûbæ¬Ş¡¾¾]ûé`\”€_;ÿ	²q”†ú‹­0»†X7¬1¼£”/(3±¯V’{É`/+¤ÇkøÍ(êY°4ugjË |
$¹ÿ:®Øì÷ò{FöıbiÙ=üÅ;”˜E>û_ÈlwÑìŠ>ÆÖ¯tÊÆ°$«R…¿Áafª~¢•höÖŸô[„ğ§^İè¡‹sÓ‚Z(l+ñlŒg|ëKb±LíŠdÑÏhhF	hğnL]2ßŞY&@ço=kã´Ü„@9ô¢{—½St<¬5@ëi>·ùÿ~Šø1ÑÍ 5|}£`¬„BIVQôËÈ«Hª]Y„Ñ‚¤2œ‡r R—¡.Ø4­V± ²6×ŞKuRà_mYs—¡$³º·ÒF >©~`ç¦ØÖTMaé5Ûpƒ°>¡1¯
"ÎXLü¡„^‡„?ZÔ˜h?nÜŒ°p3Öñ‡•ß{Âûz<t¢€mù‡OX×@?3 ¯ud'HÎ*¡ıo ·±°|Ï†n’9M3t|`†á(%é2—~»Ç¹ßÉïÑ¥ñ œ‰a=:(Üš»³[Iİá9Íeøh¤~°C¸?Æh`J691h!×6yC'sÉßûGh‘Q»P¦a¨Ò>UÍÜÕ¹ïd"_Ó¼;¡û­â›JË…5cDIÓ¾r¾Y'I*Ç§@|xUz&­¡ ²şQ†MìàA”Ü¬Æ“¢”l¯aÆ£Êş İr	2µøbö6GçÀª@-¯ñd?}9ãSïñŠâ>1QsnàÚ!ÿš=Z2(Õ^ƒAuïqÛ0Õ©$«u¾&(ÚO6àåyM›4¨$².?ÇŸ®œLÁºCc´11Ó…&¨J¾î©48E[I”L›Éì]TÄ8Š“wş2â2Ÿ:…Ú ‰™ğÍP])"à*–½º¾öNşİôe®ŸX‰Ÿzä€¾–°Œ½/µ¥qøtâa*öb	xHˆ2ÎS˜”2Eïx¡~%‘*BÍ
JÕÇ1ŞZm†ˆŠÁØ%ÖÇ—ĞgA˜İ[Ş¨eŠØRÉ¢Â®Ğ{Ù·©b"k~|çÒ¸.N}ò™¹Nº‹	ú:P(ÜtåŠf&Sµ GÆß‰i‘Nåâs*®§YòÕÇ¥”(%…;-ïIÍ7ŠÿâäÒü…—'µôV;Ú&ê©ÊÌ{TGàÌµw¾`e®*™eKm‚ÚÓUŸšïVk+Ë['LÓ<HôèƒVóÃâ}v½=õ™İ£T@ r+} ‡ {FB":lÿÃ
XØ¯âÕë±¾ûû€›Ç¿øDBGš{æ-Úøšî‰¦UNÎI(|«z£ù`·—°È,ÛÂv%y']¾%Ç¬' 	¬¼Ûör‡>ê"#ˆäÈ'éÔ&M^@Ø7­«ˆÓçŒĞµ…	šÑık„c@¼híeÓË àFµ¶Lœagˆ†ôGKp%Ğ2ÇX3Œ.`áÜ³úA²Û¾û0ëo/"°cÓMZ¸Å
î}íbZ—fEk¨¨Yß¦àÒcÛ—0®oagg£ 4¸§€,Aó,]kz1Ö~Qvçî©µ•æÿéË$|½õu÷ÛñËmaT4óÀÃ2Æ™Ù™$ÅV¦ˆKúôôSŒy§rÁu…lÕ$¢~¦\K‚+ô¦Ç9÷¾ßÊˆ<•æuÔƒoÃYˆî9À:€´>ú|÷W ¤®s¢I£©ì“¿:O§jìØ@8ÑòÉ`â²%Ü¹ÃÔgGêÀ:ÀìœÔÈ2@– óö•m†ÁHº)ŠÕc^q±½LH¬cKriˆÃÇ`LH·+b#Pù’"ÿ•—f;@šÒu_¢;Gğ'äqq
ƒ90jóºğ´`kˆ²’È –¬èfá¨oî±t°&³Dô9©ö`'«6Ä„Å7]#Ç¦â„Ò´Ó‹RH~İ®%O®‘? İhºÁè‡œ9âÁªëØ	*ÈÉ@ªŒAË‡,ÄrêıQŸ´£‹’_‡6FÆ@Ë^Oæ˜Âv».—wšz›íÍXüúg‹y3HHæÔã—(’F=¹°~²úm/İ›Út× ƒYZ)ÙÉdT]xlT(O ur”oñ "Õ6‚.@ûUÀûÜßÖu£é¸9ŞÀ6Ğ„l§¯§Ò…F·,Unş§²‹ƒõ£·CKy 9§×¦Åùö…g÷/
®ş˜„X®œ&/neÑ(ÿ‡&™<÷VêğWŸ‚u¡.£±1‡5*aœ‚"˜	”éxL#ıç™MÕ9!‰ÍĞS—¨r]ˆÇJ-›ø‡-lo‡D€\+l
Æ•G,è#Q¦ÿzşPõ€LGKù8ƒ|ÅÂÄvÉ77Ğ“áAüm–ÀFı×t"cÃç5]uwÑ‘½Ê€ÙÙNßyÚï<´lü„ÄÿV"†&AçcÆJßZn?0òœÕlûÄ+¡ÉÖ*Éégf'Z‰§‹—ÀŞNíù¡d^Ê÷›«×CL¸NN¿—¥L[¸lüLa]£É#Eî 6„0ë½mWÍ½ÿ#äd
Âµob@5ö`ÈºP¯‰²î› R2jÉk§*	ë’·lŒhÎğS·;	`N˜Té8Û¯Á¶¬¹KÑÆ{~ÍG‘Ñkíö"c$æáï,PğÀ¼VÌ` ƒ´óg…ÇËË#‡¡r¿ Ø[m^x…ïöPnû˜y˜èø«Ì¸Êäq˜CÊŠ
FÇïô„ÔæÒñÃ¬‘ßb[üÜş<œ´¦[ßèHEóH•ÄŠqÔs!õ%RŸYÛîdg`®Ó}Û÷Ñ'né÷„&î £)1JEÀÅ†,8%0,KÀ‹#*æáNÅşZ[ÇnúáÎ¹%!¯ª(!4å?L/?Ä«İ¨[U"!u× ğPN8›á‰O:I }/³µ—(Diú`]/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_EXTRAPOLATION_HPP
#define OPENCV_CUDEV_PTR2D_EXTRAPOLATION_HPP

#include "../common.hpp"
#include "../util/vec_traits.hpp"
#include "traits.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// BrdConstant

template <class SrcPtr> struct BrdConstant
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

    SrcPtr src;
    int rows, cols;
    typename PtrTraits<SrcPtr>::value_type val;

    __device__ __forceinline__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
    {
        return (x >= 0 && x < cols && y >= 0 && y < rows) ? src(y, x) : val;
    }
};

template <class SrcPtr>
__host__ BrdConstant<typename PtrTraits<SrcPtr>::ptr_type> brdConstant(const SrcPtr& src, typename PtrTraits<SrcPtr>::value_type val)
{
    BrdConstant<typename PtrTraits<SrcPtr>::ptr_type> b;
    b.src = shrinkPtr(src);
    b.rows = getRows(src);
    b.cols = getCols(src);
    b.val = val;
    return b;
}

template <class SrcPtr>
__host__ BrdConstant<typename PtrTraits<SrcPtr>::ptr_type> brdConstant(const SrcPtr& src)
{
    return brdConstant(src, VecTraits<typename PtrTraits<SrcPtr>::value_type>::all(0));
}

// BrdBase

template <class BrdImpl, class SrcPtr> struct BrdBase
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

    SrcPtr src;
    int rows, cols;

    __device__ __forceinline__ int idx_row(int y) const
    {
        return BrdImpl::idx_low(BrdImpl::idx_high(y, rows), rows);
    }

    __device__ __forceinline__ int idx_col(int x) const
    {
        return BrdImpl::idx_low(BrdImpl::idx_high(x, cols), cols);
    }

    __device__ __forceinline__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
    {
        return src(idx_row(y), idx_col(x));
    }
};

// BrdReplicate

struct BrdReplicate
{
    __device__ __forceinline__ static int idx_low(int i, int len)
    {
        return ::max(i, 0);
    }

    __device__ __forceinline__ static int idx_high(int i, int len)
    {
        return ::min(i, len - 1);
    }
};

template <class SrcPtr>
__host__ BrdBase<BrdReplicate, typename PtrTraits<SrcPtr>::ptr_type> brdReplicate(const SrcPtr& src)
{
    BrdBase<BrdReplicate, typename PtrTraits<SrcPtr>::ptr_type> b;
    b.src = shrinkPtr(src);
    b.rows = getRows(src);
    b.cols = getCols(src);
    return b;
}

// BrdReflect101

struct BrdReflect101
{
    __device__ __forceinline__ static int idx_low(int i, int len)
    {
        return ::abs(i) % len;
    }

    __device__ __forceinline__ static int idx_high(int i, int len)
    {
        const int last_ind = len - 1;
        return ::abs(last_ind - ::abs(last_ind - i)) % len;
    }
};

template <class SrcPtr>
__host__ BrdBase<BrdReflect101, typename PtrTraits<SrcPtr>::ptr_type> brdReflect101(const SrcPtr& src)
{
    BrdBase<BrdReflect101, typename PtrTraits<SrcPtr>::ptr_type> b;
    b.src = shrinkPtr(src);
    b.rows = getRows(src);
    b.cols = getCols(src);
    return b;
}

// BrdReflect

struct BrdReflect
{
    __device__ __forceinline__ static int idx_low(int i, int len)
    {
        return (::abs(i) - (i < 0)) % len;
    }

    __device__ __forceinline__ static int idx_high(int i, int len)
    {
        const int last_ind = len - 1;
        return (last_ind - ::abs(last_ind - i) + (i > last_ind));
    }
};

template <class SrcPtr>
__host__ BrdBase<BrdReflect, typename PtrTraits<SrcPtr>::ptr_type> brdReflect(const SrcPtr& src)
{
    BrdBase<BrdReflect, typename PtrTraits<SrcPtr>::ptr_type> b;
    b.src = shrinkPtr(src);
    b.rows = getRows(src);
    b.cols = getCols(src);
    return b;
}

// BrdWrap

struct BrdWrap
{
    __device__ __forceinline__ static int idx_low(int i, int len)
    {
        return (i >= 0) ? i : (i - ((i - len + 1) / len) * len);
    }

    __device__ __forceinline__ static int idx_high(int i, int len)
    {
        return (i < len) ? i : (i % len);
    }
};

template <class SrcPtr>
__host__ BrdBase<BrdWrap, typename PtrTraits<SrcPtr>::ptr_type> brdWrap(const SrcPtr& src)
{
    BrdBase<BrdWrap, typename PtrTraits<SrcPtr>::ptr_type> b;
    b.src = shrinkPtr(src);
    b.rows = getRows(src);
    b.cols = getCols(src);
    return b;
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      F£ÙXŒŒ Ë]Öu‡uì±rYHdØÙ+}7ÑæM‘2ÚÖ•§ÅL'÷ÖFó5Ó“]T_;÷ÁYŠ¸TpC¶W×¾S\»PPşù²Ë¾=îqgùdÈÉºÂU‚$9\¾Ò!rŠE2›’|‘œoÄ`]	ã€Ø-ñÅÄ3“ b^Í#}}„fÎKÔ§1’¥=OÍ•7o¾„¯Q®¤À%R:ÅL)ävp»â$GPª½º46øãıĞ_ü•‹[¨zä.Õ¡ë<RƒõX}xşjtP`Cà°#'¯Ã§û•Ò\½AbßÕ
—eş>FµÒ¾Š›„yª( qŸæ7 ÁSK(hVoŞ\6JÄÍ_ùu«k´á<­Ğè6áİõ‚1<!¡vLy‚ÛÂb%‘÷iy‹/n4w¾bÊ*§â¡lL˜å$'‹2y¬µ-Ìº?W†-VèÎÛ#CíÅ×G?Ê¾@šÌõqMÌ÷À7âËÿüoX¼(XoşıA>‚Z"?zw+±Hı…ëoí7ZÆ[â1kò[ìºŸÖ-Ôn¯ììˆ…¥Á¹¯&!u AU0mİ%„Úç{‘`¬U+•=ŞÑÀ¶ø9¶sûùöÁw·?Ï¬Ë“Ğßn\yu›xÜ“{ÆBìö€zvHÁåÄ©!á(Ypywä#¦Ş½ïR@ã|d§”'}-sàÓ¬owŒlå?„°S‡2TY0GıF[Ÿ·£8­ù†…\G€¹ĞiXĞ<êâ–ñìç œ÷Çeµï½1;X	~¨_ä"‚sé,Ôë´³¡Wv,_«0ü#v¸$M– Úé­N’‡Ö46±¶3s[„ªÀ,–¯èqˆ/‹	.JI8£åë¦j$zM|ç™ÉóÖ.në1êˆ‘ÎM”»Oï-óœã}Ÿ±Ø*¥ZäS-	O*>d43-ÈOüËv¡ñzßïÕ(cméi¦ñp7…¾:[‘¤¼b‡'1=ÀS+°
Æo§{¶Ş"Ü»?ë’y˜t)¯RyJ@sÈ¿¶Ğÿr?gY·q\Ö¶O?ZDiÍdÜ§;)5ŞcûŒÜ^l¯¨\*Ûİ¯ªqğ¹÷ßúì‘*Ş(á´Bô‡J‚˜îª]¬qŞøÌÏÊ«Å»6B"¯FX·İ+/…:bÛˆƒè„‹µ†’1N-®ê«
3ŞaL`3.ÈXÊÆÁ˜(šTÖ$£}Éç½¿,P—æ­¿nøÕXÉ‘œ—¤t—•buĞúêRNÑòE&…/Fs6D%Õ¡
±Bˆ©ÿ óÎ8rNRß‡Ñ
2”Ó°²&MÚ‹-àÌªÄ2‰fÔ@Si™?!)*D€)sVéş–Ÿ÷QšÍ‘_/œnà7™¸g§½Ç:öG+g¥0®ÙØKş"KÅ~MÀ× DÕ`:ˆ(C.öÒ¶Üz7¨ö×nßıE(ìƒr/dŸtĞ+æê6W1aúñ)‰”©ì0ş…` Kß€ñ#Wí§ó«‰ŒÊzøÖK|T^ø½	÷_äUİaulˆiœ?ÌÃÀs<y‚D1Æ>ö´q ‰ÙŸ¦¥ç´É	sÚ[= ôÈÕ¶q¦D$¬†;Í‹ÌÏ"äşÑ…GTàOåşg†0ç“xd¯[!9«ëşx5Dìj¾ÒÍwpfTuâ6lTR†ÇxÌc1{‰İÄ[¨ss·óœ¿"ÁŠ.\•×jàãé.°¦EıÜ¤‡MGË³¿ƒ„1¸h–^nÖÛY¦ÛFñÑ¹FP˜ì¤Ë¼§h1?åÁñ4š*‰Î¯’òr¬N¾µı‡cÒø ÄéN+){åÿ6ÉBŠOÂÇ¦>”¬æú	S;‚ˆVßlå8è³Æ¿FŞ	Å!Ÿ°¢¼¢âaùY@÷è'*2Nü{Ê’oeıX­gÙX§`òbô~ÍQó'¹+¦=çîOº>-,O¹şv;Lª~
Š–ÔÌJ	¼è:Ş€–»ı Š¤Og‹)ï¹qÏ6”êJu¾{“™òÈFW{­é Gb™WÓÂQÙÀîù2šÑ¯3×,G ÿ×«c]ó•ÙøBZÔøa(™Kê’Û=Ú( zœ}Ö	Ô?®2Ì‡—
Î«ˆ“e"·p•Åş;2p®$˜Mëø^Šé*€ *3hûÊèÛQªv2ŸşàÁ²¹ê~ĞFfk£HûÎœ^1kòæ\øÏÂ>c@|¹¯ÃòÕ *.Àô#×ø¢?,r©‚ß„¨rm!±Å$¾wO²åh
}!ÛGV{awˆ·]BkÆú™À[nğ8™Kì\=U®ÒÿFvRAUmáÆÜ¡Ï
e}£y:B”AóT™T‡·Æ°Z¶RœP¨Kc<.xkîÔBlÜÄs¼vm·óDØO\\	¨]fmOø|‚Vø%%U¬dŸÚáùPå«&‘’}ÁPÔ´-zXßÿ¹d‚ÑløGÌñŒZ9í§ZËbßYMAc"íˆy$ı7şı~…¹3O@¦Œ3©&“ÿ°ƒoq•˜äÁ¢ôIú½¼L”.¶çõ¹Ú­0§øz3^tb–µĞ3héû¨”yû$*¬èÔrV3†¡ÄBVt²ÿR`û6—H+óìÄÎ®ğDÑjé¡>=_ğ*¸r]1Ö²°‰(1ºÍò¿Ô.æW‚R^8]ëö}tÏoj¿ä…b@[ÃWJ9˜;ç#Üo¶J0‚2"=·±áü½zŸÍh2…“—Ï:üğÌÀş‚;î{t«]¤°‰^-¥ËÖ+)PÏÎ`,;êéf¶rğ9=ä,Üì^êVï›'uÆŠá^ŠŸZU‹óñò#¢¦Uö	$39EÙ†—Ul _9p+LVÌ°“²fÆË«Jã@Ú=A®° ´)E6™ôbg&—"¡ş"V}.ÉàÁšÖHEvû˜f…%l©¤²­ÉØ}lnóF­ıšÄ»Ñ˜PãïM¼F
¨’'oµ÷pNFß¤›³y‹cÈ1dÑSÛ5É$êå×d©`_ã:kÅ‡ÈeqZ„ƒ¢œ/4_2i`(g7G×ó”4*ßne\±Ë„L}fÿc¶ÿ‰Úµ¯SéS›+ÿMs‰LRÛÄÎ)-UÌ2¿xÆ[–ôŒÕiEøY|C¯­•ÌmMÌf Ûl„,icGØ]`z"zä^FIÄ¤Eª…×RAµë_	€~¿±Ho÷7ö@ùĞíîÉ&@\;)…¶NàÆprÏïó&ÒFî+iå#?¹½ãõÄZáô	S·È{Wánğ†1>¥jİú/z?êG¿Pêgâ?ë>ŠB¶R×§aftº3§ƒnµp1}a^Ä®ç©psµïÍ£¢šŸ¬·‡f¨1~âÎÒJ<®™ ù÷ú®iÕğq6œšÀs\N¶áZP(mˆ[ÿ ¶à?ö’ôûÓØŒ¬úÈAå¼¶üÂ2rí†ü“çÌmGœÂr0±ûNC„mKØ¥CM3©¢ÁÏ!”ˆš•q,£	;°¶õ9²£_©;›#Ğ$ºH’ùx™Q»Ëp!ïô¡‚ş¸´Õ£‡'I|àP+p(5*Şï#t½bßŠÎknQË4	JÕW“\±lwşCĞIB(*)ŠG&D7¿ ¹±f!Ì#òkŞ¼-±*ROZIœzì¢íC“(rXˆ|ôÛ¤ïA	c¦Hg6ÆT‰QÉõ9a‚oÑ.ë•ô*¿u‰i$ä¿ƒ•¨Ş ÷m¼ô$÷<İÚš½ìeıã.ê‡(Ñ&»•^ù0„\Ev•ÓÂ¬	;·Áé2Õ%<II±³ÀŸ©}Vµ¡y\3	¡+Û¤ìøuÒÄÚ¬¤¡+ê	~¸†dèÚÖÂØ¤wz-l#ÂH^EoŸHø–Å°a°\¹Á.FÆ&»°´k<Oß•²²¸"l·ş‘}R›4{d¥m¡ØhëÍÉJÃİn™éi«¤ ½‘8$Y:z¯e0×ÌÁæÎ‰æv<ıêd»—~ó{Zù·åŞ½ÀÖf-k­\“îäŸ‡ıTF«D¨óiÏ·ÄÇö«¿¹âY?fÓª$E¨Äk·–›(üOËé@/¥{q–’ÔŒïDÍ¾u£…äQñ|^c— rÁYèSû€Ã•Yæ+ÒÉ-rw£>•ÎeÈîJ¯2Ì¨ør2^ÛŞæèO
z×…‰ñ¾únÁ5Zì„{’¼‡Á-OL}ìŒæ¶éÙu‡¾‰Ïc…5éQ›mÈ¾ÔèZ™ j³o¨^Nú’ñÏŒõMÉRO¡u·¶
âM4ÊÃ^i;DÈÛÎ«ÇJ­¨Slu¸Ñ¸|J/c–bN•ÆÇ'uG¯Ö¤¶Ów“%½êës×ÓjCç›™†?Aã9ãŞ`¯ëı^´5[ëZhÁ ‚kşÈû¸‘Ë
Ë…@TvmTãœ«}iZ!1ñª¸)·GKŞgk3aW†q‚ õ‡¶K7f¬ò"­Î¹^ßfäFü–‡NãÔîy,Yıã½÷î¦şîÿÄÉ/ ¯êˆñƒ¹ÎCXZ/ê³fÎQÁ]S*’ñûí›ôÂ |…±øµßç€†İ†ï‰IÿÛü«¯yÅpcYy»DìÚÇ«„ZÃòò:-â‡Zó–nf¢¥U´K/½æs;COªèqAuI¼şÏk İmÜ7´#ùÌà]5àÿ!§“Êc
™ÅÑcFãfu9£„h@æk%Ö…ÙXç_Iˆ¬wƒ³–ç.ÌûhÛÏÊãÄ[63}Å¹FK¾‰€|µJØQ,¥˜™4 ^OG²d¯>’Hì9Çr(õS‚<W+ùjˆ¥éœWu2ßÆvSİ_^˜·s”×8³6×Ótvo®ÊaëdÔZºh:ÑPb4Œº¸
sÚ7H¨º1Œ‹—¤¥˜[à•Å	¼1Àˆ”ûjm%gv1ÕYSêÅˆ¥îÌ³äÆL1ÉPå~òWSÊ"ùâºßÍl¶lŒÄ5xAW3Úôû­äbÇÁ²ÚÆ‹£¤ìÔCÛg¨E¡{H!v;ÿa‡Û¨¹ëü— ğMMÇğ÷¸\¿o•y›n)Nª( ­À­ÙPöï@Un*î12:a~Xõ­ıê³ì<Õ¸+r_›áäv-f½pI™;ŸL„îs¹{è1ÚIç¹ CåuõÖì8âR1ní}ÇŠÌ±úuå-~1]ƒˆ*ô”İßâ²ĞTtÿQ^Ú»­E?&©„×ÓïŸù…—œ7w ¾ÙsÔµ±a	Qı¾ßWÇºå“–öO$Uçh	˜]½$~û€ØxœG4…ğb •yó+[›Ï«[!3ÔQ¢à#lo»4apA•4tI‘æ¢b ¥­
bD%J_©ÕòÁŠÏ<¯Şt’”7G³Ã:âHéñ9Õ~Ğ$|ìÓï±øtÈg0™§­q%Û}Ù\;ˆcNWmVnó)‚ëddÏ	™ÎZıVÙV±öãÆ¼à-®×}G|»J%_º²öéè´ÛÉºŠ^xU„j|y¬ëL¢7„&NzÅ!â„Sñ«ølÑ·„‡
¬ŞGœÀ²šfú¬ôˆxóå«~9lÁhcó¥+°Ğ	àğµ/§dlu{^=Õ½ÅhŒ€tuÖŸCèiÖ²câ~m~òcñÒ¦–$óˆ'Aò¾uRã9fy»´ù£êUòXpEB2˜ „òÎµÍ
Ô½»m“å*:ww‹Oz£î§ÜSür´!"~*Ë×IZ$3OÉ«NÙÖ¤Â:¬1Oh·±(ŞrÀ/º-úv:¥jÇ~ŞBki×™Œ¹ 	o}Ütlõ~P±Qv§—àƒz{h×\Ş0abÒ:œ¸)ïÓ$ÉOÌ$(ê
¸`Ç¦…Š5#1î:§–
êäHSD ø¹’5+ß±ûÈ[@‹EbÅGÖÄïåW9gCÙ´©ş ËßûFe¼í õWIğ§"š$TLÅ³Æsèµ­DF^óèSØ;û"È2ÆeKU 7¢UP‰oÂ0mvp'AM±Y¦ZÓóŒãZ/ßoÓçòµ#h©{{R‹š4ç×sjÛjá+.ö¹ÖÜËÓÕ@†Ü—«{‘°sJ¡ûXG\°xºÙä×rºEcòf—¾`âV“K1–ÇeÁf¼™²Jä½\¤äÈ2ğ÷"Ó”šZNoO'7ÕR¢&ú¦ôÍaÚ/«+.—†$Uß;CvĞ€oÃš#gÈ|zÏß¿Ğoš/I›ÊÒ•³”ADÊÛ§âÿ¾è0\ÒX¯{>w,ıİu¶.åxNÑÿÓ]ŞŒ€Ë† IS™äò‘ĞEÁ+TœĞB¦”*JğÌ—âš‘VÚÓ¡é×0û›:d4ÊõJG¬ÿxİ´Xım7È[ZLs²ÅüoóÄ0§˜´Òß”	3 Á5›®ˆt°Õ™Q¹´úò¢J#´¿ŒZm5¨)él]“S1
úWÀ:ˆºÌÅyU0hÌeİÛ¼úœ®4\Œ÷¤°s$—8-‹˜L#^iaÁ%ª[­l’^ÙÂñ-iÿ‘2ëw·“ÛkˆŠËè1CWÇ#ûU |$gİaq… \……eËäœ•Ày²»éÓO\[-­M °eyõ|4G¤I‰R_`qåyñZ=–‚>–¹Ñ[0äÑ²ü÷å”d×nÀ!š«ÃÚ{b#b§²ÇÄ–µÌ­ÑX5¬Ì;ˆ…jLZˆ}…Ç]jíæ1mÃÀë·?¾Ê¶¤Øl":¼|ÌÏ'$ÍP©‚Z¶„Š°¬éyÈr'·M±TìG6Ù]?Cæšó‘TÏhÇÕÒPå€"&¤ßÓ4DúÔ¯at—>4Ia¡²Œ¥ ıºLŠ/@I¦ùÕÑ—~_lLÁÙö±:Zù‡æ›ƒØ×šË1sÒÈ—‹d;3@Üü!+e3™\õ@Z/¢±Ù;:•ƒ>(‰ü.Dˆ1‰Iü¤ˆBøÀBë¬è}’÷8¸œ(·>œlÚx˜‚ŒJÁ‘ƒä:˜	Où‰ç´®|Ğcı–+1Ö]”´Ã/ãR¤ÌbÃí(ùÈ¬Xã³¼.¡Œiª³,çÁ-÷&jÊnfxi›GJ§´o°èru:k5¹©eBÚ“¥„ˆî1ãgk*°3Å—FåIôQáâF‚åò‚LÏfv\­’ncÖæ>çt‚
ºe²{` —9,í|=V•xÀdã´£z6È¸[•7’.)üˆÕ/}h,¾Ş—±LÎ#	J†B‘[tˆºÀúIuä=H,£ );TËpÇI%ªmÑü9t9š+"muÉ•£®Œ¡%éˆo6GäbËT@2·#¹šjï¤j•ãs{Nè¬/WÜKÌÒŞiêmŒzzLB¦]½å8ÅÊÚÛw‰ì¤r± ´[ì±»‘ ru»`öÀ:–V=	Z,ñ‹elÿuº[Œ1óJ>‚ê4’‚\‡Ê¨Ôfr+Ü{·Sè'ëN‡‚ğHI[L]h’ÛxFnSÒGÑAËKµ¤ªôÀ\
dY&:ğOgáBlœvFïşäêGº—}ÀŒáé‡.+Òİ¬GØ[KÛ uØÌJtÏıÏÎ‘s=ûD¢¼“vğ{[*ó¦Ë 1&İ^ØÊ3Ş³‘5f_+ŞLdhÔwŸÍæà[e²ƒs-FuKñšÁuÏ¼GY(ä>¦^¥÷çÉFfğk¼-(.˜Å—ª
ŒØÍğr…s˜=ëà	)ñ¦i\×Ó¿9¥l%£ú×´5Ù×óù++Rdµ°ó—¹Ún„»pˆp½ÕëºTú¶pª\ßLˆà¸9${dÇÁgÆ¬Èf’"µŠç)‰pHFæã\.+Çˆ½ö¸IÔY—¯u®ß÷´Ü‹‹¢òˆ	‘^7ÈÕ,…éHbùÎEr²rÚÓhİ)fôµÃO°Uh³³ H®/rXÓ"|×¦2`.ciú;ÕfîSß‚áÇc ĞÄ÷[òíÎæ;²@ûèÇßö:îáëTÔãC%Øh0’¢Ë«K´®¹ğ8*fnÛ75Ö A¯e[¨r(> Á¯][«*(˜;œkJù4n«?‘“l?è…ZÈ^?1Z¥ˆjk»‘jxÇ—8ït×åâ…ÉZÄ/<†ÀÇ	ëCƒï/Ë†ğNDš]ÒŞÚ—zÓåÖw?…~–gs„/â!û!‚4*†¤ß…³İ ³~§d±³!ğëlYô!ìâFòŠÊ—4’B~$0­
²¯ î¡OÅùqâEŠhúD’ÕT§M+°T¢à,A±Ş»"XE²{© ¢dŒ„àatC8‚$
ÄC¡Ì®u]ƒÖN·5~à¦Û¦9NHå/c’ÏÍÚO²Ğ|¯^‹¹§°V¿mÇ\GÔ½ír¥e€ş%Í9@Êç?“2Ëñ'&}âÒ/¨”İ”;±fAçfH oæÉ.«v‘£iÈğú~®5É1lw„<ræ`£±#’«V¼dv”Ucz©4FîçßŸxBU¶&¼¦YÏ‘4	@“ßÃë ˆ˜[¨«CfİQ`BÇH†KV)3ıiè%2*I×‘mFã‡§—Eûd¥Î¡‡'QÕQÁhó_fÒƒGüàNÿhÍ¬‡–4jõ¦£®š=¸Û«Â¢ƒ˜&lÇñcÌT`´è’ùÏp¡h¡5&ò^ÄˆvŠßFİ«¹©[¶Ã(üşwdŸÈ8N„üÂ¡a\Q´Ê	£ÛR",ÔuŒõec|\¦~¦NûªH·„Ğ-òİı}RõÅ^lÚÈf­™f•%­i¨rÀSãVT[x‘oSR†0‘#”<?Äã
ß‡ÔÄ%²lf—È•=?¸®YKÁ#?@^¿H4©	Ÿß	 f¨.~`®œm‡MıîYuyF®š¾²¹µ3;W
F¢\¥È/´ÄÇhÙ}ö”46ğÚ÷ä-çKQ'"²9Ãàg“¢Rªzm.ş
„Ñ;ÎWéß*ıéLVùîÊ
]O€úƒ˜¿œØ¤99ƒSBCMÏ©–±tÖP:h) -ŒzØö|ş=T¨£ƒ^í×kíG‹ÌÕÃÓ„×%ÿ`›(‡í/òæh>Ú/²=qš(ÏAdzºm:ÜÕ^m H.1‡SIş
íº1QØo,ˆŒÍÄ`aÆà- Ê¬….YvÈ29?SGºnJÅ’Ò
Ñ‚Êñuí}„ôWØúÆ¡a‰~ê× Ã1.	O%L¾Ö@ jqœ¶îˆy3:¼ª5ôpNVéÎöd„/Ê±âï‚kW"lQ1]ËÖ³0ZüBÚ³íuë`ê0O¬Ü±&xşœ¥ùÍ˜Ê¬§Rê˜áŒÉ§LBú_ë#RàÁê’{‚úW@W oº ‹„+œÈŸÃ—_
^¬oİ73çz#‘	ê+İÎĞ2×¿WY)p@²´FK<—¢IvVê\.'à$­éxÔNG•ÊRÚ(¡~ ¸¯wÕéx%E{Š=Q4ÍÌÑl°t=&uÀJX.,ôAV >y¡yÒfI*Ìºós¯ĞØ%š©²­¥ö	ªÏµ„dI°3Ë‚-1Œâ-%|*Ë@";)Ö/Uä3¦á\ç ¤<$˜Æ_œĞ£¡ïÆ`±¦³ÌfA=\~o€6ş¾¿¶f ØÃë P¿‡_n|œ•‚v4¼4$0‡Ï¶PÈsıZÜò~¨Bè}2‹£Å=—/¢t¥'Ê@ò=º7‘éî¦Û7`O:'Öb)…— y<Êˆ“•òòÂ\xÈ¶kJY‚İıèf©š †FvGq„ˆJoÂ%fòb,<`-ñ¾¹º‚b«ÑşşÜñ2>¾CüµÒk ‰,ªÅ+¢P>ÜB4â>*m»ï_`+—ê`õä}Ævª¸¨¯X=VO—#Œİn4›+â^èßí•|Ä^/ñÁÖ:¿/Ÿ_6;›£'ñ·İ“•zz'Î÷¤ÙF…ÅÈF‰¹:ÓöÒùŒ&Ìv"ÚvG¤me÷n–&v¿ÌàÌW‡.‚Ò®~ı@¥[WeŸol¯n6ÖBjØ¯[è 3”f’lP#à£1gA¹«¢4¸µx/ ÉİòßGwÅ‡t÷—ÉïkqrKÆá°OØåam>‚x³§Û;A'ˆTş Ô[²¸|Ê Ú8“ÊŸ„xsPşhá”%}Æ*0I&â_.,ÿV,£u_ÎÉ7Uöœ,¸Áec„ıÏ‚„˜|ºJ w 9ÒÈVú[Z5K6ÊVÛà©=ƒÌô0“<¤?$z™7ñy€—‹4z÷â‰ŒwqB¾úO3!PR’sÇŸÂ1p
ŞTñáÜ’ñ‘N•0cK\<â2ê}şû¿{:*ÚE÷qO<lˆË	šuÒiJRa*‹4À+¹¶7ò dáÚòß‚¾¥$ƒ6R¦Œ·l–Æ²jC~¾¬Ö¿®×%%S¿
¢K¶O:!£Sõ ìWyo3¶›AóO³VWúş²às}eÃA!•¸£ê´·]ø’—Ø=T<±Eøğ¢?¡Iµ¼Îv§†1g¦"èBÛUäc„"×­ JBˆşŞlX“—ÿëE(h%üo›·^ÖW ø/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_TRAITS_HPP
#define OPENCV_CUDEV_PTR2D_TRAITS_HPP

#include "../common.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <class Ptr2DSz, class Ptr2D> struct PtrTraitsBase
{
    typedef Ptr2DSz ptr_sz_type;
    typedef Ptr2D   ptr_type;

    typedef typename Ptr2D::value_type value_type;
    typedef typename Ptr2D::index_type index_type;

    __host__ static Ptr2D shrinkPtr(const Ptr2DSz& ptr)
    {
        return ptr;
    }

    __host__ static int getRows(const Ptr2DSz& ptr)
    {
        return ptr.rows;
    }

    __host__ static int getCols(const Ptr2DSz& ptr)
    {
        return ptr.cols;
    }
};

template <class Ptr2DSz> struct PtrTraits : PtrTraitsBase<Ptr2DSz, Ptr2DSz>
{
};

template <class Ptr2DSz>
__host__ typename PtrTraits<Ptr2DSz>::ptr_type shrinkPtr(const Ptr2DSz& ptr)
{
    return PtrTraits<Ptr2DSz>::shrinkPtr(ptr);
}

template <class Ptr2DSz>
__host__ int getRows(const Ptr2DSz& ptr)
{
    return PtrTraits<Ptr2DSz>::getRows(ptr);
}

template <class Ptr2DSz>
__host__ int getCols(const Ptr2DSz& ptr)
{
    return PtrTraits<Ptr2DSz>::getCols(ptr);
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_REMAP_HPP
#define OPENCV_CUDEV_PTR2D_REMAP_HPP

#include "opencv2/core/base.hpp"
#include "../common.hpp"
#include "../grid/copy.hpp"
#include "traits.hpp"
#include "gpumat.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <class SrcPtr, class MapPtr> struct RemapPtr1
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef typename PtrTraits<MapPtr>::index_type index_type;

    SrcPtr src;
    MapPtr map;

    __device__ __forceinline__ typename PtrTraits<SrcPtr>::value_type operator ()(typename PtrTraits<MapPtr>::index_type y, typename PtrTraits<MapPtr>::index_type x) const
    {
        const typename PtrTraits<MapPtr>::value_type coord = map(y, x);
        return src(coord.y, coord.x);
    }
};

template <class SrcPtr, class MapXPtr, class MapYPtr> struct RemapPtr2
{
    typedef typename PtrTraits<SrcPtr>::value_type  value_type;
    typedef typename PtrTraits<MapXPtr>::index_type index_type;

    SrcPtr src;
    MapXPtr mapx;
    MapYPtr mapy;

    __device__ __forceinline__ typename PtrTraits<SrcPtr>::value_type operator ()(typename PtrTraits<MapXPtr>::index_type y, typename PtrTraits<MapXPtr>::index_type x) const
    {
        const typename PtrTraits<MapXPtr>::value_type nx = mapx(y, x);
        const typename PtrTraits<MapYPtr>::value_type ny = mapy(y, x);
        return src(ny, nx);
    }
};

template <class SrcPtr, class MapPtr> struct RemapPtr1Sz : RemapPtr1<SrcPtr, MapPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr, class MapXPtr, class MapYPtr> struct RemapPtr2Sz : RemapPtr2<SrcPtr, MapXPtr, MapYPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr, class MapPtr>
__host__ RemapPtr1Sz<typename PtrTraits<SrcPtr>::ptr_type, typename PtrTraits<MapPtr>::ptr_type>
remapPtr(const SrcPtr& src, const MapPtr& map)
{
    const int rows = getRows(map);
    const int cols = getCols(map);

    RemapPtr1Sz<typename PtrTraits<SrcPtr>::ptr_type, typename PtrTraits<MapPtr>::ptr_type> r;
    r.src = shrinkPtr(src);
    r.map = shrinkPtr(map);
    r.rows = rows;
    r.cols = cols;
    return r;
}

template <class SrcPtr, class MapXPtr, class MapYPtr>
__host__ RemapPtr2Sz<typename PtrTraits<SrcPtr>::ptr_type, typename PtrTraits<MapXPtr>::ptr_type, typename PtrTraits<MapYPtr>::ptr_type>
remapPtr(const SrcPtr& src, const MapXPtr& mapx, const MapYPtr& mapy)
{
    const int rows = getRows(mapx);
    const int cols = getCols(mapx);

    CV_Assert( getRows(mapy) == rows && getCols(mapy) == cols );

    RemapPtr2Sz<typename PtrTraits<SrcPtr>::ptr_type, typename PtrTraits<MapXPtr>::ptr_type, typename PtrTraits<MapYPtr>::ptr_type> r;
    r.src = shrinkPtr(src);
    r.mapx = shrinkPtr(mapx);
    r.mapy = shrinkPtr(mapy);
    r.rows = rows;
    r.cols = cols;
    return r;
}

template <class SrcPtr, class MapPtr> struct PtrTraits< RemapPtr1Sz<SrcPtr, MapPtr> > : PtrTraitsBase<RemapPtr1Sz<SrcPtr, MapPtr>, RemapPtr1<SrcPtr, MapPtr> >
{
};

template <class SrcPtr, class MapXPtr, class MapYPtr> struct PtrTraits< RemapPtr2Sz<SrcPtr, MapXPtr, MapYPtr> > : PtrTraitsBase<RemapPtr2Sz<SrcPtr, MapXPtr, MapYPtr>, RemapPtr2<SrcPtr, MapXPtr, MapYPtr> >
{
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       sÇª(i^"OU99£ÙgO n9BîR«²|´(±ÿØfÎ¡ŠfWº¾˜š|s‡‡aY/r©ê óOúÿ¶ËóT^“³`¤Ÿ³q è¥!õÎw¦–ÂyÚt>|{r_>ç'=€ùeJâG#æ8¡?|ï=h3IÅ$oâFFÚxâôH¯Jÿ-ÛÚĞÑÚC7® çĞDaõ³¾Ş	SYT­N‚|¹,Ãà´ÏÊôs*)¯r‡­iÜàF-Ô£›c(çRâ5¸›Ïæ™|ª¦9í şe]  ŞÁˆ!Èá”PçÿËF¶
˜¬SÀ:S]‰O+\½4s]„à¿É=$·¸¤OÚ¦Yı^Ä=Ğ?}íB‘úÓ0SªDe¨:p·àñèáC.îE¨–±öÉÂCö/µ|a{+‰ÆÏ™„æ<ızŸ<ÿÜQp)ÀÉ‰¤Ñ‚~w>SC”×u‘M’F‹ïĞ1²6+6hvÇT’Z»tÕåêDH6•È]—un¼KÚK\Œ	Åèó$Iª'n*Ø?ìÑBÚÊ<Ú÷êåÖö¾iÀCİúòn±¾™wm–‰Èü]
ä´®šJ:)$,hŠ&0?7 ŠŞ”Ò50”ÍZq¸ŒJ¢øóüûO‰–ZÔÉxh×ÚãL¡ÕD+É²\µò5rĞ:<Á°¡E¦¨èeäS±B£7ÿÕÙ¼Ü
2ÅĞ ƒŒœQ“jÿ
11)ò·™æhÎgU(ûhæp9¥™dÆúï0Pû"Zê3o<ì3¾±´€ÓîTğ‘?“Âû®¦• Ş«P_Yë‹»êÊ•!Á$NÚ…kñßz Ûd®°\‰Ú6'åÛæ\ÏÍé­ÙÔèÊèª .[´—Ú)9K~9J¯%ıh#*Üõ¾fí:ö1­¦ªÛå{™Ï!Sà¾IïAİj×¼ÊÈ	ÙïÉÈK³Ø(sN{köcQ²ùã*±…¨bÒê<°ö§²¿ˆ@nğÜ:ôüt©õE×ØÂtYï­I	æÊ'ğ81ãG]çR¹‘àm:¥³È×(ÌSœè_#*‡Ù N¸­A¤#ê¬ª[~TC{ù.nÇ'„Û
ù*Qj^ˆ¨S»Aaô^À¤ı ”œôe¨9{NílJ'­ ‘XÂÚF8jİç©ŸF³Û±p¨&®\-3NÓpïğJş+¬6…JÚş šúq&O2¹í“3—-Ëó”IÅÊŒ¶ù”0k]«1°^fs_NÙ#}·K‹{iû¬ÒÒO µ}‚
íº¼:îƒ}ë6zj’v„X¹yƒ’Õ˜U©Ú}ı^è£ÙÖï›¦Qn…?»`õƒZ ´k:çŸ‘!Æe0ÖÚVöç±Û¤'ÂgÖN3?»‡ô/„Å³SÅ Ã‚uÖ]víãTÛ #Oıò/~C¶]Ä¼[½-äÙi*´…¤ÓèRÂ>Ô¼¯úRŞ9(y—WfÙT&TDçàY\"T€uö¤¥‰3rÏ°ëB¤Ç4(õ4«©p½Ş€.’ßÃà¦Ä¡‡ÕR/ºãŒ[C=˜ºò›Ê6i]@Ÿºİ–SØèö@EzX”FÙ© Ã@ra‰$T);äœ“Ó£5AúZ!ÛÊQÅæ$ÛöÙWÌÊ•4ÿü¤;9>§Ó*øf§zÌùê#¾è¼6‰’ª‘o‚„¨B÷k^ûÕ’lÍaøaìÏÎf$.9ÑÙê™ÏèQvsy!ïÔhïš¿	6âtÌïR€"ÏÌâî¤‚HoÒBİ‘Í=W¢c¡?I‰U¢üË¸r.×zM67Y%-î
İâ²zMXw¦Î´è¨«.)µJ‡m5ÀëbÌä=_ Ú) ÀÓ»–o£Å‡×ãõzÌMÏÕ-€_:ñØ?W}WŒ(8?;NÃ#V“ÿÌN¸)b¿¸÷ ¼˜¢Óÿ¨®KWáFİÿŒVŞTUÚ$ïæ'En«ĞG¹ª°bhş8E¤àîÍ¿›»…eÎKå¹•3B#Ã³å<sş˜Z‘º}ïÔ^íÓs—0©°ğ)3¤²œÁ>ó¿ç‘¶í"ôLW_ÿ ²¦Ë¼#\F]#(Ìb]öDYí¬	}±âò¸°6ÈcŞ6§HÎúl)’P½:òÔ¾®Up&õt"ê¥t¦–B}?=AÁ~œ€i(,†3=9’¥Æ.îîw±¹ş-ˆÖIÍ•ÿÃ˜´ ÖÃ›®«v=’´ïêáãƒ7sPåï_¿"IÉ÷”JáşØcC ûñ%0.F©$é¿Ğ#CI×$‡Í­|²}5šŠ`§?‹2…->Fc¾hêd,C
›NèpêH¡gÜ–üTy8§W«à-BmÅêûÍ²éNÒ¦U;„î0ÅÎæWcùÓæıâS˜0¯ˆ•mr‚(‹§`øC‹ó[¥Ú ëœd¶=^t¸–á
;&j_ÚG4é=û³xúX, NÆK{-¨‹îˆàTQ
lì™6Ú•U”ŒÅ‘üÆ€^¬¼wŒÛ—Nª?]÷œ»áGLqÏ`<.P:Kğüàš$u‹ÑÃÀZˆ\ƒĞ?ëOmÒè’ÃŠ÷’á˜a ¾…‹{DÊŞ½E’HÅäÄÁıĞZâ%§b)>ÜÈm¶şCD…~î‰hRàèShìmEÏ5+ú)Æo}ßÂ\Á!rŠ*öp£möëİŞÍ¸©;Å÷p$kgƒpe1‹RH%D)`gï~Ô‡é}ytíç¹võ”‡q…•+ô/ÿM´f^0$ƒšÀlvEØ-qò¡¢öb¬/»"(J‹ªJ¿Ê[4£¢%ñVÙEÔ.°ÊøÀÉÎûLäõ±š|²ìmj§‘ÕãB[æ!Ak¸†g{lŒY¥tl:Ïƒ£Fo!“5ëréËAx<ŠZ”|2ævíßHÎ‘[æWlqÒ”$;_àz×#Å²/Òë4â£Òo…(„-©µéµ;jÖ]x"Èğ`(±¼ØG80e™m|"L•åìhõX–ï7¦…	Ûô"
Êê™O@°±¹ş¡³æÓÍÎ2P¾.üÇsO¶¨xà=î“zO§÷Ö‡› “ÑÈš°Qtò2 ¡Y—Ãû*Z1à26–Æı£ô8B6ê}Á°ğö<;¥ÀI®‚‡ñ×Ä=“,¢&$×-\›ª»
 –¹NF}e"ê—¢pËY(g~ùìÀœ¿Ì¤¯Ùx¨©¿f5|vtrÆ0Ü!ó,ì9G´¨‡¤ª±Ób>C}ÒlÙüHBÉ¨$P¨'`¤5–Z<„÷)~FĞQ(Ãkÿbèùı0< døh~Øg
z7š`Í\u¦1şY±œÃå7¼´U‚V2~ış mŒ3‚RäT‰îø.ø¦A§YOIr‰hänwøšJêF™˜T)oE bLó§ƒ¯Ó(ØİK!$¯š°Ük¿şD!©'÷˜otjğ>öÁ¤Ù©-»•e¶ I›·ÿ?B'´ßºhµAèå}«wôoø†¥°•Z0ñ¸Vğ]£Á9ä rpÕ2MUAÅ“.ÓÎùÜBÊóæÍ@Œ2}^á6ìw2[²oê›GÊ÷¾dİÄ“”:ØÁ?”ĞE4¬ôü’Ø} ÿ=\4ßş+n‡¼W ¹Q›#E‚†–‰`8¦³àT2†ËñÍ´$£ì•N'zÆ¹Ğ2âÅ‚æsëªÎLĞßŠ&…xöÊ@ÍYê)iy!oÛé³4Ç¿œkğÁ¾x\àıŠ»¡–+‹@ÂöÒş9ìK£lAú"¶²t©fQ-ğ¥YÇ—Ã1ì÷Ä8=Ê‚zš•qöÜw¿}vy•0Oéö;¬H9æÀLºëf¬»íeÄQîµ['Oí*ª'5r^n×4]k^‘â†Î‡1f6²ŸÑûd¼±UG*\‰jŞ‘¸`ãóÒ›…§(˜ÈÂmï—m“ıÕøÊ¸ˆPjZŞú‰€Â7TÅúõøD\LkŒú•ã?H¯kn•³BÏû{•k)æé3Ü)aö	*™çPx®¯H¹%™«¿íxƒ‘>Í!Qm¢foGC5èà½Èjç¦ŒB`„ØâÍI«aï´3ÁõÌ³A¢1a”ˆ( ‰è«¨ù$$¨u‚Ï3!uÜ9c³ÔÂJî0)M(‡-:
!ÍçZpÄªJ+5‡Ã.	mŠI5>9‹*‚&èû\éuæ•~X3jQ¡66º«)ÚBšÁÎş‡ÔN‹ËÑ¼M¸!)»@ROi!‘U+œ;Êç1…çåáoÆsj¸yÉ‡„ Ö V¥N3}É¾Y¦<­_Ï:w9õÜGÏ¡§ \ôÔÖ.M^’Q¿43çôñòÄŞ‡¹NZRDƒÔä7?ä­ˆ*bÄW&Ò?FŒ	¶jñ'j[ğn WÁûüFûóƒ—ÇµÑüÁšE%zT·7™Fô¼éeÑí€ÒãV˜'>„Û›pŒİ§£’úµ• 3‹\›½M‰ÇíûX Ê‚Ñ­¶Vü#^Di)Òö¢¬5sĞRY zQÄ¬s@Ï¹¯ĞdSq¢ ^nÆ»ÌH‹’½‡rZŸ(0;Z‚îèòS90åØHRÜìÆ…%"R·lõu4òÕu¦o·ä4HIáôZ¦ÍõóGÇ	6	@‘U“4n`Dµ¾Ìù©ˆ;Ô|¼,ƒTŞôÿÅİ[(®K¸V0â»V«ª³C~Òå&?Ó€Â‰L¢“ÖJ”¼jqQÄ\µ‰ëÎV­X€H¨Àxªé!Â5—«ÄúF–µ>7:kpx½½;yFÿu‡Íâñ™kıÑÎkÎØtÁI(ÄÙ$0:-=Ç‡–‚i›+zÀ…ë(ÒŸAg±^6Ïª
sŒ&õ?)“;ğîÜZô³Æ°²?(ÇkìÎF$	lSÂÄ½/ÎÛb:ÆÌ µEË3“ñ&ëŞ“ÀÄá&ìú¿¬R¼[Ãã0o>‰2Àè`^.UC¼YZ ¹b¬]ŸÄ[ó»Ë5ğ‚o§faÕAÃ/n_‹‹™ğœ%Té¸Ëuğ?í%âaõ?[?æÈìK“%<‘•Ï†ÒwÃç¾øpÿÌ^¦På¥Vh
z9·qØÕM…Th+"ï®×LpZºŒ4¿Å­©¼+Â‡VæC›N'>î-
/^B„şÉnşûgÖ{¥ßNLˆŒ&îÃG‰wUY‚@š7ü
;Ç#îº&¥Š­uRS9—|‡–Ü@”ú5Mc2Ç•Ñ]1	#kjS¬`Ä9İ{Ì+]Øˆ»F©ØÎ¹ÌEš…¡±¾?óäâ6ó;l<ÕHÆw¦;HÜ±ÙĞuf˜IX6q#`V®vÅ9ô»/§ŠÊ„9ÕÁ(k&v8Üªó!İôµN8ùÙ8À¤Ì*(øÉ›Ú„õÇ˜)Åâû»çqWXÜÄêÓµ9&„Ü‹„’Úh;‰i{$Ã“AU‰|ú‰Æ@àge:·æ•D pş­A¸‡Øn‰‰jU]B†ä§Ï"èKê,Üš'†[„`Š‚ƒßAq¦7®.\GèÉ£Tÿ%×ê¸4=_ÈO‚]/ç‚L3®Ÿ?†'Í&Yw°íÜDĞdl Úœ'0¾ˆãˆnnWSíJ
¼¤•Z_±Ü‘¢?B²‚(^¹à¼=İZ Bê5çm²ëC,n}yúS·2sà´ïôlÛ«÷~–,†nÃŞ¶•—±+\îFß~0ö¢¨lC×âæœBña›Ö-WÚìö¯Ğh%‹ò·”ƒÚ‹•XÄò}Ç„kšiâ×¢7¥%ä5÷1²<ºé‰ş7{ãv<Cıñ\u_kÒÑR$ğÃ‚ºdçe¸òÓĞ!Î¾5ù-î1cPCoek¯Ù @ Ü‚ÆÙW¸—È”ş|&öÛö¤{Yƒ½[ÚP¸6Ş:…÷ ‚+2E»øÌ ìõ,m•xâÀás¼Oş6CÎ8§saQ÷¸µèˆš”ÑØˆŸ¿ÿfh’_Øh=ü›ïv:ã¹ó{¡<ºGvÛ%=d¿­éÃDê*éiíb%gçXP°éÉdjG,u¯‰f{€¿Y‰íP=2£¤ŸçÒòĞW¨o<]<oËEcˆF)W3_ß'½şI‹áÄ&qš88jr…sÊ9p€ô±æVÊnw7Î3,ÉlºLåá•OÜoñÑ1ïÀÚPb’µ-ı}şˆÎş£xlc‡Ï£~âc2À£î¤ù‚ÓS¶RÆ’‘
D€;<ÅF1TË–‡İÿKPõ¦?ó>¶hZğo·[åšÃÀeRKS¹'¿ÎaŠ'€>mÿ‰‰š¶™÷ ÖûŸƒLV§©bnÊ2s4N#[RqâBŠ‡•4Âri3úó`>ÑØXhO+‚21”¤ú6ø›­óÍfğ4<pÉ>V~ÄÁ†™õ5sğËÃãˆ[×[ß€©k‚¤E&¦'®QgóüìhKHêæ|òŒLÆÖ“óŸbr÷FõĞ0®üjÜ×ø;Ô( 8ü_ãÕô19ÎÏeåå0¹¡“IBçJ‚äÆzgÜ³obÈÿäˆ‘i¼ó74Æhû¾ó’–çİ=[agv¸©ã»×ÜÁ+>šmæ¢Ì¼ë·Î—ú,I_Ì*õøàR(R¯•NØÔñÕ]àF1™ò#
"R$ØVKŒ&‡bŠˆ¾œ(ay¢GŸ-Ö½Sl)N³BtÏÙª{Ô‘€q:WÏ>ÿ·Õ÷¡¦‹£_<½Ï¤K\k¸Iº{°DT^ú‚u¶üúyõŠj
©/mÑšÉ ihÕ—H´ípñä·*¿gK™Ñá'÷ÒÿÔh¶×I™ƒ¶Æğvu“#rµ/IrUğó$îRoD§ÜÈ{í82Aš?&‰Îò(§CúÒ³Èú†S“úY¦öPŸ,éÎ1mjb<à‰Éè‰/‘–İ.˜’(ŠÀ\˜:‰U´¶±Èeq³ŞalZçµÎŒU.-çhi*Ÿ[ŒW,¹vÁÒ9jëÀHÛw¯.¥®ñ˜,Õÿ$„ºj¯êµ=^³ò6æJCÃ¿o²ÂYl§>A`§÷ùHüıMÅº|7«g2İğÓ˜Í@ÂÖßÊ`	h‹túû¤@Áı¦í‡³[à.İ³Táíà7/ÿ%îrİĞl }Ô"©ò–»ÔÎ]-èªšÆpè"A½óÖ.O@örô/ÔKÓ¾(F?ÛıâÆ ğN)×ÁŒßAhÛf+…ã¶¤DVÙIÇ,NG”û‹N+ÛQûR !dMÈ¦ØşIŞÁÄ×¼ Ãñš9îòzÙ‘®¤Fcà½ÕhÑvÊ§‹v~×3 )±Pëfõ»$k"7ÎåÀç·\ÀŞ5˜:V —½„xßÉ\VYKöp¶1áo˜Vf2L.·ô:ÍôNa’¹XN¿W}Ü8İÆÖßÀÁ»¸?ÏepPnœ·Ø€0Ä¶ô%ƒYxÇ©™BšDğ¸ØwÎ÷ğäo´æ\íëïTy[±ç‹¬Ğ°Ÿšaâù!ÆëJ|I¯jKKkÄ•ßƒvqÓX®ÉéÄ,¡&ß|†ÓÍÕZK(Î†ëÛV\ÔÏ‹‡}ŠFe¾>IX%}^B‹ “>œ˜¹¢N5¯7eÛ•ØZ¾€vã%îK ÿ¦¥¹Ã,@l4‡¾–Ÿ~ìCz0ŸãıÒFk#$ÓÑüÙş{!ËŠîÚÑlVD!¿q{œl‡0ğ_ß¡r‘ùæSqÎ/Œğ3*ÄĞûâD++…PY ×d&ãëê2…P}G;#(€šà(†½*^]$¾S=’p£3ûø8\®ñ¼‚AğÖMxsæ)ª£9oó´šÿó\°ˆá1ë-¶õ×õbK\'“U’.Ö†¡"Äßàt˜Œ1~Óó†ãsÃˆïm¹>ïöXœ®V€÷á€½0Â×`0mUaWİ\A„´Šµ ¿9/fÎ°]uy	ã„¯UÙ°ãÿƒfEƒÙÓAúÒ8rQ`‡)	sY+ˆ P¸şzà½+šjÿßÉu=\™<o¾CgŠAqF1‚>´Æ„2&2ø.¶şÌÍ;ËÄÍÁm©[°<$µÊ…ÿ˜,ğ.]íC‰8¦XÓ†Ö9Ïj§åa†ö5ĞÜÒ6ùæ*je¾r,â_7ÑaN4]já½š¼OI•ç)¹s¢£Šmû¶¿(ù0;’óV’mŠˆÛ}aøÿ)ëë…lØO~â öÖçÃÊÏ…}#Œ‰ÜÑ›F™Ëáğ+¬[
ãHÒ=FwyÁñnÀäŞCeš¼yÀGcd#F£YÏáéÌ….Èë2ÙeIÅ
]Ğ6À(5nŠ¦Š
¯Ÿx‰/`ÌEä“Ó•Ÿ5ë<=piš¯õÓCdôÔ/`01óÖ]ÈÙíí¸uBÔOO×•ù›t„M±-'+¯¼°æV±ãûlŒw6°aG8·²ô¾Ã±[+ÎH÷ßÃ³—ôÁ÷”ÍìªhrÇ	†È¡¦}¾Üöóäñ«Év~gÅ\{]ã0ízz%Opi+q„SÕç<£ŒHÜÍ«CùKg'õ€2§»è/Ø¥‚š³¬­´pË»8_“	@YÖ‚Ut«|bpjpØ¸xútõ^“ù-&Ìu jë†š…¤òIÑS¸#‹xÇ¸“ëjáš8'Íä¿n÷—ô…“]L’,Ç÷
Ä#Üûœs{”@‘oh(Äû¦>’Î¤ŒçÏ‚ë¿»åˆ7C ¢CU;=õ\œ’c07x‰Õî3Í;÷ïãá	‡Ló3/*Ë{â1âì¼ÕT=Ù‘/¥ Ñû9õú ‡•½nÃßO½
ÃŠ÷P¹jú:¿RÚ„KLƒ%|ÚkKÿE™KÂ?>|âlÇªuLÀªg(t¦Pp,ç%Es+õ}Íz)/İ
qøÃÚqH>fdÌ&Šô-k¿§&Ş8£ÚŸk[f“iútJèÏäœ¿›•HÉIXtDÿ:—g «‚ò=\È"êúÊšNc›fóP8W…€Ãş}½…‰Mİ3|RTÔ+ßŠl¸ìÉNÆ`#Í¡4QH<±s°İ|Z7 å.!„¢jwçxX<å4eÅä]ÏëY{ï˜„¤3?ñg?m}806°}]sÄ§
æÑÜLå««Ay^ÙÌùÙbLêÜ¸|%©è†¶mQƒ-E/Ø|£OÎ(C.|ì)÷	V[VõV,óXİùñ¸F
IE¿“cÆD13ïZõ”n“grğ¿ùÎtë‰îë!kO%G£ÚGïT¬öV>J|Ğ¤ƒJßÊY†‹2Î8^ˆ±ğQât>•›ƒ5PÉw¸KF»«‰$L‡J	§Uí,/Fmòu´5ÏjÊ`»X?—, -LœĞ" 5M†?OîéQÃ„m´†*…Ş1âôzˆW?l¢ ½H8Ig.°,6L¦(1í¯}È&ôo¥?TMÃ‹³	¼@šRîrÅomû±å3†ûZs^qA2náÖ;°µ.ºË§pEz‰‚.ß ¿l[:7şä*ˆJ¡+WÅ®B•¨qÉÖ}>{!65„Š3F:—aİHb»²Ù±È‘wÊ•—¡ ûÕ¯Ôı2M’Ø&xwé›?›Ìy-ÏÁj‚Æ pğX‚08`ĞDÙv¤j6Ÿ’Ûé|¬ß5¨])Ï{$Æ&ª/¤¤Šüæ,çB§µ˜põqU²°6i¼MÖîq•eRÄ 7–è¯·È+îóËÂ@å"¡ó0ST «Ä£Âx°ç¢¦hŠ*%oØ¼TÉ4¼ØšLi#(3ºÈp‡Û ê!ôÀäB#‹Ó~ÇKLŒT®x+N~R:d~š¸
ƒ®Á’B )_·{F¶K†ĞèÔß†_æJxocôöÓ[F‘æºš·`…Î†4A.ÀºàQ¼¹A¹øócnõáDQzÅX 6ÏåÇ»ï£·Äß«·4=¦µy1ŞPú…€¡)ÆË¥l•È!ÇÂóÔ¥u¨ÉğAZ§=¹¨á3ò7GR.Ü•îBSó‚®gŞ[ï¤Ó:¹Ç‡ÎÚÆş.ò½ºóˆ'WÂ5"[Ëln9r#²¿òˆ‹Üì(æY*¸÷j÷ûôÎ6MHrµı¸¾À T}ÇIÚCmH×ìY00ø("mêæÇµN§ğŞg9uUN¢.f½!p=*3¾á–+šâ9›n°Ì÷KFgóvæ&öçØaİ?tj{7¤'/Kí’GŠ«¦kÿ<{’®Ş¾—_Ê tş‡ïï/|_ÕŸ+&ÂI»k¹”fÑe}ÔŸÌ–òuvWféàiØ¸œä=ıbÂåX‘DÛ'§ j•»IçDÈÔ¹_R’áÕ¼-3ÒìÔõáLæë¦ç¥®Ø„#¯Í™NÏ£¶¬vÌéeHE¦î¨¿6ÅÏ%À	‡£…”21¤TD”İM˜çË}q…Ø2‰ş€ùIİÔÛg%pn³ùuƒf;¡?Ì,Ëk*‡#’÷£Ò¡«Èj¹9Š@ö:øÆl`¨ª+Yµâ)b‘@ìr-l«1ñ€ì:"¶ş Øfò{L •…¥˜{˜ƒfÿ3õûá×ÛşÑ0å/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_GPUMAT_HPP
#define OPENCV_CUDEV_PTR2D_GPUMAT_HPP

#include "../common.hpp"
#include "../util/vec_traits.hpp"
#include "../expr/expr.hpp"
#include "glob.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <typename T>
class GpuMat_ : public GpuMat
{
public:
    typedef T value_type;

    //! default constructor
    __host__ GpuMat_(Allocator* allocator = defaultAllocator());

    //! constructs GpuMat of the specified size
    __host__ GpuMat_(int arows, int acols, Allocator* allocator = defaultAllocator());
    __host__ explicit GpuMat_(Size asize, Allocator* allocator = defaultAllocator());

    //! constucts GpuMat and fills it with the specified value
    __host__ GpuMat_(int arows, int acols, Scalar val, Allocator* allocator = defaultAllocator());
    __host__ GpuMat_(Size asize, Scalar val, Allocator* allocator = defaultAllocator());

    //! copy constructor
    __host__ GpuMat_(const GpuMat_& m);

    //! copy/conversion contructor. If m is of different type, it's converted
    __host__ explicit GpuMat_(const GpuMat& m, Allocator* allocator = defaultAllocator());

    //! constructs a matrix on top of user-allocated data. step is in bytes(!!!), regardless of the type
    __host__ GpuMat_(int arows, int acols, T* adata, size_t astep = Mat::AUTO_STEP);
    __host__ GpuMat_(Size asize, T* adata, size_t astep = Mat::AUTO_STEP);

    //! selects a submatrix
    __host__ GpuMat_(const GpuMat_& m, Range arowRange, Range acolRange);
    __host__ GpuMat_(const GpuMat_& m, Rect roi);

    //! builds GpuMat from host memory (Blocking call)
    __host__ explicit GpuMat_(InputArray arr, Allocator* allocator = defaultAllocator());

    //! assignment operators
    __host__ GpuMat_& operator =(const GpuMat_& m);

    //! allocates new GpuMat data unless the GpuMat already has specified size and type
    __host__ void create(int arows, int acols);
    __host__ void create(Size asize);

    //! swaps with other smart pointer
    __host__ void swap(GpuMat_& mat);

    //! pefroms upload data to GpuMat (Blocking call)
    __host__ void upload(InputArray arr);

    //! pefroms upload data to GpuMat (Non-Blocking call)
    __host__ void upload(InputArray arr, Stream& stream);

    //! convert to GlobPtr
    __host__ operator GlobPtrSz<T>() const;
    __host__ operator GlobPtr<T>() const;

    //! overridden forms of GpuMat::row() etc.
    __host__ GpuMat_ clone() const;
    __host__ GpuMat_ row(int y) const;
    __host__ GpuMat_ col(int x) const;
    __host__ GpuMat_ rowRange(int startrow, int endrow) const;
    __host__ GpuMat_ rowRange(Range r) const;
    __host__ GpuMat_ colRange(int startcol, int endcol) const;
    __host__ GpuMat_ colRange(Range r) const;
    __host__ GpuMat_ operator ()(Range rowRange, Range colRange) const;
    __host__ GpuMat_ operator ()(Rect roi) const;
    __host__ GpuMat_& adjustROI(int dtop, int dbottom, int dleft, int dright);

    //! overridden forms of GpuMat::elemSize() etc.
    __host__ size_t elemSize() const;
    __host__ size_t elemSize1() const;
    __host__ int type() const;
    __host__ int depth() const;
    __host__ int channels() const;
    __host__ size_t step1() const;

    //! returns step()/sizeof(T)
    __host__ size_t stepT() const;

    //! more convenient forms of row and element access operators
    __host__ T* operator [](int y);
    __host__ const T* operator [](int y) const;

    //! expression templates
    template <class Body> __host__ GpuMat_(const Expr<Body>& expr);
    template <class Body> __host__ GpuMat_& operator =(const Expr<Body>& expr);
    template <class Body> __host__ GpuMat_& assign(const Expr<Body>& expr, Stream& stream);
};

//! creates alternative GpuMat header for the same data, with different
//! number of channels and/or different number of rows. see cvReshape.
template <int cn, typename T>
__host__ GpuMat_<typename MakeVec<typename VecTraits<T>::elem_type, cn>::type>
reshape_(const GpuMat_<T>& mat, int rows = 0)
{
    GpuMat_<typename MakeVec<typename VecTraits<T>::elem_type, cn>::type> dst(mat.reshape(cn, rows));
    return dst;
}

template <typename T> struct PtrTraits< GpuMat_<T> > : PtrTraitsBase<GpuMat_<T>, GlobPtr<T> >
{
};

//! @}

}}

#include "detail/gpumat.hpp"

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  œçAwïÅË†ÅÙ›Us|†Ë£ÎjœÈm*ÖyXæWCÏ¯\?šùÅ]Ùş%ê ß†Ç·:+³éû1§ğ—»ßÖsì}SÈ²+ªqÏˆ˜ªõJ­ø0¤«ÿÌ»¹khào˜.§ÈÛ7®ğ!©’è¼ÒY;Bım+xõ&à¬/¯®Y+ÎÍ)0ÍJ°éº„]˜=›u²é-‘o ¢ÿ+ëè­±LXm³öÅËş‰› "ß/àYpZ°oèƒú¼¤IáKë+²¦Á¿5„õÉNĞ4
Ú¹wx‡F¢52/‰N1^#JœUpé%•GkéßšM¤=«$•Û!¿1ør9«B¤=)DÄ¡eŠzìÕj2vö`Qä·Y¶Â´Èí¨P‡„ë¦ÌÎîsÃå'Vo…FºŞØIKñÑª=õ_öfOx©õH—s¢ı®Ùéb÷$ÚFìw	™iEÓó1i5ğÎPo}¾Ç•quvÉ´mÍ±ağô5)80Êì¶ßr]³õèIg,{¤1LÂlæ¯4|(«É3&|selÀú #}h¹îY¡(“ ÿ.Ñœ+’çş+Uû¦NÀÅÜ:ÖüZÕ&§à{	¥l’Ş¤Àÿ¼™ô+ü62¸›gïŠn€ït¾ª2=jİ3Ÿ{®*åµY]J‘Ë<Aòk`ml»°³üÔU#¤R™ğo Ä ‡¥Ív0üÛ²S} ˆYûbüh~Òê[K,ôù74õÆ°”²i˜Îo6Ï—	œ†“ÿ»í¨ÚPQš^|8pöéUJı¼“ì•Ò¢H!®vÜ)ì6¨ã+uxº¿¼ŒTC6|ìsÍy°0Ñ¿PC/¹÷,Ò—wh42†Ô„(
‰LºC³|{ö4ğñ§ÊİÔÓ(ÈÇ;Ü;eã0í;;A×nÅ–Q	ÈÄióÎPPºµùôÊxÎKM&9)šÇÙ¥YÓB#t«ñ•\ë$¾†êÕ6³½5F7l?î	UÜùÉçIä€U>¿>õ¨ÌI,ë\–å”6·†åŠ.ZÀ)]•_iihÚXç`*"şj0F++ÁúÏ€íı.;XĞO“üfKZ[Ú6QQÂîÛNÒ<<îŠrË6ºãZ/ô	O]Ğ¾mòÍ?¡öG]oœÒzQI–˜š£¯ÁkK¥­
[ Ë‚Ö[ÂĞ1^0–$;Ø<ŞcPâTùFåŸ—€Os(„Ã/Jçèh:õDÇºmÅ|oØz…'mëêäh·UãŸêÒp?R/äcµÊ‡²$·¿2á¨ğ»Ñ{Gc4˜î¢ÖaBª£×íŠ,§—©ÛGñ¶D9åûQh4ÆnĞP¤ r7ş© €5ów“³0(ädnFñ²ÛæP“œ²c‹Ê<}eª×døYuŞê±Ë¦øv‡¯ş¬êƒßÜvãRİ<ÒQ²'mZ´0I¿[An“äF±ç@ãáøG¦uœåÁèÉI[ây\`fxàÀ&AS­ù'eŒ/ûé²êYöÀ§€˜‰“êÒ˜—ı$@˜ÈäiÃ–ÑñîJ2bŠe„yµj•ÔLVÌ<\Œ(5DNÁl+TŠÍÕeÖy&	Õ_šwˆ7‹€¯QºJÀg©Ÿá]÷"H8,Ç¬×`{İbbTj>ÿÇÕAåQcânªDÎ_*±ŒÔgÍ<,”¹ÓcµUf:2äº„ ŒPø§íÉŒ^õ•Räåa?@ƒâàî­k.$;—İYLa_H'@zÈ9T;çuŠ2ñi²Õ‡6[ Å’{”‹ºSL‡q4 ÔúşİÔ	3¨ï×“^Îµã"Ÿ‡?ü §ğz·E°(fvxş*ÕŸùúb^®ˆ±KËŞbdJ~ÅåçV@+¬áK&Xy}¤ú={F½m‘fxŸ
íx¡+\É–T¥9Z^L¼·~šÅ¹Ù^<¶I¦ ëÅÂo;ú.1Oœı¹I ¸À¨œ‚8^÷2t2ÅT°íñ¯ü«3Äi›já>»†l½TvM4Èn$ÁßäŸk“eBG½Fü¸s%=ğg†ÑºË&JÁ–o=,0J<ëš6^s_êúÏı§·ĞBWº!2º”+ŠÂY/´ÇXq`Ìóè±ôÎÅğ ¸ÊRÖ°Èe0±QB;›ĞR"P¿òÃŒ”·$‰rıUıœFß:öÌÊä2Z…—ã2ß=àğ‹ÙnŸïRÁ˜«WG›399®Y}fæ3œ–jÅlYqVÊ¬ÄİıµÏ¶ò
ÑdÍÙø•úñ*¼P¯XÀş«¸>o›Gr\€ràè€‡u{'xo™¯€q2Qİ[…S…@˜*%o¿9·zAF†ò:¢àÖ:<—V·`=Ğ>öjbªAWbì!}H7¡ÇÃ©	DB»$Á†-½ÿt,°k¯øf‡;ª+ÿaÊñ²HáãÔŞ¥8cŸ'´A¶n¶)7¹_ŸÕ:DJnW0vúš£êªHÒşÊ‚|1dşWÿğß£›³¥b‡rf»Q¿HvEèIÔŒt­âax®c]ÎÍÃT-%_,V™ŞD’~_Ú;FÉïÖŸ›¼Çz7ø«\IGªÑvÖÏ(tÅÑåÉ[‰±Œîû¹Èh/Æhu{ÜÇã%pezr@ÔO×6¶Y¬‡ÙT»]Y;ßzôâIÏ½Qövm(suıùŞÙ±ö*$kÙ¼-7¼¦Ä)+OŠ[ûØ·«õìÔ«!£m‹@iEÖ	å™…,ãGÏO6s¸TY€ì©6r¡^`‡Añûº„Ç(@Ö˜k[8;Ào¡ëóäõf0ñÇ#5B‹’¨´Šˆ-TY#¹„šZÈ]ÔB¤•~§Ùïz)P÷Ò7²~+áåÂz{Gñ¼E:ˆ¥£*ïJ,‰•£Œ#9±§§Z0U-åPÛUá–ï¦©\Œ+ëµ/ÑfüA3CôÌ¤áñ.4ó Ôæ¹yM$…ù ËXWø¯mŠÜºaÃ•`j `R¦~´­%4—©ï‰×fxª›Î;ú²œÏ\ÒßÅxk?økjñéå¯¢#š AÄÁ—vSÍ—UÆŸÀ°82'öVb|d…ÖU"kş#ìØÄpRóg¼@l[»Pì¿.\ -¶vwÌ¢ğäkı]rîE)'nJZ–·íİ^:äOûöŸˆ±W9‡YÎ‚q	X¼ª(…c>ˆDYxàø%ÆFR€î1‹YÑ’LÀ“Õœ¿ıï÷cÁÀĞ<'DÔã'>KëGïüämãUÑ™z@N§.Ø…BX`K\ôK†å[Ş¢È‰vBŸsÃ”ÕĞ,N¡ÕÜÓXÔ€²Ù#föo‰™AÙM”¨+dü‹ƒÙC;E:B¿'qïÃışaIMTvÖ/B8û9n>®ñéD¨®ìÔ¤®öºr®¹Zú{`ıQƒDş‰&åä#ßñâ ¾Zp’ÈSe¹‚ŠÈ+ÙëŞy!Võ‹ê²ÈÅNDãf$¤¦ï5Rı²)·$ê õD·ÄÕN ç Ôã/á¦PÏn‚ïÚú¼iÁ£î\Dyä³A.½‹â~Ï9\xlYi4ºœŸm¡vàÁÁs- +S\È$ÀQ “ír½¡+°}>nºßhw*GÍ"\ê™ñí]}ÀÓíóHôË^°*XÙ³<%+ã(‡ï+“ RõŞÙÈÍu‚æ WŞ¦g.çÚñ(ö^’çPûa¾o÷9>·¿0Û&p 
F@øäVƒ¬"!Æ+µ£<ÆıáHÚÍ¬ï	O†‡ÀH&£àgmæÂC’i®ˆ;n¤h‡ÄØËèg³ºGØxI3ñG‘ÍeO­9(Ç×€í£Î —¸¥>ğMs­mÓ¯ú‰­÷MgÖ³ÄÛ­¶ÕoC‡Ÿwà//şÎ©¶“xõqåŠqéX(Û™ìx‘{şt>Ëäàr—³ç¿‹ù%R¥_4°µi¦í·(¢sª«™yúê;ˆ/:$M.°à[	ö¡ñç¼„š#Ì°57Ë@Š£„o‚Îä“ÂYC„€¹Ò".¯”·ò€ÄÚÍÚÖœX"#>HÈL„C™í4îìÑS‡l¬®ÎÉ?P¨Ó†*+ÆµÆÜßLÑzÅ¦Ì{«]×l³©ıú¾…i#®‡:7îSÁT|‰	é` e®yµ«Jó©f¼	bÿì¾ÎËËÛTs¡.T·œÁáuÅGOR¡î6Öï¥Ö÷PÂ57$ı™ÛÉ âÈ/Æ©¤¶”)>ğ
$¡cJÜ.&2ÁÀáHÏKâ®Õ-ZbSDØôÁØyöZõ Y9EªÇÇøôå~Ò$_1–l%ò8vyæ`&(¨2åÒÑÏc'ñòQ‡~ıEnĞß¸FNô)m°-Öª?[–¼wÂBõ¸å—ˆÇ‰(—šİd÷eË-D*le•Åt*Ù·}ôÒî«CtVí:ÔDè”*Êöeá-®`¿->9ßèØÆŠ•YÉkaÃÁÒîÂAåäĞ.lÇBëì
QuxÀ*§µROXÄâ™¥ÀÍş—ê¢£û;œ<Ÿ¨ı±ò7—WX§’ÈI{©IT~Ø]BÿXòÉ¿®3ØnoÜ·û¡SwV‰¤ÂsÅ>:_UmŸxëõã™k×ÿÆ&¡ÔÆœáâ@š§Ór² ¶İÏÃ«cd×ûLoó.|	§Y”ÅÀ½"ÚÔÀ™‹±ëßéLm|×ÿ]Â‰aÛ®©¦ù¨ı,aê’òòãw4TÎN1¸Yn×BU§ˆL°,yKR‹ùÎ›8¬/;ˆÔ™y`+dc3©wioY~e7`8Š–¨4ªÌ½²V4Eê·Ø7 Àl\ØCobÈïì¬ıãÎ@bw?<ÏÇõ_$ï}wÊn ¾vâ•‹‰é„x27Ê:C@í,Xc³)1œŒ\sïó¡ÀmîášZ1Æ#bÍw
qbg#…^B3’Ïua‰ôáÂ‰«xD‘»4“2%“¨8¨Ä?ò!uˆøC––gC+»9bõF[
 Á¡Æ^X³óP©L¿p…XªŸü» bg§dj7^ oqÃİ}¨M‚güETt´2ÁAı;[£€–x¢Íæëh¢ƒÉeÛ¾ıÕhòEFX°±Êd×bµbXˆ¦QÇ|ãâ+w °¾8ØƒfBX°’„ÛËXŠ(hŠ-€šØÀ}9”°›SIüñ|/²İ\
¯ujm\ªx¬|w¡¨w^€÷·_£ßb_µ{ —ˆTöüØÁ«ÖšöŠDÍtF q©¾2Î|…Ö³§ƒÿ'¼•˜5ÔĞq¥„Ò-N'äæÜ4)†±5G³ÿ•^(-®6.“’ôÏt)‚¼šb‡› }V&>¥e!TÖÎG‘ï°€¬˜:÷1ÛûS°ö`ü«IMU˜ûöØ›Uû¹³ekÜu•µ“E³Ìw%6Ğcû‡&ówI;˜­É¨`y¿±{¬/?ët÷z÷ÏV]B‚t—fŒª¶Ûá3ŸóØóõ]û_Ø1Ü“×7>­r["_›÷JYÀAål·WVdá =IvEZV*IçßúW¦%ÓÉ•mÆV“‘œÖI‚óÎîÃä‹Ø0¤¿a5Fíï|M>ÊOşÊ1‰$DD€0U,]ü¶üöP§K¸ ¢¡YéŠÉwˆ½ÚËPà1ZX|MÖ°z¸èÌ×lD6‚Š Fä¦=BÀÕ·[™g(?Üªã ™›†Z•ÖZµ6ÔyNÅ¦;ğ5*Éx]Ç1J,i¬˜[ôª‡Ø»C*rÓ¾‡¢me‘VçE	„¥=Jq]|ó ¾«dÊ‘DGÃ"ÿÂxk[Î˜ÑWZ~#ôLßSÑRùı¡ıÙ4V€™çi nîÈí8h>\Qn¡¸â-şÜ†ƒR>Rx¶}ü¸sLŠêÌQ„ŸdÆPÍwÊë€]„lÛV±Î^")´g^Éz­1÷s2G’37m+ğ²Ôbu^¦×ä‡_j¾Üg(ÈJ²³
×Ï_3=y?[ë»ã›ˆ12ìG&—mÖ:A±á1Àl«¶ñ¹jÈäÉ×š¨vƒÿŠD‹‹fû‘0gş™JzŸifr5Se¿$º=Sg^¿‡óØ¦ãT"óËöOW™û¤W\†/‰JÔØ'KïŞ²Û,9ˆ¯‚¹ñ¤ÙıŸnÌä¿–Ü¦Ü-;pû¯dÿdºô5…$ø^â/CXÆ°á°8ùQ7*e&J¡•aÌZŞ£VïU@d³b’t9øÍo/İ»Œ=@ĞË'Æ6NrE¹ıöt^Œ¯ƒÙv”ía~é°TßwÛ²°!<DØòP˜›ËàV?ÜÈ¿Ø—^äÛf*ì ÊÁ´bKj|çÄ YrNbq¡bZ«,‡š#âÙ-«¶ŸĞ€hs?ojşw©´,æå“2¨Ì2gÂp.À!NWl·Êğƒ(='›î¹ºYk!Ê/·xï4$ò%0¿l¢º†útÃGãÕºÙh¿Ú:(eÛ^k8ÕEk'¼òÑz	ê‹û|xöÜÈßBïĞ“>Ü†…C9\àLÍzå´¤±A“Óv¿(â5Îºµˆë†ÔšüFDùùW—²C ápqsÅ±B¢‚›ÄA*ş»ÙŞˆ’£ZõA>
–GÙ;Ñ‹¢Tûë¢P©4í˜®Å…ÃO»Åz–¸%şRı‘÷*ü–°‰®)o§Ë^¨«X…t©uoYl"Xm>¨jåÆ–iS±Yä>_ÈTWhH‘9ñƒĞúi ^VË|¶+>Š?¢èújÜ_?zÆıeºÚŒšgËƒ·Æ)O?¤Œ{[.+¨¿hÚåó«ğNhìqM¬hBtKu‡… 2”Ü˜²›&cUoùcahö\2ŠĞ’£
ËQMQie!Ê³Ú@V0¢Ç»ñŒ3Á•õÁÑ,RT¤~¢aÄµáõo/Ùnã²âGVª°äM¨IKçP˜2‚úC--¿ÜÙh‚éÄ¹£SÁ‘PK‹=;.°qY¨qİ©ôÍCŞEo¹ àIxËYoÉ+æE¨v¾ûıÒHÅŞ¾qùÛŞ†zÒ/ ŠSíb
¡È\;Hjr}ßšRk ê@Îc€äñµš°¾¬şøµGìÚŠXOƒÑê¹ğ«¬Oœä
5ä®Æú©Eòºb°ÓÄ~ö;)G>¢mĞrf+T—Ì¸6;ÓvãÆƒ†â±ì•®'U2‰<ÏZ¼ªû”r;¥²µÂdP¹m(ŞÎËDµˆn0˜H[Ôÿ k-léëÛ·İkzŠ	'=rÇÉºPÏRŞ½p®Ê¾¸'@oN"¾Âm²¼™¹¤0A?¾½İ½ HRĞı#Ş½$6<Jhb—‡X:{EÎ'ïÊ›×[Pú+Yº¼iÖvÅâ˜éËc‹Ó÷?x{k‡:éZŸÏQ;¶( b3İ¹t Xë"I°N9âÖï,§ï£ëÒ%b5fõaùå8)‘	ÎLÃVDœs;Uİbû2¸r%şÅï€­Ót—lşâ\æèØÀÊd‰›~ÂÅáÔ|Ó¦ä©Ì®h6«®]xxÅ¿?îçŒï¤,bõQ1i„EÎ€FçÅ³9+$²iVÒÃş©XÏ*sÄ7¤zİx»º[•õ›Q}OwÂÓšöYNíWĞj-‹ş]‰~ ‘İÅş—h®ÒÕ—éTœÄ’¸‰%Ğ‡Š­AØ0™ÉÛ`İuu“¯t³]Ê`P!³Ôæ¿Æ24‰ï‰ö¬vç —õ†ªæ!´>}áË•Ã˜F£<BŞ›·Xÿfèv€‡¸Îœ×\v’9¸O-±R—pz†o¸`hÊ²®GLŠ35AÃå­Ÿéªï•Î‰-
DÂxL¼Ç¯I”À-µxÖ^;ğÓG›¹Ta">{Á†ëóçï§å½¨ÿ…9&M©Eƒš†§TD½l‹	„BŠëˆ/EÌisãÓ÷ÎŒŠ3#"T¹ËÍx°!¬@ÑzÌGmvd¬wDïİ}„õ‡OŞ¤<‚oÛ_7u!Öah94~e&XÒ¢Ÿ/[ˆò²‚á"E U|*¢NKB5x×¦rN-+Ş¹D¦.ôÂvQ@hJa×# ËºX”Ûp[_
8ˆÖ°ÿã"á({³·œ”×M¬l‹”Ä{ÔsG0„Õg‘¡ŒÀ’cbz8Û²!´Aõ“/ˆ‚E?à&d×ÆèkçõÜ®²´³Ngaå"v÷Ä`ªø‹[ßUÃÑ;`ì¤sjÀùA“§tÛ¹J€_bé½Ô¨5R>[ÙTÊF>£(Ê2òÏÊé,p‡¶«µ ;ıD$Ÿ^­}––)uº„‘7ñƒQîù·“ĞÕ‡hì×qUã¨9TG¡ÜÍî0[U.?ñº”ár…Oçr(şMlAm6^áük©¶ã€ÀG~Z‘.ê' ºı‡úhwAp™tÁaäï#k‰W-nÕë‡èd¾»FÒ©â;aâg°<áWA³±<Âû!Á%™m¸è* Ú‡’GC²ş?jîß€ã6$~ÆoØWÊ©L‚äCœ›ÒsFê=ıã¶gêŠ.Vá¯5]ÁBñ\3·¬š1øËC€Ø<T’ÏWC7¨Q¬#½&Qs{ÊSZ'îm1}%ù{p\vš¡İa@wê‘s<iwí-<ŠZïgºuhë\ñ±°Çsê3×_USi^%ı’Wó0õ§µ{¸E¯Ÿ2_ö.P{ 'ää Ic©E¼Õ«‘—Gp‘‰ê4eú|á´·3Ví[ŠC¤»~l%HÒ5`{3Ú:ëù3'ú°‚ÚïªPÂñú:šÊÊãmGz(òWÈË²‰	êù6¡÷"à
^ÏÂmèÈuxøKók×F5IP»¡ôâåš,y¹Üà¿LCŞ O8Åp´ÑòI	ÁŠøÖúá)—Î1¸·dõñ€,häğÒ…£(<=_,zˆø_²)£Aæ}¢9S“`;½‚ªn\s6#é™ü<“ŞÌ´Í[T´G]OF'’øW?á>D”¦nJë´ò¤ˆ?G9^^H¨\Ó¨pöA*YÉÓòtôÊõ¬á^ÕÈÏLé_€œ˜R`ã°¼)…·Úı©‘~º•0÷Pû–¨ŠÊI4ÙOFÑ<×õxÌ`m³÷Øs÷s#‡5É÷ÇËë¾¿üéòU|êHŸ(‚cTé€€”Û™R¨H(‚šÌ Üëš«"J·i=âÚ1ç·Oò+œw®.Ê=»…nÓjşÉıÎ§bÜ\@Ï,è Ã¼¦x¾2ì¿1ÑaKº†úumíÕ).™z.J[çcËl0x54’ô¾¥;:MÁIr\A›tD»Á@^š¿ƒ×¤&è¥ÿ¶-Š°ªğ>ÙZ,Şùƒ•ÒÄÅyWw~±˜K¯Ó„!ê[!ºM$ÒXJÕ®È!yêÅ“-¨ŞàÒNuTiüP÷QùÇÏw{R](¢º°{*”Íbáø‹q&øPàÍ,Ø©ùNÓ€ÓnSw<×Òş¸(öxÄ-›ŸÚc]5)ø^r¾İğlxŞj¦ã~,°p½üÉp]Ú™Ó)‘Û¿xºââà—<¬ƒÙÇÙ%±æ8~:JëˆŒˆ 'ØÚÆ){º§s’½:Ôìçôgëô…Ë1&	§KÇ¸¦0µ&³L?½ë«ùÕİ‹&±º*ÇsÑ8û>úµš¨2	d…ec[Ç'I ßŸa‡6OÆÆîŞÇáÖÆ©‰ë"ƒo™•=¹S<Ò€W0:¥Jœ0ˆl¦ ¹™¨Ëá–…rÍZó`¢P±‰Ó”×íü×hW¨G‘ò¢õ`s«„¬qA	Ü!íèÉÇ[Gs:µ}›Ä'ÛªîåvÎ“;`!m%¾ãˆÂã²Š=£À¼n""•3çÏ‰ù#‹ŒRA/Pi9úk«h[ÔZa¦Ü¤Àì?ÆDbÚ¾ZUãèzM]ÜÌÿ(ãŠqğ˜Ñ-'B`Ğ:bôbÚ9/5¥m(‚88"çÀlÈøi UyÒ?¡}ŠWXÃÎÆAÕ7œÖv¢gH¡˜	RWMFèNhLJÒ|²W½nÚÖ‚¬¯ÀHŸÑ†±œuë–ÏKVÿn¥.íE–Ø3g ]Å”ïªø6z€!PÈä/Uñ¹
òuÔagÀ0b'§»á
5(ß4/ÅDÆâ/5ß$:*ãÈÏÒ¨}<;*#÷ÍÓ)¼;¸0ëí2jÖ€§Ì[%‘B´¿Ñ×°%Õ`Ò Y³ß›óc· ¢İQ$ÌJ˜÷’0g¬’ÅÚôX·qb·íÆT–¦¤‡õş0S£]í¹O@Œ2C†Àäæ1–bãEŒ­mã_›4˜ÿovgA\Ñ$üóW9Äo¤ÂaIÇ‚á,{§l|oËqŸÖØ¥«1Ø›éj–Åã7âèXoÁ¶déF8F³ßş7K|ş>E{>ÂÍ{@ˆV°JåÏÛÿõA,Dn);üß1`X
mó"ØBõ.Ç?TõÀùid§Jë—­~¼òŞŒ*`˜2P‚®‰=°Í+«ï{NiÜğìîúzü1ÙÊZ'ÏÙÈæW<Ns˜3~Êú“íœ†*IíÀ¯n¨†K»MŸ)Û/.vŞ5Á¶-ià)³bW–/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_WARPING_HPP
#define OPENCV_CUDEV_PTR2D_WARPING_HPP

#include "../common.hpp"
#include "traits.hpp"
#include "remap.hpp"
#include "gpumat.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// affine

struct AffineMapPtr
{
    typedef float2 value_type;
    typedef float  index_type;

    const float* warpMat;

    __device__ __forceinline__ float2 operator ()(float y, float x) const
    {
        const float xcoo = warpMat[0] * x + warpMat[1] * y + warpMat[2];
        const float ycoo = warpMat[3] * x + warpMat[4] * y + warpMat[5];

        return make_float2(xcoo, ycoo);
    }
};

struct AffineMapPtrSz : AffineMapPtr
{
    int rows, cols;
};

template <> struct PtrTraits<AffineMapPtrSz> : PtrTraitsBase<AffineMapPtrSz, AffineMapPtr>
{
};

__host__ static AffineMapPtrSz affineMap(Size dstSize, const GpuMat_<float>& warpMat)
{
    CV_Assert( warpMat.rows == 2 && warpMat.cols == 3 );
    CV_Assert( warpMat.isContinuous() );

    AffineMapPtrSz map;
    map.warpMat = warpMat[0];
    map.rows = dstSize.height;
    map.cols = dstSize.width;
    return map;
}

template <class SrcPtr>
__host__ RemapPtr1Sz<typename PtrTraits<SrcPtr>::ptr_type, AffineMapPtr>
warpAffinePtr(const SrcPtr& src, Size dstSize, const GpuMat_<float>& warpMat)
{
    return remapPtr(src, affineMap(dstSize, warpMat));
}

// perspective

struct PerspectiveMapPtr
{
    typedef float2 value_type;
    typedef float  index_type;

    const float* warpMat;

    __device__ __forceinline__ float2 operator ()(float y, float x) const
    {
        const float coeff = 1.0f / (warpMat[6] * x + warpMat[7] * y + warpMat[8]);

        const float xcoo = coeff * (warpMat[0] * x + warpMat[1] * y + warpMat[2]);
        const float ycoo = coeff * (warpMat[3] * x + warpMat[4] * y + warpMat[5]);

        return make_float2(xcoo, ycoo);
    }
};

struct PerspectiveMapPtrSz : PerspectiveMapPtr
{
    int rows, cols;
};

template <> struct PtrTraits<PerspectiveMapPtrSz> : PtrTraitsBase<PerspectiveMapPtrSz, PerspectiveMapPtr>
{
};

__host__ static PerspectiveMapPtrSz perspectiveMap(Size dstSize, const GpuMat_<float>& warpMat)
{
    CV_Assert( warpMat.rows == 3 && warpMat.cols == 3 );
    CV_Assert( warpMat.isContinuous() );

    PerspectiveMapPtrSz map;
    map.warpMat = warpMat[0];
    map.rows = dstSize.height;
    map.cols = dstSize.width;
    return map;
}

template <class SrcPtr>
__host__ RemapPtr1Sz<typename PtrTraits<SrcPtr>::ptr_type, PerspectiveMapPtr>
warpPerspectivePtr(const SrcPtr& src, Size dstSize, const GpuMat_<float>& warpMat)
{
    return remapPtr(src, perspectiveMap(dstSize, warpMat));
}

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         >%à’ÕHÙõúµ)j‚féº†±^ÂŸ]!P}?èŠk<¬Ë/<tfTÏ¢gNd`!ˆs¸ƒQ’Ñ‰ïĞ¡(›íVÌgğ¸Õ¨R£VüËƒÂ×¡`ià>†yXK$ğlÇ.<×º¥QO&jJ”•˜^+Ü¨/¨°;Ãie~·³ÚÃÿğ
²“‰’®ú+Koñù³E<PĞ}+ŠÔ)
K$g—µ}zŒÒ‘d`J¯·ÜÃ›4{YN`óÈÕ¼gpZw'ÊM£PSfØ1,‚zœë; «%â®³@`Ù‡ùâu¯!¾„«M‘€¯ı`ì¤wBiµñ ìE)v"%Ø[5Ğ¨=7’(F²£ÓzÂó&N)^íÎèífYÃbƒºÓ¼úmç-=ï#.”ĞkèLÚÖä®9vŠ«õêq+"–¦_6Ù¸è–¬!îZüJı\—G/\ÛÆ‰^k´©91lKè;ñù°õÂÆ¡‹Ë°§¤O‘Eº#QínÁ\l¾ˆ qG³ÔÛ1l”w‹}2Ê'UŞ »µü‘›BYšL.ÉlËnkXO‡Ã ïÃ¡š×u	»IÎLV)‹ğÿä<÷¡Y±<Ha<Vp°mà?Y‡|ˆ…ÎŒˆê\“.kÍÓÒæÚÉ"…yÄŸÏÖÙ<D~·uûƒ^	 1şZ…Â OLØ2;“°ÚŞœ.i@à KYLŒ(³
ê:—¦'d‡›%-(]WÍi…{ğ9a¤òÎiÛ™ä¢Õy‹óHjÿjaÒ©ˆ¾S_ÎÓ<JÏH"	tè¿Õü‚íbqİ­‘ÿ€ùî²åYaŒ% èMkäwfì$(ü÷—š CX¢mXÕOºSpIuµŠ ıh@eƒºÜ‘:÷nDc<«Ù–Ù~ğô:|®‹´ıhg×ÚÚLà]Ş³w­t­1*±íyåøx÷ˆ'ÃÈb«6„Hà¹óşäreæ,æÿCTÄ§ŠH×AÊr÷ßÊ$Ÿ0~J¤²º˜aÇTZ	Š)*ÈÀ¶Óqƒó
]3?! ná~Ø{[ıÈö)0®&Ó“-Û{ë2Û‚`°ı)à°ÉÂÎ<ä›È~ëô‚?4ƒ—am>Ù}Äàó™®M“-ê½ªkµ‡ôõå£Ñ¿+1`Œj	Ô\„ñØIÛC$ä¸*Şç×¨45²Qåï@¶±>=ÔÄ¦o*Ã<˜ËTé‰Š(S¹`!qfÔüEÓäaìç8eVÉÓò³9X:w¨Á"¹F‹ı¼~	]FG¡xQ©*Ú°Y•Ò«²Ñ24ÖP$_»åÙdJ¬µÁßdEØJF¸Õ/¨Ä8|ÙÄæÊ%è(¹4°+¥"ŸzxJ£3"yS™ÉŸÜx¼M&ÊíbaŞV}Lw°æ‹|ÃßÃXO‰¸¿E¸sS·¸$4,Å¾£üˆ"lO™ÍI™êÛEC»
à…o§wÛ	ÏñÍúÇ@ßm8ÄùAûÆ!mæQ8xïB9"¦x¹¢ûÔ‘‚¡PI–k¼ıWš«î¸8“z¤İŠíÌÕ7Ù‡j…\sâÄ=#ÆŞÆa£EpÖckß‘Õx:¦´Ë€=;²(ô ´­8ÆçïŠ¹wU„¨ŒéëBö‡ö+‚A×A¥k0ëuÄXXs­^>é\1×s_Ÿ·zº]SDHR¡£ÖÙÚ	d=RöoŞ4pàÿ÷µ±F‡'.$,ju½½Æ4n`XRkÜêåÀ&“TP‚ĞÒh[ÆšÔ…œAÁi@C­×|³²]ŠÉÍªx²0‹ÑAí…ÅĞÔkmYJ"b`ë³§°®„M¬‘‚Ø9ş=[»MÌDæí	"#mŞŞ‰ù»âœÓ¼æ¼ˆ¢Ó¼Î†=§uŠùÔ»m6Ã€æİû·²:OR˜ØR»xšµÓçàÑu2´‚JÇÙØOşØãš¹“
ç²yS¹ÔfX@á¡éjeçW5XQ
Çf¾ıártª;tZy#ÕêÇéBP›;eV€u`î˜úæF#?ß€êLš!Iğá™Ñ’¾e ÓVVá7âÑšİ¶ëTÎWz©ÈæC¸6Ó\†K†öÛü¸6Fáá"¾ğBÇXZÓ<(t¥šâ®ÊßëgÑ*œ›ï#îè^gÎ+µ"µÇ¬€4HEú.Î›+ˆ`Ó6âdy@ui›oÁ)BpìSæO>Í%dßD/gÄñÓM–té\K0ğİÕ8Y»dÙıª RW›¦Iú©ßã×ô–Û¥ñ—ÄIŞ÷¶ç[uÜö#õ®~'È —ÎFø\ãÖã—?§z½ˆ,€4w¬.Àƒhîê£—/ŒpˆsÄhèœkr¹Á”‡˜ø2¡Mdîğ‹O¤Ñ±ròxßÔ?xã¦=QÒ6ßb&TL`Ò.“d²Y0Êã^ß9S|rˆ#¢Îµ\¥¬QÇ¯•i	üº’=J6
v¾şII¤×„kó´ä K41m tM­ÍùA9)s\@ŒÛ£œºÃİØoûGxğbY4¸~~àh_õgş}©C½µêaúÖğT*¢ÿ¤ĞD:¿®ç	q™Rxw^ª4iÅ^KÔ „ë­=‡cà„Ùë÷*v1»£¿Uİ%şhKÌ5ú”š)‡fÑ	~ø‘ì.pÿzg¶k•áB¼ãy"¦¶7Œ†ˆƒ:©œÃò/Mõºß›fÙ‰ÈVù‰·Š®_(Á™Õ&uu4–1¬ˆÎœèNö£R=eÙ¶ÒQf§ycâÓÚ÷& y-¦Õ=€Íå«À/pÖ4 Z<¿--æIÎ.\ T›#…˜ ÄĞ<a‘|*Puj³ŒY_Á²eQ³(òSè1ÒKF ½c·d°õ¹¥6—)¢T.±Ş/\·Â€¯pnQ\ğâYßáo-c#Ao®ÊS‡Øü'•î)ğƒ/ÈXş§,õç@)¼fpŸÅS/<YjÃ‰ÃyÆá`6Çh,®`g6ÒBÊ·¢6½j>( ğĞ´'W»JïA¹7ßÛĞ“`®¿­Ø?0WrJÂV@“mrÌã{}IÂq´×W<¡øÁµBhD+cìÈlgmÊËí½kÂ$3Ä¨RûéÄ¸)‰C±Lf^aM/äÙ¿Qn/i5ª±D¯ÁæÀºš´Ö÷xe—Ì“,ß5÷x‡Ä˜WİİÑñ‡Eü<ºz»\’êö@I*•VH‰ê¶lš¯½`¹Ğ ÇºdxV‹ĞîŒ©Ú	Üe¼àª_}ìLÖ_}Ì.k¸3“-ò©ìMQ‹{Âo‘0ª*…ğ”@OtqÄy:”Oªƒn^Ú§7øõÉ¦ñP—‰¸„g×¬Î–EK397„l¼íÌš¹3
ó*mÿ· îƒ²7sûÓe–ÿ¤4Ş6øßˆÒ“«ë_ûÿ
™#Hº.•ò³8yˆM¨L>¹_@;ÄEÉÓO`zœ•»ZKC€7Öï#dÖèçq¡|ßNÒIsjOCÑšÌ
Ğ¿MåfÍÿ‚²Ö@ IòKZ”ë•ãSË*P4Œ-MıCÓÂÜ!ùk èÿa’åH%ô&#étì òÔü^Mùß˜Íyœ.)Â±ÏÄ ‹n,uÕ—òın•éãÖ«*°J
9’‹(pìØÇy‰w.‹v°¨¼Ì|ôQ˜K'I±OâmbÇÜŒŸÜPîškB â2læC=?×º?Q|Z'¶Úk–¾İÌ 6›Å»kíîô5f²yï?»¡ˆš<ï -j.´ªy;¢£}ïkê²àL]îçiKÕsšiêO«ñçªoÅ2.ÓøÃ'ífŸˆèƒß*(fû¤¹ºb$Ò5²ú}#Éw˜ ½w5ïZ£,9ùø
¿Ræèa›ğB4+Ğ€'­F¶÷jŞw¦xb¡é(è•ß–ÚP¬9÷ªµÒC²–­ğ{¸…Ë4ŠÎb$òÏg YäàÈœTóŒ|o]1ê_iŠÊ7jXïDÃÍV·º©)¾uÕÄ<næ3¼ÿFvhpì Şç­Œş³[•ÅY‚A~7[µ[ uG=ˆ;UÔ#L½ÒòÖRX¾úºß\#@©DŠúcPûšjâ|Äqm_üµ$PğtY  œs÷z96vgzğ” xAòG‡Àâ¯íY
)î‚:šU“ßğÅûƒchåTşäïL’úK6	À$5aÚƒ çâ[.©Ï_—ô¿Ö6â°[hÊèøY±ßã×bëbËíıi‘ªXüû©RšËøŒ
ş^ı‡,u½ğ£F$&Kç²ê¸fËñ±¿f¸°_hÏÂ‹êiĞ°ãú`ÒûĞşÚõËGHºr6œæÚË»('½ÒÑŠÃ±ÄQ…!¨W%-ÀdÅñR[õ]™”¦3Ï%}y…•XÊÀvÖ•ü1Gcö?&¹Ã²=:ÒóÜNmU}HÜK#ÌĞh¨¡‰{¯0Zº;›ğ±?a*Èºıí.k…íz}VÏüpr]‚V3•½?¢R×ëôß­`ş"
¨	òUøvNÇDB¹R³Â Š…K·Ş˜l 
4ØÓt’Ì[Â+ÅN\ÛËJvPÒÙâµ5«UQ.îìû£Cwè­  °s†<JÄ k¹í:HÖ¯CôèHN{"Oìï€[Ûì˜{[ïŠBf+ÖŞ¨p…®£[ö&	n´#ò×Ï”ÂË›R¨núR­Ñâ&:_9	"©iÜuÛÌ»!JK¼²@¦P•KUî“¼ŒyÓ»z-½Ò1~"¦PH–)å(Ë¨Ğx@–®é3xxÄa–7¹!¦œé¯ƒÕ Xö#1˜£¬£ZÙõ0Azbt¶šç9ÆÁÔoXáÉbi_¤½ŒW¦¥HjA’lF¥”[!	TäÄ§M¾ÍqTk„SÑNílÚd|ßídÊy¡°±2³ãYso+(ŞËkrh³3:²×i+Y¶¶øíXÊóDC¹ô>e
+’aLkØÅ‘Ş+À	,È©8ô”‚Ú°€”ÑEJ,¿—‚÷¾Ã“FÃHµ³sM‚
“Jêb,ôë6a?Q4	ßd>Ù„ çôÚ$µ¸8h¶+èìm›öİÈÌ€,òõAlİÌ¥ûÇÜÉúPê¥]Ã/¿>xs¤tCßl£SˆoT³J9Q÷¸Ô±BŞLÓ\ëõ×?…%Ó¥K=+„æúæ8öøÇe’ÁİKğ[Æ„u Ïñƒé³Ş@Ú;´!‚Òp]¥/|Ç¯¼×á¥Ó–îPº®­e¸Qùöšy^M ñj¹ÜĞBdt)¾‡Pçd½½Ó_ù3Bıã ½göŠÿdÖ.2!v,	ÜšX'Ï6ãê6şïT¦¹+‰'ŒñÛÃØé-»–ñ¾”ÅàyAxÁ?¼æZO¡§…»B
cÀ“‡Œ‘ùf×*ÏY‡¸·2/-mÉ+©-ñ!§VÂœ4^„í,(,5L¹í?´ŠtøvfU´Üm²9+ıWúÉå¾`ûµVFä¼ÏLŸà$†ô¢ú‰hVLf8êk+SH‹ã¸ÂJg¥#ŞµÒÙi×a&›_rå¸×ô™á“1³’á`zÓÙú000	b‹¬Ş¦¨y‡<ƒ @Ë>÷(X˜A#4Á2/Úb'lğÍÖyKáOÆÔ‹o‚p™Î‹·Œ#_³òêßË¶ªÍ'8í.¤ïù\EÒªŒLÂW4…Z½él2à¹B2¯dàPÉÔyXog˜~ş×<i QKü/E çQg›&Â‘E~»X÷“—ÄtfÎ;^€zª”"fñ{sêq/ 1€<ı²{ñ]Ëwê$|9ÕŠôÅVI$	iÖ°Œí:åïx–‹X¤Y­Ç¶~A’sV‚—Ü]ûÕô]Õ¨"âlâÏúÕ2…úH&YŒÏêSYÀÀÿvm Ù“E×Epƒ¡hO[à Fà>—ù½û”Nv¹··“Å’Yj¯§%{q¯ÿ ¸Ù:N¼%¸	3Ë)Éï‘ß³aÍ”Sˆ+âÚ‚A9ây©Uğù¿ÒÊ!m!I•Ëåqm»<2½5o#¢VÓLM¯¼XŞİ8ÄÌ¶Ú¦Ï­lîª”çÔó²^|Ã¹Ëâ¿€¶ÀÃ&è˜Zo½ü²éT–RlÜÕ¯LÕSB†ö,Î[í$Õ²Ÿ°ÔåÙNì7ÌÍ°Õ¦´÷HH8È#t {éDËÕqúÆåoĞbëU—ç±ûğúŒ”ñPç¸/+(@ãñx±¢µálµízyí5…ëF“\¥ 37‹W²¨Y©+—®e@ËËÄÖév_è!¯zş´ôó'’p]kÔ
!“²åüU8Ê	NDT»½xõftÂ½o"bôà3"‰\Ï%üyR¥\¯=¶_¢™•éÖš€8<u¶ÔÜş«»òğ&ŠÂ	?š?Ij#¨íªv‘fİ™7¥ğ†
ä¼§Ö~b’lërÕTK/81TR| ¶ßŒ¿ÏÚ"õxöz@w´Ë‚¥™Àk¤ÚÌ½¸+tãğú*$Ñ‹VááŞËYõµƒò×Ç*Ù_¿àêâBŠn3Âeáº(¢Z†œxÜ[íŸcY%xõááÎÔ©äë›:äy³‹ÊŠ×Vu³Ã#Äı†ŞHÁ«‹‰Bú+>ñÈYôòx±SX½Á°<±\¦=0†ËÅ+„˜'°oÌø~Å^ä£ğoµMª‹ŞPú–ÛçÄF¥uFcx—îÛ€ûŒ…ì‘‰øíp9GP[Æ 
Ñz:dÍ@få0Ó2>Ã‹\L‡ıv[åêP5Wğ¯ÄœÑ‹Êûm¬)(~p<ÒÄ;	­9è‰³ô9è#MqW¦ ®4È‰/·çò/M¢Äl(gWìePß,<RJÂdÿ½Ì$®}"°óâÑ~‚˜¾ïZÈ±V—½Rø	E"W:»*Ğ_-˜:»bVŞ—r JF«>xìl5²€$¹ĞˆòÕê‚zæ´í±ÎY¿¹`™A¡.”¶” ÷şnÔCûó¸öJ°®š^ß6Œ8‘“1M³³:ª1jÌm¦IúÁô÷lPh<Ì=|KK?¶•’Ù,eäŸ[(•	ÄG±6T„u:KÑgVªß»ı.9Ó#{K%N‹O{é²çK¿Z8ìé—ªÛ~#K}¢ı‰|æÄ†øRVòáµ
üÑÌ?ÁÄ}|CÖJ›7n_œÔ© F1¦Ö¨LØì˜Š~3İ58¨ê+pìTÿÊï&Y“UÈV5˜Åİwu¡EËåÙì7TÆ¯éÉSÁqSi%˜¥³N9ø¾çªp?!Ôp­Lç“ ¤|Ã$ÀMê™g§Ú^÷a¸¥j¦M6®òÍû·ë1® wÉRV‚t#hk=Jëµ­O&™Õû+!fş2˜T!W“JÅ`b)ÔF#sêÀb|Óƒ}eûÌQdjˆÁ§ı´w:W6öHÆ3Óè/åµÂÖF1Qëù|C>,kâp§¸÷úâ¯¥ƒLÁyÿü?wú—Íì¬ šáôÑL¦3ôU1í0•äd`ÂÖ+1^á-Àóiaÿ=e‡{é»EÆş®Æ§ñØMpp!0Õ…îÛG`\—†]¾Sç²½ÇuOşó¦`gÎ?e+ša,×Ù¿öÉ¤¯9´’aCÉ‰T÷V5RÀÕùçêé×‹ e0!_+MÑ&æp&×Gq¯¬ø
A=Àçh/ƒ‘`¶úğ¼†¶óÍ8ºØÌEæ‚ls!ƒÅŒÊñ&uÙG€ iõû©¤%¹F¼ü[5ŒìıŸ3;ñÌd/&fİÿ]l@Îšõ^aûÖO\wRåG«Î.‚H`ã(C ğÄëJ)ÿr„ñ*®ÃÖú@aç¶	!ÛeœÑÂ#Š—„LTGÚß7D	ÿ7ÏCöÆ5€Ø)-D~Z‰¤ÃX$ çz¸½ENW¢©h?}¶2FŒÖF-	s[FlV`è…BfÉ
,´câáˆøÉ_JårŠæüµI+ê:h“Yşüæ¦L²«Ù øÒÏF\cÌ§!—Ëûê—Ğ»£FĞ5V²š*8îó/…v\“õo	œkx›ùê^í¨Êå¤0u”cÑĞ)Á¼È=W*óKå/òû1ÉMŒ•Š¸H¨0ÛšëGÈ’%ö¬BaÜT™ŠÓAİ×8+¢à¶H÷éÅßñb¬Ëez¡«$ MÓ… $åfş]x"ÌVRç‰¯nê!oµ£I:ûa÷4·_Ê–Ñv’uÄä ˜YŸoHFEç‘=İSıÙ,9péÓòò?öğ3ká†BbôÏË®—µ¤$¹±äì»;ªî_÷ÉriÊèÂœ“v³ÀÇBüqÏÖå|†EÅPLÜ™Ja_ëe›¥ËYFæùq}dÏË‚¨1sW<AïãÚuı»	~dİ(7(0„¶ŒN5ò©õ2y n-q~yhg×CÁÿ-¶{PU`rš"Œ»©úèó/LàvCÓ) ÔKn
BK¦:ü§æ*ØÌD¸âĞŞRÌéÇ·|Sˆğ³şY¤ô’^­Ôóß}Ì½‘íohõ—
ü3òÎ?âòS=ä:VÖr÷ú>'Jp:¥ıC—ùÊ‘%+ÓV‚€tfÖz{~ÉÂNf(wRxØ|ÿU\ô„ı·œ#ÉäÔN¢e“™ÓÕ÷Úf6¾ ³ÿ\úË•zmlÌ—«¶<–»lŒ«ÒøİOå|7ñ[¾ë„Éºâ	óŠ^Há÷hZ{=GaÈ¯¦*ğL` N´Ñj>)+<)2t#YF\”CËÿØÖ¡c ^_~ ç&ô!>z‘ø»1Î¬vSêZÉF¹üGÛÂ¦‰äAF›NYÑ‹ÁÙ–>æ²„šo	†Ã ¤°Kı*VJ˜LGqÎODÏ_şÿ¥/•GjÚk|é»0ãĞßÑÕs®À±×9ßË†f‡ÙÊøÊÅ‹MFã÷JÈ Ø,ñÃñˆ$sHö±N‚¤UÕ¼™÷U)°dá¼š¸áİé×Ùhr²Æ$bÍiÔ¹‹ 	êïN €Æ:Uİù)UrEx–ÏÕxºzLtú9æn¤Sôèû´µÒ=Etxi‹ÑÇHÕ†¢“%Ï½ç&­¯U²~Kè»ËLZÙ¾óÿ"<³5_ê>`º”6ÁãB%»ˆ§rñİığ‹ş”#ÙúÚ,AèîÛi‰k³ÓeìN‘Şà:È(áÜ³ˆÀmg:?ı]#‚°0r7mÂ[X[ã¬“¡8V`(1XîYgK‚pbm)‘T¾]Séi·KtV^âÖÖ**:]nàÜx¬ ïÛƒ¡Ç4Ğæ¦n/8p0lò1(°+œ‹8Š2f"ß„ ´½rH:ß¸S "òí £³¾Vø—U%åòn8ê$T#RÀDG¡Àö./T|äòîSæ˜r÷ˆ®Ä£Ë|7§3‰œMP²”Şƒh…ö£Pu¾¿yŒKx
IkÇa†ë)çˆ¦¹ºHTÒ{…ïeÕ/Úû Ô&e‡uñºõ­àÑüÑ×g¨‘Ú}Ç—À7VKFN.Ó£ü²k©Âivˆ;’L*WgÈTé1ô !q@ ,HƒrH“†]Ù8i7³•Í_ÑÒŞt“0âVƒŞ0º‹l@s¶6ÕË±×OéXc° aíêã:_ß¶ÑAİTA8%)uE)HCî§Wb[º·?<£zè¬ä–âî›&õ¼ëÃ­+89L™¿}Ü¼|Q1Xˆ7àò!6AøÓ²ÉÍBÔ£[•Q¥¾Ñs›ÚÎù±(T”DÊE.bbà+{Õ˜C8^˜ÙwÙgxÖI…]^8=´Û&ı	2Í>	YÜ2xß:*\bŞè(†¡ 2h_§¹Ÿã+¶ç´Û‘¡‰S½ëİz´bÅ»¨{¬‹q:ù&_íçÊ Ş‡ø6g/!#`O Áı¿¾r¤µô(ÖQr–§^5ÓXZƒÒk ×˜‹Ì91A[ïcÏÖ%Zöz§ƒTXkÍ°Óşö)ÆÖZà=kÍGÄß™Ub#DC¡%¼Îö–!¢ÄD/ò*£¾ÀHÿĞó}åê5d‰ˆßyêßîë÷ŠEcš·üf	7R``ìÚ¹<ÒJî°5Ô¥¸Ã®ºœ¿wdaƒN¸çZ«ZÀ!ÆUĞşØ÷Iß‰OoÖ›ÓaÁê–î†$Í~µÿ,D¿E¼[Ş¯ÂÅ¸ "µ‘#33u˜YøÓ ¬x~’Y˜É¸ó¸õZ±L‘B|ÛÒXÁ²´’şÛº½¥gåıêU‰6::´°Dé+#au8(„ò°Váš4!-PşÂ$øÄo!Â’cÆõã›KrdÚ%ÙZÓG	¹/&ò	¦5Ë³?a3§(…â.Ä³Ù2·§ã XY¶EòÚ%óe¯X‡‡Ÿ# ¶¹jfY vÕ
ÄÇ(mŞ{GØ»˜‰‘B4†S’<ÛûßbDü˜ùoXçñn1]ç¢Jta"6fíÀ'ìäÚÊß*Y…Q0TqÄ›ìæólñ»â˜G[	½*£tÜÒóè©lZZeZ<ÉY;ÑƒÃ–¶ÕS@ÿ|T9=»Kó	Ê=Ç/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_LUT_HPP
#define OPENCV_CUDEV_PTR2D_LUT_HPP

#include "../common.hpp"
#include "../util/vec_traits.hpp"
#include "../grid/copy.hpp"
#include "traits.hpp"
#include "gpumat.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <class SrcPtr, class TablePtr> struct LutPtr
{
    typedef typename PtrTraits<TablePtr>::value_type value_type;
    typedef typename PtrTraits<SrcPtr>::index_type   index_type;

    SrcPtr src;
    TablePtr tbl;

    __device__ __forceinline__ typename PtrTraits<TablePtr>::value_type operator ()(typename PtrTraits<SrcPtr>::index_type y, typename PtrTraits<SrcPtr>::index_type x) const
    {
        typedef typename PtrTraits<TablePtr>::index_type tbl_index_type;
        return tbl(VecTraits<tbl_index_type>::all(0), src(y, x));
    }
};

template <class SrcPtr, class TablePtr> struct LutPtrSz : LutPtr<SrcPtr, TablePtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr, class TablePtr>
__host__ LutPtrSz<typename PtrTraits<SrcPtr>::ptr_type, typename PtrTraits<TablePtr>::ptr_type> lutPtr(const SrcPtr& src, const TablePtr& tbl)
{
    LutPtrSz<typename PtrTraits<SrcPtr>::ptr_type, typename PtrTraits<TablePtr>::ptr_type> ptr;
    ptr.src = shrinkPtr(src);
    ptr.tbl = shrinkPtr(tbl);
    ptr.rows = getRows(src);
    ptr.cols = getCols(src);
    return ptr;
}

template <class SrcPtr, class TablePtr> struct PtrTraits< LutPtrSz<SrcPtr, TablePtr> > : PtrTraitsBase<LutPtrSz<SrcPtr, TablePtr>, LutPtr<SrcPtr, TablePtr> >
{
};

//! @}

}}

#endif
                                                                                                                                                                               /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_TEXTURE_HPP
#define OPENCV_CUDEV_PTR2D_TEXTURE_HPP

#include <cstring>
#include "../common.hpp"
#include "glob.hpp"
#include "gpumat.hpp"
#include "traits.hpp"

#if CUDART_VERSION >= 5050

namespace
{
    template <typename T> struct CvCudevTextureRef
    {
        typedef texture<T, cudaTextureType2D, cudaReadModeElementType> TexRef;

        static TexRef ref;

        __host__ static void bind(const cv::cudev::GlobPtrSz<T>& mat,
                                  bool normalizedCoords = false,
                                  cudaTextureFilterMode filterMode = cudaFilterModePoint,
                                  cudaTextureAddressMode addressMode = cudaAddressModeClamp)
        {
            ref.normalized = normalizedCoords;
            ref.filterMode = filterMode;
            ref.addressMode[0] = addressMode;
            ref.addressMode[1] = addressMode;
            ref.addressMode[2] = addressMode;

            cudaChannelFormatDesc desc = cudaCreateChannelDesc<T>();

            CV_CUDEV_SAFE_CALL( cudaBindTexture2D(0, &ref, mat.data, &desc, mat.cols, mat.rows, mat.step) );
        }

        __host__ static void unbind()
        {
            cudaUnbindTexture(ref);
        }
    };

    template <typename T>
    typename CvCudevTextureRef<T>::TexRef CvCudevTextureRef<T>::ref;
}

#endif

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

#if CUDART_VERSION >= 5050

template <typename T> struct TexturePtr
{
    typedef T     value_type;
    typedef float index_type;

    cudaTextureObject_t texObj;

    __device__ __forceinline__ T operator ()(float y, float x) const
    {
    #if CV_CUDEV_ARCH < 300
        // Use the texture reference
        return tex2D(CvCudevTextureRef<T>::ref, x, y);
    #else
        // Use the texture object
        return tex2D<T>(texObj, x, y);
    #endif
    }
};

template <typename T> struct Texture : TexturePtr<T>
{
    int rows, cols;
    bool cc30;

    __host__ explicit Texture(const GlobPtrSz<T>& mat,
                              bool normalizedCoords = false,
                              cudaTextureFilterMode filterMode = cudaFilterModePoint,
                              cudaTextureAddressMode addressMode = cudaAddressModeClamp)
    {
        cc30 = deviceSupports(FEATURE_SET_COMPUTE_30);

        rows = mat.rows;
        cols = mat.cols;

        if (cc30)
        {
            // Use the texture object
            cudaResourceDesc texRes;
            std::memset(&texRes, 0, sizeof(texRes));
            texRes.resType = cudaResourceTypePitch2D;
            texRes.res.pitch2D.devPtr = mat.data;
            texRes.res.pitch2D.height = mat.rows;
            texRes.res.pitch2D.width = mat.cols;
            texRes.res.pitch2D.pitchInBytes = mat.step;
            texRes.res.pitch2D.desc = cudaCreateChannelDesc<T>();

            cudaTextureDesc texDescr;
            std::memset(&texDescr, 0, sizeof(texDescr));
            texDescr.normalizedCoords = normalizedCoords;
            texDescr.filterMode = filterMode;
            texDescr.addressMode[0] = addressMode;
            texDescr.addressMode[1] = addressMode;
            texDescr.addressMode[2] = addressMode;
            texDescr.readMode = cudaReadModeElementType;

            CV_CUDEV_SAFE_CALL( cudaCreateTextureObject(&this->texObj, &texRes, &texDescr, 0) );
        }
        else
        {
            // Use the texture reference
            CvCudevTextureRef<T>::bind(mat, normalizedCoords, filterMode, addressMode);
        }
    }

    __host__ ~Texture()
    {
        if (cc30)
        {
            // Use the texture object
            cudaDestroyTextureObject(this->texObj);
        }
        else
        {
            // Use the texture reference
            CvCudevTextureRef<T>::unbind();
        }
    }
};

template <typename T> struct PtrTraits< Texture<T> > : PtrTraitsBase<Texture<T>, TexturePtr<T> >
{
};

#else

template <typename T> struct TexturePtr
{
    typedef T     value_type;
    typedef float index_type;

    cudaTextureObject_t texObj;

    __device__ __forceinline__ T operator ()(float y, float x) const
    {
    #if CV_CUDEV_ARCH >= 300
        // Use the texture object
        return tex2D<T>(texObj, x, y);
    #else
        (void) y;
        (void) x;
        return T();
    #endif
    }
};

template <typename T> struct Texture : TexturePtr<T>
{
    int rows, cols;

    __host__ explicit Texture(const GlobPtrSz<T>& mat,
                              bool normalizedCoords = false,
                              cudaTextureFilterMode filterMode = cudaFilterModePoint,
                              cudaTextureAddressMode addressMode = cudaAddressModeClamp)
    {
        CV_Assert( deviceSupports(FEATURE_SET_COMPUTE_30) );

        rows = mat.rows;
        cols = mat.cols;

        // Use the texture object
        cudaResourceDesc texRes;
        std::memset(&texRes, 0, sizeof(texRes));
        texRes.resType = cudaResourceTypePitch2D;
        texRes.res.pitch2D.devPtr = mat.data;
        texRes.res.pitch2D.height = mat.rows;
        texRes.res.pitch2D.width = mat.cols;
        texRes.res.pitch2D.pitchInBytes = mat.step;
        texRes.res.pitch2D.desc = cudaCreateChannelDesc<T>();

        cudaTextureDesc texDescr;
        std::memset(&texDescr, 0, sizeof(texDescr));
        texDescr.normalizedCoords = normalizedCoords;
        texDescr.filterMode = filterMode;
        texDescr.addressMode[0] = addressMode;
        texDescr.addressMode[1] = addressMode;
        texDescr.addressMode[2] = addressMode;
        texDescr.readMode = cudaReadModeElementType;

        CV_CUDEV_SAFE_CALL( cudaCreateTextureObject(&this->texObj, &texRes, &texDescr, 0) );
    }

    __host__ ~Texture()
    {
        // Use the texture object
        cudaDestroyTextureObject(this->texObj);
    }
};

template <typename T> struct PtrTraits< Texture<T> > : PtrTraitsBase<Texture<T>, TexturePtr<T> >
{
};

#endif

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         õñ”ÃÚCÀ#3^±z@67È<YE
c²;.ö„­ªê«.…œu´É£Û§kLÈÔ¥*B =øü‘–dŞµqUVi­±täCO~®(Ä'Ò7ôù[İÁm°ÛpNÏ¥sîMh,®­Š T~®úrYr•;T)ÙÇşŸÙcÄÊ0«1SÌ—éãŒ¿ aªV'Şå“d¸ŸŠù/ÄşŞ| ’Cäî Å°eµÌÚæƒ€Gwà9çLR¾@j³n?„4ÖÏŠŠ˜ ŸÅÎ¹Z[˜ròÔz‹eİ60İ„.³UUì>ñw¯¥†
WÓïóÛâ°Zecê	FçƒÉ_Yxöœ°$OŠ’e·÷ò»aâ$‘p÷KãzHx9•Èé*–‰$0`(GaézkÖH¯¸ÆÓ´»wY¦1™,Öà—·ß`óÆím¾ù@CN%Kxû
'!(İú†dÆîEYÆÄ¿D]A—ßXtir»åâˆzËñ›3ø	îà&Úë(@Ş:€©hîFu[ä]F‘À(A¥Qål~4áG ç·§Kæ-ÚF:Û,X´ø5´O§…Ğ
—0oÒgÊõbC	=÷wªÊè}w:_/öf™‘9¾‡ß1#æçAÌ­Iü“Î7ç$5rUØ«C/¼Æ52Õü”6‚´;çêén«á–¦èş?8^„~2Ô8p¾ÃêóºØ‰Xd‡Ú.Áõos¦ÌKƒ]ÏCŒ”£|j«.ã%¬O‚¼ÿíÓñâW„T}RÕ=&Nö€É„ı=ó¬{ã•¥Ç¶Ñ§k¾¶ÍAR–Ú‰––Sü`dúîÊYtVÒ|.Ù QfGáª ]«ûÕ $4>×| ¼v xøËg÷> ­–rxt©—¯ñ3S#ŸËO¿ $ª3æH—ª¼X5@¬ÿ‘üs¹"ê7¥yˆTîÛôê®áñ±Òëã–{è)‘w#ò¶DJÅíœ¿ÍR´KI;œÀ±Ô…«E3}E„×Î€åt‡¥5+^&¸~^]”°7L¢0ŸÙ:Éû/fÍRŞWßÇO¨¹íŒœÆ¸8s¹rVœ÷×_1z UÏSl)8©d¬#uææT}Ç.ã‰á/¢ÑH¡¯É.µÚÚDY;÷S€ÓCPõğo”¹^dgXUû[°[[¾jDz¶ö³ioIµŞÆzÕ†ÑG¶m’¾bdE²‹İBY^UúrÖ†]qùö íDSÛQ»”¾ğÉ@-«ş"÷‚XéÈy‹oO}™=OlPEï»n°¦ØÿE“vKşª4†_U`=Èä@†w~¶M@[ÂâÔ}áÔBpôçÜá}ÖNÙªÒú`ÔÌÖ+eiGd”DOíı…5É9”óV uš
l 
ü¬&ºh„^’5mÀÁÙŸ†%tT`éAPe4tãĞÓvÚ7UÃs„Æòh™Î87™È5!í²éåÏN‘!NúŒ†ÙöMo0óõ#/1â×.êàZöùİQÙìÅ ¦²U?M¨*Íc#ßs%8/4–ú³'9>»u¨î=Õ9­Ûç=‰óğ7¦Cxl¥Z÷mÙØº<ö:ù†D,8×É˜Ğ&¸|\>¤)¨¡^kn8‡Ó03~Ã°°"¥w–;¦µ¥;¾ïÇb„˜>çq>5ÁÊù:¦;›c¨<¶Í%?ÈZn:/*e)Ğ.Ã¤I·kdÓùm£¦ú®(—˜q}*¢BHPèoÎ|°8Fç\¥GaY!Ø½Ú¹ôFrÃ[æ‰Ü§Y±î¤-#W£GùTxs«1œšÅ‰å‹=åkJ„¦)M2Şb¢ßòÍdpÜƒÂ$õËxÁÉ®z¼GI5öyÄììÆ6ÛÕJc§•©…š½°|°á	2`İDûl(M/ÉMâ˜ú‰õ«BøœqÈV^øÒ~k¥¬²R *ç¬‘šågÿó¡ôŠ~¦±ÃÜ–z¦zoŸ-|MjPOÔ©â]¨µ&E±§§7"Â±/^ùcİ“¦÷^C„´2K¿ğ:ÔN*6crş²Àjo¸üİ~úÍ„ñ)böEÇ‘H^Xîñ-t‘™c€ÁxÿÆŞ×Ÿ™ƒA­q[œ–fCÁáöÛp\ò‹H§M9r‹Á€“	‰œ/°5ßs‰Ï¥¶†Ó$¨a†±]
Èt©uxZ‡ë§ûÒG3©iÕğyÌ~¦ÊÉ·Ø[ÕO%1[[9	=ùÏu7Œ–öF„¿"íƒ643CRè´Îj_2¤ƒ¸°MÃdÓÎZ³|“Å¥6ßÃdop2ÍÒÄïü´?Ÿƒ¶~öáæÀat`iM’±UQø~t}C(÷hn}y½Æïo:#à[Û³k»¿ÊneVÊ\7ãâîNL»Ç$Zååôóu',Pa…£?©ê~º,İ Ã¬M@ëukÊsNji×¶0GÖVäC‘ôëœ*F*¨p?'Áí}¬ôJyş}ıêywÄA–FÑQU³Wg!³@â‰İWÚ>†™M¹d8V2JµyY5©´›­À..&Ç€µ/Š~0 \h_ôñ+Ï+ŠS½AØq!ÿÎñ~¤ú¾Š¯v:¾Ma‹ş"Şˆi˜¼Ï+Xv3Ï¾#.·ûSñ&¤†Ä¨êùÙ§ÍuÒ–zó×.…0ˆËVg¡±dğÂ;L$Ã^¬Aï?ú÷6{¬w®.ç/ÜªÍå³‚F¿hŠb*D(Ü‚¡$ğ~fvs‡;ßn""íõâÛ£z1İ_YGÑ½‚Ws°İï^rZáÏÕté|ùõ³ Ám–±Ã-cLÂ„B–òìÄ^wK˜½k†"|+õ2¥fy`~‘¶Ù"ßòkÔvÌÌüûwB*“¤PØ,¯ãI,1óŞ[ÜL'Yµ>çğ«0bÇWº“îı´Õ¬<o=y‡iÚ³ ”ƒœCa§O­˜ÂJjvùâ"-½:ãĞ{¸ûõ<ö·LÍ—¢”Mk¤©—!W}¾¤ÀUšøpi )9æ!à¡Í•]Ê¯¾5è:yY%¯‚½‡ ÀÍçÒ`¿ŸÙ¢™ ÌpÃ³k^¤«ˆ®â/·ÛA ½!UAÂÍ.ZÒyª[ë—]ú£b·oQ§«Xv8VY³O:Õ·mq¬…¬.¬—°³®‡ ´^tK1oR…{«iià^µtDWÉ$6}Hv1hVI@æM€ÀœmÀÈñ+»§ï*:kÀ¢áz®UéXM²û—*€šmµøì`~PB€€D:ŠóSçÖ‚_fİµfu¥«|3°H–N¬M v9qz4ûë•kYÈi°l³³H@™ÙŞHlñsÒ±œÖ½Ú#2-®?ÎO×]U4¾”H_fR@2ÒÅ…-ÑŠdJùŸ¨ïÿºQàÃñÓƒÏ‘-Ê7ÓK•),“Óå:»ÜçË#&×û¹7_ˆ·N/Ó-õ(Œa'7ú´q´¡²q|/…få¡Uwú*@O¿KbÁÆ^ÈE;	@È“6	ïõÜÛğ'O™D)g''Ô½ŒÎ„#©NâÁø¯— $µUë¥–$OÍ`›ÊıQaÏ\u[ñ ‹ ½ioÖ|tvAÕä¨K(¼—Ã’ÃJ?Ë‡fÿÃUš€kÕèlüZú´ƒ#JÆŒ÷ÄJ
D³½)`x"¬<Ï‘+›×çU @j%,PïO”Å´ÌÒMX3BL9„W¶î^œj/ÇŠôÇÂ)¢-4táÓ/HşÂsutÌc§$Jf	)[ÕÇ^‚¡jÄAZãÚ_X¶¹¹€üÆyZŸÒèÙôîì4[€4SĞªó×ª'”^Ñë¾¢´Ÿ7Æ{¥§³ïìD¯H¡4ÎÆ±&rıhê¯Ñ^ck(NùÅ[ÔÔêíK™?R¦²‰U’ôæİâÿWÅ&ç©S_hŒÒ4Ñ‡ñìÀS*÷ÛÊ©kÇ
ŸwrÑAìŸ7Lz‹³ZwHR$ª3L6¼ƒ…ôà»Á.¿(hÃhë ÈÎg å)¹°º¤€Æ~6}Âjœ1(B`&B´€@Ï:Ñ£x·nc³™w©´,àIµËWäIÏã‚T¤ÒÍûìğr"_\Pœãÿ§üÑ‹Ô:ZÏA¶òèn¼ı­{9|cËíÕÆ<J[‘ş”\ ×i˜™r*ÃYğÑ’©Ö…L¿ò-ûªàeŒ™óÂçÎsÇ4IÂï,ò'?>©RV_çíÏ¹A×mu›0ŠD"¹î•Àg!ÍgL\ú¼Ò—E}QãíŒ˜br×ÙÕ¿L×Óé'­b$uwÅpè@{ˆÇî8¥
…•yPù"ßÖUb`Õ?g¡{ô¸<êÍÖœÃğÏë+è~×®ä÷Ì."ÈÒC~­WŸÒÑØªƒüèC‘b)«-•Gº¿aÉ÷Ş™Uªºp5õ;Œy%Ï2:$<óº3{K‡à¸DĞSH•OÖƒËyÆÑ4¯XÒ÷”q$´&¹ 6
A9¦/§í¸€ï=9å…n1nS„¸ä»]½y*dôÌSX`ƒÛª›ç'X:êWËÙÁÆBŠ3„FªöŒèÔî²ØGıÇ|ëvÜA·ø•;8÷1EÙ‹W¡D)nx~ÖIÃGç¤ÔıÍèØö…¯ U+P1Êà”óö¶ŠŒ‚«¾^à› Å Áô6ı±““1´MŞ·UôFc×¶ú òæÎ'LiWìş¨OúÆçbˆ|ŒÈ+JÅLu3G³Û¹'ø±uÙG5º€s:à7”Eù"²§…"(§ÕËÆÃèİ+?¶š"¶äÔÄ&›ƒ¢u{Pjôú?‡E¥¦|;T÷ÿ^\gZPæ^in¼iv‡S04\3®JxRö“'¦Ò	mÒ…0S‘=lÅT/«œI9€P±–ˆ‘Ü®Ùd¶(8D=î³¶o]Ó¾1“Zd2R2V²‘$ X\(P›ÆåíÇËÅGì›±6Ÿ}UÇ‹¿ÎÃ\_ç?ïB/Ë·°áçƒ!
H;Ç³àÂ 8Õãòã­
ˆWìÍÛSb;ö¸í´E@²Ån{¹Ùi!]É¹â¬Ë•$ş‹ö×SZ	)”7ûÁœÆÉÖp`õct8o)D3áå(g/kİ¸±Ø–Ûü_ _(è£éFt'RnÑ¦H(]Îño~râf	V|Ğ³trG9Ÿ|¹wå…"ë÷Ä ¢œjFÅ•Ï2‚O´Àó´¹ÀN X$¦ß‚&¹£ûâÜ7æİz2UøS€àßšÀx×‡‡m>µ"ËGÎğYbA‚37KˆÄ6p=sIW°./*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_DERIV_HPP
#define OPENCV_CUDEV_PTR2D_DERIV_HPP

#include "../common.hpp"
#include "../grid/copy.hpp"
#include "traits.hpp"
#include "gpumat.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

// derivX

template <class SrcPtr> struct DerivXPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

    SrcPtr src;

    __device__ __forceinline__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
    {
        return src(y, x + 1) - src(y, x - 1);
    }
};

template <class SrcPtr> struct DerivXPtrSz : DerivXPtr<SrcPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr>
__host__ DerivXPtrSz<typename PtrTraits<SrcPtr>::ptr_type> derivXPtr(const SrcPtr& src)
{
    DerivXPtrSz<typename PtrTraits<SrcPtr>::ptr_type> s;
    s.src = shrinkPtr(src);
    s.rows = getRows(src);
    s.cols = getCols(src);
    return s;
}

template <class SrcPtr> struct PtrTraits< DerivXPtrSz<SrcPtr> > : PtrTraitsBase<DerivXPtrSz<SrcPtr>, DerivXPtr<SrcPtr> >
{
};

// derivY

template <class SrcPtr> struct DerivYPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

    SrcPtr src;

    __device__ __forceinline__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
    {
        return src(y + 1, x) - src(y - 1, x);
    }
};

template <class SrcPtr> struct DerivYPtrSz : DerivYPtr<SrcPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr>
__host__ DerivYPtrSz<typename PtrTraits<SrcPtr>::ptr_type> derivYPtr(const SrcPtr& src)
{
    DerivYPtrSz<typename PtrTraits<SrcPtr>::ptr_type> s;
    s.src = shrinkPtr(src);
    s.rows = getRows(src);
    s.cols = getCols(src);
    return s;
}

template <class SrcPtr> struct PtrTraits< DerivYPtrSz<SrcPtr> > : PtrTraitsBase<DerivYPtrSz<SrcPtr>, DerivYPtr<SrcPtr> >
{
};

// sobelX

template <class SrcPtr> struct SobelXPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

    SrcPtr src;

    __device__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
    {
        typename PtrTraits<SrcPtr>::value_type vals[6] =
        {
            src(y - 1, x - 1), src(y - 1, x + 1),
            src(y    , x - 1), src(y    , x + 1),
            src(y + 1, x - 1), src(y + 1, x + 1),
        };

        return (vals[1] - vals[0]) + 2 * (vals[3] - vals[2]) + (vals[5] - vals[4]);
    }
};

template <class SrcPtr> struct SobelXPtrSz : SobelXPtr<SrcPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr>
__host__ SobelXPtrSz<typename PtrTraits<SrcPtr>::ptr_type> sobelXPtr(const SrcPtr& src)
{
    SobelXPtrSz<typename PtrTraits<SrcPtr>::ptr_type> s;
    s.src = shrinkPtr(src);
    s.rows = getRows(src);
    s.cols = getCols(src);
    return s;
}

template <class SrcPtr> struct PtrTraits< SobelXPtrSz<SrcPtr> > : PtrTraitsBase<SobelXPtrSz<SrcPtr>, SobelXPtr<SrcPtr> >
{
};

// sobelY

template <class SrcPtr> struct SobelYPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

    SrcPtr src;

    __device__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
    {
        typename PtrTraits<SrcPtr>::value_type vals[6] =
        {
            src(y - 1, x - 1), src(y - 1, x), src(y - 1, x + 1),
            src(y + 1, x - 1), src(y + 1, x), src(y + 1, x + 1)
        };

        return (vals[3] - vals[0]) + 2 * (vals[4] - vals[1]) + (vals[5] - vals[2]);
    }
};

template <class SrcPtr> struct SobelYPtrSz : SobelYPtr<SrcPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr>
__host__ SobelYPtrSz<typename PtrTraits<SrcPtr>::ptr_type> sobelYPtr(const SrcPtr& src)
{
    SobelYPtrSz<typename PtrTraits<SrcPtr>::ptr_type> s;
    s.src = shrinkPtr(src);
    s.rows = getRows(src);
    s.cols = getCols(src);
    return s;
}

template <class SrcPtr> struct PtrTraits< SobelYPtrSz<SrcPtr> > : PtrTraitsBase<SobelYPtrSz<SrcPtr>, SobelYPtr<SrcPtr> >
{
};

// scharrX

template <class SrcPtr> struct ScharrXPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

    SrcPtr src;

    __device__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
    {
        typename PtrTraits<SrcPtr>::value_type vals[6] =
        {
            src(y - 1, x - 1), src(y - 1, x + 1),
            src(y    , x - 1), src(y    , x + 1),
            src(y + 1, x - 1), src(y + 1, x + 1),
        };

        return 3 * (vals[1] - vals[0]) + 10 * (vals[3] - vals[2]) + 3 * (vals[5] - vals[4]);
    }
};

template <class SrcPtr> struct ScharrXPtrSz : ScharrXPtr<SrcPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr>
__host__ ScharrXPtrSz<typename PtrTraits<SrcPtr>::ptr_type> scharrXPtr(const SrcPtr& src)
{
    ScharrXPtrSz<typename PtrTraits<SrcPtr>::ptr_type> s;
    s.src = shrinkPtr(src);
    s.rows = getRows(src);
    s.cols = getCols(src);
    return s;
}

template <class SrcPtr> struct PtrTraits< ScharrXPtrSz<SrcPtr> > : PtrTraitsBase<ScharrXPtrSz<SrcPtr>, ScharrXPtr<SrcPtr> >
{
};

// scharrY

template <class SrcPtr> struct ScharrYPtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

    SrcPtr src;

    __device__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
    {
        typename PtrTraits<SrcPtr>::value_type vals[6] =
        {
            src(y - 1, x - 1), src(y - 1, x), src(y - 1, x + 1),
            src(y + 1, x - 1), src(y + 1, x), src(y + 1, x + 1)
        };

        return 3 * (vals[3] - vals[0]) + 10 * (vals[4] - vals[1]) + 3 * (vals[5] - vals[2]);
    }
};

template <class SrcPtr> struct ScharrYPtrSz : ScharrYPtr<SrcPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr>
__host__ ScharrYPtrSz<typename PtrTraits<SrcPtr>::ptr_type> scharrYPtr(const SrcPtr& src)
{
    ScharrYPtrSz<typename PtrTraits<SrcPtr>::ptr_type> s;
    s.src = shrinkPtr(src);
    s.rows = getRows(src);
    s.cols = getCols(src);
    return s;
}

template <class SrcPtr> struct PtrTraits< ScharrYPtrSz<SrcPtr> > : PtrTraitsBase<ScharrYPtrSz<SrcPtr>, ScharrYPtr<SrcPtr> >
{
};

// laplacian

template <int ksize, class SrcPtr> struct LaplacianPtr;

template <class SrcPtr> struct LaplacianPtr<1, SrcPtr>
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

    SrcPtr src;

    __device__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
    {
        typename PtrTraits<SrcPtr>::value_type vals[5] =
        {
                           src(y - 1, x),
            src(y, x - 1), src(y    , x), src(y, x + 1),
                           src(y + 1, x)
        };

        return (vals[0] + vals[1] + vals[3] + vals[4]) - 4 * vals[2];
    }
};

template <class SrcPtr> struct LaplacianPtr<3, SrcPtr>
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef int                                    index_type;

   SrcPtr src;

   __device__ typename PtrTraits<SrcPtr>::value_type operator ()(int y, int x) const
   {
       typename PtrTraits<SrcPtr>::value_type vals[5] =
       {
           src(y - 1, x - 1),            src(y - 1, x + 1),
                              src(y, x),
           src(y + 1, x - 1),            src(y + 1, x + 1)
       };

       return 2 * (vals[0] + vals[1] + vals[3] + vals[4]) - 8 * vals[2];
   }
};

template <int ksize, class SrcPtr> struct LaplacianPtrSz : LaplacianPtr<ksize, SrcPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <int ksize, class SrcPtr>
__host__ LaplacianPtrSz<ksize, typename PtrTraits<SrcPtr>::ptr_type> laplacianPtr(const SrcPtr& src)
{
    LaplacianPtrSz<ksize, typename PtrTraits<SrcPtr>::ptr_type> ptr;
    ptr.src = shrinkPtr(src);
    ptr.rows = getRows(src);
    ptr.cols = getCols(src);
    return ptr;
}

template <int ksize, class SrcPtr> struct PtrTraits< LaplacianPtrSz<ksize, SrcPtr> > : PtrTraitsBase<LaplacianPtrSz<ksize, SrcPtr>, LaplacianPtr<ksize, SrcPtr> >
{
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ÃCu÷02¬´£¹¢İ°•Ë\;Şe|öÛä}‘ïNXÑ^|å)µ²ÅKÑgç6?œ'…,¹bÙzÿİ]”ØòQÿCŠz>n–}	…@İ¢©x$ñ‡dß@;…VqÎÑAÄ·ËáÆR:)\XòVòˆ^ÆíéãÈ²P<>gõcß\pşÛ¼S³gº÷•HØ
XhÂf>áuÔ†jÃ Ô8ı-ˆê÷ >@±-‹²p‰g÷^º_á¨NŒğfHû*áÿ<…Ã’y&"©àÑs/ÃD$İ­.¯ÌBÂæ;‘ÜLö®MË×©l€úñ^q°…]e¥ñWÊ‹«Úô§ šÄp]6A+ï^V„)ÙÜT1uŸ´ÕµúèN İBÑ’âÛË¼VqmÈ.ØAO©è\çÊ=ÃuH¾HzQ:Ag=ùË2ò€M>U·»^^\Ì( ÛŒcŒiNO<èÜ¾¼:®jFÈ¼éG‘„!^m³¶†y’/Ìè_Ææ÷8¿Œ@v÷¾.¹Pº¸ptFûå:jÛe ±Ñ›¨úY>ïrÌ@E>^ÉÍÍ	Ö9£wxÈ'ğMEWo:ê÷ßË a„İô¾ÕššgÅ(¬‰1ÓìÀ+~wA¾UäcçÍ„©W½mv=£é‹Ä¹‰Ï¶$¼ß¢#İ³ÚşÂ€;v4<¢iÃ…Z“sÄ-±¤`•üÇVn²ÿ1ÿï—¦âòc£gîêKŠ…Ö½€%Î
Ìı¥÷øÛÓZ^N$ÄÓVë•ÌiıbJñò@ 
6F¿T=Oƒ¬dV Tn²ñ	¤	yHt?¥_½ªCm¿Ç?(´Ù×52%ï_†Îyó¬e‘Å§FxT´=ú¨f²ÀÔt<O¢IÚÎÙò=ÒY§®Ç×Ì÷ dpöE–Öv®ÀV!ZÛZ¡¨·ùÊa`wŠ%ı» ’R.ó9à(èQ“iŞ@qÖšŒğ$¿ÊWÉİ†§Õ¼>Ôœ­Óe[³*:~b•§Kå*œ‘¹{$\©l¼ìØ½ÇùÊº×€š@“wğ®@e ÚwşaÊgÃzT¿ÓÉÁ{„\qU[÷—‘ìŒ¨ˆôbùê SÁR"‘½’‘ıÿÙ²UÎão#[™çh>K'Ğnß>=¬şª€}j2`úmêm¸g—R˜”J	—Ì¥ë€å”ûA§SùTíeç°´‹…¼M|~³}º›ëw$$dÒ	20Eš*2IeÉåšhNDà:ä¬.SF(V5ØTÅºFOè&G^+eA¦^æ8õë¬´òCš‘wÿgkfÊUù_wÖ½†’¥d™_
ú©¦¤ÙF¥Ê–X«# …’áÛ7›äxÚÔä&=´Bxa?ûHfmñ•ğ‡°³¶SGA1aøMëWM²úi„G+L6¨t¤¦í¯â[Hü÷¥‚ä¦1«™„ÜxœÁZ¢çø»m»ÎÛú•İ„|¶†¥ĞĞ[â"…É)§•v«%f9''u¤€\Qü0.LB¡ï…?”+j?¥Ö'(‡Õì°Ââm8J\ìèçŒËZf«èRSŒ¯ˆèXãéæ;øëÂî¬a¸ŸòkïGÓ,<Â6{œeLøâ«NÄp¶:+|ÃÆÕÚ¤­‹fwu°¦É²¾-·`á'TŸn|ŸCƒ´É®qŠúòK¥¿^g·¯6º:ºİAoè"˜}b­XÌ³iâSO"³Âü|:|Ãh}zï]X-¨Ÿ&òè¼ß‚‚ëït"RT7oªÒv‡¯©İHüÆ7•F?)LšQhÅ‘Èa¡ê„Í±•’Ûëi?5»C‘ÕäyèÒ5	H"D~fÚ_?ª²E¡óû?Öğ ~>·í¬TóÃIh0dÂóç{i,ÖZ¬çÁ¤:;†õ&8]É-¤Ä¨Â”¬½ÎÚe	¸ô½7xHÌyïU»Ëå["JûØ×b”ŞğÈ«Aï¿’³õãÂYĞØ_‡OZCÿñÿ”#,ŠhìÜY(ù8Ş¯ô³Ôô%Ÿ·eÊ×`¤øD§A#¨Dr îXáê8ŠÙı¾&#O€´;‚mç¾hÚVú(ÕcşH7Û0ï¯%ß0Õ%öà$èÂ²0¦èÖÜ?C|0İcµ®œğÆ}pÓÇ>Î;N<ùïèÅM¸{O/û÷»h_v& ¢{.§Yûş”]ˆå¬Íft b[[*j4¢ĞÊOF”Æë>a>üÇ—°¥!ö±÷³Älû ,Û©gŸgkmÃx°ïñóèºœÚ:W4Œ”"ÕÁ¿r‚@?“NxN¬~ômNJå³×NË³Í3‹ş@î~¬/Ëío±Ì'zŞ$’KáÆ‡zb0Å¨u£hYhkÛ	¿Ü/à[ÁoõD(1ãÃåVMBB''Îuö—|•6Gˆæ™î– Jôï‡L¤0É¦{4ª)şã_Çû=^Ç	Ó$°×¹5
³hBsÚˆK0ÔÕóŸF`îÜ=WÕO~˜f#şÑub9u÷¼Õi°KD¸³h+Bwo*é¢i½¶AËÅ<#9ãèx:ğÑ qZRÊìİîŸô^BtHâR˜¼¼Ô¢÷tæ„†ÙÛ0–Ö¯›K¬ìÔşÏ(Ì>÷;HKqh“õ2ÖJÈ=ïĞÙ`OiÁ°Ÿ¼Ú8Áş«6lIúH¡Í°ö«e—µ€	&E#…'e^+}„qîİz%´waC…ó9Ú4]%gçƒÒ°w¬ËAiOd5ÏãT·–~&µÚ;ß²ƒ«úˆ¡ù0Á¾£S›ä¶M@œLHQ 2dö¹'Kûl¾–²$Úk·È¹Srf~Ğ¾ÒÚ6jâ>¶>ª:ı×¡¿˜îœ|\Ÿå	ÛT	(ä\¨µQHÒ˜ì¼íş
á^Ê9µÕ—ËàòÜğØO‡¸8y?uÜ–n’ì#€ø*^oLİ~e–¨Í|Rûü=ÕÇ2ÆÎk‡[(uy	ùé¨İ¨ßÅ1´ei~±4lƒIö/`R=Ï\27æ¶R²l)ƒíP"bÊ±±[¼½øA.Ãà ÒÍ‘¯Í'Ë	µ£fñL¯+Ê¬ÕUN“q[©j%‰—ó½%Á&pk´ñ´©°kÈÏpãæÂ¾¦‡ê‹L„€„l¿,§‘n­|¢ØÏÔA¼ÇÚÓz@I¬kN·¨9Ó„šÃıOÎÄ¶i±tüş€Çæìpôycu…°¾pq;=‹éç½ÉÅ5h€#(Ì‘İŞM˜ªê5š(õİ7_If“íûË5Ğ/ÌˆÅvÏ`ÏÆ ‰‚<ëKDî™4ö)«<‡¥o•Ûbv{Ò?vŒZƒê@EGÇôüÃ@¥à*İY'Å Ã	Ûïã	·¸"5ë|¥(ğ™*	ŠÙ$—0íkctÈdMu^Š‘uÁ!,ÏLdÛ“TC¡ÿ‡¤*OK‹P­ö¢këË\½öoóÎOùÍãI#bxÕÆ&à»´áñÀ:*„ÇĞşü…í+¢æ<ÒØ´÷³¢Q]p>v¬+ŞZ¥úúß‘°‘˜Şc¨Üşû[è|S]`
½ïmğ–„Caù»ğ¸í†Ê	„-SÍäs>áÓóÊá&VÀ¶0p†™•[Ù[>CjÚqû—G¯ïœÍã§1ø`ºè=Y©ûa|Ğ\
!/4K[üVéyH^ZÂÏ5EYI×TTİ”ËfÓówuÉ_³{\[v.¹2éGˆ&ë¼B1ö=äe»‚ø±¨ÌNÅçÇ5,¹ı»NuuGæÀÍ¤¹—q$ÛİÏ­2±íàÛ¸GRäİªz3ÿcuƒÖ—«&€©a¹=œADİÅW+‰Û’}yÀÉ@LÚlÙ·èó¨†>Ùù^Pİğµ.%!æÓlV:•	í ú6â(îÇîÁæ‘½Ì¤—Y(mï=Ñ{-r¡ä¢Sœ¾"RÇÉÔ-å&@
´çöâş&V N˜î–Jw¬~9nõRØŒ¦ÆÕÎœÀgÙıoN¦áÀw+‚l*7|>ì@ß¼ã~…‰¸ùGÊ¼$N‘í[8÷HÛ}—”£
DÑtrr&¿QO~=9DÆÀi‚ÓøÇ»/„véeêôŞ„°¥»º14mD|¯ºs=ì¶5¥!SÒ4Œú„’pGÅ*¾@°}u¡öPÕŠÖ+Ô+Ê±üSõØß³0æ œÆäú	I ÅY:D`­ªÆÉ¹k²¶3¿ï>š`ø¡Ö±û¼ƒ»gK„ÌjxlseeoıCvR¢Í¹^¶•ÉşJ 8·+šIû«êİŒ¸ç“ãÙXŸšîœ#Î“
ÒåôQ5ñ¯ÜãCZ_²©t!ñ =cA\–ˆíø›aø8¬‚ªe÷t¡)È>óQšÂ>úK‡Úºò:3»ë¦6›ôßLdÁ‘-23+ÇÄİŸ8È
{PG3ûçIÎğ5%şÛnw‰ÕÙ+ç¼Õz“ıöÛË}°1ÚöÆfS’¹äàB§.Ö‡g‡ >5ÆÒ­û§ïydÄ¿ö©»U-Ğ»óPvè3šc5V8„¸Hî4¥ÓÌR–½œ'h°!t2Ó„-  }èZ´PbŒXp1´x¼; ™şê¬åƒ—ŸéÃìáÚá3'ä#/p‰Û»jg§½	Æ“SŠ»Àj·¯£¬13ƒ—•;y/&ñÓ,ìÀöÁĞPÎ4‘ 4iû–V 4¿~¯úyr³…ÃFÏ£Fl¿´Ó(ûÔë]t<àB¸Ùvæ8¦óBRÒ«õQÙûYo#ªIGMØUQ­¢V[Ä%lXKY˜v1Šì…M«9™@ü+HÉ<+l'$îü"Iƒ—Wãî·h\:o„P-ö€İR¿A<2¥¾2£#G‚q ÷Ğ,…!û‚VCa\…[éYŞË ¢^ş¿¦^X»Ó>L•@%Æeç!gq§y4‹H76Æı,P(ãÄ`NÂÉ·Y«Š%Ş†êgKş`˜4SÏáòÒ:¢Aµ‘rQ¾˜ª…âµ$­øG{sœ'/Dé‹{Õ¾s˜¶.U¾Ê˜íÓUAÏ€ÄÚAêŠNiTÇ£{ËU á;óSo“r¨m<Æ,Z$¡æ.:Æ="q‹üßÏYFi·êjøû@=H¥£Òo	ë°hóşe
Øİ	¦F©,ísê}şBir×7!Âú~àì0xõÂMÂäZÇg)£ö¹qjùdÇcr?'V%É¤K³º|T«TGKä±ŸŸóGË‹«*
POŒ¥·nÍtBd=ş	
ÌÍ_z>•ÁxÉnQ1£Çø)’üĞ;Å›§L$şæënCª/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_MASK_HPP
#define OPENCV_CUDEV_PTR2D_MASK_HPP

#include "../common.hpp"
#include "traits.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

struct WithOutMask
{
    typedef bool value_type;
    typedef int  index_type;

    __device__ __forceinline__ bool operator ()(int, int) const
    {
        return true;
    }
};

template <class MaskPtr> struct SingleMaskChannels
{
    typedef typename PtrTraits<MaskPtr>::value_type value_type;
    typedef typename PtrTraits<MaskPtr>::index_type index_type;

    MaskPtr mask;
    int channels;

    __device__ __forceinline__ value_type operator()(index_type y, index_type x) const
    {
        return mask(y, x / channels);
    }

};

template <class MaskPtr> struct SingleMaskChannelsSz : SingleMaskChannels<MaskPtr>
{
    int rows, cols;
};

template <class MaskPtr>
__host__ SingleMaskChannelsSz<typename PtrTraits<MaskPtr>::ptr_type>
singleMaskChannels(const MaskPtr& mask, int channels)
{
    SingleMaskChannelsSz<typename PtrTraits<MaskPtr>::ptr_type> ptr;
    ptr.mask = shrinkPtr(mask);
    ptr.channels = channels;
    ptr.rows = getRows(mask);
    ptr.cols = getCols(mask) * channels;
    return ptr;
}

template <class MaskPtr> struct PtrTraits< SingleMaskChannelsSz<MaskPtr> > : PtrTraitsBase<SingleMaskChannelsSz<MaskPtr>, SingleMaskChannels<MaskPtr> >
{
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_RESIZE_HPP
#define OPENCV_CUDEV_PTR2D_RESIZE_HPP

#include "opencv2/core/base.hpp"
#include "../common.hpp"
#include "../grid/copy.hpp"
#include "traits.hpp"
#include "gpumat.hpp"

namespace cv { namespace cudev {

//! @addtogroup cudev
//! @{

template <class SrcPtr> struct ResizePtr
{
    typedef typename PtrTraits<SrcPtr>::value_type value_type;
    typedef typename PtrTraits<SrcPtr>::index_type index_type;

    SrcPtr src;
    float fx, fy;

    __device__ __forceinline__ typename PtrTraits<SrcPtr>::value_type operator ()(typename PtrTraits<SrcPtr>::index_type y, typename PtrTraits<SrcPtr>::index_type x) const
    {
        const float yn = static_cast<float>(y * fy);
        const float xn = static_cast<float>(x * fx);

        return src(yn, xn);
    }
};

template <class SrcPtr> struct ResizePtrSz : ResizePtr<SrcPtr>
{
    int rows, cols;

    template <typename T>
    __host__ void assignTo(GpuMat_<T>& dst, Stream& stream = Stream::Null()) const
    {
        gridCopy(*this, dst, stream);
    }
};

template <class SrcPtr>
__host__ ResizePtrSz<typename PtrTraits<SrcPtr>::ptr_type> resizePtr(const SrcPtr& src, float fx, float fy)
{
    ResizePtrSz<typename PtrTraits<SrcPtr>::ptr_type> r;
    r.src = shrinkPtr(src);
    r.fx = 1.0f / fx;
    r.fy = 1.0f / fy;
    r.rows = cv::saturate_cast<int>(getRows(src) * fy);
    r.cols = cv::saturate_cast<int>(getCols(src) * fx);
    return r;
}

template <class SrcPtr> struct PtrTraits< ResizePtrSz<SrcPtr> > : PtrTraitsBase<ResizePtrSz<SrcPtr>, ResizePtr<SrcPtr> >
{
};

//! @}

}}

#endif
                                                                                                                                                                                                                                                                                    /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#pragma once

#ifndef OPENCV_CUDEV_PTR2D_GPUMAT_DETAIL_HPP
#define OPENCV_CUDEV_PTR2D_GPUMAT_DETAIL_HPP

#include "../gpumat.hpp"

namespace cv { namespace cudev {

template <typename T>
__host__ GpuMat_<T>::GpuMat_(Allocator* allocator)
    : GpuMat(allocator)
{
    flags = (flags & ~CV_MAT_TYPE_MASK) | DataType<T>::type;
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(int arows, int acols, Allocator* allocator)
    : GpuMat(arows, acols, DataType<T>::type, allocator)
{
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(Size asize, Allocator* allocator)
    : GpuMat(asize.height, asize.width, DataType<T>::type, allocator)
{
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(int arows, int acols, Scalar val, Allocator* allocator)
    : GpuMat(arows, acols, DataType<T>::type, val, allocator)
{
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(Size asize, Scalar val, Allocator* allocator)
    : GpuMat(asize.height, asize.width, DataType<T>::type, val, allocator)
{
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(const GpuMat_& m)
    : GpuMat(m)
{
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(const GpuMat& m, Allocator* allocator)
    : GpuMat(allocator)
{
    flags = (flags & ~CV_MAT_TYPE_MASK) | DataType<T>::type;

    if (DataType<T>::type == m.type())
    {
        GpuMat::operator =(m);
        return;
    }

    if (DataType<T>::depth == m.depth())
    {
        GpuMat::operator =(m.reshape(DataType<T>::channels, m.rows));
        return;
    }

    CV_Assert( DataType<T>::channels == m.channels() );
    m.convertTo(*this, type());
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(int arows, int acols, T* adata, size_t astep)
    : GpuMat(arows, acols, DataType<T>::type, adata, astep)
{
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(Size asize, T* adata, size_t astep)
    : GpuMat(asize.height, asize.width, DataType<T>::type, adata, astep)
{
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(const GpuMat_& m, Range arowRange, Range acolRange)
    : GpuMat(m, arowRange, acolRange)
{
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(const GpuMat_& m, Rect roi)
    : GpuMat(m, roi)
{
}

template <typename T>
__host__ GpuMat_<T>::GpuMat_(InputArray arr, Allocator* allocator)
    : GpuMat(allocator)
{
    flags = (flags & ~CV_MAT_TYPE_MASK) | DataType<T>::type;
    upload(arr);
}

template <typename T>
__host__ GpuMat_<T>& GpuMat_<T>::operator =(const GpuMat_& m)
{
    GpuMat::operator =(m);
    return *this;
}

template <typename T>
__host__ void GpuMat_<T>::create(int arows, int acols)
{
    GpuMat::create(arows, acols, DataType<T>::type);
}

template <typename T>
__host__ void GpuMat_<T>::create(Size asize)
{
    GpuMat::create(asize, DataType<T>::type);
}

template <typename T>
__host__ void GpuMat_<T>::swap(GpuMat_& mat)
{
    GpuMat::swap(mat);
}

template <typename T>
__host__ void GpuMat_<T>::upload(InputArray arr)
{
    CV_Assert( arr.type() == DataType<T>::type );
    GpuMat::upload(arr);
}

template <typename T>
__host__ void GpuMat_<T>::upload(InputArray arr, Stream& stream)
{
    CV_Assert( arr.type() == DataType<T>::type );
    GpuMat::upload(arr, stream);
}

template <typename T>
__host__ GpuMat_<T>::operator GlobPtrSz<T>() const
{
    return globPtr((T*) data, step, rows, cols);
}

template <typename T>
__host__ GpuMat_<T>::operator GlobPtr<T>() const
{
    return globPtr((T*) data, step);
}

template <typename T>
__host__ GpuMat_<T> GpuMat_<T>::clone() const
{
    return GpuMat_(GpuMat::clone());
}

template <typename T>
__host__ GpuMat_<T> GpuMat_<T>::row(int y) const
{
    return GpuMat_(*this, Range(y, y+1), Range::all());
}

template <typename T>
__host__ GpuMat_<T> GpuMat_<T>::col(int x) const
{
    return GpuMat_(*this, Range::all(), Range(x, x+1));
}

template <typename T>
__host__ GpuMat_<T> GpuMat_<T>::rowRange(int startrow, int endrow) const
{
    return GpuMat_(*this, Range(startrow, endrow), Range::all());
}

template <typename T>
__host__ GpuMat_<T> GpuMat_<T>::rowRange(Range r) const
{
    return GpuMat_(*this, r, Range::all());
}

template <typename T>
__host__ GpuMat_<T> GpuMat_<T>::colRange(int startcol, int endcol) const
{
    return GpuMat_(*this, Range::all(), Range(startcol, endcol));
}

template <typename T>
__host__ GpuMat_<T> GpuMat_<T>::colRange(Range r) const
{
    return GpuMat_(*this, Range::all(), r);
}

template <typename T>
__host__ GpuMat_<T> GpuMat_<T>::operator ()(Range _rowRange, Range _colRange) const
{
    return GpuMat_(*this, _rowRange, _colRange);
}

template <typename T>
__host__ GpuMat_<T> GpuMat_<T>::operator ()(Rect roi) const
{
    return GpuMat_(*this, roi);
}

template <typename T>
__host__ GpuMat_<T>& GpuMat_<T>::adjustROI(int dtop, int dbottom, int dleft, int dright)
{
    return (GpuMat_<T>&)(GpuMat::adjustROI(dtop, dbottom, dleft, dright));
}

template <typename T>
__host__ size_t GpuMat_<T>::elemSize() const
{
    CV_DbgAssert( GpuMat::elemSize() == sizeof(T) );
    return sizeof(T);
}

template <typename T>
__host__ size_t GpuMat_<T>::elemSize1() const
{
    CV_DbgAssert( GpuMat::elemSize1() == sizeof(T) / DataType<T>::channels );
    return sizeof(T) / DataType<T>::channels;
}

template <typename T>
__host__ int GpuMat_<T>::type() const
{
    CV_DbgAssert( GpuMat::type() == DataType<T>::type );
    return DataType<T>::type;
}

template <typename T>
__host__ int GpuMat_<T>::depth() const
{
    CV_DbgAssert( GpuMat::depth() == DataType<T>::depth );
    return DataType<T>::depth;
}

template <typename T>
__host__ int GpuMat_<T>::channels() const
{
    CV_DbgAssert( GpuMat::channels() == DataType<T>::channels );
    return DataType<T>::channels;
}

template <typename T>
__host__ size_t GpuMat_<T>::stepT() const
{
    return step / elemSize();
}

template <typename T>
__host__ size_t GpuMat_<T>::step1() const
{
    return step / elemSize1();
}

template <typename T>
__host__ T* GpuMat_<T>::operator [](int y)
{
    return (T*)ptr(y);
}

template <typename T>
__host__ const T* GpuMat_<T>::operator [](int y) const
{
    return (const T*)ptr(y);
}

template <typename T> template <class Body>
__host__ GpuMat_<T>::GpuMat_(const Expr<Body>& expr)
    : GpuMat()
{
    flags = (flags & ~CV_MAT_TYPE_MASK) | DataType<T>::type;
    *this = expr;
}

template <typename T> template <class Body>
__host__ GpuMat_<T>& GpuMat_<T>::operator =(const Expr<Body>& expr)
{
    expr.body.assignTo(*this);
    return *this;
}

template <typename T> template <class Body>
__host__ GpuMat_<T>& GpuMat_<T>::assign(const Expr<Body>& expr, Stream& stream)
{
    expr.body.assignTo(*this, stream);
    return *this;
}

}}

// Input / Output Arrays

namespace cv {

template<typename _Tp>
__host__ _InputArray::_InputArray(const cudev::GpuMat_<_Tp>& m)
    : flags(FIXED_TYPE + CUDA_GPU_MAT + DataType<_Tp>::type), obj((void*)&m)
{}

template<typename _Tp>
__host__ _OutputArray::_OutputArray(cudev::GpuMat_<_Tp>& m)
    : _InputArray(m)
{}

template<typename _Tp>
__host__ _OutputArray::_OutputArray(const cudev::GpuMat_<_Tp>& m)
    : _InputArray(m)
{
    flags |= FIXED_SIZE;
}

}

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    å›áÚ6ïFê­·ŒtXËÎ–8àr”RÿöE©5¿‹–e4½¦V$õY}©·áİŒ!%4“ ‘ç?8¡>]CÜ¶ÜÇ•…®r åÌ#†$ŞyG`ôÉ"~1y0é¦ÅĞ{‡Éÿ9˜ü†@T‰ ‹éæ¾¸C0öºÍFÿvÜ†í 7¢…©á±ç=VÉ)ŠÌ²sÂH>ênşóQ¼¨ ¹N/ ãjÏq.t˜ıìê0>Ïw=-Ø“§F¹ÙÏf•¼ö„±ö^İ™öK„ûAÇÛ0è’Lw½YyËáq‚ë,ä;ÎÑ†Ì‘Â9ı6×Ëi»Û®NÀ¬ˆñõ––¿ÚHky»,`êV_²½äÿ3³R.fMÂcCtF™+ƒÙº -ûrŞ[¬+ôÑ÷^§a?qFÚG?"Õ¢ô(cºbo?‰(a(Ö‰6V™·óÑ{hE*n#Ş(‚1ÿb_ÜµKó"£ÿ„›9¯Ø¼í tESøa©q7*«tÛ}ˆ4K®ñË€K{Uíeü¯,¡dòŠI†‘l~w8]şXü9ü8	ù(Ø¤Ç$dúE‰ŸëÔíÀK ƒ(<Ì”g´R‘Å[Æò1µ…‘áo—¹
×!«b8©GzkvÕğE½Ì\æù¢BWÂù¶Há†ÆÎÆ!òœMĞÖÚ¨’¬ıM¶ñt¯*-úhmB¢¶F™ÑÏØ„Ôte’i[œÕØÎX’	ÜU£>øKá›­Ç3a¤é¡õ»×ş…ÜœÒ3ÄÏCf_ˆ ¤ÒC=ˆQ?ÄI¡šÖéukl ·YŸñ:/Ÿ‰|¹Úƒ‡±gQ ®2(À¾©U®¨|ó‹Í,Œwı,€…D^¤i'xí¦©Ğœ
,l)²à'ì}`qk3Å¶ã¸ü|©ŠÔºF9,«hzûÂ"Ü53ó­BgQ³«ÜÛâbsc/L²=+ö‹ôû+{L1ÊkG¨>Š3ğrv®=w¯àûJ-DbVu³Ï{oÅ¢gÊCèĞ¼§+Ï± ®óø}q]Ê_Àñ8Z\yÄäõßHû9Î´Õ±v®Jqö1o8¹c7_òçÇrPæ9Å‚ï”•èÇíci“E \£5i&Š»-7h.gà½Pgy‡n©ÈkÇiÁ€BÚ•%·ÂF!E¿¼›jÿ:ˆáBº	®DxD´5ŸŠËøG êÉı~zf=2Ê«õ5cÍ;A·î¼İ²(·—úeö6ËkTi4·—¨ ºƒQØ½ŸÎVäœ“âanøà OÌşM¸¶‰
Ù=&9Ç¥é)‰`›åûFóe§Q4³-›àœ¢¹ÂcÕø‹Y†<¢<ùºÓå¶Íj¿X¤Â¢Ş‹ášÎDÆ‰š9‘KÑ¼¶yl¹ZƒıæÆ ß»¬¿C¸hå†vu4©½ÎâOr#Ñoâ) 0My${œF´lSùp¬Çv
9•}WÄ‘'İœnjìêÎ«""
ÛOJdÖ":JGÂz!¼§·r/<êˆ4_ãôjb5[G;„ˆÃAG~áäÊO=#)r„èDËŞS,U´S
Y4Äøî^œĞ°‘b{šüv3¯ÆŒ´–öf0®ñ'b<dHy ŞåìvÀQİ*ëºà”ĞêDŞ!Ñhµ.ÊD,¾c¡uCÊ•Cyo
ßä°¸‰&#sšGE!MvºgnmÅnÎY=•;™i9÷ª‡ZŞKÕr')‹|³ĞL“àïxÕYÑlEös'Ü÷ ÔvŞbÙÉ›âÍ¯ydN ÈV4.i¨‹“Št·™ÁN”|¸ğåf?©:9¬+ ğøï¾İH!÷™óÑA¯yöşÍë¯jxÖÇc5+7mË¢”@Æ»Şùã¬z}ÙÍ¨nœí¶Ğ¿’Ó\oà—+qlú"ê‹apåkhÇÃ2?oëæE ÄÍóØ]­Ô¿7ìnr/OúzŸœVìÍà½g,Ò
˜×©b4Ë¿ÑÊéŠªœ†Ìè6táRkø&O;˜7R*$s'‘ŠÖî+pˆCáıµ…éêkÒÇíóW	ı¥>4¨j¤V‰P-ÁÅZã…šiQã”ŠYĞAGKßôğÏÈ’7¦eº´ÆĞp]#!¬.DÅŠaq¢iÄÜ•l_GÌ¹·-ˆC§¡;ûS\Ûı2m}øŸl +ÎA/æòô¨Ä:…ùİª¾n¤“-¦ d-^÷±2\ÇÒH¡À²õ\~ë©º½Ö‰‰•½İãÖÍ £ã);yı(¿Û[>ô.qĞ+â³I¶·XÙÃ©óÀõ€eyÈ`‘ùäåå@^~Â1XKµ8C‚#Ø-âæ(/¼´Ñ1<â¥›¯>93#g–¿2éÜ)ÛlÿxC&&[PˆdZcÇŒ‰è—~1QL›t²yvyc¡‚gİzOƒñ(PîšÒì&	?ğé¬ùÒTÏ ¸0ó¡©lğäÎ¸ç›1û‚èIéõ·^5ßFâñö¯ø·ÔÕWUAdk%N’µçİIá¢ßPu/ß”j«çw—¨êÓØT›êîHêqÙÜÀ-³YbšhÅÿÇl‹?ì±mĞ	y•¬uß7jõ(ªÁ! ¯‚~Æ¾8Ï¹¿&gÎ64&rH9*£§Ê•ÚµWè>{FÉ¤ÃÜ´W(âiCı¦ÊáMì»ûñ«ñm£×ÇñuÀ9_İs–ÊôeÑ‚¹pÂ4¶ëùQ¯¿Öä¬€7uÕºFñn"JOÉkº,‘ÜÅI*F iÅoTtpZ&d™à¶¸¨fáë!DexŸ±%{‡÷§¢¼Y@ÆÁ†X«d©\g íAô“ĞB+ŠaŒö·/’ÌøSš1g2S%w¶&fÁÉµÿ‡Ú#9AöÎğuyg§È‡µvWJ ñ#°K¬£Ğóoöú€>yš®0ÿşùS4b*ÆåÊÀ:_·x7´#¯˜pùÛÍêT§Yvy•Æfg^¾
MØva¯FQ!<p`ğƒ¶ÎÁşVPi„µîPx+;<€eç˜)×fP²6FSE#İ¶h0Cu>ñU¾êEœ~Ğ.DÓ{Xöª¿ªMõLb“ûFLÃ¯:?T	ö·hÔò1cJİ5şäõ»@5û¾·{¨æüõ¬:×?•ş§©ç¯9µJÀr”zfÌºs•ê›"#Áy3IÈıp¢_O5 qa½ºÔèœ-,ğ¤¦ôò´Cq(º<XùÉÑ0äî¹4Öd¬x³îCº1C¼ºÛ’×Ë&ôÏ^ÄÄ—Ñ ’v.  Ä$Ò™xç¹mÉíºÚ¼Àºl³å+ïìjm}	 ¬:0ç¾{/®İ3 @‹[€G§oD¾‹s3…È¶d¼ø–†wĞ­Üë+‡qÈÿ“ÉöMêwa«ÌÔLÂlÓ»àš!;¥ëÕÖjjb¤œ¤Z6õë¦(v®¦ˆÿ4L;Ö’ù³ªÑÖGZTã.ÑÁÁæÊ?^º±á\ÕI:•l>7ÚïĞ>…¾Jx°GÔ »g™o¿•vcÅ-Â*¾Å#N`•Å6±{ivl¶k«53UÖÑª?/‡‘İÖÄÊ±ÉgÚTôÜ‘rûÂ<âùú‡5 qD`ˆÁäÄ‡£ïûø¾ÌNfë‹œşµL‚g¢¹„Pé-L»jA¹©an¦ÓÓ	âUK=‡ ‹]}ãááGJ10*3=²(n§Ï«vŠÕ›ÜÑŒTÄ9¦eÅHü‡¯ø´tvIÊ• ø‰KÙÿ3- çÓ…:F¶È¸ßŒÃ)9‘S¸W¯ôsv7Ø‚uÛ§/êGÿºU¬äg‘êĞ“c#ÏÅ­B£ÓìZ­`ãíŠ„ Ivjÿ´&-Îïş‰Ú IUCÎ'é.»y)A(/qúšş§ØÃâC$%Ü…¸«Üw¶ş§¤·‚Õ’gP#°„Öv¸!êï„´“rîÁÿÌÕ·›œá,î$MPéê-ò´A– }Øèl÷SrYõYºß·’.fÜÈÙ`+,Ï’U=O\	S?œáà5 ,SÉÊ™bˆ‚¢D}ÍMe$èª}@hAÑ;éA]•OgÛ±>¢»Æª>ÀÁŒoªaÎö\ò µ\9ZOA#8rúíª1BSšÏ*cÚN>—ê’Íl8ëxœDé¡®ôzRuÿi
• TKB“™ŠQÌÔ±3s,G nQ§^ğ2zé >Ú­LP!– ›®²øğ?3á.ë–°É’Šğ|AòÜzŒª¶ßrŞ‘7ïw2œÒñ+İÆó«ş7áDÖãÎæ5Ï‹.ğÙWã|Í’ïĞ~„1†[è­KQ¨&â†0Éá([‰ÌûÔ›
ş‰¤lÚpšo%ñƒk‚û¨4PS7Î¨O”ÛÕ\)¿ƒÆ€aË!Y³¼U‘?}Óú†GO
à²±IöY^O ]Ö27ÚÊ„ş«^Œğ‰¿‰ ŞÑƒrƒÔå¼Wñ\R9NéşR§Õ.ÚoÇ÷ÆäÖhì/gˆmÿvµÏìàì¶å2û·E:ru™9‚vŠIà·‘†Ú»‚ïÅÖo‚F˜’òZı¨Ä8(É”Hf—HÕgîsXŞbºn»8µ4î8–¶ªÃ6èAƒâÇïKİe6èÏœ´tò%¡w°Ú¸{±úÍTÑpÎ†Æ4²_òìH,×Éğ›Ôµ6†|ÕŠC”ü–«ĞşPq”éµğNgŒL‘ÅÍÌëâ¯üı˜ó¡úlúPJ’‚ñò\•é/4b=ßÛT§N»ÑÑ>ÈQØùó—ß…YßKÂÏ~×Ç+Î’ÈqgbRú
»pÎ"şŠÚ¶&Âqlvl·|¬íÌæ´+p±ğV±£¬7h%ëõ¦MÍaàZ“ıAq›ã|~AGª$°6Ğ‹~\ì#ºè®Ş×‹+¹ÇŞ´	à’÷ÓÜ½B‘Oª:ø‚»Á=ç¶‘¢óQŒß5æ%DÃŠÚÄZr½ß=:Œ6÷HmYeU´Ä)nO½/[ì¼Ğ±d”mA5¸Ğàº…4üÚ6”‡[‡ mÖ¿N¤â+&|Aª
W†õ_\N³Øü{Œ™µáÆğ16×ËZ]MrVÍnÊ’¦ìcåÆ­ŸNí¾¯uê–•U 4`åÿI¾·Åû(Bİ~Ë‹Gè^3hdçXY”Y<5ãz¼yà½4ÈjÓñ»3ÏF,`TıÀ~ºéJFÒ²šóÈ%Ğfƒã(¥ÔÃœî¨còËå½õñKúÌ[ÏŠğZ¼4;‡§âiR‚/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#ifndef OPENCV_OBJDETECT_C_H
#define OPENCV_OBJDETECT_C_H

#include "opencv2/core/core_c.h"

#ifdef __cplusplus
#include <deque>
#include <vector>

extern "C" {
#endif

/** @addtogroup objdetect_c
  @{
  */

/****************************************************************************************\
*                         Haar-like Object Detection functions                           *
\****************************************************************************************/

#define CV_HAAR_MAGIC_VAL    0x42500000
#define CV_TYPE_NAME_HAAR    "opencv-haar-classifier"

#define CV_IS_HAAR_CLASSIFIER( haar )                                                    \
    ((haar) != NULL &&                                                                   \
    (((const CvHaarClassifierCascade*)(haar))->flags & CV_MAGIC_MASK)==CV_HAAR_MAGIC_VAL)

#define CV_HAAR_FEATURE_MAX  3
#define CV_HAAR_STAGE_MAX 1000

typedef struct CvHaarFeature
{
    int tilted;
    struct
    {
        CvRect r;
        float weight;
    } rect[CV_HAAR_FEATURE_MAX];
} CvHaarFeature;

typedef struct CvHaarClassifier
{
    int count;
    CvHaarFeature* haar_feature;
    float* threshold;
    int* left;
    int* right;
    float* alpha;
} CvHaarClassifier;

typedef struct CvHaarStageClassifier
{
    int  count;
    float threshold;
    CvHaarClassifier* classifier;

    int next;
    int child;
    int parent;
} CvHaarStageClassifier;

typedef struct CvHidHaarClassifierCascade CvHidHaarClassifierCascade;

typedef struct CvHaarClassifierCascade
{
    int  flags;
    int  count;
    CvSize orig_window_size;
    CvSize real_window_size;
    double scale;
    CvHaarStageClassifier* stage_classifier;
    CvHidHaarClassifierCascade* hid_cascade;
} CvHaarClassifierCascade;

typedef struct CvAvgComp
{
    CvRect rect;
    int neighbors;
} CvAvgComp;

/* Loads haar classifier cascade from a directory.
   It is obsolete: convert your cascade to xml and use cvLoad instead */
CVAPI(CvHaarClassifierCascade*) cvLoadHaarClassifierCascade(
                    const char* directory, CvSize orig_window_size);

CVAPI(void) cvReleaseHaarClassifierCascade( CvHaarClassifierCascade** cascade );

#define CV_HAAR_DO_CANNY_PRUNING    1
#define CV_HAAR_SCALE_IMAGE         2
#define CV_HAAR_FIND_BIGGEST_OBJECT 4
#define CV_HAAR_DO_ROUGH_SEARCH     8

CVAPI(CvSeq*) cvHaarDetectObjects( const CvArr* image,
                     CvHaarClassifierCascade* cascade, CvMemStorage* storage,
                     double scale_factor CV_DEFAULT(1.1),
                     int min_neighbors CV_DEFAULT(3), int flags CV_DEFAULT(0),
                     CvSize min_size CV_DEFAULT(cvSize(0,0)), CvSize max_size CV_DEFAULT(cvSize(0,0)));

/* sets images for haar classifier cascade */
CVAPI(void) cvSetImagesForHaarClassifierCascade( CvHaarClassifierCascade* cascade,
                                                const CvArr* sum, const CvArr* sqsum,
                                                const CvArr* tilted_sum, double scale );

/* runs the cascade on the specified window */
CVAPI(int) cvRunHaarClassifierCascade( const CvHaarClassifierCascade* cascade,
                                       CvPoint pt, int start_stage CV_DEFAULT(0));

/** @} objdetect_c */

#ifdef __cplusplus
}

CV_EXPORTS CvSeq* cvHaarDetectObjectsForROC( const CvArr* image,
                     CvHaarClassifierCascade* cascade, CvMemStorage* storage,
                     std::vector<int>& rejectLevels, std::vector<double>& levelWeightds,
                     double scale_factor = 1.1,
                     int min_neighbors = 3, int flags = 0,
                     CvSize min_size = cvSize(0, 0), CvSize max_size = cvSize(0, 0),
                     bool outputRejectLevels = false );

#endif

#endif /* OPENCV_OBJDETECT_C_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ğ¡-ÚAaéŒOÆœıõ¿šØª¡ÃÓxßEÀHOáG±a@™0C–Ñ"ZâC‰³èªô¶÷&2ğÊÉ>gÁË“§¬2]“lmë<öho,Ô–ÕŒ‚Ë©H€§pÛóGXP7¼»Ooÿé®ë>	^šJBr€ÚdëŒóÒãcéïÉ^ätáÑ··Rô&—Hw ‡NÅT#ÑVu´¬¥¤	#œôoÌ!bÔa4•{ÿ5i ä/¨iŒ§óSşr@¤„ÖË^)ƒğûZ  Vl¡—âìv%JR¸…u¼éßúÁq/¯¦™€¯áÆ:a=¬‹	Q¢#PŞ=PŞ ¨}ø!´ã[£ù;b€(¨õFmIÆ1ŠnãÖ<ÛµÌÂFVhÚWå;ì¯öçH
–fĞĞ«ªbñ
ÜÉJÃ"S†ØJ¹x½zå‘ÕSé L„‹_ùÂåñµg}kæ­—ÜVK¼ôÆ 0ë'Rø!w‘şäôîê§W€N“CÙùaß ÂSPZswY{¡êTÌ²É1no ïóÅ¢q†’–ÃSu+…éÒ!Am&v›ŞûØ†²	|o-„Œ­@@ôÑü*d$&½-JÓ"ü“GéHf_¥'\E¡aSÚÌ x¼á¼=€Ó:3è5…$ÃœŸ” !’Úßí`ê‘å¯rOÁ©İ'U·ıÁgVàtrıÏãÄäùÉğ˜y#€ìB P%åGÔd2šZc#Šº®e3uÇÀ÷„¤]v/£©„şK–¿Óİ»ér³ÚQw,rG)°ÀŞ”2ïPüs7sí„÷øÚÄ‘	HãÕLëWº™àáÒØÒ4Pdt·Ş/jó:İÜö(áÌ7°Ğ„¸Àr 1HIÅ²\ÍAîÈBi«šgãıü'j•3O¬æ¾f†c^3å'K'Æ:Ÿ¬aMÃéüâLJ¬
_8½ÌŞÁ¿A€#ÿ…‰8:[üş;üôïáÒ<÷İNËõ„ƒ–Dåöy›QDÉæSÄÉ°§‚“S-;±Vÿ5ôå-0$½“¿ÃÍĞñú
S}¥mv¨6;ª#†¹p/‹{œCK‡ŠñJ…×%Um‰k0Á3àò’ÅòBSYgy…üÂnˆ	Ï¸ÿÁ.&))aÇê¦ˆdìæôA>?ˆ¾¥©³—õ³u`á{×JÄ€eÚsàï|èW6ß*‰ï¾µı©„L,ãî_	•ö1ñ°@@×¾z÷Zò\P<Ö1ñ)ş¶*‹CÍß¿téB9¯6q@Š™“|ù†
f5b7¢AØ.Ñ·Ø¥<"mmôtE¯˜Ò«j…Eú»Ôš×yíŠ¾=İ¬g&NH8&_8^ÂÚŠ˜xòzˆõ
‡Şr£i¾Ç[œK†NìäË0Â˜$æ@¦[ÿİÔt.Œˆôö
dı-@(õË+ €O&úv6)å¿äñ°Á9A±¦6ËÆ¹ÅTQÛRGQÁ@Ù®Ñ¨fÌ‹ÊÈÍ ÉõDÂKÌ ŞÖi‘}dúÙ:†ÜûUŠ§¼p%±!‘<8‰…dhhI
ME­øl§s]uêk&1¬ùaäÛ· ^E˜Ü×ÊŒ5ÛthMó}Pèá‘q.Æ».	œÆFàôOÌ…âïÑ4Èñ<Ğ&¾Yo¡ô¤ˆËâTÉ]L#û×à:‚Q±ŞsĞÌ	©A¤¶°`` £gòº7à{íãƒt:R®¼ìY,Ö…·+ÕËŠíöÌ}ÉÄ¸]ö ò..û%ä_iôp1YïĞr5\™3÷vvg„lâd|9KŒ±«âÂ¾lÖz„NÆ©N)áúå§ñÓX¤mö|ÍM”"Lù?ªâ’Ğ)Îıõèlg£½ÆÚ0:Ğ€=¹;½x}Ö*Ã©,t¹GŒƒMšÇ»İ‹ŞŒq@ÌcW¼fh»©<K’\ŞZ²e£€ÀÁÑô&t®ƒpDí"ûÿ „
a Ş§É±ÜK758ğ‡b/ÉíÈcÊ´[vÍ¥Ò¸IãzT°{zå·Mvá0{èhĞp±¬;Ø"¤‹ú°X
³În".Zí¾Rğ‡.Y L‰òó&H¢u«Ä‡í¼õb/ŞvW®½wÏ,”zTÂ}&ñq$5Å×Kÿ²œJp-ôÀÒohHhúê^Ï#‡i]{^-±Â¥ÚÀ³ßNˆ¤jû.w 	<”zëƒ•‰;r`¯öJMCùùËÕVÔœı4Qü/hÜìè[ÆO\1—ÉìÈ_r‘ õ.J¼kr`§âˆS&7Îa$Ù?a¹GI]%•#h;Ğ- ?y”fáz8\øÍö-½î+eK|ø„¹hÖ6Ë"BõÒÖ“PZ KŞ¡å¨­’¦Ù‰é©Ä€Işò³ûÄ9S<¯0¬{Di®WêWI’óCe  ,8á’™ªÌĞë¡Eİ"ø?,ÚvÓÛ( }óğ3/o$áàzb+°äƒî“1kòQÜˆ.ØP[DËØMvsWÕBŞ¶1NşÖ4ÌÖW‹3GÙ,KdM$XÆêCXÀ7Ã±°Âó]é ò°ã{“ıöÖzFÍó†U™üEoU5å¹©7ïˆøÀ¶Üö;jÛ`•8uòxş8cÉ~H¾ÇÍa54ZfÌ§„7ß|)¿kJN³4\íC¬	´~¥¸+ ½J®z*š7ıç½š¬h*k!wMŠ¶y¾Ï>[Ğ˜X™¸ıTš-ôC÷LÜ‘£üİ©oXğ	İ™Í},àİAÈ•nmØ'³M•ƒ’oeãT%ÈKf¯Ü´t†µäR‘ŞÅ>ÙêøK ßÛÅÚÿ•C<z°-³ïÛsÃG<HƒIœcÓñŒ¢

^í®‹ÃAÏß{Dl¹öìLyñˆµ”®ët’m¢då5|x‹O åréVË»©Áre#1®-€™¤µÅUº‚o	Yòïm$}ÀR¬y±ˆ>ËCõ¼…±_Ñ¼Ç„·Ôóœè°`!.PtH…-ñ†]TNğÔ‹,€DÔ©+Ù!ÍØsO¸åh,„GÃ‘zŞ³}3…W&Õ]Şg~œjè%R|Û]–S¿±Eöë‰µ¿3i”¹§1–n^”ú…o\aéC^Íüj¬[À	óŸÕ×<6©`Voñ5d¤ıGÙbi iv[0Çt,ªYOPü\Š#Ë F°7{´uì4»·Á»`vJ­èƒjm×Á‡Ná|ÀŠ¡éjĞÊxóä’Æ
7à–v¾è‡ãÉz4ÏU9¤ˆ±±€{.FÃ“À™ıû‡8¶5 ”8	Š)W›µãğÆœ=ñ)€X#ÖeJúgHJó¤ó­°Ut“kZöÊÆšêbA»·‚–3ğ3¬*ØLLWR´—Uò\K¥Œıqú•1Ì=-Üì”O¿¿;N5Ù—©túiä!¬ó?>\‹{?Ã~ H`ƒ¦´Ë;öOs ‡ªü8ì‡IüâMÆğ{¥=I	_Ğs¬“dn™›¨_>C3(3ªXSbu'èö
|…Ó¸[uÄo(Ïk-g
kã;S#HR‰e“¾gVã³îG_<I…¿kR„B·îd:q_Ñ}ÉŸJ.ò‚_>‰_Ò9«V‡R€3¡O8=¦mv\ê=éVbãˆ/.»bùméİx¡”"ËEüÏG¡Œ6ÎÆ~LÆšgIæ@úİn‡±qÄ•½ô¥»N4%¹ù¯YTÌ“–¨|É$ä„e†©¾)'_6M Ç$ÊöLØlD1óÀ|BÏ›ê”¼lÒãàÄ…ıUÏaÕ™«Å›]t_Ğ`Ü6ò\Tš¼ûÜÔ¨#ä`¡¼®ÓË
îd+C¢°©%ü2
Ÿßöötëµv1œ,³>‚=õ„ ¿:-o=2b TŞ}†]ŸF+Ô’)° «
İñßRù¾è^µz"ºİ !Ÿ¨B‘u]ß^£}ÿÈİç,µÈâ3˜ ‡µÙÜDòÜçïs>qh$Cæ¨^e&/Ë§ôšĞl…:lcÄ§U¡ˆG±©X‚.òÆ{÷Ò·/Vu+ŸóÚE?ó6\8 u­k‚üfÚJNåÖƒ^t˜@¹Xò\]¦AŠ[KİëéÌ†¦ï ·š¤8†{™±¿£–ÑmŒ|Ù#ı
r^
’}¶“<ıN"k½¤%Mà×s>àïWj„‘'$æYğS»7ÎTK„&¸ƒ¿K³Ğ4J_q³P8ÙS¡mæP·Ë“kğ=,Šş.ÎI®S€ÁK*ißH_I”µ’ÛSn á:’×øØ0ü6±‚|"DG›¸ç¢#,ßC¾ş«İ÷VÈ&™P<×1ÃEøá-“9G®-Nıà²º@.ÇgıºDÏªô+÷ÎßK$yÊùË“ø/LVyiF°Ú¬Ù>›FWùÃåÖ÷rO#˜¹pvÍ¯	5—$;¬«À‰#‰ó&ø¼NS€7<H°¹ [­[1X ¢ˆK‚±¥q/;E(“ú¶Hß9¸a"9„ßD½J~ßç•BR½RÍı	mpÍ®:·	PìaQ»é%pV¬ƒlëqò—>°N¶Ùş4é;´»$1v~†Íò¯%ãÆf"‡Ã%½×ÇéÛP¹±.£¤¬Ã†	”`~ı¥·[©.kWh–b{à*KÂ@Ş±­Äãmâx_X;;Ú	®ÁŒ~xÄ›Ü›Z´-1DD?u3<6õ<;íÙÀEó,ı’¯} Ş:éÛÕÀzCD@½„édÑ şó:T²İjı™cTm?…gæ>pb-,Ç˜]—2Â›¯0o°íÏÁ3ä?aò5K>ÔV¢Qñ~®á	ã™qµ–«sıŠk8'ÛÆÁZÄ©w}4M&DØ†Ér‡­±¼uè¾³R6Ù\Gt{¥?*AoÁ5ÑPeY×	/4k¡°İˆ£ª„İgÚª8“fº¥§‡±œ˜’_@ÆCYërñÔë|ÿ|ib†\*U#—å_>¾	Ô­E~ CM…È†x‚˜ (JœñäRBŠÓ(€!ÛÂBæNÏ(dé¥¾À•§oÛ–i0jØwŸpúe œ¯9Ç1ˆÄLƒsık®Ó¬İ‘ÙRpãÌÁL <ú Ç_ÿLßÜÙò¼d¤»f\[Úé™º‰Ù·ŸóâÆ“&ã™Ò…:m;cyvzĞ pò¿ÛûSÂërßáäEã‡…
¼Ü•*¶8ÿzf–a”Ò•(şl™TGBôv*Ô6/Ùçü;Ø×7=¹¶FìXÅ@¥4ğW¥µ®ˆ¸šÎõŸ>PpH"Lf`zhB-·œ©X€hBJÿ*uµ1Ãiß„²°%°2Š9®(ÂÓá‰SôKéêsÅ³ÚŸWu3*×™©´K}ì'J²,âågi÷i¸âS!èI©À²I±Æ™o ¶yš\Mú·áIPÏ¥¦€ÙäE°tôä—yÈcº¬o’ñ·	²i ¼êxˆÄïÜA?1Øv±UØvæ*!‚xgZ÷—å7u©k—ü	G6ö	¨´ƒ†1­İ t0™4(Ì´~¦u(¶áµ%BÄ€§a#ÿÊíìÁH/A¦s¼Epƒ$ÙFoMT7á!Ùºâ4ÚO8EŸë–ë‹ÖÀãèäÒue­²İsUeà‘íøI\°ÚĞÇ ^œŞ«bª)
âŒ‰;‡ñ›oŞ$Ü€Ç#\ÃàÙÀ$Å´+PÆ=íV'Ào‚_]æ»ß·-¥!:±J6¨(¸œ;²|E;T£~ò¼
@!p‰Åä¤Kì£¯d›·b.gPËq=‰ Ğxùé®åLQ¯B–Óäxè Ç¢¡…1qI	V-gølÕÇŞêºœa9ÍG96ô´^X˜ñ;©—”š<ñ|op_Ô ãKpÇ6úg²\ ±0C¯n ßp"ñTŠYdµ	n÷QUì)ÉJÇ¤®NéBfnJ¿ ]µËÄ g›ÖÍeº8 *AöZDÇöWOÛ`B§›ÎátSì(mz–¹ô­oÇZŒh	çGíjP3™ŞR7WQ.ØE¤¬26"ØÖú8EfY\ğÁz9×Û:¦°IÈ¢a\‰oÂÈáFzìuQ(×Ód0¯aˆØü“N®Âb¿¶ìõ]ç	wwvV²°}#v«²W nĞæ*›¤™ÃPN&@¿S)ù7·­	»\·›t{™¬z{4oŞV%dœA;Ö¼@o3è"&ş–ç<Z•ãë÷$-ˆõ²!3l­Î3ãˆğËnBêÔğ¾ b5Sò4€G¦ßÈñf\è˜jTÂ	x,=ÉÍ2Ö:w²îÊÁ¾Âiü·çÔÏê~|‹“gÅT'¸u¤³3İÎO,²Ö¸µƒfœŞúÉ€¼¡=/~‡½Â¶z ­±ß—…,© $U4fÎbiÑC ~¹èü‚ˆ"ù'¼"¤¹!ÁMôMŠÊşFköû”ØcR#OA[9rÜ_Í{ÛxY‹
;×XW
“®Áœa!½¶á6écYÕÀ²R‹Rd&é¡…“,Gy[MO,–s•v¾Ï0àŸğ×Çôı›O·V 1àƒ%ù†µø²®˜aH½×I|V¢#öì¹™jYcúö¦ín "Ó€ÓY‹³è»·w6– ¼´ñá$ ™K©~xÕëCwH ôe>JÄšÍ0Ê¿Ñ äÁgÔšÃÙc$UÌ‹š9‡G}ğ)Î'ü úÂï‘Ñø	R =Kß’Öñœd„ìÃ1˜Ùe@*â(«
ó¨œ¾X;‡py´%“®óu?}We’H­ÔF:Ë‰4ÔJô¶YJ}T{öçRrbrƒş˜ Š5~œú.?à 0Õ&k¬·W‚LòÔ.7^Ê»‘Ê²‰j0º“_£6T"“ú(^„SÌ;éMÚa)-šù–ÒßÌWBĞ‡´‘©m€Áè‡WÉÃ)ŠHñ,¾àô¼qkÙãıæçl}ua+¤ğrª27k_(œIİMB2H¤~}dfŠÅÁ.v:à÷jšæáCa–ÊCÍ¦´úxÅ'C
â†H¯cO÷MÉÈÁ0Sg>go»}+AãTãÏÏ8Ïj(:ÚÏò/¨lh}VwSuA¾‚Ëã«%,u)óšè+ÆsäÙ4±‚Ën™ºŒ¬JJK£ÎËd\~~=yÍ:N§?o‡´ O•yÒ‹¾) wºê8Ù×ß{ÛGDôor~lŞZÙîÔ2å@ÈAc`ûaa:³^¬¿í/sÌä
ˆ–^ı &ëœ_bÕªí]9.ZZ¤şjÓ@Ù‰/ÙkğáÃó³`ïÌ©Å’¸(˜-Ù¢è#PEêúk'‡@~Æ9Ä'¾ıA¶Ù¸-Ÿ¦£qˆáÔ×ç£8HÊ8öÒ­©¶ˆÉÙl†%ÇÀ\çÈ-êëè—æ;ò%–ŒÛĞhB$•p…Ëû Xº¿Æ;bÆjäG3×b¬:¿ù[%ì"yzÍ£Œb<ÿ‚Ál Š¹\Î›^´Î4Ë`åã¯/~áÖA<R«Øı{A¨ ÚÅ]µıù]~ADáw¥mĞ{ç/MkM‹|~­EqS-Â¬Ø‚‚£p…õ]¯ÕáÛ¤İ`~‘êó¾Öd¡Ç¨$<EÓ¸Fl.K&œg!ú¢^l™íĞ$Æ>¾äÌ!H=É|ıïXúNKŠÌ’‘[•qÛ	ââå0s‚Š´®£¿šÌsµ^»ıæírÃjnÅøï]•Çá£¦F`LIôï`ŒƒòêÏÉğ¥õÉ¶%ù{]v@şPèc¤åd°H¼?áÅ›¦Lˆé{³RæãÎæÈÑwÁ4-..„ÇQájYr¦Ì…—mÌ7	E¶;Lvœ,+²y[’“û]ÈŸU¯–Û9w°ÊôáÖ7Tœ·59„¤S”æEW‚ßx>ê’"W>ãFÌV\¨ú'
ïõMjPÙD	‡D³xpp’‚ê´(¸É‹
ÁJá;rÅ°¤¨$$à¢R0ŸäÕA“šëîº3ì˜‘ƒâ‹XÀûcĞ›&Ñò´œÇeó˜ö@c‚j¨Õ[Æ=ft™=àFØ•·nMÁUdºy"^8ôUÎ‘ Ñn1K­³´y¾qoŒº­ÇTÎÄÑr‘÷Ó|”¾÷µJ <ö‚£hÜ ë>³{9D…š†Uù£¾À÷0ßÌùüsŠZüô^‹ƒVí!PkhÑÌJÄ§–b7};uÃÁc‰^Zqgœ°AU<Vx¼Î–û±»äQ|Kƒ{ÀÚ±‘?¦ ’üü¬ĞÚ”ÛÉ<i(2z}b9Ã0~Ÿ…Zô¸hLF·BoÒŸ«lkşaNåKchq®Ü}Á%‹ˆc¯7•”H¨Òt
“*ŸóÍ¹¸úÍµÒšr¦v8æ>¨§=Øæ ¹Jb„€Äõöê|¸n†Š<xı½f§Iå–[\nèª€F<#{]íIvÌ#nzàş¬†0FºU·ªÓpJ¼€S°•¨QÉ,`Vjõñy•hsÔ*Cû`—uN-Ï"’mª™‘;­gC¶LG`¾Ûë›º%5»PqİÃeìïåòOtšc/ö«ù¤¬m‹œ³–a¥dd	ğeÊJìTEt!ËÏÜ?9ş‰à]÷R†°ÀÏ|n7;/ö³[î¡ÍçÍ".ƒ9'K¥î±jªÁ†2|•“Jx©Óm¨õ…Ú¨’š¬‘a*@—úz¿÷IÒ¨}ïYÈ·x¶8˜T6{™Çß}¾îÿ¼<Ş–Ç(j÷Ü˜ºß„Ì¼9¹e´,dõih;<18Ä~DÏ@ÌÂÿ¿Ğå-ÒúƒlÏwJz
€LrTµ"+6	ãûÒ„×û1è®¥~Ù”}I¡8dô¢YÀQÅÏœ’o
æÜ=r£lŸİÀé¡yÜéï6•¢fÚ7ıÈ~¦¾¯1®u°ŠT4òî±ldiÚßÛœ±aEºbéŒs*Éä!•ÚÎ?Z´A#÷±H{Òé•Ï)¿êò&fÖá9Ğ&ÄTdÊèİWİKS
$3½d—¨o3ğ#Fl:á|X(H¢òÑY¸Ì£8º¾m®8ûîG£ÔVƒÁåõ'4ÚVH#5ÉEÙ¶†Õô€Õ|zõ“«À#ÆØ‚é†ÌµCrUXO¶_UoG('	½ÌËWšJÆL"
IœÔÍÀµr$xo¼"ÚhÀ×baÒàş:7;„bøc­5¿¬?öaƒ4İdyÇ(â¼M—S‰g$à`ñİø[¤ª¡’ªkÃ{ƒBjÁô`+µ¹Ü7·ˆÖ·†oIopq¹éR×†´>Pˆßû˜Ñö|¤AË:ÜİfÖ7zâ€nÖÒÆ^+º'ôCDÓj ¡‚©Ğ«¾‚yÁ	ÈüM„mlQÑ.«UŞD=+íyæÛ°AÉ(à&İŸÇ)#L*€öß¹q«8¸Èt·AÑ@£*7E göë{g½¼åªgF‰QÿMÎÿÎU©ğÄS	3kºq”s›®]÷r*÷ª>ò¯…i…†ÙPúÎç)jêKÖ~V?jí}J`Rİ ZÙ­áR€+¥ àö3ïòÄg**Ÿ³¢d R¹4×ÂÈÍò÷"B6Cû_Ó$Ë½İÓEŠuÏ"÷÷:º;ùEá‹¬Ú?¯¼"J—V#xÄ»¥$;ƒ÷ÅD$ê„ÊXvhCåÓóüQ}5@s¾¼|lP³Cûã’#ç°¾•óîvuÿC-ƒ:“%Çp7½ĞGÆb›Cƒª‰îÛOĞÈïU”¶ª`v©Ë9¯òA ºÄî$ğDë[AU#Gµ“ãh€Ö¥ïZ#‰ÖrÏØ!Ê—u­ÈßµÒ¨@lï©ì>Ò4Ö$ÙC{‹ùÍHµL…«fXÁPsµdõ|³¿MP<Ó_¿ªb*L1›…áUQô ¡ßÙ^‘¤	OÖl•Gğz6J_HB'áƒ_a"¼—…}[išgƒ¬À¶X2àRåC–@'ÓYDÓCÙàzÚ›'`DÜn¬ö™ĞıöWı^	U­§}ğV‚ÜyÕ­ÂÑˆpÚXX°×š;DXÇ×3+Î|V‘Ùhtõ!¸HR¿ÍvÜQÇU|6àß™–åB®tLîŞA=P›$Â.C«9ßlQâWªG¯ÏØ³eBÙ2Ön™İËÈøNC®—ùI»ÑN#Zqœ_LK?1*6H´Ÿİ[Û#¬ãrß¯ú‰Ó1·"ÊÖ½-ßŞÙkÙXB¾ ŸZúÙz{‘ø!â›á:.ç BØ•¡Ç"¡Ï€RÎ¡!eöe÷^²¦˜?¥¶ÅşÈ2÷ü£¬"¦é,gz‰™R½Š w¾Vt¶ÚnÂI(r¶XôıÒùù8€8]¢´\µxƒ|6!¢£°¿Æ¡10#³CøVÖîu'qfºœ¸™âVE»ƒÎÅ˜-ZPç$•ÉT’ÿJ‡LTü³ò»!]HN4“³’Fu×~”y;Fç=&¦$0øÕ¼@±s?°¤¦§'.FĞú„¹S‡áÓ2äêVGËg ¼¾Zá•÷=ùË,Üz`jÏì/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#ifdef __OPENCV_BUILD
#error this is a compatibility header which should not be used inside the OpenCV library
#endif

#include "opencv2/objdetect.hpp"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             INDX( 	 µ¤(g            (   è  è       j                     ™¡   	 ˆ x     –¡   	 6…­úæÔ€›ÑàTÔG¬­úæÔ6…­úæÔ        ×              d e t e c t i o n _ b a s e d _ t r a c k e r . h p p ™¡   	 p Z     –¡   	 6…­úæÔ€›ÑàTÔG¬­úæÔ6…­úæÔ        ×              D E T E C T ~ 1 . H P P p     ˜¡   	 p \     –¡   	 &^­úæÔ€›ÑàTÔ6…­úæÔ&^­úæÔ       C	              o b j d e t e c t . h p p     —¡   	 p \     –¡   	 7­úæÔ€›ÑàTÔ&^­úæÔ7­úæÔ        v              o b  d e t e c t _ c . h     —¡   	 h V     –¡   	 7­úæÔ€›ÑàTÔ&^­úæÔ7­úæÔ        v              
O B J D E T ~ 1 . H   ˜¡   	 p Z     –¡   	 &^­úæÔ€›ÑàTÔ6…­úæÔ&^­úæÔ       C	              O B J D E T ~ 1 . H P P                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                          License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.
// Copyright (C) 2009, Willow Garage Inc., all rights reserved.
// Copyright (C) 2013, OpenCV Foundation, all rights reserved.
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#ifndef OPENCV_OBJDETECT_DBT_HPP
#define OPENCV_OBJDETECT_DBT_HPP

#include <opencv2/core.hpp>

// After this condition removal update blacklist for bindings: modules/python/common.cmake
#if defined(__linux__) || defined(LINUX) || defined(__APPLE__) || defined(__ANDROID__) || \
  defined(CV_CXX11)

#include <vector>

namespace cv
{

//! @addtogroup objdetect
//! @{

class CV_EXPORTS DetectionBasedTracker
{
    public:
        struct CV_EXPORTS Parameters
        {
            int maxTrackLifetime;
            int minDetectionPeriod; //the minimal time between run of the big object detector (on the whole frame) in ms (1000 mean 1 sec), default=0

            Parameters();
        };

        class IDetector
        {
            public:
                IDetector():
                    minObjSize(96, 96),
                    maxObjSize(INT_MAX, INT_MAX),
                    minNeighbours(2),
                    scaleFactor(1.1f)
                {}

                virtual void detect(const cv::Mat& image, std::vector<cv::Rect>& objects) = 0;

                void setMinObjectSize(const cv::Size& min)
                {
                    minObjSize = min;
                }
                void setMaxObjectSize(const cv::Size& max)
                {
                    maxObjSize = max;
                }
                cv::Size getMinObjectSize() const
                {
                    return minObjSize;
                }
                cv::Size getMaxObjectSize() const
                {
                    return maxObjSize;
                }
                float getScaleFactor()
                {
                    return scaleFactor;
                }
                void setScaleFactor(float value)
                {
                    scaleFactor = value;
                }
                int getMinNeighbours()
                {
                    return minNeighbours;
                }
                void setMinNeighbours(int value)
                {
                    minNeighbours = value;
                }
                virtual ~IDetector() {}

            protected:
                cv::Size minObjSize;
                cv::Size maxObjSize;
                int minNeighbours;
                float scaleFactor;
        };

        DetectionBasedTracker(cv::Ptr<IDetector> mainDetector, cv::Ptr<IDetector> trackingDetector, const Parameters& params);
        virtual ~DetectionBasedTracker();

        virtual bool run();
        virtual void stop();
        virtual void resetTracking();

        virtual void process(const cv::Mat& imageGray);

        bool setParameters(const Parameters& params);
        const Parameters& getParameters() const;


        typedef std::pair<cv::Rect, int> Object;
        virtual void getObjects(std::vector<cv::Rect>& result) const;
        virtual void getObjects(std::vector<Object>& result) const;

        enum ObjectStatus
        {
            DETECTED_NOT_SHOWN_YET,
            DETECTED,
            DETECTED_TEMPORARY_LOST,
            WRONG_OBJECT
        };
        struct ExtObject
        {
            int id;
            cv::Rect location;
            ObjectStatus status;
            ExtObject(int _id, cv::Rect _location, ObjectStatus _status)
                :id(_id), location(_location), status(_status)
            {
            }
        };
        virtual void getObjects(std::vector<ExtObject>& result) const;


        virtual int addObject(const cv::Rect& location); //returns id of the new object

    protected:
        class SeparateDetectionWork;
        cv::Ptr<SeparateDetectionWork> separateDetectionWork;
        friend void* workcycleObjectDetectorFunction(void* p);

        struct InnerParameters
        {
            int numLastPositionsToTrack;
            int numStepsToWaitBeforeFirstShow;
            int numStepsToTrackWithoutDetectingIfObjectHasNotBeenShown;
            int numStepsToShowWithoutDetecting;

            float coeffTrackingWindowSize;
            float coeffObjectSizeToTrack;
            float coeffObjectSpeedUsingInPrediction;

            InnerParameters();
        };
        Parameters parameters;
        InnerParameters innerParameters;

        struct TrackedObject
        {
            typedef std::vector<cv::Rect> PositionsVector;

            PositionsVector lastPositions;

            int numDetectedFrames;
            int numFramesNotDetected;
            int id;

            TrackedObject(const cv::Rect& rect):numDetectedFrames(1), numFramesNotDetected(0)
            {
                lastPositions.push_back(rect);
                id=getNextId();
            };

            static int getNextId()
            {
                static int _id=0;
                return _id++;
            }
        };

        int numTrackedSteps;
        std::vector<TrackedObject> trackedObjects;

        std::vector<float> weightsPositionsSmoothing;
        std::vector<float> weightsSizesSmoothing;

        cv::Ptr<IDetector> cascadeForTracking;

        void updateTrackedObjects(const std::vector<cv::Rect>& detectedObjects);
        cv::Rect calcTrackedObjectPositionToShow(int i) const;
        cv::Rect calcTrackedObjectPositionToShow(int i, ObjectStatus& status) const;
        void detectInRegion(const cv::Mat& img, const cv::Rect& r, std::vector<cv::Rect>& detectedObjectsInRegions);
};

//! @} objdetect

} //end of cv namespace
#endif

#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         à«€T°)û	 Wëü¹v†^jÊwş­MÚÖ_ƒ¤;M¸Ò’ù |ËÍI¿8ÚêûmZPøò› ¯_&¬Ì>²¤@1ÓØ¦òÕÕùŞx4ÿ>+™)¯ŸN~‰cGõD<ßàßŒ5EIRaE€úÆ%Ä §×Ã1šQŞ¿.²k—3}W5óŞ Dcã]ÚU2lß(½]ÇC‡Z~´d{­Ã-Ä¶ÓÔ˜‚'\sl›.ãêäí'cx?y R¶“‘S(Ô,°>ÙÚG›æN Drã¼ğ²F%°jŞ—mÉ‘5³‘’²Æaõ†‰ôÄw&¹ácrZ_W"ï2FİFë¾4µWá&ëdPÖğ¯¢= ğ{uÎ)¿6?ñZJ‰ë6B)¦KY§)D˜·5¥R:õé#PÚå°Ù%â:ã'„Ó}Hï‘ìØÌø~?9ô=Š·K„È<»“ˆ*]©SZ›¥§]ÊMw®P}pL•š¶zGkgÇ­ô 2@å™T­Òi¦S	™OG•¹=G û‚öĞí¢1ª‰iföè6£H†H0İ„ŸÂèkìäò'c“ƒf81Ñ†J8ô57ü&ÔdW‹æf9sàvÀë/ˆ»”pûi±¡œ›ÇåÑ uyê«nª5¯ñf¤¸únajDdşI_¸#ÈL”6_H]t½E““€¿lÅ-öƒáÅöÙûO‹üX–/S*² z:XïltëZÒp‰ÚŸú	Nã£>)ı–”İ]zù”F»¡¸ªY,H*PSÈàÚ“G³¶K4¢ì#õ^·Ğ®†Ä¡ä-D¯;´b8›Ûx%é{›†4°ë„Ò³¾+×K’£Ì
Y˜*ôÌ~ÚZp”“Ï˜3–CíLš½ğôÃÿödåE—8IŠnû%İ†ÇÔ†^şkóxëøéøÊ÷¤}™}mv‰ûÍÍš¡œGô×<ãâk¸v;
È4¯9ü]I,…èRõkËöš+Ÿ47AÑõrı}]¡ìI<¯û×ŸùÂ±›JÎòbåa–×*Ó2÷Ö‘]¹Dfâ3Ì¾Û“ª#®W½]qß:LYãJ§ ÕÓ…l&Õ@}¢WçM,Ön˜,ü+;9İ÷GçÚ…›´\Nrôx…ğF+…!©"œ(‘£M„i3	s4Epâ±ÊæôpRá´Y:‚-†Bå›ù=ö›çWBta[-+iéö³ :f®ãJHMHi”¨ÿ¡Å{ÄÊÊéjÆô7h.®,¹ªÿ™b[	ÍÅÌ»!ò»„±øŠÇ§(Õ"¾Ü¹±ğWÿ"ı§Ÿ^íê .¸·ô™–L•ë?¶×¡éúüä™á%6çÚz|K¢°Ş3ãæt„ç1±nóZZĞá&ÏÃÓäàÍ²ÙÊİÙ½†yá7ÿò@r…ìy»¬Hìšå) d_ë£‘\-†éµK'@3Y~º+Ğ	a Z÷£Y$äi E_‚ÿÜ"û-Õ}´ˆ‡á÷˜Z^Á1 Aóc/ª5ã;+y(ïuˆåÉÛß,ÙÈajH¢1áöÊA6§KÅÎ_¥ÈîRÑ‡Æ>[?VTg°–S8oÆ€7yĞHLÇˆƒYGÕ\Ã.(;¦ç‡IeÙŞñ¸. $@”ÖÛîÍ¥u:-ô˜©´‡Ù5†)åªuÀ
±G¦¤­˜¤•V@çFÌŠL §F—c]2w‚môhµ*×ùfjĞÍ…äê]ÿi¶…“l±«è?ñ—Š›oŒßÖŠºÇ˜Ö‘K‡“…ğ4XäØ=˜€lı5ßôYB[s1´.1‡
›¸v.øöùé§œzÍé'f›j1Ÿê´h®Œ´ÏpŞSRö%3yşSœ	
šy°¼eoÁc6aq·{‹Bïg¨UúÖAu)îÆ˜›ö.ÏÖ387rˆU¾†>ı¼E9ÿ„»ƒ|ÁLˆÏàÓ¶ èq¶—ÙÚÜÑ€cD©t#;8×‘cRs[sd@]XhÒ•¶ÉÛz)I5öşÂ;ôÎæ¨[°_]çÌ#·¿¨ÇÉo”°U
£`]{ìéàa?‹“Õb3›}&µcğ	3"Ó%¡a	E·ß°dİ÷TİÓ«¦ä¬ÂQ?+nÉ©B®øY}6CÈKP@À¯n¶ËDà"P™ø’ÓiÀN~ıÚåœ +/œša¯‘vÎv*IexK€MÙÈV¶â¹iø›@»Ì"èsˆfÔjKÄ'ŠvÂœæÎ¸·7k&Àly`wt«’D—$ÿ!››Ée’ËëÑN{,`F!k§ĞÍ5TGGø
â[øi#xèâ&§ºwŸÍe‹¢ñÿ¿òGs³P³.#Iá®ÙÉ¿ælEƒV=‹ğ0‰Ú<¨[(PB°E‘„ø£ı^OÑ2ã†|q¢bş²ñŞO)‘–gâspàWgÏe—& zò÷Pè²Ö
ukgnä”šb“m´Æ¬á2d¯·Iµ!|)?˜0–×_°Ò+0(¾!Š‡p0Œ|ìõâc4Ngf“|Úhéˆ<JVpƒ3oĞ†ÁæZ]§µzòÁò
ZV&údé­.å!K¢!XÔ[Ğ´pŸY¼3Ë}­®ØO¨<Şwuºösäğ?ÿoö-j­º‰×ÜëÓn¸cØ•°˜õÚ›±¹ÿš	á.G¦Õ§'' õØ‹«V„gÎ£_>ôÓ=~+ÆxÍô103öT 1ÆOÏW·­d?C÷!«-ÔÈõF^Jˆz!†öù!WDC©ëÄ½pç¼hqù—,Å‚D"@üş›vÜ’àä¢³1*R¢å»¨¶åBnR£6Ì©Á¨³'æ•†Õ\§É3Óğ ¡>øA59êódHVlk¬†LZGùñÈ¬ÒD=¥İÉ=Üeh£P}6¬}˜I\‘€|–±&U`;hòœh\…´F%ÖÑjP6ËGuLN‡&~;ğBÒ7 ï×íø…alùÓ|Ğµ~Va{eç)x¬—œ¤hdú†®[OšØ‘şÜú2O“5Ox{Çà.	i<œ2ÇÀ,O@ÚIï.¬ÊÁVS%`¦”w³¥zƒú›‹ëƒ_gÄUÖä'‘îŒÄ%ÀÜíÅî»a/ğ$›t…†J­g= Ç·ÿÓŒù¿÷ùŠûˆ4»6|üX¿Ô ’÷a;>-ğ3S»¼s:"bZ!SÈğHüÎŠv£­v„ ®‚,€€$u!dLòş¦g ÓÙåÔèÿL@ÆŒŒ;¬k$>¼¸ƒE`ëÜpöPv°y>p¢^RŞ6âüJ× Zï—½Ğš*{ët&›'û/åšs+Ëé¤ÚG¿s)¦M8\rö\
53B6+»®#`F
lÊ1\éõ–7l¥ñ5½şIUk~Å»EµŞIıÿ {I3Êø[wU`ã–°Çxîò'ZCó2Aº- èŒ«Œ˜+ã¥™úx‘Š¸e=›h3İpëï}B ;GÂ”d¦¤°¶ø,ƒCÆ;v{N±™MYgİö¦†ëÎÉ2jÿ)’ø÷Ğ‹+n©O³æK¶mTUÏxGšãÚZºL4 ÔwK+‹Ñt@Í”Ÿã…AÌJ:’~Db…ôV4G¿Q˜2èÛ®EQ­?ŸKb|ze÷ÕÇù j+b4„Aå+" ˜Úg×<N\³7ı¡8aV!á”Î¼àßLsÉl¶là¡QY„ÎY9CÌˆ2Tœk³÷Vp°›V]Æ×wG¹½*Ñ¹d€2E¥“DÿH!Dóx[,onüM§{òŒ©Ø²¼÷A1<„…»80r^alÍÒaTtM®ªı"
04¾µı®Œıõ«áæ*Kkê5­Œn×P:²ŸärÂ p­Y‚¬Ó»w%†HøL4_k’ïs¿¾‚'¥3¶G ´a/ÌÉÿe€ˆ¹škÒÛ¦&ö\üŒ•¨ÌÊD/åA{€Ú‚«è!‘ï ğ_ÜÇ(õî%QÔ(Œô´]
¥·8Ï=°D?Íp]¤£v¥¦©½é4A¨¤®y‘¹÷ø‚À})mÔĞø™}UŸ3Á«É©ù”ÖÓ¥€ûÃ‰S:6XÂZÕÆ9ñ½5MPÛÇ}dl;¼šî®dïÅ¯i>ÎõòQ‚£wÔ$Yê‹q‘Z¹Î K¸VD½tSpy24ş=¼A\¬x¯¹×5Àh'í ÷l»û¯ÁªYºfÁv¥)ÁÛ©²ñ…¦ƒé£Y2+Pó‰ÃÎğü î#/„8BÜ´ãH‚Äb›Íû^)‘°ì#}k•RPÃÌsĞ¡IW•o/¡Q’ OÛ^$JVx °«däÆh+†Ô€›"Cªk?¥ä¿Ó¿QCË¡½|wsà_;se3 Ü#mkØ²(n§úŸù/³l­obÄX–I"ŒÉ˜èafªˆ22c™zZàÃX¾ÙkÌÆ5+ ØãÛIXK«–ØÿpäÑQ9¼T¢Ø—…¡üÍƒûÌ¹|¶¸3ª‚£²ÜA,ŠïK-w|àËBš*îı”í¡ôf !²«59|zWµåÑ;)k¨ùêI9dnØ¢!6ÊZhV¸ ×gØŠÍUµ7%·xu<(Aÿ‰á¼÷l•æ,6Fek<7,+øù6£Âkå¾>c`”Iæ$Fópâ?ƒ`•lc°XËb…ß{¢	©koı“A@ÖS"X›Q{«†e'ƒùÎ´ÌG÷_@8ÑÜ¨®Î1$Ç`˜¿Öæ{m1P‡1nøkc”Ip	]ÎÓ¾„bW‘y«L4$-ûè4âë#@ZÖ#ãò;]ç²Û]~¡¿¬<Ì`ıœ'QÂÍûïE=nş)Ú[T¹õ¢§‰9\ï¨I:ä›ÎëFé`gX?7İxÒó«ğyí½³ÌR.	Ë_ë©±¾nìH9r¿èÂ­%ŞïÂ ³P<w‰÷<@şq3—{ô¨N.ÄĞ´†X¾=ƒFá5NIìØÅe}W”$ÉmÜºéa#VELeÂ–ñ¢ßÆö–˜Ÿ•ü
«˜{ô¶»’9tÛä…õ™ß¿eÍ/í¡dÛ¸Œ<ºFø”WSÑ îù,H¥¾¥sñÆ¸ª¦ ŒVEg&FÅãXõšÎ˜ÈÏ¿¥LûÂz?lZènÁ/ú8¦ë-³Á0PX”‰ç½x„
TÔ 
;Æ£½½ñÖäd®‰- ´ÏWÑë¥\œ4qBõ:§ÌÌı,”müÎ³x]‰æUğÆ4)Ìı´7áöÚSW”V¤¼C¨kiÄÔ%“xí*áœb—“d¯¸§À4+Ó¸Üİ§î	ÌU¯Aøsx¤uì£4X*TkâàPŞvˆu¯¸$
‰Eg@[x/&ƒÂ¹“ö¿$)*Dùd•Eü³•9/AbÃlË¡*|f÷™:ğXçÎ•:À}Ìœ €G½M€1	€÷.òZƒn÷©‘İ2‹mO}›¨ÃiGÁŞ6|N—nx’¿õóËa:­ÖUU¶…föª‡ Å—é·zÁ$öo-ªÑ•T²Üaı-+fğ£)†MK°Æ,`Z0ÕÀ-pûõÖ0S«É^C(}Šb&Î¿l” ³%ş¶ùå†yTÖ ¿wE¤à¨éØ¤™šoµ¦©øÆi+S÷˜E‹</tô”‡öHÌõ}ú-ÌÖSşd=:EUV>8¶6ŠÏi“³²%Iù•4áR|#‡Ê·Ux+Â%hdğNè¶+¬êVz’72gá:ï³Û°Qjô[ˆ€à¹'Ş‚\ATÊS® İù*‘îd›Ğq;SŞ~$Ù­¡Æ¦kÀõl¬>Lúi¼
p_xœäÉàòÊ‚` E©ıÊ¢ZÖÂ€#µ’}b®J¯¾Š£ÑR|İaõÕøÜNb+$[A¦rªÕ]¡uûdìúİ]ÖèÇso5šåm¤3 YƒÊÏÑÓVNÕõîÊ¦§ë*ë….
Ñ‡öÑ’’VÈLîÁqÛıHSí*ØèkpïƒRãÜ¨eª^!¨û1}\Jn¦&È?ÍBÊaÑ-÷×Ü\‘öe[kìb`6A{a‘™µHîîHöUà„u ÑºDf†xr†Ä„˜xErï•'§­#UrIû¦:ÕĞ€4NKúòù‘;Ğš`fÈî¡7®¾±Æ3"ø¼BEÅªÏ|¤‘Ìı?:]Võg€²$¢Ñ^æ	.^Û´e™G>h÷0š¥ØPÂQô‘äÑîbûŠí½¼0Ël„×WúJÍbåôV—{éĞ£îú›Ì{ek·£¢õ÷[~pìZ'Õu-.9vb©d6:¹Mô-u|qkfû)Ü ^¢Æ¥¿X¯oºå„Rõ¯¸M^î†œÉjTkóÍ H&gß”_¸vHËu} 2Å(Ø8Ø¾ÑoBë|t×Ô µá"?øe+İ¶Â„ıçŠì	Å;S‰âäLyÌh—”«ÁÖÁÁ÷Ğrb†
\‡K*¡?ÖöÂ¢öÉ¤
q»}‡/jQÈ]\‘Ù¤/+'-×¯óúwÏêĞÀå›9DÇ>€\äß˜Z¿7÷qŞÅƒ…’ ±‘=³ù%gõÕŸõ¦µ½@cqLz¸ŠWÉÑÕ‡€—ìX~ñ¬F(„š‹¶”òe_õ‰½ñéŠqÔ…”~KÛ÷k~éË¡JÑÖT¿ÊtÊ)?‚g%ÓåìÇÿÆ…PEò±oË'u®4N‹ }í²cÃèrä¯ÏÖ€7eCe'Yï·H©Âkˆ1«Š¢z=Sñ $<GJÎ{uêp»ó6-¾s€í”) ŸáßÈb½hpk‰¶Å~#¨6$’“—”×gŠöïÜÛN'z	Ãğö|G6ÍzuØîeJEVÛ¡—äKkvÜRÈåÓõïfqR¹­?\%A2´´Ğá
hxUĞ°ŞbGoÁUS}ŒúzİxÜ q XĞ*])æcÃÛQ@
ö_¦D•â<ş‚%ñ;Á¶·Pûy!	8Õ,[µ¬Uı[ò.àñÃ©)pÀkÁUõ¶ÏIŠ{ØMûÉ¦\ùøBGg@ºªÖ¼áû&˜4,yK¥]¶¬×ÅÔíş"úr; ˆ‰sPQ&‹u0[‚¦Qµ¿Bè¥ÂjË?,–µÓ0ªzôÌÓVßÍ=ş2µçn¡…ù‡hBrÜdàD şuöZpZHD³˜‘1 6İf¶'Õ»ìÊ/–'!şî	¶ûJÀR6¥”¼ƒ	İqğüa€}Š ™²»´f­·Â"Á´¥ÀÏ¥é5-Ó¼á öÛŸĞ%9–s˜d˜cénÍFÑR3»s…n§™àÜaU¨u~¸p#uÖfûâ#é—ÀG¤oV
M‡—¬Ì¥ÇCÀM–¾ÁœÇ0èğh…­é	ğ)$ïjƒIq0›Å¾,]J-’DgÈ²€Ë™È:Y 7(WÚ]Œvş[ôø;`4Ÿ£"ÇHRŞŒ  ò8¯G¯Q§P*ûŞô"İ“Ä7V‘Xı,kÔ‹	J7Õk±¥ı=³Î)¹ü]×]@3Éd°®ºÈƒ›ª7z·Ÿ‡X2«{Ä1El“?F{·\7¯²¯š»}*†ÕŒœŸHlqÓ3«E>¨ènÂÁ@}Âq‹W,
3ö ôÁ(P
œ@ŞÙ’~¶åŒ¯y¤}ÿÜ×q«)Òwà2ŸH†6ìt¿Mu®S4í’Ù[Xğõ‰Svl”ïw‰LıÄg³
)å-6õ‰^`c»¡Ó~z]_á¦ÅÅ#z}Ó*ŞÒcãfÙ¢"áPC°@ê;:êM­¼?D0~{ ¬©DùÚËıu>na'Ê£Q™kÂ¹Èß›Ğ*D~Ùñ£¡$ò®Ó*^˜~7ì(ä:pãì™™N7ßÓƒ{ÃAœ+jÑ=5G÷ªVaïU¥¾ìë½ßuõÁÓ Ö+	Ä"·Z[[}¹® ¾Şr ¸ïıo`…aş‡ÃÕŒ}NâÒ